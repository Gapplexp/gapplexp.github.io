(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vp(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Mt={},ha=[],Vr=()=>{},pO=()=>!1,Bc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),gp=e=>e.startsWith("onUpdate:"),gn=Object.assign,yp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},vO=Object.prototype.hasOwnProperty,Et=(e,t)=>vO.call(e,t),Qe=Array.isArray,ws=e=>Fc(e)==="[object Map]",gO=e=>Fc(e)==="[object Set]",Ze=e=>typeof e=="function",Jt=e=>typeof e=="string",$o=e=>typeof e=="symbol",Ft=e=>e!==null&&typeof e=="object",M0=e=>(Ft(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch),yO=Object.prototype.toString,Fc=e=>yO.call(e),mO=e=>Fc(e).slice(8,-1),_O=e=>Fc(e)==="[object Object]",mp=e=>Jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Es=vp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$c=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},bO=/-(\w)/g,fr=$c(e=>e.replace(bO,(t,n)=>n?n.toUpperCase():"")),xO=/\B([A-Z])/g,Ho=$c(e=>e.replace(xO,"-$1").toLowerCase()),Hc=$c(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gf=$c(e=>e?`on${Hc(e)}`:""),zi=(e,t)=>!Object.is(e,t),yu=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},P0=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Bd=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let og;const Wc=()=>og||(og=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _p(e){if(Qe(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Jt(r)?OO(r):_p(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(Jt(e)||Ft(e))return e}const wO=/;(?![^(]*\))/g,EO=/:([^]+)/,SO=/\/\*[^]*?\*\//g;function OO(e){const t={};return e.replace(SO,"").split(wO).forEach(n=>{if(n){const r=n.split(EO);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function bp(e){let t="";if(Jt(e))t=e;else if(Qe(e))for(let n=0;n<e.length;n++){const r=bp(e[n]);r&&(t+=r+" ")}else if(Ft(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const AO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",CO=vp(AO);function N0(e){return!!e||e===""}/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class TO{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!t&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=fn;try{return fn=this,t()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function R0(){return fn}function MO(e,t=!1){fn&&fn.cleanups.push(e)}let Nt;const Yf=new WeakSet;class D0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yf.has(this)&&(Yf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||I0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ag(this),k0(this);const t=Nt,n=Cr;Nt=this,Cr=!0;try{return this.fn()}finally{j0(this),Nt=t,Cr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ep(t);this.deps=this.depsTail=void 0,ag(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fd(this)&&this.run()}get dirty(){return Fd(this)}}let L0=0,Ss,Os;function I0(e,t=!1){if(e.flags|=8,t){e.next=Os,Os=e;return}e.next=Ss,Ss=e}function xp(){L0++}function wp(){if(--L0>0)return;if(Os){let t=Os;for(Os=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ss;){let t=Ss;for(Ss=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function k0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function j0(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Ep(r),PO(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Fd(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(B0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function B0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ks)||(e.globalVersion=Ks,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fd(e))))return;e.flags|=2;const t=e.dep,n=Nt,r=Cr;Nt=e,Cr=!0;try{k0(e);const i=e.fn(e._value);(t.version===0||zi(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Nt=n,Cr=r,j0(e),e.flags&=-3}}function Ep(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Ep(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function PO(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Cr=!0;const F0=[];function bi(){F0.push(Cr),Cr=!1}function xi(){const e=F0.pop();Cr=e===void 0?!0:e}function ag(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Nt;Nt=void 0;try{t()}finally{Nt=n}}}let Ks=0;class NO{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Nt||!Cr||Nt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Nt)n=this.activeLink=new NO(Nt,this),Nt.deps?(n.prevDep=Nt.depsTail,Nt.depsTail.nextDep=n,Nt.depsTail=n):Nt.deps=Nt.depsTail=n,$0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Nt.depsTail,n.nextDep=void 0,Nt.depsTail.nextDep=n,Nt.depsTail=n,Nt.deps===n&&(Nt.deps=r)}return n}trigger(t){this.version++,Ks++,this.notify(t)}notify(t){xp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{wp()}}}function $0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)$0(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Iu=new WeakMap,So=Symbol(""),$d=Symbol(""),Vs=Symbol("");function hn(e,t,n){if(Cr&&Nt){let r=Iu.get(e);r||Iu.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new zc),i.map=r,i.key=n),i.track()}}function pi(e,t,n,r,i,o){const a=Iu.get(e);if(!a){Ks++;return}const s=l=>{l&&l.trigger()};if(xp(),t==="clear")a.forEach(s);else{const l=Qe(e),u=l&&mp(n);if(l&&n==="length"){const c=Number(r);a.forEach((f,d)=>{(d==="length"||d===Vs||!$o(d)&&d>=c)&&s(f)})}else switch((n!==void 0||a.has(void 0))&&s(a.get(n)),u&&s(a.get(Vs)),t){case"add":l?u&&s(a.get("length")):(s(a.get(So)),ws(e)&&s(a.get($d)));break;case"delete":l||(s(a.get(So)),ws(e)&&s(a.get($d)));break;case"set":ws(e)&&s(a.get(So));break}}wp()}function RO(e,t){const n=Iu.get(e);return n&&n.get(t)}function qo(e){const t=mt(e);return t===e?t:(hn(t,"iterate",Vs),Tr(e)?t:t.map(wn))}function Sp(e){return hn(e=mt(e),"iterate",Vs),e}const DO={__proto__:null,[Symbol.iterator](){return Kf(this,Symbol.iterator,wn)},concat(...e){return qo(this).concat(...e.map(t=>Qe(t)?qo(t):t))},entries(){return Kf(this,"entries",e=>(e[1]=wn(e[1]),e))},every(e,t){return ui(this,"every",e,t,void 0,arguments)},filter(e,t){return ui(this,"filter",e,t,n=>n.map(wn),arguments)},find(e,t){return ui(this,"find",e,t,wn,arguments)},findIndex(e,t){return ui(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ui(this,"findLast",e,t,wn,arguments)},findLastIndex(e,t){return ui(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ui(this,"forEach",e,t,void 0,arguments)},includes(...e){return Vf(this,"includes",e)},indexOf(...e){return Vf(this,"indexOf",e)},join(e){return qo(this).join(e)},lastIndexOf(...e){return Vf(this,"lastIndexOf",e)},map(e,t){return ui(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return sg(this,"reduce",e,t)},reduceRight(e,...t){return sg(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return ui(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return qo(this).toReversed()},toSorted(e){return qo(this).toSorted(e)},toSpliced(...e){return qo(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return Kf(this,"values",wn)}};function Kf(e,t,n){const r=Sp(e),i=r[t]();return r!==e&&!Tr(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const LO=Array.prototype;function ui(e,t,n,r,i,o){const a=Sp(e),s=a!==e&&!Tr(e),l=a[t];if(l!==LO[t]){const f=l.apply(e,o);return s?wn(f):f}let u=n;a!==e&&(s?u=function(f,d){return n.call(this,wn(f),d,e)}:n.length>2&&(u=function(f,d){return n.call(this,f,d,e)}));const c=l.call(a,u,r);return s&&i?i(c):c}function sg(e,t,n,r){const i=Sp(e);let o=n;return i!==e&&(Tr(e)?n.length>3&&(o=function(a,s,l){return n.call(this,a,s,l,e)}):o=function(a,s,l){return n.call(this,a,wn(s),l,e)}),i[t](o,...r)}function Vf(e,t,n){const r=mt(e);hn(r,"iterate",Vs);const i=r[t](...n);return(i===-1||i===!1)&&Cp(n[0])?(n[0]=mt(n[0]),r[t](...n)):i}function rs(e,t,n=[]){bi(),xp();const r=mt(e)[t].apply(e,n);return wp(),xi(),r}const IO=vp("__proto__,__v_isRef,__isVue"),H0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($o));function kO(e){$o(e)||(e=String(e));const t=mt(this);return hn(t,"has",e),t.hasOwnProperty(e)}class W0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?GO:G0:o?X0:U0).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=Qe(t);if(!i){let l;if(a&&(l=DO[n]))return l;if(n==="hasOwnProperty")return kO}const s=Reflect.get(t,n,Zt(t)?t:r);return($o(n)?H0.has(n):IO(n))||(i||hn(t,"get",n),o)?s:Zt(s)?a&&mp(n)?s:s.value:Ft(s)?i?Xc(s):Uc(s):s}}class z0 extends W0{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const l=Po(o);if(!Tr(r)&&!Po(r)&&(o=mt(o),r=mt(r)),!Qe(t)&&Zt(o)&&!Zt(r))return l?!1:(o.value=r,!0)}const a=Qe(t)&&mp(n)?Number(n)<t.length:Et(t,n),s=Reflect.set(t,n,r,Zt(t)?t:i);return t===mt(i)&&(a?zi(r,o)&&pi(t,"set",n,r):pi(t,"add",n,r)),s}deleteProperty(t,n){const r=Et(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&pi(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!$o(n)||!H0.has(n))&&hn(t,"has",n),r}ownKeys(t){return hn(t,"iterate",Qe(t)?"length":So),Reflect.ownKeys(t)}}class jO extends W0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const BO=new z0,FO=new jO,$O=new z0(!0);const Hd=e=>e,Hl=e=>Reflect.getPrototypeOf(e);function HO(e,t,n){return function(...r){const i=this.__v_raw,o=mt(i),a=ws(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...r),c=n?Hd:t?Wd:wn;return!t&&hn(o,"iterate",l?$d:So),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function Wl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function WO(e,t){const n={get(i){const o=this.__v_raw,a=mt(o),s=mt(i);e||(zi(i,s)&&hn(a,"get",i),hn(a,"get",s));const{has:l}=Hl(a),u=t?Hd:e?Wd:wn;if(l.call(a,i))return u(o.get(i));if(l.call(a,s))return u(o.get(s));o!==a&&o.get(i)},get size(){const i=this.__v_raw;return!e&&hn(mt(i),"iterate",So),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,a=mt(o),s=mt(i);return e||(zi(i,s)&&hn(a,"has",i),hn(a,"has",s)),i===s?o.has(i):o.has(i)||o.has(s)},forEach(i,o){const a=this,s=a.__v_raw,l=mt(s),u=t?Hd:e?Wd:wn;return!e&&hn(l,"iterate",So),s.forEach((c,f)=>i.call(o,u(c),u(f),a))}};return gn(n,e?{add:Wl("add"),set:Wl("set"),delete:Wl("delete"),clear:Wl("clear")}:{add(i){!t&&!Tr(i)&&!Po(i)&&(i=mt(i));const o=mt(this);return Hl(o).has.call(o,i)||(o.add(i),pi(o,"add",i,i)),this},set(i,o){!t&&!Tr(o)&&!Po(o)&&(o=mt(o));const a=mt(this),{has:s,get:l}=Hl(a);let u=s.call(a,i);u||(i=mt(i),u=s.call(a,i));const c=l.call(a,i);return a.set(i,o),u?zi(o,c)&&pi(a,"set",i,o):pi(a,"add",i,o),this},delete(i){const o=mt(this),{has:a,get:s}=Hl(o);let l=a.call(o,i);l||(i=mt(i),l=a.call(o,i)),s&&s.call(o,i);const u=o.delete(i);return l&&pi(o,"delete",i,void 0),u},clear(){const i=mt(this),o=i.size!==0,a=i.clear();return o&&pi(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=HO(i,e,t)}),n}function Op(e,t){const n=WO(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Et(n,i)&&i in r?n:r,i,o)}const zO={get:Op(!1,!1)},UO={get:Op(!1,!0)},XO={get:Op(!0,!1)};const U0=new WeakMap,X0=new WeakMap,G0=new WeakMap,GO=new WeakMap;function YO(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KO(e){return e.__v_skip||!Object.isExtensible(e)?0:YO(mO(e))}function Uc(e){return Po(e)?e:Ap(e,!1,BO,zO,U0)}function Y0(e){return Ap(e,!1,$O,UO,X0)}function Xc(e){return Ap(e,!0,FO,XO,G0)}function Ap(e,t,n,r,i){if(!Ft(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=KO(e);if(o===0)return e;const a=i.get(e);if(a)return a;const s=new Proxy(e,o===2?r:n);return i.set(e,s),s}function As(e){return Po(e)?As(e.__v_raw):!!(e&&e.__v_isReactive)}function Po(e){return!!(e&&e.__v_isReadonly)}function Tr(e){return!!(e&&e.__v_isShallow)}function Cp(e){return e?!!e.__v_raw:!1}function mt(e){const t=e&&e.__v_raw;return t?mt(t):e}function VO(e){return!Et(e,"__v_skip")&&Object.isExtensible(e)&&P0(e,"__v_skip",!0),e}const wn=e=>Ft(e)?Uc(e):e,Wd=e=>Ft(e)?Xc(e):e;function Zt(e){return e?e.__v_isRef===!0:!1}function qr(e){return K0(e,!1)}function Oo(e){return K0(e,!0)}function K0(e,t){return Zt(e)?e:new qO(e,t)}class qO{constructor(t,n){this.dep=new zc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:mt(t),this._value=n?t:wn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Tr(t)||Po(t);t=r?t:mt(t),zi(t,n)&&(this._rawValue=t,this._value=r?t:wn(t),this.dep.trigger())}}function Gn(e){return Zt(e)?e.value:e}function Ui(e){return Ze(e)?e():Gn(e)}const ZO={get:(e,t,n)=>t==="__v_raw"?e:Gn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Zt(i)&&!Zt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function V0(e){return As(e)?e:new Proxy(e,ZO)}class JO{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new zc,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function QO(e){return new JO(e)}class eA{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return RO(mt(this._object),this._key)}}class tA{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function nA(e,t,n){return Zt(e)?e:Ze(e)?new tA(e):Ft(e)&&arguments.length>1?rA(e,t,n):qr(e)}function rA(e,t,n){const r=e[t];return Zt(r)?r:new eA(e,t,n)}class iA{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new zc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Nt!==this)return I0(this,!0),!0}get value(){const t=this.dep.track();return B0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function oA(e,t,n=!1){let r,i;return Ze(e)?r=e:(r=e.get,i=e.set),new iA(r,i,n)}const zl={},ku=new WeakMap;let yo;function aA(e,t=!1,n=yo){if(n){let r=ku.get(n);r||ku.set(n,r=[]),r.push(e)}}function sA(e,t,n=Mt){const{immediate:r,deep:i,once:o,scheduler:a,augmentJob:s,call:l}=n,u=T=>i?T:Tr(T)||i===!1||i===0?vi(T,1):vi(T);let c,f,d,h,v=!1,p=!1;if(Zt(e)?(f=()=>e.value,v=Tr(e)):As(e)?(f=()=>u(e),v=!0):Qe(e)?(p=!0,v=e.some(T=>As(T)||Tr(T)),f=()=>e.map(T=>{if(Zt(T))return T.value;if(As(T))return u(T);if(Ze(T))return l?l(T,2):T()})):Ze(e)?t?f=l?()=>l(e,2):e:f=()=>{if(d){bi();try{d()}finally{xi()}}const T=yo;yo=c;try{return l?l(e,3,[h]):e(h)}finally{yo=T}}:f=Vr,t&&i){const T=f,L=i===!0?1/0:i;f=()=>vi(T(),L)}const g=R0(),y=()=>{c.stop(),g&&g.active&&yp(g.effects,c)};if(o&&t){const T=t;t=(...L)=>{T(...L),y()}}let m=p?new Array(e.length).fill(zl):zl;const M=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(t){const L=c.run();if(i||v||(p?L.some((N,E)=>zi(N,m[E])):zi(L,m))){d&&d();const N=yo;yo=c;try{const E=[L,m===zl?void 0:p&&m[0]===zl?[]:m,h];m=L,l?l(t,3,E):t(...E)}finally{yo=N}}}else c.run()};return s&&s(M),c=new D0(f),c.scheduler=a?()=>a(M,!1):M,h=T=>aA(T,!1,c),d=c.onStop=()=>{const T=ku.get(c);if(T){if(l)l(T,4);else for(const L of T)L();ku.delete(c)}},t?r?M(!0):m=c.run():a?a(M.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function vi(e,t=1/0,n){if(t<=0||!Ft(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Zt(e))vi(e.value,t,n);else if(Qe(e))for(let r=0;r<e.length;r++)vi(e[r],t,n);else if(gO(e)||ws(e))e.forEach(r=>{vi(r,t,n)});else if(_O(e)){for(const r in e)vi(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&vi(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function El(e,t,n,r){try{return r?e(...r):e()}catch(i){Gc(i,t,n)}}function ei(e,t,n,r){if(Ze(e)){const i=El(e,t,n,r);return i&&M0(i)&&i.catch(o=>{Gc(o,t,n)}),i}if(Qe(e)){const i=[];for(let o=0;o<e.length;o++)i.push(ei(e[o],t,n,r));return i}}function Gc(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Mt;if(t){let s=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,u)===!1)return}s=s.parent}if(o){bi(),El(o,null,10,[e,l,u]),xi();return}}lA(e,n,i,r,a)}function lA(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const En=[];let zr=-1;const pa=[];let Li=null,ia=0;const q0=Promise.resolve();let ju=null;function Sl(e){const t=ju||q0;return e?t.then(this?e.bind(this):e):t}function uA(e){let t=zr+1,n=En.length;for(;t<n;){const r=t+n>>>1,i=En[r],o=qs(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function Tp(e){if(!(e.flags&1)){const t=qs(e),n=En[En.length-1];!n||!(e.flags&2)&&t>=qs(n)?En.push(e):En.splice(uA(t),0,e),e.flags|=1,Z0()}}function Z0(){ju||(ju=q0.then(Q0))}function cA(e){Qe(e)?pa.push(...e):Li&&e.id===-1?Li.splice(ia+1,0,e):e.flags&1||(pa.push(e),e.flags|=1),Z0()}function lg(e,t,n=zr+1){for(;n<En.length;n++){const r=En[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;En.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function J0(e){if(pa.length){const t=[...new Set(pa)].sort((n,r)=>qs(n)-qs(r));if(pa.length=0,Li){Li.push(...t);return}for(Li=t,ia=0;ia<Li.length;ia++){const n=Li[ia];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Li=null,ia=0}}const qs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Q0(e){try{for(zr=0;zr<En.length;zr++){const t=En[zr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),El(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zr<En.length;zr++){const t=En[zr];t&&(t.flags&=-2)}zr=-1,En.length=0,J0(),ju=null,(En.length||pa.length)&&Q0()}}let Yt=null,eb=null;function Bu(e){const t=Yt;return Yt=e,eb=e&&e.type.__scopeId||null,t}function fA(e,t=Yt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&_g(-1);const o=Bu(t);let a;try{a=e(...i)}finally{Bu(o),r._d&&_g(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ug(e,t){if(Yt===null)return e;const n=Zc(Yt),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,s,l=Mt]=t[i];o&&(Ze(o)&&(o={mounted:o,updated:o}),o.deep&&vi(a),r.push({dir:o,instance:n,value:a,oldValue:void 0,arg:s,modifiers:l}))}return e}function fo(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(bi(),ei(l,n,8,[e.el,s,e,t]),xi())}}const dA=Symbol("_vte"),hA=e=>e.__isTeleport;function Mp(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mp(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function ka(e,t){return Ze(e)?gn({name:e.name},t,{setup:e}):e}function tb(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Fu(e,t,n,r,i=!1){if(Qe(e)){e.forEach((v,p)=>Fu(v,t&&(Qe(t)?t[p]:t),n,r,i));return}if(va(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Fu(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?Zc(r.component):r.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Mt?s.refs={}:s.refs,f=s.setupState,d=mt(f),h=f===Mt?()=>!1:v=>Et(d,v);if(u!=null&&u!==l&&(Jt(u)?(c[u]=null,h(u)&&(f[u]=null)):Zt(u)&&(u.value=null)),Ze(l))El(l,s,12,[a,c]);else{const v=Jt(l),p=Zt(l);if(v||p){const g=()=>{if(e.f){const y=v?h(l)?f[l]:c[l]:l.value;i?Qe(y)&&yp(y,o):Qe(y)?y.includes(o)||y.push(o):v?(c[l]=[o],h(l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else v?(c[l]=a,h(l)&&(f[l]=a)):p&&(l.value=a,e.k&&(c[e.k]=a))};a?(g.id=-1,Wn(g,n)):g()}}}Wc().requestIdleCallback;Wc().cancelIdleCallback;const va=e=>!!e.type.__asyncLoader,nb=e=>e.type.__isKeepAlive;function pA(e,t){rb(e,"a",t)}function vA(e,t){rb(e,"da",t)}function rb(e,t,n=Vt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Yc(t,r,n),n){let i=n.parent;for(;i&&i.parent;)nb(i.parent.vnode)&&gA(r,t,n,i),i=i.parent}}function gA(e,t,n,r){const i=Yc(t,e,r,!0);Pp(()=>{yp(r[t],i)},n)}function Yc(e,t,n=Vt,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{bi();const s=Al(n),l=ei(t,n,e,a);return s(),xi(),l});return r?i.unshift(o):i.push(o),o}}const wi=e=>(t,n=Vt)=>{(!Qs||e==="sp")&&Yc(e,(...r)=>t(...r),n)},yA=wi("bm"),Ol=wi("m"),mA=wi("bu"),_A=wi("u"),bA=wi("bum"),Pp=wi("um"),xA=wi("sp"),wA=wi("rtg"),EA=wi("rtc");function SA(e,t=Vt){Yc("ec",e,t)}const OA="components";function ib(e,t){return CA(OA,e,!0,t)||e}const AA=Symbol.for("v-ndc");function CA(e,t,n=!0,r=!1){const i=Yt||Vt;if(i){const o=i.type;{const s=gC(o,!1);if(s&&(s===t||s===fr(t)||s===Hc(fr(t))))return o}const a=cg(i[e]||o[e],t)||cg(i.appContext[e],t);return!a&&r?o:a}}function cg(e,t){return e&&(e[t]||e[fr(t)]||e[Hc(fr(t))])}function TA(e,t,n={},r,i){if(Yt.ce||Yt.parent&&va(Yt.parent)&&Yt.parent.ce)return Ro(),Yd(zn,null,[sn("slot",n,r)],64);let o=e[t];o&&o._c&&(o._d=!1),Ro();const a=o&&ob(o(n)),s=n.key||a&&a.key,l=Yd(zn,{key:(s&&!$o(s)?s:`_${t}`)+""},a||[],a&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function ob(e){return e.some(t=>Js(t)?!(t.type===No||t.type===zn&&!ob(t.children)):!0)?e:null}const zd=e=>e?Ob(e)?Zc(e):zd(e.parent):null,Cs=gn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zd(e.parent),$root:e=>zd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>sb(e),$forceUpdate:e=>e.f||(e.f=()=>{Tp(e.update)}),$nextTick:e=>e.n||(e.n=Sl.bind(e.proxy)),$watch:e=>qA.bind(e)}),qf=(e,t)=>e!==Mt&&!e.__isScriptSetup&&Et(e,t),MA={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(qf(r,t))return a[t]=1,r[t];if(i!==Mt&&Et(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&Et(u,t))return a[t]=3,o[t];if(n!==Mt&&Et(n,t))return a[t]=4,n[t];Ud&&(a[t]=0)}}const c=Cs[t];let f,d;if(c)return t==="$attrs"&&hn(e.attrs,"get",""),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(n!==Mt&&Et(n,t))return a[t]=4,n[t];if(d=l.config.globalProperties,Et(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return qf(i,t)?(i[t]=n,!0):r!==Mt&&Et(r,t)?(r[t]=n,!0):Et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||e!==Mt&&Et(e,a)||qf(t,a)||(s=o[0])&&Et(s,a)||Et(r,a)||Et(Cs,a)||Et(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Et(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function fg(e){return Qe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ud=!0;function PA(e){const t=sb(e),n=e.proxy,r=e.ctx;Ud=!1,t.beforeCreate&&dg(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:v,activated:p,deactivated:g,beforeDestroy:y,beforeUnmount:m,destroyed:M,unmounted:T,render:L,renderTracked:N,renderTriggered:E,errorCaptured:k,serverPrefetch:Y,expose:ie,inheritAttrs:se,components:pe,directives:O,filters:I}=t;if(u&&NA(u,r,null),a)for(const fe in a){const ve=a[fe];Ze(ve)&&(r[fe]=ve.bind(n))}if(i){const fe=i.call(n,n);Ft(fe)&&(e.data=Uc(fe))}if(Ud=!0,o)for(const fe in o){const ve=o[fe],Je=Ze(ve)?ve.bind(n,n):Ze(ve.get)?ve.get.bind(n,n):Vr,et=!Ze(ve)&&Ze(ve.set)?ve.set.bind(n):Vr,xe=qt({get:Je,set:et});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>xe.value,set:Me=>xe.value=Me})}if(s)for(const fe in s)ab(s[fe],r,n,fe);if(l){const fe=Ze(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(ve=>{mu(ve,fe[ve])})}c&&dg(c,e,"c");function te(fe,ve){Qe(ve)?ve.forEach(Je=>fe(Je.bind(n))):ve&&fe(ve.bind(n))}if(te(yA,f),te(Ol,d),te(mA,h),te(_A,v),te(pA,p),te(vA,g),te(SA,k),te(EA,N),te(wA,E),te(bA,m),te(Pp,T),te(xA,Y),Qe(ie))if(ie.length){const fe=e.exposed||(e.exposed={});ie.forEach(ve=>{Object.defineProperty(fe,ve,{get:()=>n[ve],set:Je=>n[ve]=Je})})}else e.exposed||(e.exposed={});L&&e.render===Vr&&(e.render=L),se!=null&&(e.inheritAttrs=se),pe&&(e.components=pe),O&&(e.directives=O),Y&&tb(e)}function NA(e,t,n=Vr){Qe(e)&&(e=Xd(e));for(const r in e){const i=e[r];let o;Ft(i)?"default"in i?o=Mr(i.from||r,i.default,!0):o=Mr(i.from||r):o=Mr(i),Zt(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function dg(e,t,n){ei(Qe(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function ab(e,t,n,r){let i=r.includes(".")?bb(n,r):()=>n[r];if(Jt(e)){const o=t[e];Ze(o)&&mi(i,o)}else if(Ze(e))mi(i,e.bind(n));else if(Ft(e))if(Qe(e))e.forEach(o=>ab(o,t,n,r));else{const o=Ze(e.handler)?e.handler.bind(n):t[e.handler];Ze(o)&&mi(i,o,e)}}function sb(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>$u(l,u,a,!0)),$u(l,t,a)),Ft(t)&&o.set(t,l),l}function $u(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&$u(e,o,n,!0),i&&i.forEach(a=>$u(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const s=RA[a]||n&&n[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const RA={data:hg,props:pg,emits:pg,methods:ys,computed:ys,beforeCreate:xn,created:xn,beforeMount:xn,mounted:xn,beforeUpdate:xn,updated:xn,beforeDestroy:xn,beforeUnmount:xn,destroyed:xn,unmounted:xn,activated:xn,deactivated:xn,errorCaptured:xn,serverPrefetch:xn,components:ys,directives:ys,watch:LA,provide:hg,inject:DA};function hg(e,t){return t?e?function(){return gn(Ze(e)?e.call(this,this):e,Ze(t)?t.call(this,this):t)}:t:e}function DA(e,t){return ys(Xd(e),Xd(t))}function Xd(e){if(Qe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xn(e,t){return e?[...new Set([].concat(e,t))]:t}function ys(e,t){return e?gn(Object.create(null),e,t):t}function pg(e,t){return e?Qe(e)&&Qe(t)?[...new Set([...e,...t])]:gn(Object.create(null),fg(e),fg(t??{})):t}function LA(e,t){if(!e)return t;if(!t)return e;const n=gn(Object.create(null),e);for(const r in t)n[r]=xn(e[r],t[r]);return n}function lb(){return{app:null,config:{isNativeTag:pO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IA=0;function kA(e,t){return function(r,i=null){Ze(r)||(r=gn({},r)),i!=null&&!Ft(i)&&(i=null);const o=lb(),a=new WeakSet,s=[];let l=!1;const u=o.app={_uid:IA++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:mC,get config(){return o.config},set config(c){},use(c,...f){return a.has(c)||(c&&Ze(c.install)?(a.add(c),c.install(u,...f)):Ze(c)&&(a.add(c),c(u,...f))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,f){return f?(o.components[c]=f,u):o.components[c]},directive(c,f){return f?(o.directives[c]=f,u):o.directives[c]},mount(c,f,d){if(!l){const h=u._ceVNode||sn(r,i);return h.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),e(h,c,d),l=!0,u._container=c,c.__vue_app__=u,Zc(h.component)}},onUnmount(c){s.push(c)},unmount(){l&&(ei(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return o.provides[c]=f,u},runWithContext(c){const f=Ao;Ao=u;try{return c()}finally{Ao=f}}};return u}}let Ao=null;function mu(e,t){if(Vt){let n=Vt.provides;const r=Vt.parent&&Vt.parent.provides;r===n&&(n=Vt.provides=Object.create(r)),n[e]=t}}function Mr(e,t,n=!1){const r=Vt||Yt;if(r||Ao){let i=Ao?Ao._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ze(t)?t.call(r&&r.proxy):t}}function ub(){return!!(Vt||Yt||Ao)}const cb={},fb=()=>Object.create(cb),db=e=>Object.getPrototypeOf(e)===cb;function jA(e,t,n,r=!1){const i={},o=fb();e.propsDefaults=Object.create(null),hb(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:Y0(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function BA(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=mt(i),[l]=e.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(Kc(e.emitsOptions,d))continue;const h=t[d];if(l)if(Et(o,d))h!==o[d]&&(o[d]=h,u=!0);else{const v=fr(d);i[v]=Gd(l,s,v,h,e,!1)}else h!==o[d]&&(o[d]=h,u=!0)}}}else{hb(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!Et(t,f)&&((c=Ho(f))===f||!Et(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=Gd(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!Et(t,f))&&(delete o[f],u=!0)}u&&pi(e.attrs,"set","")}function hb(e,t,n,r){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Es(l))continue;const u=t[l];let c;i&&Et(i,c=fr(l))?!o||!o.includes(c)?n[c]=u:(s||(s={}))[c]=u:Kc(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(o){const l=mt(n),u=s||Mt;for(let c=0;c<o.length;c++){const f=o[c];n[f]=Gd(i,l,f,u[f],e,!Et(u,f))}}return a}function Gd(e,t,n,r,i,o){const a=e[n];if(a!=null){const s=Et(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ze(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=Al(i);r=u[n]=l.call(null,t),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===Ho(n))&&(r=!0))}return r}const FA=new WeakMap;function pb(e,t,n=!1){const r=n?FA:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Ze(e)){const c=f=>{l=!0;const[d,h]=pb(f,t,!0);gn(a,d),h&&s.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Ft(e)&&r.set(e,ha),ha;if(Qe(o))for(let c=0;c<o.length;c++){const f=fr(o[c]);vg(f)&&(a[f]=Mt)}else if(o)for(const c in o){const f=fr(c);if(vg(f)){const d=o[c],h=a[f]=Qe(d)||Ze(d)?{type:d}:gn({},d),v=h.type;let p=!1,g=!0;if(Qe(v))for(let y=0;y<v.length;++y){const m=v[y],M=Ze(m)&&m.name;if(M==="Boolean"){p=!0;break}else M==="String"&&(g=!1)}else p=Ze(v)&&v.name==="Boolean";h[0]=p,h[1]=g,(p||Et(h,"default"))&&s.push(f)}}const u=[a,s];return Ft(e)&&r.set(e,u),u}function vg(e){return e[0]!=="$"&&!Es(e)}const Np=e=>e[0]==="_"||e==="$stable",Rp=e=>Qe(e)?e.map(Xr):[Xr(e)],$A=(e,t,n)=>{if(t._n)return t;const r=fA((...i)=>Rp(t(...i)),n);return r._c=!1,r},vb=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Np(i))continue;const o=e[i];if(Ze(o))t[i]=$A(i,o,r);else if(o!=null){const a=Rp(o);t[i]=()=>a}}},gb=(e,t)=>{const n=Rp(t);e.slots.default=()=>n},yb=(e,t,n)=>{for(const r in t)(n||!Np(r))&&(e[r]=t[r])},HA=(e,t,n)=>{const r=e.slots=fb();if(e.vnode.shapeFlag&32){const i=t._;i?(yb(r,t,n),n&&P0(r,"_",i,!0)):vb(t,r)}else t&&gb(e,t)},WA=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=Mt;if(r.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:yb(i,t,n):(o=!t.$stable,vb(t,i)),a=t}else t&&(gb(e,t),a={default:1});if(o)for(const s in i)!Np(s)&&a[s]==null&&delete i[s]},Wn=rC;function zA(e){return UA(e)}function UA(e,t){const n=Wc();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=Vr,insertStaticContent:v}=e,p=(A,R,$,ee=null,J=null,re=null,le=void 0,_=null,S=!!R.dynamicChildren)=>{if(A===R)return;A&&!is(A,R)&&(ee=D(A),Me(A,J,re,!0),A=null),R.patchFlag===-2&&(S=!1,R.dynamicChildren=null);const{type:C,ref:H,shapeFlag:P}=R;switch(C){case Vc:g(A,R,$,ee);break;case No:y(A,R,$,ee);break;case Jf:A==null&&m(R,$,ee,le);break;case zn:pe(A,R,$,ee,J,re,le,_,S);break;default:P&1?L(A,R,$,ee,J,re,le,_,S):P&6?O(A,R,$,ee,J,re,le,_,S):(P&64||P&128)&&C.process(A,R,$,ee,J,re,le,_,S,Q)}H!=null&&J&&Fu(H,A&&A.ref,re,R||A,!R)},g=(A,R,$,ee)=>{if(A==null)r(R.el=s(R.children),$,ee);else{const J=R.el=A.el;R.children!==A.children&&u(J,R.children)}},y=(A,R,$,ee)=>{A==null?r(R.el=l(R.children||""),$,ee):R.el=A.el},m=(A,R,$,ee)=>{[A.el,A.anchor]=v(A.children,R,$,ee,A.el,A.anchor)},M=({el:A,anchor:R},$,ee)=>{let J;for(;A&&A!==R;)J=d(A),r(A,$,ee),A=J;r(R,$,ee)},T=({el:A,anchor:R})=>{let $;for(;A&&A!==R;)$=d(A),i(A),A=$;i(R)},L=(A,R,$,ee,J,re,le,_,S)=>{R.type==="svg"?le="svg":R.type==="math"&&(le="mathml"),A==null?N(R,$,ee,J,re,le,_,S):Y(A,R,J,re,le,_,S)},N=(A,R,$,ee,J,re,le,_)=>{let S,C;const{props:H,shapeFlag:P,transition:X,dirs:G}=A;if(S=A.el=a(A.type,re,H&&H.is,H),P&8?c(S,A.children):P&16&&k(A.children,S,null,ee,J,Zf(A,re),le,_),G&&fo(A,null,ee,"created"),E(S,A,A.scopeId,le,ee),H){for(const me in H)me!=="value"&&!Es(me)&&o(S,me,null,H[me],re,ee);"value"in H&&o(S,"value",null,H.value,re),(C=H.onVnodeBeforeMount)&&$r(C,ee,A)}G&&fo(A,null,ee,"beforeMount");const ne=XA(J,X);ne&&X.beforeEnter(S),r(S,R,$),((C=H&&H.onVnodeMounted)||ne||G)&&Wn(()=>{C&&$r(C,ee,A),ne&&X.enter(S),G&&fo(A,null,ee,"mounted")},J)},E=(A,R,$,ee,J)=>{if($&&h(A,$),ee)for(let re=0;re<ee.length;re++)h(A,ee[re]);if(J){let re=J.subTree;if(R===re||wb(re.type)&&(re.ssContent===R||re.ssFallback===R)){const le=J.vnode;E(A,le,le.scopeId,le.slotScopeIds,J.parent)}}},k=(A,R,$,ee,J,re,le,_,S=0)=>{for(let C=S;C<A.length;C++){const H=A[C]=_?Ii(A[C]):Xr(A[C]);p(null,H,R,$,ee,J,re,le,_)}},Y=(A,R,$,ee,J,re,le)=>{const _=R.el=A.el;let{patchFlag:S,dynamicChildren:C,dirs:H}=R;S|=A.patchFlag&16;const P=A.props||Mt,X=R.props||Mt;let G;if($&&ho($,!1),(G=X.onVnodeBeforeUpdate)&&$r(G,$,R,A),H&&fo(R,A,$,"beforeUpdate"),$&&ho($,!0),(P.innerHTML&&X.innerHTML==null||P.textContent&&X.textContent==null)&&c(_,""),C?ie(A.dynamicChildren,C,_,$,ee,Zf(R,J),re):le||ve(A,R,_,null,$,ee,Zf(R,J),re,!1),S>0){if(S&16)se(_,P,X,$,J);else if(S&2&&P.class!==X.class&&o(_,"class",null,X.class,J),S&4&&o(_,"style",P.style,X.style,J),S&8){const ne=R.dynamicProps;for(let me=0;me<ne.length;me++){const ce=ne[me],he=P[ce],ke=X[ce];(ke!==he||ce==="value")&&o(_,ce,he,ke,J,$)}}S&1&&A.children!==R.children&&c(_,R.children)}else!le&&C==null&&se(_,P,X,$,J);((G=X.onVnodeUpdated)||H)&&Wn(()=>{G&&$r(G,$,R,A),H&&fo(R,A,$,"updated")},ee)},ie=(A,R,$,ee,J,re,le)=>{for(let _=0;_<R.length;_++){const S=A[_],C=R[_],H=S.el&&(S.type===zn||!is(S,C)||S.shapeFlag&198)?f(S.el):$;p(S,C,H,null,ee,J,re,le,!0)}},se=(A,R,$,ee,J)=>{if(R!==$){if(R!==Mt)for(const re in R)!Es(re)&&!(re in $)&&o(A,re,R[re],null,J,ee);for(const re in $){if(Es(re))continue;const le=$[re],_=R[re];le!==_&&re!=="value"&&o(A,re,_,le,J,ee)}"value"in $&&o(A,"value",R.value,$.value,J)}},pe=(A,R,$,ee,J,re,le,_,S)=>{const C=R.el=A?A.el:s(""),H=R.anchor=A?A.anchor:s("");let{patchFlag:P,dynamicChildren:X,slotScopeIds:G}=R;G&&(_=_?_.concat(G):G),A==null?(r(C,$,ee),r(H,$,ee),k(R.children||[],$,H,J,re,le,_,S)):P>0&&P&64&&X&&A.dynamicChildren?(ie(A.dynamicChildren,X,$,J,re,le,_),(R.key!=null||J&&R===J.subTree)&&mb(A,R,!0)):ve(A,R,$,H,J,re,le,_,S)},O=(A,R,$,ee,J,re,le,_,S)=>{R.slotScopeIds=_,A==null?R.shapeFlag&512?J.ctx.activate(R,$,ee,le,S):I(R,$,ee,J,re,le,S):j(A,R,S)},I=(A,R,$,ee,J,re,le)=>{const _=A.component=fC(A,ee,J);if(nb(A)&&(_.ctx.renderer=Q),dC(_,!1,le),_.asyncDep){if(J&&J.registerDep(_,te,le),!A.el){const S=_.subTree=sn(No);y(null,S,R,$)}}else te(_,A,R,$,J,re,le)},j=(A,R,$)=>{const ee=R.component=A.component;if(tC(A,R,$))if(ee.asyncDep&&!ee.asyncResolved){fe(ee,R,$);return}else ee.next=R,ee.update();else R.el=A.el,ee.vnode=R},te=(A,R,$,ee,J,re,le)=>{const _=()=>{if(A.isMounted){let{next:P,bu:X,u:G,parent:ne,vnode:me}=A;{const Fe=_b(A);if(Fe){P&&(P.el=me.el,fe(A,P,le)),Fe.asyncDep.then(()=>{A.isUnmounted||_()});return}}let ce=P,he;ho(A,!1),P?(P.el=me.el,fe(A,P,le)):P=me,X&&yu(X),(he=P.props&&P.props.onVnodeBeforeUpdate)&&$r(he,ne,P,me),ho(A,!0);const ke=yg(A),Be=A.subTree;A.subTree=ke,p(Be,ke,f(Be.el),D(Be),A,J,re),P.el=ke.el,ce===null&&nC(A,ke.el),G&&Wn(G,J),(he=P.props&&P.props.onVnodeUpdated)&&Wn(()=>$r(he,ne,P,me),J)}else{let P;const{el:X,props:G}=R,{bm:ne,m:me,parent:ce,root:he,type:ke}=A,Be=va(R);ho(A,!1),ne&&yu(ne),!Be&&(P=G&&G.onVnodeBeforeMount)&&$r(P,ce,R),ho(A,!0);{he.ce&&he.ce._injectChildStyle(ke);const Fe=A.subTree=yg(A);p(null,Fe,$,ee,A,J,re),R.el=Fe.el}if(me&&Wn(me,J),!Be&&(P=G&&G.onVnodeMounted)){const Fe=R;Wn(()=>$r(P,ce,Fe),J)}(R.shapeFlag&256||ce&&va(ce.vnode)&&ce.vnode.shapeFlag&256)&&A.a&&Wn(A.a,J),A.isMounted=!0,R=$=ee=null}};A.scope.on();const S=A.effect=new D0(_);A.scope.off();const C=A.update=S.run.bind(S),H=A.job=S.runIfDirty.bind(S);H.i=A,H.id=A.uid,S.scheduler=()=>Tp(H),ho(A,!0),C()},fe=(A,R,$)=>{R.component=A;const ee=A.vnode.props;A.vnode=R,A.next=null,BA(A,R.props,ee,$),WA(A,R.children,$),bi(),lg(A),xi()},ve=(A,R,$,ee,J,re,le,_,S=!1)=>{const C=A&&A.children,H=A?A.shapeFlag:0,P=R.children,{patchFlag:X,shapeFlag:G}=R;if(X>0){if(X&128){et(C,P,$,ee,J,re,le,_,S);return}else if(X&256){Je(C,P,$,ee,J,re,le,_,S);return}}G&8?(H&16&&B(C,J,re),P!==C&&c($,P)):H&16?G&16?et(C,P,$,ee,J,re,le,_,S):B(C,J,re,!0):(H&8&&c($,""),G&16&&k(P,$,ee,J,re,le,_,S))},Je=(A,R,$,ee,J,re,le,_,S)=>{A=A||ha,R=R||ha;const C=A.length,H=R.length,P=Math.min(C,H);let X;for(X=0;X<P;X++){const G=R[X]=S?Ii(R[X]):Xr(R[X]);p(A[X],G,$,null,J,re,le,_,S)}C>H?B(A,J,re,!0,!1,P):k(R,$,ee,J,re,le,_,S,P)},et=(A,R,$,ee,J,re,le,_,S)=>{let C=0;const H=R.length;let P=A.length-1,X=H-1;for(;C<=P&&C<=X;){const G=A[C],ne=R[C]=S?Ii(R[C]):Xr(R[C]);if(is(G,ne))p(G,ne,$,null,J,re,le,_,S);else break;C++}for(;C<=P&&C<=X;){const G=A[P],ne=R[X]=S?Ii(R[X]):Xr(R[X]);if(is(G,ne))p(G,ne,$,null,J,re,le,_,S);else break;P--,X--}if(C>P){if(C<=X){const G=X+1,ne=G<H?R[G].el:ee;for(;C<=X;)p(null,R[C]=S?Ii(R[C]):Xr(R[C]),$,ne,J,re,le,_,S),C++}}else if(C>X)for(;C<=P;)Me(A[C],J,re,!0),C++;else{const G=C,ne=C,me=new Map;for(C=ne;C<=X;C++){const be=R[C]=S?Ii(R[C]):Xr(R[C]);be.key!=null&&me.set(be.key,C)}let ce,he=0;const ke=X-ne+1;let Be=!1,Fe=0;const Bt=new Array(ke);for(C=0;C<ke;C++)Bt[C]=0;for(C=G;C<=P;C++){const be=A[C];if(he>=ke){Me(be,J,re,!0);continue}let Ge;if(be.key!=null)Ge=me.get(be.key);else for(ce=ne;ce<=X;ce++)if(Bt[ce-ne]===0&&is(be,R[ce])){Ge=ce;break}Ge===void 0?Me(be,J,re,!0):(Bt[Ge-ne]=C+1,Ge>=Fe?Fe=Ge:Be=!0,p(be,R[Ge],$,null,J,re,le,_,S),he++)}const _e=Be?GA(Bt):ha;for(ce=_e.length-1,C=ke-1;C>=0;C--){const be=ne+C,Ge=R[be],ht=be+1<H?R[be+1].el:ee;Bt[C]===0?p(null,Ge,$,ht,J,re,le,_,S):Be&&(ce<0||C!==_e[ce]?xe(Ge,$,ht,2):ce--)}}},xe=(A,R,$,ee,J=null)=>{const{el:re,type:le,transition:_,children:S,shapeFlag:C}=A;if(C&6){xe(A.component.subTree,R,$,ee);return}if(C&128){A.suspense.move(R,$,ee);return}if(C&64){le.move(A,R,$,Q);return}if(le===zn){r(re,R,$);for(let P=0;P<S.length;P++)xe(S[P],R,$,ee);r(A.anchor,R,$);return}if(le===Jf){M(A,R,$);return}if(ee!==2&&C&1&&_)if(ee===0)_.beforeEnter(re),r(re,R,$),Wn(()=>_.enter(re),J);else{const{leave:P,delayLeave:X,afterLeave:G}=_,ne=()=>{A.ctx.isUnmounted?i(re):r(re,R,$)},me=()=>{P(re,()=>{ne(),G&&G()})};X?X(re,ne,me):me()}else r(re,R,$)},Me=(A,R,$,ee=!1,J=!1)=>{const{type:re,props:le,ref:_,children:S,dynamicChildren:C,shapeFlag:H,patchFlag:P,dirs:X,cacheIndex:G}=A;if(P===-2&&(J=!1),_!=null&&(bi(),Fu(_,null,$,A,!0),xi()),G!=null&&(R.renderCache[G]=void 0),H&256){R.ctx.deactivate(A);return}const ne=H&1&&X,me=!va(A);let ce;if(me&&(ce=le&&le.onVnodeBeforeUnmount)&&$r(ce,R,A),H&6)Xe(A.component,$,ee);else{if(H&128){A.suspense.unmount($,ee);return}ne&&fo(A,null,R,"beforeUnmount"),H&64?A.type.remove(A,R,$,Q,ee):C&&!C.hasOnce&&(re!==zn||P>0&&P&64)?B(C,R,$,!1,!0):(re===zn&&P&384||!J&&H&16)&&B(S,R,$),ee&&He(A)}(me&&(ce=le&&le.onVnodeUnmounted)||ne)&&Wn(()=>{ce&&$r(ce,R,A),ne&&fo(A,null,R,"unmounted")},$)},He=A=>{const{type:R,el:$,anchor:ee,transition:J}=A;if(R===zn){Pe($,ee);return}if(R===Jf){T(A);return}const re=()=>{i($),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(A.shapeFlag&1&&J&&!J.persisted){const{leave:le,delayLeave:_}=J,S=()=>le($,re);_?_(A.el,re,S):S()}else re()},Pe=(A,R)=>{let $;for(;A!==R;)$=d(A),i(A),A=$;i(R)},Xe=(A,R,$)=>{const{bum:ee,scope:J,job:re,subTree:le,um:_,m:S,a:C,parent:H,slots:{__:P}}=A;gg(S),gg(C),ee&&yu(ee),H&&Qe(P)&&P.forEach(X=>{H.renderCache[X]=void 0}),J.stop(),re&&(re.flags|=8,Me(le,A,R,$)),_&&Wn(_,R),Wn(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},B=(A,R,$,ee=!1,J=!1,re=0)=>{for(let le=re;le<A.length;le++)Me(A[le],R,$,ee,J)},D=A=>{if(A.shapeFlag&6)return D(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const R=d(A.anchor||A.el),$=R&&R[dA];return $?d($):R};let F=!1;const U=(A,R,$)=>{A==null?R._vnode&&Me(R._vnode,null,null,!0):p(R._vnode||null,A,R,null,null,null,$),R._vnode=A,F||(F=!0,lg(),J0(),F=!1)},Q={p,um:Me,m:xe,r:He,mt:I,mc:k,pc:ve,pbc:ie,n:D,o:e};return{render:U,hydrate:void 0,createApp:kA(U)}}function Zf({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ho({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function XA(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mb(e,t,n=!1){const r=e.children,i=t.children;if(Qe(r)&&Qe(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=Ii(i[o]),s.el=a.el),!n&&s.patchFlag!==-2&&mb(a,s)),s.type===Vc&&(s.el=a.el),s.type===No&&!s.el&&(s.el=a.el)}}function GA(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<u?o=s+1:a=s;u<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}function _b(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_b(t)}function gg(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const YA=Symbol.for("v-scx"),KA=()=>Mr(YA);function VA(e,t){return Dp(e,null,t)}function mi(e,t,n){return Dp(e,t,n)}function Dp(e,t,n=Mt){const{immediate:r,deep:i,flush:o,once:a}=n,s=gn({},n),l=t&&r||!t&&o!=="post";let u;if(Qs){if(o==="sync"){const h=KA();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Vr,h.resume=Vr,h.pause=Vr,h}}const c=Vt;s.call=(h,v,p)=>ei(h,c,v,p);let f=!1;o==="post"?s.scheduler=h=>{Wn(h,c&&c.suspense)}:o!=="sync"&&(f=!0,s.scheduler=(h,v)=>{v?h():Tp(h)}),s.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const d=sA(e,t,s);return Qs&&(u?u.push(d):l&&d()),d}function qA(e,t,n){const r=this.proxy,i=Jt(e)?e.includes(".")?bb(r,e):()=>r[e]:e.bind(r,r);let o;Ze(t)?o=t:(o=t.handler,n=t);const a=Al(this),s=Dp(i,o.bind(r),n);return a(),s}function bb(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const ZA=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${fr(t)}Modifiers`]||e[`${Ho(t)}Modifiers`];function JA(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Mt;let i=n;const o=t.startsWith("update:"),a=o&&ZA(r,t.slice(7));a&&(a.trim&&(i=n.map(c=>Jt(c)?c.trim():c)),a.number&&(i=n.map(Bd)));let s,l=r[s=Gf(t)]||r[s=Gf(fr(t))];!l&&o&&(l=r[s=Gf(Ho(t))]),l&&ei(l,e,6,i);const u=r[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,ei(u,e,6,i)}}function xb(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Ze(e)){const l=u=>{const c=xb(u,t,!0);c&&(s=!0,gn(a,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(Ft(e)&&r.set(e,null),null):(Qe(o)?o.forEach(l=>a[l]=null):gn(a,o),Ft(e)&&r.set(e,a),a)}function Kc(e,t){return!e||!Bc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(e,t[0].toLowerCase()+t.slice(1))||Et(e,Ho(t))||Et(e,t))}function yg(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:l,render:u,renderCache:c,props:f,data:d,setupState:h,ctx:v,inheritAttrs:p}=e,g=Bu(e);let y,m;try{if(n.shapeFlag&4){const T=i||r,L=T;y=Xr(u.call(L,T,c,f,h,d,v)),m=s}else{const T=t;y=Xr(T.length>1?T(f,{attrs:s,slots:a,emit:l}):T(f,null)),m=t.props?s:QA(s)}}catch(T){Ts.length=0,Gc(T,e,1),y=sn(No)}let M=y;if(m&&p!==!1){const T=Object.keys(m),{shapeFlag:L}=M;T.length&&L&7&&(o&&T.some(gp)&&(m=eC(m,o)),M=_a(M,m,!1,!0))}return n.dirs&&(M=_a(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&Mp(M,n.transition),y=M,Bu(g),y}const QA=e=>{let t;for(const n in e)(n==="class"||n==="style"||Bc(n))&&((t||(t={}))[n]=e[n]);return t},eC=(e,t)=>{const n={};for(const r in e)(!gp(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function tC(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?mg(r,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(a[d]!==r[d]&&!Kc(u,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?mg(r,a,u):!0:!!a;return!1}function mg(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Kc(n,o))return!0}return!1}function nC({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const wb=e=>e.__isSuspense;function rC(e,t){t&&t.pendingBranch?Qe(e)?t.effects.push(...e):t.effects.push(e):cA(e)}const zn=Symbol.for("v-fgt"),Vc=Symbol.for("v-txt"),No=Symbol.for("v-cmt"),Jf=Symbol.for("v-stc"),Ts=[];let Xn=null;function Ro(e=!1){Ts.push(Xn=e?null:[])}function iC(){Ts.pop(),Xn=Ts[Ts.length-1]||null}let Zs=1;function _g(e,t=!1){Zs+=e,e<0&&Xn&&t&&(Xn.hasOnce=!0)}function Eb(e){return e.dynamicChildren=Zs>0?Xn||ha:null,iC(),Zs>0&&Xn&&Xn.push(e),e}function qc(e,t,n,r,i,o){return Eb(yt(e,t,n,r,i,o,!0))}function Yd(e,t,n,r,i){return Eb(sn(e,t,n,r,i,!0))}function Js(e){return e?e.__v_isVNode===!0:!1}function is(e,t){return e.type===t.type&&e.key===t.key}const Sb=({key:e})=>e??null,_u=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Jt(e)||Zt(e)||Ze(e)?{i:Yt,r:e,k:t,f:!!n}:e:null);function yt(e,t=null,n=null,r=0,i=null,o=e===zn?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sb(t),ref:t&&_u(t),scopeId:eb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Yt};return s?(Lp(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=Jt(n)?8:16),Zs>0&&!a&&Xn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Xn.push(l),l}const sn=oC;function oC(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===AA)&&(e=No),Js(e)){const s=_a(e,t,!0);return n&&Lp(s,n),Zs>0&&!o&&Xn&&(s.shapeFlag&6?Xn[Xn.indexOf(e)]=s:Xn.push(s)),s.patchFlag=-2,s}if(yC(e)&&(e=e.__vccOpts),t){t=aC(t);let{class:s,style:l}=t;s&&!Jt(s)&&(t.class=bp(s)),Ft(l)&&(Cp(l)&&!Qe(l)&&(l=gn({},l)),t.style=_p(l))}const a=Jt(e)?1:wb(e)?128:hA(e)?64:Ft(e)?4:Ze(e)?2:0;return yt(e,t,n,r,i,a,o,!0)}function aC(e){return e?Cp(e)||db(e)?gn({},e):e:null}function _a(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=e,u=t?lC(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Sb(u),ref:t&&t.ref?n&&o?Qe(o)?o.concat(_u(t)):[o,_u(t)]:_u(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==zn?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_a(e.ssContent),ssFallback:e.ssFallback&&_a(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Mp(c,l.clone(c)),c}function sC(e=" ",t=0){return sn(Vc,null,e,t)}function Xr(e){return e==null||typeof e=="boolean"?sn(No):Qe(e)?sn(zn,null,e.slice()):Js(e)?Ii(e):sn(Vc,null,String(e))}function Ii(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:_a(e)}function Lp(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Qe(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Lp(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!db(t)?t._ctx=Yt:i===3&&Yt&&(Yt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ze(t)?(t={default:t,_ctx:Yt},n=32):(t=String(t),r&64?(n=16,t=[sC(t)]):n=8);e.children=t,e.shapeFlag|=n}function lC(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=bp([t.class,r.class]));else if(i==="style")t.style=_p([t.style,r.style]);else if(Bc(i)){const o=t[i],a=r[i];a&&o!==a&&!(Qe(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=r[i])}return t}function $r(e,t,n,r=null){ei(e,t,7,[n,r])}const uC=lb();let cC=0;function fC(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||uC,o={uid:cC++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new TO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pb(r,i),emitsOptions:xb(r,i),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:r.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=JA.bind(null,o),e.ce&&e.ce(o),o}let Vt=null;const Ip=()=>Vt||Yt;let Hu,Kd;{const e=Wc(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};Hu=t("__VUE_INSTANCE_SETTERS__",n=>Vt=n),Kd=t("__VUE_SSR_SETTERS__",n=>Qs=n)}const Al=e=>{const t=Vt;return Hu(e),e.scope.on(),()=>{e.scope.off(),Hu(t)}},bg=()=>{Vt&&Vt.scope.off(),Hu(null)};function Ob(e){return e.vnode.shapeFlag&4}let Qs=!1;function dC(e,t=!1,n=!1){t&&Kd(t);const{props:r,children:i}=e.vnode,o=Ob(e);jA(e,r,o,t),HA(e,i,n||t);const a=o?hC(e,t):void 0;return t&&Kd(!1),a}function hC(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,MA);const{setup:r}=n;if(r){bi();const i=e.setupContext=r.length>1?vC(e):null,o=Al(e),a=El(r,e,0,[e.props,i]),s=M0(a);if(xi(),o(),(s||e.sp)&&!va(e)&&tb(e),s){if(a.then(bg,bg),t)return a.then(l=>{xg(e,l)}).catch(l=>{Gc(l,e,0)});e.asyncDep=a}else xg(e,a)}else Ab(e)}function xg(e,t,n){Ze(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ft(t)&&(e.setupState=V0(t)),Ab(e)}function Ab(e,t,n){const r=e.type;e.render||(e.render=r.render||Vr);{const i=Al(e);bi();try{PA(e)}finally{xi(),i()}}}const pC={get(e,t){return hn(e,"get",""),e[t]}};function vC(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,pC),slots:e.slots,emit:e.emit,expose:t}}function Zc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(V0(VO(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Cs)return Cs[n](e)},has(t,n){return n in t||n in Cs}})):e.proxy}function gC(e,t=!0){return Ze(e)?e.displayName||e.name:e.name||t&&e.__name}function yC(e){return Ze(e)&&"__vccOpts"in e}const qt=(e,t)=>oA(e,t,Qs);function Wu(e,t,n){const r=arguments.length;return r===2?Ft(t)&&!Qe(t)?Js(t)?sn(e,null,[t]):sn(e,t):sn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Js(n)&&(n=[n]),sn(e,t,n))}const mC="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vd;const wg=typeof window<"u"&&window.trustedTypes;if(wg)try{Vd=wg.createPolicy("vue",{createHTML:e=>e})}catch{}const Cb=Vd?e=>Vd.createHTML(e):e=>e,_C="http://www.w3.org/2000/svg",bC="http://www.w3.org/1998/Math/MathML",fi=typeof document<"u"?document:null,Eg=fi&&fi.createElement("template"),xC={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?fi.createElementNS(_C,e):t==="mathml"?fi.createElementNS(bC,e):n?fi.createElement(e,{is:n}):fi.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>fi.createTextNode(e),createComment:e=>fi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>fi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Eg.innerHTML=Cb(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=Eg.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},wC=Symbol("_vtc");function EC(e,t,n){const r=e[wC];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Sg=Symbol("_vod"),SC=Symbol("_vsh"),OC=Symbol(""),AC=/(^|;)\s*display\s*:/;function CC(e,t,n){const r=e.style,i=Jt(n);let o=!1;if(n&&!i){if(t)if(Jt(t))for(const a of t.split(";")){const s=a.slice(0,a.indexOf(":")).trim();n[s]==null&&bu(r,s,"")}else for(const a in t)n[a]==null&&bu(r,a,"");for(const a in n)a==="display"&&(o=!0),bu(r,a,n[a])}else if(i){if(t!==n){const a=r[OC];a&&(n+=";"+a),r.cssText=n,o=AC.test(n)}}else t&&e.removeAttribute("style");Sg in e&&(e[Sg]=o?r.display:"",e[SC]&&(r.display="none"))}const Og=/\s*!important$/;function bu(e,t,n){if(Qe(n))n.forEach(r=>bu(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=TC(e,t);Og.test(n)?e.setProperty(Ho(r),n.replace(Og,""),"important"):e[r]=n}}const Ag=["Webkit","Moz","ms"],Qf={};function TC(e,t){const n=Qf[t];if(n)return n;let r=fr(t);if(r!=="filter"&&r in e)return Qf[t]=r;r=Hc(r);for(let i=0;i<Ag.length;i++){const o=Ag[i]+r;if(o in e)return Qf[t]=o}return t}const Cg="http://www.w3.org/1999/xlink";function Tg(e,t,n,r,i,o=CO(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Cg,t.slice(6,t.length)):e.setAttributeNS(Cg,t,n):n==null||o&&!N0(n)?e.removeAttribute(t):e.setAttribute(t,o?"":$o(n)?String(n):n)}function Mg(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Cb(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const s=o==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(s!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=N0(n):n==null&&s==="string"?(n="",a=!0):s==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(i||t)}function oa(e,t,n,r){e.addEventListener(t,n,r)}function MC(e,t,n,r){e.removeEventListener(t,n,r)}const Pg=Symbol("_vei");function PC(e,t,n,r,i=null){const o=e[Pg]||(e[Pg]={}),a=o[t];if(r&&a)a.value=r;else{const[s,l]=NC(t);if(r){const u=o[t]=LC(r,i);oa(e,s,u,l)}else a&&(MC(e,s,a,l),o[t]=void 0)}}const Ng=/(?:Once|Passive|Capture)$/;function NC(e){let t;if(Ng.test(e)){t={};let r;for(;r=e.match(Ng);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ho(e.slice(2)),t]}let ed=0;const RC=Promise.resolve(),DC=()=>ed||(RC.then(()=>ed=0),ed=Date.now());function LC(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ei(IC(r,n.value),t,5,[r])};return n.value=e,n.attached=DC(),n}function IC(e,t){if(Qe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Rg=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,kC=(e,t,n,r,i,o)=>{const a=i==="svg";t==="class"?EC(e,r,a):t==="style"?CC(e,n,r):Bc(t)?gp(t)||PC(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jC(e,t,r,a))?(Mg(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Tg(e,t,r,a,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Jt(r))?Mg(e,fr(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Tg(e,t,r,a))};function jC(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Rg(t)&&Ze(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Rg(t)&&Jt(n)?!1:t in e}const Dg=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qe(t)?n=>yu(t,n):t};function BC(e){e.target.composing=!0}function Lg(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const td=Symbol("_assign"),Ig={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[td]=Dg(i);const o=r||i.props&&i.props.type==="number";oa(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;n&&(s=s.trim()),o&&(s=Bd(s)),e[td](s)}),n&&oa(e,"change",()=>{e.value=e.value.trim()}),t||(oa(e,"compositionstart",BC),oa(e,"compositionend",Lg),oa(e,"change",Lg))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},a){if(e[td]=Dg(a),e.composing)return;const s=(o||e.type==="number")&&!/^0\d/.test(e.value)?Bd(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===l)||(e.value=l))}},FC=["ctrl","shift","alt","meta"],$C={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>FC.some(n=>e[`${n}Key`]&&!t.includes(n))},HC=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let a=0;a<t.length;a++){const s=$C[t[a]];if(s&&s(i,t))return}return e(i,...o)})},WC=gn({patchProp:kC},xC);let kg;function zC(){return kg||(kg=zA(WC))}const UC=(...e)=>{const t=zC().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=GC(r);if(!i)return;const o=t._component;!Ze(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,XC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function XC(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function GC(e){return Jt(e)?document.querySelector(e):e}const Jc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},YC={};function KC(e,t){const n=ib("router-view");return Ro(),Yd(n)}const VC=Jc(YC,[["render",KC]]),qC="modulepreload",ZC=function(e){return"/"+e},jg={},JC=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=a(n.map(u=>{if(u=ZC(u),u in jg)return;jg[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":qC,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((h,v)=>{d.addEventListener("load",h),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const aa=typeof document<"u";function Tb(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function QC(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Tb(e.default)}const wt=Object.assign;function nd(e,t){const n={};for(const r in t){const i=t[r];n[r]=Ir(i)?i.map(e):e(i)}return n}const Ms=()=>{},Ir=Array.isArray,Mb=/#/g,e1=/&/g,t1=/\//g,n1=/=/g,r1=/\?/g,Pb=/\+/g,i1=/%5B/g,o1=/%5D/g,Nb=/%5E/g,a1=/%60/g,Rb=/%7B/g,s1=/%7C/g,Db=/%7D/g,l1=/%20/g;function kp(e){return encodeURI(""+e).replace(s1,"|").replace(i1,"[").replace(o1,"]")}function u1(e){return kp(e).replace(Rb,"{").replace(Db,"}").replace(Nb,"^")}function qd(e){return kp(e).replace(Pb,"%2B").replace(l1,"+").replace(Mb,"%23").replace(e1,"%26").replace(a1,"`").replace(Rb,"{").replace(Db,"}").replace(Nb,"^")}function c1(e){return qd(e).replace(n1,"%3D")}function f1(e){return kp(e).replace(Mb,"%23").replace(r1,"%3F")}function d1(e){return e==null?"":f1(e).replace(t1,"%2F")}function el(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const h1=/\/$/,p1=e=>e.replace(h1,"");function rd(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=m1(r??t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:el(a)}}function v1(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Bg(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function g1(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ba(t.matched[r],n.matched[i])&&Lb(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ba(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Lb(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!y1(e[n],t[n]))return!1;return!0}function y1(e,t){return Ir(e)?Fg(e,t):Ir(t)?Fg(t,e):e===t}function Fg(e,t){return Ir(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function m1(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],s!==".")if(s==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(a).join("/")}const Ri={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var tl;(function(e){e.pop="pop",e.push="push"})(tl||(tl={}));var Ps;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ps||(Ps={}));function _1(e){if(!e)if(aa){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),p1(e)}const b1=/^[^#]+#/;function x1(e,t){return e.replace(b1,"#")+t}function w1(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Qc=()=>({left:window.scrollX,top:window.scrollY});function E1(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=w1(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function $g(e,t){return(history.state?history.state.position-t:-1)+e}const Zd=new Map;function S1(e,t){Zd.set(e,t)}function O1(e){const t=Zd.get(e);return Zd.delete(e),t}let A1=()=>location.protocol+"//"+location.host;function Ib(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),Bg(l,"")}return Bg(n,e)+r+i}function C1(e,t,n,r){let i=[],o=[],a=null;const s=({state:d})=>{const h=Ib(e,location),v=n.value,p=t.value;let g=0;if(d){if(n.value=h,t.value=d,a&&a===v){a=null;return}g=p?d.position-p.position:0}else r(h);i.forEach(y=>{y(n.value,v,{delta:g,type:tl.pop,direction:g?g>0?Ps.forward:Ps.back:Ps.unknown})})};function l(){a=n.value}function u(d){i.push(d);const h=()=>{const v=i.indexOf(d);v>-1&&i.splice(v,1)};return o.push(h),h}function c(){const{history:d}=window;d.state&&d.replaceState(wt({},d.state,{scroll:Qc()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function Hg(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Qc():null}}function T1(e){const{history:t,location:n}=window,r={value:Ib(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:A1()+e+l;try{t[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),n[c?"replace":"assign"](d)}}function a(l,u){const c=wt({},t.state,Hg(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),r.value=l}function s(l,u){const c=wt({},i.value,t.state,{forward:l,scroll:Qc()});o(c.current,c,!0);const f=wt({},Hg(r.value,l,null),{position:c.position+1},u);o(l,f,!1),r.value=l}return{location:r,state:i,push:s,replace:a}}function M1(e){e=_1(e);const t=T1(e),n=C1(e,t.state,t.location,t.replace);function r(o,a=!0){a||n.pauseListeners(),history.go(o)}const i=wt({location:"",base:e,go:r,createHref:x1.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function P1(e){return typeof e=="string"||e&&typeof e=="object"}function kb(e){return typeof e=="string"||typeof e=="symbol"}const jb=Symbol("");var Wg;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Wg||(Wg={}));function xa(e,t){return wt(new Error,{type:e,[jb]:!0},t)}function ci(e,t){return e instanceof Error&&jb in e&&(t==null||!!(e.type&t))}const zg="[^/]+?",N1={sensitive:!1,strict:!1,start:!0,end:!0},R1=/[.+*?^${}()[\]/\\]/g;function D1(e,t){const n=wt({},N1,t),r=[];let i=n.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(R1,"\\$&"),h+=40;else if(d.type===1){const{value:v,repeatable:p,optional:g,regexp:y}=d;o.push({name:v,repeatable:p,optional:g});const m=y||zg;if(m!==zg){h+=10;try{new RegExp(`(${m})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${v}" (${m}): `+T.message)}}let M=p?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(M=g&&u.length<2?`(?:/${M})`:"/"+M),g&&(M+="?"),i+=M,h+=20,g&&(h+=-8),p&&(h+=-20),m===".*"&&(h+=-50)}c.push(h)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let d=1;d<c.length;d++){const h=c[d]||"",v=o[d-1];f[v.name]=h&&v.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const d of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of d)if(h.type===0)c+=h.value;else if(h.type===1){const{value:v,repeatable:p,optional:g}=h,y=v in u?u[v]:"";if(Ir(y)&&!p)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const m=Ir(y)?y.join("/"):y;if(!m)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);c+=m}}return c||"/"}return{re:a,score:r,keys:o,parse:s,stringify:l}}function L1(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Bb(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=L1(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(Ug(r))return 1;if(Ug(i))return-1}return i.length-r.length}function Ug(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const I1={type:0,value:""},k1=/[a-zA-Z0-9_]/;function j1(e){if(!e)return[[]];if(e==="/")return[[I1]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){u&&(n===0?o.push({type:0,value:u}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:k1.test(l)?d():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function B1(e,t,n){const r=D1(j1(e.path),n),i=wt(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function F1(e,t){const n=[],r=new Map;t=Kg({strict:!1,end:!0,sensitive:!1},t);function i(f){return r.get(f)}function o(f,d,h){const v=!h,p=Gg(f);p.aliasOf=h&&h.record;const g=Kg(t,f),y=[p];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const L of T)y.push(Gg(wt({},p,{components:h?h.record.components:p.components,path:L,aliasOf:h?h.record:p})))}let m,M;for(const T of y){const{path:L}=T;if(d&&L[0]!=="/"){const N=d.record.path,E=N[N.length-1]==="/"?"":"/";T.path=d.record.path+(L&&E+L)}if(m=B1(T,d,g),h?h.alias.push(m):(M=M||m,M!==m&&M.alias.push(m),v&&f.name&&!Yg(m)&&a(f.name)),Fb(m)&&l(m),p.children){const N=p.children;for(let E=0;E<N.length;E++)o(N[E],m,h&&h.children[E])}h=h||m}return M?()=>{a(M)}:Ms}function a(f){if(kb(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function s(){return n}function l(f){const d=W1(f,n);n.splice(d,0,f),f.record.name&&!Yg(f)&&r.set(f.record.name,f)}function u(f,d){let h,v={},p,g;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw xa(1,{location:f});g=h.record.name,v=wt(Xg(d.params,h.keys.filter(M=>!M.optional).concat(h.parent?h.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),f.params&&Xg(f.params,h.keys.map(M=>M.name))),p=h.stringify(v)}else if(f.path!=null)p=f.path,h=n.find(M=>M.re.test(p)),h&&(v=h.parse(p),g=h.record.name);else{if(h=d.name?r.get(d.name):n.find(M=>M.re.test(d.path)),!h)throw xa(1,{location:f,currentLocation:d});g=h.record.name,v=wt({},d.params,f.params),p=h.stringify(v)}const y=[];let m=h;for(;m;)y.unshift(m.record),m=m.parent;return{name:g,path:p,params:v,matched:y,meta:H1(y)}}e.forEach(f=>o(f));function c(){n.length=0,r.clear()}return{addRoute:o,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:s,getRecordMatcher:i}}function Xg(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Gg(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:$1(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function $1(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Yg(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function H1(e){return e.reduce((t,n)=>wt(t,n.meta),{})}function Kg(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function W1(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;Bb(e,t[o])<0?r=o:n=o+1}const i=z1(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function z1(e){let t=e;for(;t=t.parent;)if(Fb(t)&&Bb(e,t)===0)return t}function Fb({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function U1(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Pb," "),a=o.indexOf("="),s=el(a<0?o:o.slice(0,a)),l=a<0?null:el(o.slice(a+1));if(s in t){let u=t[s];Ir(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function Vg(e){let t="";for(let n in e){const r=e[n];if(n=c1(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ir(r)?r.map(o=>o&&qd(o)):[r&&qd(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function X1(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ir(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const G1=Symbol(""),qg=Symbol(""),ef=Symbol(""),$b=Symbol(""),Jd=Symbol("");function os(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ki(e,t,n,r,i,o=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const u=d=>{d===!1?l(xa(4,{from:n,to:t})):d instanceof Error?l(d):P1(d)?l(xa(2,{from:t,to:d})):(a&&r.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),s())},c=o(()=>e.call(r&&r.instances[i],t,n,u));let f=Promise.resolve(c);e.length<3&&(f=f.then(u)),f.catch(d=>l(d))})}function id(e,t,n,r,i=o=>o()){const o=[];for(const a of e)for(const s in a.components){let l=a.components[s];if(!(t!=="beforeRouteEnter"&&!a.instances[s]))if(Tb(l)){const c=(l.__vccOpts||l)[t];c&&o.push(ki(c,n,r,a,s,i))}else{let u=l();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${a.path}"`);const f=QC(c)?c.default:c;a.mods[s]=c,a.components[s]=f;const h=(f.__vccOpts||f)[t];return h&&ki(h,n,r,a,s,i)()}))}}return o}function Zg(e){const t=Mr(ef),n=Mr($b),r=qt(()=>{const l=Gn(e.to);return t.resolve(l)}),i=qt(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const d=f.findIndex(ba.bind(null,c));if(d>-1)return d;const h=Jg(l[u-2]);return u>1&&Jg(c)===h&&f[f.length-1].path!==h?f.findIndex(ba.bind(null,l[u-2])):d}),o=qt(()=>i.value>-1&&Z1(n.params,r.value.params)),a=qt(()=>i.value>-1&&i.value===n.matched.length-1&&Lb(n.params,r.value.params));function s(l={}){if(q1(l)){const u=t[Gn(e.replace)?"replace":"push"](Gn(e.to)).catch(Ms);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:qt(()=>r.value.href),isActive:o,isExactActive:a,navigate:s}}function Y1(e){return e.length===1?e[0]:e}const K1=ka({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Zg,setup(e,{slots:t}){const n=Uc(Zg(e)),{options:r}=Mr(ef),i=qt(()=>({[Qg(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qg(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&Y1(t.default(n));return e.custom?o:Wu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),V1=K1;function q1(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Z1(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Ir(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function Jg(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qg=(e,t,n)=>e??t??n,J1=ka({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Mr(Jd),i=qt(()=>e.route||r.value),o=Mr(qg,0),a=qt(()=>{let u=Gn(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=qt(()=>i.value.matched[a.value]);mu(qg,qt(()=>a.value+1)),mu(G1,s),mu(Jd,i);const l=qr();return mi(()=>[l.value,s.value,e.name],([u,c,f],[d,h,v])=>{c&&(c.instances[f]=u,h&&h!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!ba(c,h)||!d)&&(c.enterCallbacks[f]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,d=f&&f.components[c];if(!d)return ey(n.default,{Component:d,route:u});const h=f.props[c],v=h?h===!0?u.params:typeof h=="function"?h(u):h:null,g=Wu(d,wt({},v,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return ey(n.default,{Component:g,route:u})||g}}});function ey(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Q1=J1;function eT(e){const t=F1(e.routes,e),n=e.parseQuery||U1,r=e.stringifyQuery||Vg,i=e.history,o=os(),a=os(),s=os(),l=Oo(Ri);let u=Ri;aa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=nd.bind(null,D=>""+D),f=nd.bind(null,d1),d=nd.bind(null,el);function h(D,F){let U,Q;return kb(D)?(U=t.getRecordMatcher(D),Q=F):Q=D,t.addRoute(Q,U)}function v(D){const F=t.getRecordMatcher(D);F&&t.removeRoute(F)}function p(){return t.getRoutes().map(D=>D.record)}function g(D){return!!t.getRecordMatcher(D)}function y(D,F){if(F=wt({},F||l.value),typeof D=="string"){const $=rd(n,D,F.path),ee=t.resolve({path:$.path},F),J=i.createHref($.fullPath);return wt($,ee,{params:d(ee.params),hash:el($.hash),redirectedFrom:void 0,href:J})}let U;if(D.path!=null)U=wt({},D,{path:rd(n,D.path,F.path).path});else{const $=wt({},D.params);for(const ee in $)$[ee]==null&&delete $[ee];U=wt({},D,{params:f($)}),F.params=f(F.params)}const Q=t.resolve(U,F),de=D.hash||"";Q.params=c(d(Q.params));const A=v1(r,wt({},D,{hash:u1(de),path:Q.path})),R=i.createHref(A);return wt({fullPath:A,hash:de,query:r===Vg?X1(D.query):D.query||{}},Q,{redirectedFrom:void 0,href:R})}function m(D){return typeof D=="string"?rd(n,D,l.value.path):wt({},D)}function M(D,F){if(u!==D)return xa(8,{from:F,to:D})}function T(D){return E(D)}function L(D){return T(wt(m(D),{replace:!0}))}function N(D){const F=D.matched[D.matched.length-1];if(F&&F.redirect){const{redirect:U}=F;let Q=typeof U=="function"?U(D):U;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=m(Q):{path:Q},Q.params={}),wt({query:D.query,hash:D.hash,params:Q.path!=null?{}:D.params},Q)}}function E(D,F){const U=u=y(D),Q=l.value,de=D.state,A=D.force,R=D.replace===!0,$=N(U);if($)return E(wt(m($),{state:typeof $=="object"?wt({},de,$.state):de,force:A,replace:R}),F||U);const ee=U;ee.redirectedFrom=F;let J;return!A&&g1(r,Q,U)&&(J=xa(16,{to:ee,from:Q}),xe(Q,Q,!0,!1)),(J?Promise.resolve(J):ie(ee,Q)).catch(re=>ci(re)?ci(re,2)?re:et(re):ve(re,ee,Q)).then(re=>{if(re){if(ci(re,2))return E(wt({replace:R},m(re.to),{state:typeof re.to=="object"?wt({},de,re.to.state):de,force:A}),F||ee)}else re=pe(ee,Q,!0,R,de);return se(ee,Q,re),re})}function k(D,F){const U=M(D,F);return U?Promise.reject(U):Promise.resolve()}function Y(D){const F=Pe.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(D):D()}function ie(D,F){let U;const[Q,de,A]=tT(D,F);U=id(Q.reverse(),"beforeRouteLeave",D,F);for(const $ of Q)$.leaveGuards.forEach(ee=>{U.push(ki(ee,D,F))});const R=k.bind(null,D,F);return U.push(R),B(U).then(()=>{U=[];for(const $ of o.list())U.push(ki($,D,F));return U.push(R),B(U)}).then(()=>{U=id(de,"beforeRouteUpdate",D,F);for(const $ of de)$.updateGuards.forEach(ee=>{U.push(ki(ee,D,F))});return U.push(R),B(U)}).then(()=>{U=[];for(const $ of A)if($.beforeEnter)if(Ir($.beforeEnter))for(const ee of $.beforeEnter)U.push(ki(ee,D,F));else U.push(ki($.beforeEnter,D,F));return U.push(R),B(U)}).then(()=>(D.matched.forEach($=>$.enterCallbacks={}),U=id(A,"beforeRouteEnter",D,F,Y),U.push(R),B(U))).then(()=>{U=[];for(const $ of a.list())U.push(ki($,D,F));return U.push(R),B(U)}).catch($=>ci($,8)?$:Promise.reject($))}function se(D,F,U){s.list().forEach(Q=>Y(()=>Q(D,F,U)))}function pe(D,F,U,Q,de){const A=M(D,F);if(A)return A;const R=F===Ri,$=aa?history.state:{};U&&(Q||R?i.replace(D.fullPath,wt({scroll:R&&$&&$.scroll},de)):i.push(D.fullPath,de)),l.value=D,xe(D,F,U,R),et()}let O;function I(){O||(O=i.listen((D,F,U)=>{if(!Xe.listening)return;const Q=y(D),de=N(Q);if(de){E(wt(de,{replace:!0,force:!0}),Q).catch(Ms);return}u=Q;const A=l.value;aa&&S1($g(A.fullPath,U.delta),Qc()),ie(Q,A).catch(R=>ci(R,12)?R:ci(R,2)?(E(wt(m(R.to),{force:!0}),Q).then($=>{ci($,20)&&!U.delta&&U.type===tl.pop&&i.go(-1,!1)}).catch(Ms),Promise.reject()):(U.delta&&i.go(-U.delta,!1),ve(R,Q,A))).then(R=>{R=R||pe(Q,A,!1),R&&(U.delta&&!ci(R,8)?i.go(-U.delta,!1):U.type===tl.pop&&ci(R,20)&&i.go(-1,!1)),se(Q,A,R)}).catch(Ms)}))}let j=os(),te=os(),fe;function ve(D,F,U){et(D);const Q=te.list();return Q.length?Q.forEach(de=>de(D,F,U)):console.error(D),Promise.reject(D)}function Je(){return fe&&l.value!==Ri?Promise.resolve():new Promise((D,F)=>{j.add([D,F])})}function et(D){return fe||(fe=!D,I(),j.list().forEach(([F,U])=>D?U(D):F()),j.reset()),D}function xe(D,F,U,Q){const{scrollBehavior:de}=e;if(!aa||!de)return Promise.resolve();const A=!U&&O1($g(D.fullPath,0))||(Q||!U)&&history.state&&history.state.scroll||null;return Sl().then(()=>de(D,F,A)).then(R=>R&&E1(R)).catch(R=>ve(R,D,F))}const Me=D=>i.go(D);let He;const Pe=new Set,Xe={currentRoute:l,listening:!0,addRoute:h,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:p,resolve:y,options:e,push:T,replace:L,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:te.add,isReady:Je,install(D){const F=this;D.component("RouterLink",V1),D.component("RouterView",Q1),D.config.globalProperties.$router=F,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Gn(l)}),aa&&!He&&l.value===Ri&&(He=!0,T(i.location).catch(de=>{}));const U={};for(const de in Ri)Object.defineProperty(U,de,{get:()=>l.value[de],enumerable:!0});D.provide(ef,F),D.provide($b,Y0(U)),D.provide(Jd,l);const Q=D.unmount;Pe.add(D),D.unmount=function(){Pe.delete(D),Pe.size<1&&(u=Ri,O&&O(),O=null,l.value=Ri,He=!1,fe=!1),Q()}}};function B(D){return D.reduce((F,U)=>F.then(()=>Y(U)),Promise.resolve())}return Xe}function tT(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>ba(u,s))?r.push(s):n.push(s));const l=e.matched[a];l&&(t.matched.find(u=>ba(u,l))||i.push(l))}return[n,r,i]}function nT(){return Mr(ef)}const rT={};function iT(e,t){return Ro(),qc("h1",null,"Home")}const ty=Jc(rT,[["render",iT]]),Hb=/^[a-z0-9]+(-[a-z0-9]+)*$/,tf=(e,t,n,r="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const s=i.pop(),l=i.pop(),u={provider:i.length>0?i[0]:r,prefix:l,name:s};return t&&!xu(u)?null:u}const o=i[0],a=o.split("-");if(a.length>1){const s={provider:r,prefix:a.shift(),name:a.join("-")};return t&&!xu(s)?null:s}if(n&&r===""){const s={provider:r,prefix:"",name:o};return t&&!xu(s,n)?null:s}return null},xu=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1,Wb=Object.freeze({left:0,top:0,width:16,height:16}),zu=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),nf=Object.freeze({...Wb,...zu}),Qd=Object.freeze({...nf,body:"",hidden:!1});function oT(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function ny(e,t){const n=oT(e,t);for(const r in Qd)r in zu?r in e&&!(r in n)&&(n[r]=zu[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function aT(e,t){const n=e.icons,r=e.aliases||Object.create(null),i=Object.create(null);function o(a){if(n[a])return i[a]=[];if(!(a in i)){i[a]=null;const s=r[a]&&r[a].parent,l=s&&o(s);l&&(i[a]=[s].concat(l))}return i[a]}return Object.keys(n).concat(Object.keys(r)).forEach(o),i}function sT(e,t,n){const r=e.icons,i=e.aliases||Object.create(null);let o={};function a(s){o=ny(r[s]||i[s],o)}return a(t),n.forEach(a),ny(e,o)}function zb(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(i=>{t(i,null),n.push(i)});const r=aT(e);for(const i in r){const o=r[i];o&&(t(i,sT(e,i,o)),n.push(i))}return n}const lT={provider:"",aliases:{},not_found:{},...Wb};function od(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function Ub(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!od(e,lT))return null;const n=t.icons;for(const i in n){const o=n[i];if(!i||typeof o.body!="string"||!od(o,Qd))return null}const r=t.aliases||Object.create(null);for(const i in r){const o=r[i],a=o.parent;if(!i||typeof a!="string"||!n[a]&&!r[a]||!od(o,Qd))return null}return t}const ry=Object.create(null);function uT(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function wa(e,t){const n=ry[e]||(ry[e]=Object.create(null));return n[t]||(n[t]=uT(e,t))}function Xb(e,t){return Ub(t)?zb(t,(n,r)=>{r?e.icons[n]=r:e.missing.add(n)}):[]}function cT(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let nl=!1;function Gb(e){return typeof e=="boolean"&&(nl=e),nl}function fT(e){const t=typeof e=="string"?tf(e,!0,nl):e;if(t){const n=wa(t.provider,t.prefix),r=t.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function dT(e,t){const n=tf(e,!0,nl);if(!n)return!1;const r=wa(n.provider,n.prefix);return t?cT(r,n.name,t):(r.missing.add(n.name),!0)}function hT(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),nl&&!t&&!e.prefix){let i=!1;return Ub(e)&&(e.prefix="",zb(e,(o,a)=>{dT(o,a)&&(i=!0)})),i}const n=e.prefix;if(!xu({prefix:n,name:"a"}))return!1;const r=wa(t,n);return!!Xb(r,e)}const Yb=Object.freeze({width:null,height:null}),Kb=Object.freeze({...Yb,...zu}),pT=/(-?[0-9.]*[0-9]+[0-9.]*)/g,vT=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function iy(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(pT);if(r===null||!r.length)return e;const i=[];let o=r.shift(),a=vT.test(o);for(;;){if(a){const s=parseFloat(o);isNaN(s)?i.push(o):i.push(Math.ceil(s*t*n)/n)}else i.push(o);if(o=r.shift(),o===void 0)return i.join("");a=!a}}function gT(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const i=e.indexOf(">",r),o=e.indexOf("</"+t);if(i===-1||o===-1)break;const a=e.indexOf(">",o);if(a===-1)break;n+=e.slice(i+1,o).trim(),e=e.slice(0,r).trim()+e.slice(a+1)}return{defs:n,content:e}}function yT(e,t){return e?"<defs>"+e+"</defs>"+t:t}function mT(e,t,n){const r=gT(e);return yT(r.defs,t+r.content+n)}const _T=e=>e==="unset"||e==="undefined"||e==="none";function bT(e,t){const n={...nf,...e},r={...Kb,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,r].forEach(p=>{const g=[],y=p.hFlip,m=p.vFlip;let M=p.rotate;y?m?M+=2:(g.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),g.push("scale(-1 1)"),i.top=i.left=0):m&&(g.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),g.push("scale(1 -1)"),i.top=i.left=0);let T;switch(M<0&&(M-=Math.floor(M/4)*4),M=M%4,M){case 1:T=i.height/2+i.top,g.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:g.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:T=i.width/2+i.left,g.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}M%2===1&&(i.left!==i.top&&(T=i.left,i.left=i.top,i.top=T),i.width!==i.height&&(T=i.width,i.width=i.height,i.height=T)),g.length&&(o=mT(o,'<g transform="'+g.join(" ")+'">',"</g>"))});const a=r.width,s=r.height,l=i.width,u=i.height;let c,f;a===null?(f=s===null?"1em":s==="auto"?u:s,c=iy(f,l/u)):(c=a==="auto"?l:a,f=s===null?iy(c,u/l):s==="auto"?u:s);const d={},h=(p,g)=>{_T(g)||(d[p]=g.toString())};h("width",c),h("height",f);const v=[i.left,i.top,l,u];return d.viewBox=v.join(" "),{attributes:d,viewBox:v,body:o}}const xT=/\sid="(\S+)"/g,wT="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let ET=0;function ST(e,t=wT){const n=[];let r;for(;r=xT.exec(e);)n.push(r[1]);if(!n.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const a=typeof t=="function"?t(o):t+(ET++).toString(),s=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+a+i+"$3")}),e=e.replace(new RegExp(i,"g"),""),e}const eh=Object.create(null);function OT(e,t){eh[e]=t}function th(e){return eh[e]||eh[""]}function jp(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const Bp=Object.create(null),as=["https://api.simplesvg.com","https://api.unisvg.com"],wu=[];for(;as.length>0;)as.length===1||Math.random()>.5?wu.push(as.shift()):wu.push(as.pop());Bp[""]=jp({resources:["https://api.iconify.design"].concat(wu)});function AT(e,t){const n=jp(t);return n===null?!1:(Bp[e]=n,!0)}function Fp(e){return Bp[e]}const CT=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let oy=CT();function TT(e,t){const n=Fp(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let i=0;n.resources.forEach(a=>{i=Math.max(i,a.length)});const o=t+".json?icons=";r=n.maxURL-i-n.path.length-o.length}return r}function MT(e){return e===404}const PT=(e,t,n)=>{const r=[],i=TT(e,t),o="icons";let a={type:o,provider:e,prefix:t,icons:[]},s=0;return n.forEach((l,u)=>{s+=l.length+1,s>=i&&u>0&&(r.push(a),a={type:o,provider:e,prefix:t,icons:[]},s=l.length),a.icons.push(l)}),r.push(a),r};function NT(e){if(typeof e=="string"){const t=Fp(e);if(t)return t.path}return"/"}const RT=(e,t,n)=>{if(!oy){n("abort",424);return}let r=NT(t.provider);switch(t.type){case"icons":{const o=t.prefix,s=t.icons.join(","),l=new URLSearchParams({icons:s});r+=o+".json?"+l.toString();break}case"custom":{const o=t.uri;r+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let i=503;oy(e+r).then(o=>{const a=o.status;if(a!==200){setTimeout(()=>{n(MT(a)?"abort":"next",a)});return}return i=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",i)});return}setTimeout(()=>{n("success",o)})}).catch(()=>{n("next",i)})},DT={prepare:PT,send:RT};function LT(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((i,o)=>i.provider!==o.provider?i.provider.localeCompare(o.provider):i.prefix!==o.prefix?i.prefix.localeCompare(o.prefix):i.name.localeCompare(o.name));let r={provider:"",prefix:"",name:""};return e.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const o=i.provider,a=i.prefix,s=i.name,l=n[o]||(n[o]=Object.create(null)),u=l[a]||(l[a]=wa(o,a));let c;s in u.icons?c=t.loaded:a===""||u.missing.has(s)?c=t.missing:c=t.pending;const f={provider:o,prefix:a,name:s};c.push(f)}),t}function Vb(e,t){e.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(i=>i.id!==t))})}function IT(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const r=e.provider,i=e.prefix;t.forEach(o=>{const a=o.icons,s=a.pending.length;a.pending=a.pending.filter(l=>{if(l.prefix!==i)return!0;const u=l.name;if(e.icons[u])a.loaded.push({provider:r,prefix:i,name:u});else if(e.missing.has(u))a.missing.push({provider:r,prefix:i,name:u});else return n=!0,!0;return!1}),a.pending.length!==s&&(n||Vb([e],o.id),o.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),o.abort))})}))}let kT=0;function jT(e,t,n){const r=kT++,i=Vb.bind(null,n,r);if(!t.pending.length)return i;const o={id:r,icons:t,callback:e,abort:i};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(o)}),i}function BT(e,t=!0,n=!1){const r=[];return e.forEach(i=>{const o=typeof i=="string"?tf(i,t,n):i;o&&r.push(o)}),r}var FT={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $T(e,t,n,r){const i=e.resources.length,o=e.random?Math.floor(Math.random()*i):e.index;let a;if(e.random){let N=e.resources.slice(0);for(a=[];N.length>1;){const E=Math.floor(Math.random()*N.length);a.push(N[E]),N=N.slice(0,E).concat(N.slice(E+1))}a=a.concat(N)}else a=e.resources.slice(o).concat(e.resources.slice(0,o));const s=Date.now();let l="pending",u=0,c,f=null,d=[],h=[];typeof r=="function"&&h.push(r);function v(){f&&(clearTimeout(f),f=null)}function p(){l==="pending"&&(l="aborted"),v(),d.forEach(N=>{N.status==="pending"&&(N.status="aborted")}),d=[]}function g(N,E){E&&(h=[]),typeof N=="function"&&h.push(N)}function y(){return{startTime:s,payload:t,status:l,queriesSent:u,queriesPending:d.length,subscribe:g,abort:p}}function m(){l="failed",h.forEach(N=>{N(void 0,c)})}function M(){d.forEach(N=>{N.status==="pending"&&(N.status="aborted")}),d=[]}function T(N,E,k){const Y=E!=="success";switch(d=d.filter(ie=>ie!==N),l){case"pending":break;case"failed":if(Y||!e.dataAfterTimeout)return;break;default:return}if(E==="abort"){c=k,m();return}if(Y){c=k,d.length||(a.length?L():m());return}if(v(),M(),!e.random){const ie=e.resources.indexOf(N.resource);ie!==-1&&ie!==e.index&&(e.index=ie)}l="completed",h.forEach(ie=>{ie(k)})}function L(){if(l!=="pending")return;v();const N=a.shift();if(N===void 0){if(d.length){f=setTimeout(()=>{v(),l==="pending"&&(M(),m())},e.timeout);return}m();return}const E={status:"pending",resource:N,callback:(k,Y)=>{T(E,k,Y)}};d.push(E),u++,f=setTimeout(L,e.rotate),n(N,t,E.callback)}return setTimeout(L),y}function qb(e){const t={...FT,...e};let n=[];function r(){n=n.filter(s=>s().status==="pending")}function i(s,l,u){const c=$T(t,s,l,(f,d)=>{r(),u&&u(f,d)});return n.push(c),c}function o(s){return n.find(l=>s(l))||null}return{query:i,find:o,setIndex:s=>{t.index=s},getIndex:()=>t.index,cleanup:r}}function ay(){}const ad=Object.create(null);function HT(e){if(!ad[e]){const t=Fp(e);if(!t)return;const n=qb(t),r={config:t,redundancy:n};ad[e]=r}return ad[e]}function WT(e,t,n){let r,i;if(typeof e=="string"){const o=th(e);if(!o)return n(void 0,424),ay;i=o.send;const a=HT(e);a&&(r=a.redundancy)}else{const o=jp(e);if(o){r=qb(o);const a=e.resources?e.resources[0]:"",s=th(a);s&&(i=s.send)}}return!r||!i?(n(void 0,424),ay):r.query(t,i,n)().abort}function sy(){}function zT(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,IT(e)}))}function UT(e){const t=[],n=[];return e.forEach(r=>{(r.match(Hb)?t:n).push(r)}),{valid:t,invalid:n}}function ss(e,t,n){function r(){const i=e.pendingIcons;t.forEach(o=>{i&&i.delete(o),e.icons[o]||e.missing.add(o)})}if(n&&typeof n=="object")try{if(!Xb(e,n).length){r();return}}catch(i){console.error(i)}r(),zT(e)}function ly(e,t){e instanceof Promise?e.then(n=>{t(n)}).catch(()=>{t(null)}):t(e)}function XT(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:r}=e,i=e.iconsToLoad;if(delete e.iconsToLoad,!i||!i.length)return;const o=e.loadIcon;if(e.loadIcons&&(i.length>1||!o)){ly(e.loadIcons(i,r,n),c=>{ss(e,i,c)});return}if(o){i.forEach(c=>{const f=o(c,r,n);ly(f,d=>{const h=d?{prefix:r,icons:{[c]:d}}:null;ss(e,[c],h)})});return}const{valid:a,invalid:s}=UT(i);if(s.length&&ss(e,s,null),!a.length)return;const l=r.match(Hb)?th(n):null;if(!l){ss(e,a,null);return}l.prepare(n,r,a).forEach(c=>{WT(n,c,f=>{ss(e,c.icons,f)})})}))}const GT=(e,t)=>{const n=BT(e,!0,Gb()),r=LT(n);if(!r.pending.length){let l=!0;return t&&setTimeout(()=>{l&&t(r.loaded,r.missing,r.pending,sy)}),()=>{l=!1}}const i=Object.create(null),o=[];let a,s;return r.pending.forEach(l=>{const{provider:u,prefix:c}=l;if(c===s&&u===a)return;a=u,s=c,o.push(wa(u,c));const f=i[u]||(i[u]=Object.create(null));f[c]||(f[c]=[])}),r.pending.forEach(l=>{const{provider:u,prefix:c,name:f}=l,d=wa(u,c),h=d.pendingIcons||(d.pendingIcons=new Set);h.has(f)||(h.add(f),i[u][c].push(f))}),o.forEach(l=>{const u=i[l.provider][l.prefix];u.length&&XT(l,u)}),t?jT(t,r,o):sy};function YT(e,t){const n={...e};for(const r in t){const i=t[r],o=typeof i;r in Yb?(i===null||i&&(o==="string"||o==="number"))&&(n[r]=i):o===typeof n[r]&&(n[r]=r==="rotate"?i%4:i)}return n}const KT=/[\s,]+/;function VT(e,t){t.split(KT).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function qT(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(n===""){const i=parseInt(e);return isNaN(i)?0:r(i)}else if(n!==e){let i=0;switch(n){case"%":i=25;break;case"deg":i=90}if(i){let o=parseFloat(e.slice(0,e.length-n.length));return isNaN(o)?0:(o=o/i,o%1===0?r(o):0)}}return t}function ZT(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function JT(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function QT(e){return"data:image/svg+xml,"+JT(e)}function eM(e){return'url("'+QT(e)+'")'}const uy={...Kb,inline:!1},tM={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},nM={display:"inline-block"},nh={backgroundColor:"currentColor"},Zb={backgroundColor:"transparent"},cy={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},fy={webkitMask:nh,mask:nh,background:Zb};for(const e in fy){const t=fy[e];for(const n in cy)t[e+n]=cy[n]}const Eu={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";Eu[e+"-flip"]=t,Eu[e.slice(0,1)+"-flip"]=t,Eu[e+"Flip"]=t});function dy(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const hy=(e,t)=>{const n=YT(uy,t),r={...tM},i=t.mode||"svg",o={},a=t.style,s=typeof a=="object"&&!(a instanceof Array)?a:{};for(let p in t){const g=t[p];if(g!==void 0)switch(p){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":n[p]=g===!0||g==="true"||g===1;break;case"flip":typeof g=="string"&&VT(n,g);break;case"color":o.color=g;break;case"rotate":typeof g=="string"?n[p]=qT(g):typeof g=="number"&&(n[p]=g);break;case"ariaHidden":case"aria-hidden":g!==!0&&g!=="true"&&delete r["aria-hidden"];break;default:{const y=Eu[p];y?(g===!0||g==="true"||g===1)&&(n[y]=!0):uy[p]===void 0&&(r[p]=g)}}}const l=bT(e,n),u=l.attributes;if(n.inline&&(o.verticalAlign="-0.125em"),i==="svg"){r.style={...o,...s},Object.assign(r,u);let p=0,g=t.id;return typeof g=="string"&&(g=g.replace(/-/g,"_")),r.innerHTML=ST(l.body,g?()=>g+"ID"+p++:"iconifyVue"),Wu("svg",r)}const{body:c,width:f,height:d}=e,h=i==="mask"||(i==="bg"?!1:c.indexOf("currentColor")!==-1),v=ZT(c,{...u,width:f+"",height:d+""});return r.style={...o,"--svg":eM(v),width:dy(u.width),height:dy(u.height),...nM,...h?nh:Zb,...s},Wu("span",r)};Gb(!0);OT("",DT);if(typeof document<"u"&&typeof window<"u"){const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!hT(r))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const r="IconifyProviders["+n+"] is invalid.";try{const i=t[n];if(typeof i!="object"||!i||i.resources===void 0)continue;AT(n,i)||console.error(r)}catch{console.error(r)}}}}const rM={...nf,body:""},rh=ka((e,{emit:t})=>{const n=qr(null);function r(){var u,c;n.value&&((c=(u=n.value).abort)==null||c.call(u),n.value=null)}const i=qr(!!e.ssr),o=qr(""),a=Oo(null);function s(){const u=e.icon;if(typeof u=="object"&&u!==null&&typeof u.body=="string")return o.value="",{data:u};let c;if(typeof u!="string"||(c=tf(u,!1,!0))===null)return null;let f=fT(c);if(!f){const v=n.value;return(!v||v.name!==u)&&(f===null?n.value={name:u}:n.value={name:u,abort:GT([c],l)}),null}r(),o.value!==u&&(o.value=u,Sl(()=>{t("load",u)}));const d=e.customise;if(d){f=Object.assign({},f);const v=d(f.body,c.name,c.prefix,c.provider);typeof v=="string"&&(f.body=v)}const h=["iconify"];return c.prefix!==""&&h.push("iconify--"+c.prefix),c.provider!==""&&h.push("iconify--"+c.provider),{data:f,classes:h}}function l(){var c;const u=s();u?u.data!==((c=a.value)==null?void 0:c.data)&&(a.value=u):a.value=null}return i.value?l():Ol(()=>{i.value=!0,l()}),mi(()=>e.icon,l),Pp(r),()=>{const u=a.value;if(!u)return hy(rM,e);let c=e;return u.classes&&(c={...e,class:u.classes.join(" ")}),hy({...nf,...u.data},c)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]});function iM(e){return R0()?(MO(e),!0):!1}const sd=new WeakMap,oM=(...e)=>{var t;const n=e[0],r=(t=Ip())==null?void 0:t.proxy;if(r==null&&!ub())throw new Error("injectLocal must be called in setup");return r&&sd.has(r)&&n in sd.get(r)?sd.get(r)[n]:Mr(...e)},aM=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const sM=Object.prototype.toString,lM=e=>sM.call(e)==="[object Object]",uM=()=>{};function Jb(...e){if(e.length!==1)return nA(...e);const t=e[0];return typeof t=="function"?Xc(QO(()=>({get:t,set:uM}))):qr(t)}function cM(e,t){function n(...r){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(i).catch(o)})}return n}const Qb=e=>e();function fM(e=Qb,t={}){const{initialState:n="active"}=t,r=Jb(n==="active");function i(){r.value=!1}function o(){r.value=!0}const a=(...s)=>{r.value&&e(...s)};return{isActive:Xc(r),pause:i,resume:o,eventFilter:a}}function py(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function ld(e){return Array.isArray(e)?e:[e]}function dM(e){return Ip()}function hM(e,t,n={}){const{eventFilter:r=Qb,...i}=n;return mi(e,cM(r,t),i)}function pM(e,t,n={}){const{eventFilter:r,initialState:i="active",...o}=n,{eventFilter:a,pause:s,resume:l,isActive:u}=fM(r,{initialState:i});return{stop:hM(e,t,{...o,eventFilter:a}),pause:s,resume:l,isActive:u}}function ex(e,t=!0,n){dM()?Ol(e,n):t?e():Sl(e)}function vM(e,t,n){return mi(e,t,{...n,immediate:!0})}const rl=aM?window:void 0;function tx(e){var t;const n=Ui(e);return(t=n==null?void 0:n.$el)!=null?t:n}function ih(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},r=(s,l,u,c)=>(s.addEventListener(l,u,c),()=>s.removeEventListener(l,u,c)),i=qt(()=>{const s=ld(Ui(e[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:void 0}),o=vM(()=>{var s,l;return[(l=(s=i.value)==null?void 0:s.map(u=>tx(u)))!=null?l:[rl].filter(u=>u!=null),ld(Ui(i.value?e[1]:e[0])),ld(Gn(i.value?e[2]:e[1])),Ui(i.value?e[3]:e[2])]},([s,l,u,c])=>{if(n(),!(s!=null&&s.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const f=lM(c)?{...c}:c;t.push(...s.flatMap(d=>l.flatMap(h=>u.map(v=>r(d,h,v,f)))))},{flush:"post"}),a=()=>{o(),n()};return iM(n),a}function gM(){const e=Oo(!1),t=Ip();return t&&Ol(()=>{e.value=!0},t),e}function yM(e){const t=gM();return qt(()=>(t.value,!!e()))}const mM=Symbol("vueuse-ssr-width");function _M(){const e=ub()?oM(mM,null):null;return typeof e=="number"?e:void 0}function bM(e,t={}){const{window:n=rl,ssrWidth:r=_M()}=t,i=yM(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),o=Oo(typeof r=="number"),a=Oo(),s=Oo(!1),l=u=>{s.value=u.matches};return VA(()=>{if(o.value){o.value=!i.value;const u=Ui(e).split(",");s.value=u.some(c=>{const f=c.includes("not all"),d=c.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),h=c.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let v=!!(d||h);return d&&v&&(v=r>=py(d[1])),h&&v&&(v=r<=py(h[1])),f?!v:v});return}i.value&&(a.value=n.matchMedia(Ui(e)),s.value=a.value.matches)}),ih(a,"change",l,{passive:!0}),qt(()=>s.value)}const Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xl="__vueuse_ssr_handlers__",xM=wM();function wM(){return Xl in Ul||(Ul[Xl]=Ul[Xl]||{}),Ul[Xl]}function nx(e,t){return xM[e]||t}function EM(e){return bM("(prefers-color-scheme: dark)",e)}function SM(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const OM={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},vy="vueuse-storage";function AM(e,t,n,r={}){var i;const{flush:o="pre",deep:a=!0,listenToStorageChanges:s=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:c,window:f=rl,eventFilter:d,onError:h=I=>{console.error(I)},initOnMounted:v}=r,p=(c?Oo:qr)(typeof t=="function"?t():t),g=qt(()=>Ui(e));if(!n)try{n=nx("getDefaultStorage",()=>{var I;return(I=rl)==null?void 0:I.localStorage})()}catch(I){h(I)}if(!n)return p;const y=Ui(t),m=SM(y),M=(i=r.serializer)!=null?i:OM[m],{pause:T,resume:L}=pM(p,()=>ie(p.value),{flush:o,deep:a,eventFilter:d});mi(g,()=>pe(),{flush:o});let N=!1;const E=I=>{v&&!N||pe(I)},k=I=>{v&&!N||O(I)};f&&s&&(n instanceof Storage?ih(f,"storage",E,{passive:!0}):ih(f,vy,k)),v?ex(()=>{N=!0,pe()}):pe();function Y(I,j){if(f){const te={key:g.value,oldValue:I,newValue:j,storageArea:n};f.dispatchEvent(n instanceof Storage?new StorageEvent("storage",te):new CustomEvent(vy,{detail:te}))}}function ie(I){try{const j=n.getItem(g.value);if(I==null)Y(j,null),n.removeItem(g.value);else{const te=M.write(I);j!==te&&(n.setItem(g.value,te),Y(j,te))}}catch(j){h(j)}}function se(I){const j=I?I.newValue:n.getItem(g.value);if(j==null)return l&&y!=null&&n.setItem(g.value,M.write(y)),y;if(!I&&u){const te=M.read(j);return typeof u=="function"?u(te,y):m==="object"&&!Array.isArray(te)?{...y,...te}:te}else return typeof j!="string"?j:M.read(j)}function pe(I){if(!(I&&I.storageArea!==n)){if(I&&I.key==null){p.value=y;return}if(!(I&&I.key!==g.value)){T();try{(I==null?void 0:I.newValue)!==M.write(p.value)&&(p.value=se(I))}catch(j){h(j)}finally{I?Sl(L):L()}}}}function O(I){pe(I.detail)}return p}const CM="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function rx(e={}){const{selector:t="html",attribute:n="class",initialValue:r="auto",window:i=rl,storage:o,storageKey:a="vueuse-color-scheme",listenToStorageChanges:s=!0,storageRef:l,emitAuto:u,disableTransition:c=!0}=e,f={auto:"",light:"light",dark:"dark",...e.modes||{}},d=EM({window:i}),h=qt(()=>d.value?"dark":"light"),v=l||(a==null?Jb(r):AM(a,r,o,{window:i,listenToStorageChanges:s})),p=qt(()=>v.value==="auto"?h.value:v.value),g=nx("updateHTMLAttrs",(T,L,N)=>{const E=typeof T=="string"?i==null?void 0:i.document.querySelector(T):tx(T);if(!E)return;const k=new Set,Y=new Set;let ie=null;if(L==="class"){const pe=N.split(/\s/g);Object.values(f).flatMap(O=>(O||"").split(/\s/g)).filter(Boolean).forEach(O=>{pe.includes(O)?k.add(O):Y.add(O)})}else ie={key:L,value:N};if(k.size===0&&Y.size===0&&ie===null)return;let se;c&&(se=i.document.createElement("style"),se.appendChild(document.createTextNode(CM)),i.document.head.appendChild(se));for(const pe of k)E.classList.add(pe);for(const pe of Y)E.classList.remove(pe);ie&&E.setAttribute(ie.key,ie.value),c&&(i.getComputedStyle(se).opacity,document.head.removeChild(se))});function y(T){var L;g(t,n,(L=f[T])!=null?L:T)}function m(T){e.onChanged?e.onChanged(T,y):y(T)}mi(p,m,{flush:"post",immediate:!0}),ex(()=>m(p.value));const M=qt({get(){return u?v.value:p.value},set(T){v.value=T}});return Object.assign(M,{store:v,system:h,state:p})}const TM={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"},MM={class:"absolute top-4 right-4"},PM={class:"w-full max-w-sm p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md"},NM={class:"mb-4"},RM={class:"mb-6"},DM=ka({__name:"Login",setup(e){const t=qr(""),n=qr(""),r=()=>{localStorage.setItem("token","mock-token"),dO.replace("/")},i=rx();function o(){i.value=i.value==="dark"?"light":"dark"}return(a,s)=>(Ro(),qc("div",TM,[yt("div",MM,[yt("button",{onClick:o,class:"p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all cursor-pointer"},[sn(Gn(rh),{icon:Gn(i)==="dark"?"lucide:sun":"lucide:moon",class:"w-5 h-5 text-gray-800 dark:text-white"},null,8,["icon"])])]),yt("div",PM,[s[5]||(s[5]=yt("h2",{class:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white"},"ログイン",-1)),yt("form",{onSubmit:HC(r,["prevent"])},[yt("div",NM,[s[2]||(s[2]=yt("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"ユーザ名",-1)),ug(yt("input",{placeholder:"デモ用なので、適当な文字で構いません","onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),type:"text",class:"mt-1 block w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring focus:border-blue-300"},null,512),[[Ig,t.value]])]),yt("div",RM,[s[3]||(s[3]=yt("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"パスワード",-1)),ug(yt("input",{placeholder:"デモ用なので、適当な文字で構いません","onUpdate:modelValue":s[1]||(s[1]=l=>n.value=l),type:"password",class:"mt-1 block w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring focus:border-blue-300"},null,512),[[Ig,n.value]])]),s[4]||(s[4]=yt("button",{type:"submit",class:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md"},"ログイン",-1))],32)])]))}}),LM={};function IM(e,t){return null}const kM=Jc(LM,[["render",IM]]),jM={class:"min-h-screen flex flex-col"},BM={class:"bg-gray-800 text-white p-4"},FM={class:"absolute top-4 right-4"},$M={class:"flex flex-1"},HM={class:"flex-1 p-6 bg-white dark:bg-gray-900"},WM=ka({__name:"Layout",setup(e){const t=rx(),n=nT();function r(){t.value=t.value==="dark"?"light":"dark"}const i=()=>{localStorage.removeItem("token"),n.replace("/login")};return(o,a)=>{const s=ib("router-view");return Ro(),qc("div",jM,[yt("header",BM,[a[0]||(a[0]=yt("h1",{class:"text-xl font-bold"},"Coder Gao の デモ",-1)),yt("div",FM,[yt("button",{variant:"outline",onClick:r,class:"p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all cursor-pointer"},[sn(Gn(rh),{icon:Gn(t)==="dark"?"lucide:sun":"lucide:moon",class:"w-5 h-5 text-gray-800 dark:text-white"},null,8,["icon"])]),yt("button",{variant:"outline",class:"ml-2 p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all cursor-pointer",onClick:i},[sn(Gn(rh),{icon:"material-symbols:logout",class:"w-5 h-5 text-gray-800 dark:text-white"})])])]),yt("div",$M,[a[1]||(a[1]=yt("aside",{class:"w-64 bg-gray-100 dark:bg-gray-800 p-4"},[yt("nav",null,[yt("ul",{class:"space-y-2"},[yt("li",null,[yt("a",{href:"home",class:"block p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700"},"Home")]),yt("li",null,[yt("a",{href:"logicflowdemo",class:"block p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700"},"LogicFlowDemo")])])])],-1)),yt("main",HM,[sn(s),TA(o.$slots,"default")])]),a[2]||(a[2]=yt("footer",{class:"bg-gray-800 text-white text-center p-4"}," © 2025 Coder Gao ",-1))])}}});var rf,nt,ix,mo,gy,ox,ax,sx,$p,oh,ah,il={},lx=[],zM=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Cl=Array.isArray;function gi(e,t){for(var n in t)e[n]=t[n];return e}function Hp(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Te(e,t,n){var r,i,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?rf.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Su(e,a,r,i,null)}function Su(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ix,__i:-1,__u:0};return i==null&&nt.vnode!=null&&nt.vnode(o),o}function of(){return{current:null}}function Ea(e){return e.children}function ot(e,t){this.props=e,this.context=t}function Sa(e,t){if(t==null)return e.__?Sa(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Sa(e):null}function ux(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ux(e)}}function yy(e){(!e.__d&&(e.__d=!0)&&mo.push(e)&&!Uu.__r++||gy!=nt.debounceRendering)&&((gy=nt.debounceRendering)||ox)(Uu)}function Uu(){for(var e,t,n,r,i,o,a,s=1;mo.length;)mo.length>s&&mo.sort(ax),e=mo.shift(),s=mo.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,o=[],a=[],t.__P&&((n=gi({},r)).__v=r.__v+1,nt.vnode&&nt.vnode(n),Wp(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i??Sa(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,dx(o,n,a),n.__e!=i&&ux(n)));Uu.__r=0}function cx(e,t,n,r,i,o,a,s,l,u,c){var f,d,h,v,p,g,y=r&&r.__k||lx,m=t.length;for(l=UM(n,t,y,l,m),f=0;f<m;f++)(h=n.__k[f])!=null&&(d=h.__i==-1?il:y[h.__i]||il,h.__i=f,g=Wp(e,h,d,i,o,a,s,l,u,c),v=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&zp(d.ref,null,h),c.push(h.ref,h.__c||v,h)),p==null&&v!=null&&(p=v),4&h.__u||d.__k===h.__k?l=fx(h,l,e):typeof h.type=="function"&&g!==void 0?l=g:v&&(l=v.nextSibling),h.__u&=-7);return n.__e=p,l}function UM(e,t,n,r,i){var o,a,s,l,u,c=n.length,f=c,d=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+d,(a=e.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Su(null,a,null,null,null):Cl(a)?Su(Ea,{children:a},null,null,null):a.constructor==null&&a.__b>0?Su(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,(u=a.__i=XM(a,n,l,f))!=-1&&(f--,(s=n[u])&&(s.__u|=2)),s==null||s.__v==null?(u==-1&&(i>c?d--:i<c&&d++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?d--:u==l+1?d++:(u>l?d--:d++,a.__u|=4))):e.__k[o]=null;if(f)for(o=0;o<c;o++)(s=n[o])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=Sa(s)),px(s,s));return r}function fx(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=fx(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Sa(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Xu(e,t){return t=t||[],e==null||typeof e=="boolean"||(Cl(e)?e.some(function(n){Xu(n,t)}):t.push(e)),t}function XM(e,t,n,r){var i,o,a=e.key,s=e.type,l=t[n];if(l===null&&e.key==null||l&&a==l.key&&s==l.type&&(2&l.__u)==0)return n;if(r>(l!=null&&(2&l.__u)==0?1:0))for(i=n-1,o=n+1;i>=0||o<t.length;){if(i>=0){if((l=t[i])&&(2&l.__u)==0&&a==l.key&&s==l.type)return i;i--}if(o<t.length){if((l=t[o])&&(2&l.__u)==0&&a==l.key&&s==l.type)return o;o++}}return-1}function my(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||zM.test(t)?n:n+"px"}function Gl(e,t,n,r,i){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||my(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||my(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(sx,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=$p,e.addEventListener(t,o?ah:oh,o)):e.removeEventListener(t,o?ah:oh,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function _y(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=$p++;else if(t.t<n.u)return;return n(nt.event?nt.event(t):t)}}}function Wp(e,t,n,r,i,o,a,s,l,u){var c,f,d,h,v,p,g,y,m,M,T,L,N,E,k,Y,ie,se=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(c=nt.__b)&&c(t);e:if(typeof se=="function")try{if(y=t.props,m="prototype"in se&&se.prototype.render,M=(c=se.contextType)&&r[c.__c],T=c?M?M.props.value:c.__:r,n.__c?g=(f=t.__c=n.__c).__=f.__E:(m?t.__c=f=new se(y,T):(t.__c=f=new ot(y,T),f.constructor=se,f.render=YM),M&&M.sub(f),f.props=y,f.state||(f.state={}),f.context=T,f.__n=r,d=f.__d=!0,f.__h=[],f._sb=[]),m&&f.__s==null&&(f.__s=f.state),m&&se.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=gi({},f.__s)),gi(f.__s,se.getDerivedStateFromProps(y,f.__s))),h=f.props,v=f.state,f.__v=t,d)m&&se.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),m&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(m&&se.getDerivedStateFromProps==null&&y!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,T),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,T)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(f.props=y,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(pe){pe&&(pe.__=t)}),L=0;L<f._sb.length;L++)f.__h.push(f._sb[L]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,T),m&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,v,p)})}if(f.context=T,f.props=y,f.__P=e,f.__e=!1,N=nt.__r,E=0,m){for(f.state=f.__s,f.__d=!1,N&&N(t),c=f.render(f.props,f.state,f.context),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[]}else do f.__d=!1,N&&N(t),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++E<25);f.state=f.__s,f.getChildContext!=null&&(r=gi(gi({},r),f.getChildContext())),m&&!d&&f.getSnapshotBeforeUpdate!=null&&(p=f.getSnapshotBeforeUpdate(h,v)),Y=c,c!=null&&c.type===Ea&&c.key==null&&(Y=hx(c.props.children)),s=cx(e,Cl(Y)?Y:[Y],t,n,r,i,o,a,s,l,u),f.base=t.__e,t.__u&=-161,f.__h.length&&a.push(f),g&&(f.__E=f.__=null)}catch(pe){if(t.__v=null,l||o!=null)if(pe.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else for(ie=o.length;ie--;)Hp(o[ie]);else t.__e=n.__e,t.__k=n.__k;nt.__e(pe,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=GM(n.__e,t,n,r,i,o,a,l,u);return(c=nt.diffed)&&c(t),128&t.__u?void 0:s}function dx(e,t,n){for(var r=0;r<n.length;r++)zp(n[r],n[++r],n[++r]);nt.__c&&nt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){nt.__e(o,i.__v)}})}function hx(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Cl(e)?e.map(hx):gi({},e)}function GM(e,t,n,r,i,o,a,s,l){var u,c,f,d,h,v,p,g=n.props,y=t.props,m=t.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!m&&(m?h.localName==m:h.nodeType==3)){e=h,o[u]=null;break}}if(e==null){if(m==null)return document.createTextNode(y);e=document.createElementNS(i,m,y.is&&y),s&&(nt.__m&&nt.__m(t,o),s=!1),o=null}if(m==null)g===y||s&&e.data==y||(e.data=y);else{if(o=o&&rf.call(e.childNodes),g=n.props||il,!s&&o!=null)for(g={},u=0;u<e.attributes.length;u++)g[(h=e.attributes[u]).name]=h.value;for(u in g)if(h=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=h;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;Gl(e,u,null,h,i)}}for(u in y)h=y[u],u=="children"?d=h:u=="dangerouslySetInnerHTML"?c=h:u=="value"?v=h:u=="checked"?p=h:s&&typeof h!="function"||g[u]===h||Gl(e,u,h,g[u],i);if(c)s||f&&(c.__html==f.__html||c.__html==e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(f&&(e.innerHTML=""),cx(t.type=="template"?e.content:e,Cl(d)?d:[d],t,n,r,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Sa(n,0),s,l),o!=null)for(u=o.length;u--;)Hp(o[u]);s||(u="value",m=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[u]||m=="progress"&&!v||m=="option"&&v!=g[u])&&Gl(e,u,v,g[u],i),u="checked",p!=null&&p!=e[u]&&Gl(e,u,p,g[u],i))}return e}function zp(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){nt.__e(i,n)}}function px(e,t,n){var r,i;if(nt.unmount&&nt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||zp(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){nt.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&px(r[i],t,n||typeof e.type!="function");n||Hp(e.__e),e.__c=e.__=e.__e=void 0}function YM(e,t,n){return this.constructor(e,n)}function KM(e,t,n){var r,i,o,a;t==document&&(t=document.documentElement),nt.__&&nt.__(e,t),i=(r=!1)?null:t.__k,o=[],a=[],Wp(t,e=t.__k=Te(Ea,null,[e]),i||il,il,t.namespaceURI,i?null:t.firstChild?rf.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,a),dx(o,e,a)}rf=lx.slice,nt={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},ix=0,ot.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=gi({},this.state),typeof e=="function"&&(e=e(gi({},n),this.props)),e&&gi(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),yy(this))},ot.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),yy(this))},ot.prototype.render=Ea,mo=[],ox=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ax=function(e,t){return e.__v.__b-t.__v.__b},Uu.__r=0,sx=/(PointerCapture)$|Capture$/i,$p=0,oh=_y(!1),ah=_y(!0);var VM="An invariant failed, however the error is obfuscated because this is a production build.",Gu=[];Object.freeze(Gu);var Up={};Object.freeze(Up);function Ln(){return++Oe.mobxGuid}function dt(e){throw Co(!1,e),"X"}function Co(e,t){if(!e)throw new Error("[mobx] "+(t||VM))}function vx(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Yl=function(){};function qM(e){var t=[];return e.forEach(function(n){t.indexOf(n)===-1&&t.push(n)}),t}function Xp(e){return e!==null&&typeof e=="object"}function ja(e){if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function ZM(e){if(Fa(e)||In(e))return e;if(Array.isArray(e))return new Map(e);if(ja(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return dt("Cannot convert to map from '"+e+"'")}function Ba(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function JM(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function QM(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||n.configurable!==!1&&n.writable!==!1}function Ji(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return Xp(r)&&r[n]===!0}}function Fa(e){return e instanceof Map}function Tl(e){return e instanceof Set}function gx(e){var t=new Set;for(var n in e)t.add(n);return Object.getOwnPropertySymbols(e).forEach(function(r){Object.getOwnPropertyDescriptor(e,r).enumerable&&t.add(r)}),Array.from(t)}function Hi(e){return e&&e.toString?e.toString():new String(e).toString()}function yx(e){return e===null?null:typeof e=="object"?""+e:e}var eP=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,$e=Symbol("mobx administration"),$a=function(){function e(t){t===void 0&&(t="Atom@"+Ln()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=vt.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},e.prototype.reportObserved=function(){return Tx(this)},e.prototype.reportChanged=function(){Pr(),wP(this),Nr()},e.prototype.toString=function(){return this.name},e}(),Gp=Ji("Atom",$a);function Yp(e,t,n){t===void 0&&(t=Yl),n===void 0&&(n=Yl);var r=new $a(e);return t!==Yl&&IP(r,t),n!==Yl&&Lx(r,n),r}function tP(e,t){return Ux(e,t)}function nP(e,t){return Object.is(e,t)}var Oa={structural:tP,default:nP};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var sh=function(e,t){return sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},sh(e,t)};function rP(e,t){sh(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Yu=function(){return Yu=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Yu.apply(this,arguments)};function Kr(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function ua(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Kp(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ua(arguments[t]));return e}var Ku=Symbol("mobx did run lazy initializers"),ms=Symbol("mobx pending decorators"),iP={},oP={};function aP(e,t){var n=t?iP:oP;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return Do(this),this[e]},set:function(r){Do(this),this[e]=r}})}function Do(e){var t,n;if(e[Ku]!==!0){var r=e[ms];if(r){Ba(e,Ku,!0);var i=Kp(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var o=Kr(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=r[s];l.propertyCreator(e,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}}}function mx(e,t){return function(){var r,i=function(a,s,l,u){if(u===!0)return t(a,s,l,a,r),null;if(!Object.prototype.hasOwnProperty.call(a,ms)){var c=a[ms];Ba(a,ms,Yu({},c))}return a[ms][s]={prop:s,propertyCreator:t,descriptor:l,decoratorTarget:a,decoratorArguments:r},aP(s,e)};return sP(arguments)?(r=Gu,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function sP(e){return(e.length===2||e.length===3)&&(typeof e[1]=="string"||typeof e[1]=="symbol")||e.length===4&&e[3]===!0}function Ml(e,t,n){return Ma(e)?e:Array.isArray(e)?q.array(e,{name:n}):ja(e)?q.object(e,void 0,{name:n}):Fa(e)?q.map(e,{name:n}):Tl(e)?q.set(e,{name:n}):e}function lP(e,t,n){return e==null||jr(e)||ni(e)||In(e)||dr(e)?e:Array.isArray(e)?q.array(e,{name:n,deep:!1}):ja(e)?q.object(e,void 0,{name:n,deep:!1}):Fa(e)?q.map(e,{name:n,deep:!1}):Tl(e)?q.set(e,{name:n,deep:!1}):dt(!1)}function af(e){return e}function uP(e,t,n){return Ux(e,t)?t:e}function sf(e){Co(e);var t=mx(!0,function(r,i,o,a,s){var l=o?o.initializer?o.initializer.call(r):o.value:void 0;Qp(r).addObservableProp(i,l,e)}),n=t;return n.enhancer=e,n}var _x={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(_x);function sa(e){return e==null?_x:typeof e=="string"?{name:e,deep:!0,proxy:!0}:e}var Vp=sf(Ml),cP=sf(lP),bx=sf(af),fP=sf(uP);function Kl(e){return e.defaultDecorator?e.defaultDecorator.enhancer:e.deep===!1?af:Ml}function dP(e,t,n){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return Vp.apply(null,arguments);if(Ma(e))return e;var r=ja(e)?q.object(e,t,n):Array.isArray(e)?q.array(e,t):Fa(e)?q.map(e,t):Tl(e)?q.set(e,t):e;if(r!==e)return r;dt(!1)}var by={box:function(e,t){arguments.length>2&&ls("box");var n=sa(t);return new Mo(e,Kl(n),n.name,!0,n.equals)},array:function(e,t){arguments.length>2&&ls("array");var n=sa(t);return qP(e,Kl(n),n.name)},map:function(e,t){arguments.length>2&&ls("map");var n=sa(t);return new Jp(e,Kl(n),n.name)},set:function(e,t){arguments.length>2&&ls("set");var n=sa(t);return new Wx(e,Kl(n),n.name)},object:function(e,t,n){typeof arguments[1]=="string"&&ls("object");var r=sa(n);if(r.proxy===!1)return hh({},e,t,r);var i=kx(r),o=hh({},void 0,void 0,r),a=YP(o);return jx(a,e,t,i),a},ref:bx,shallow:cP,deep:Vp,struct:fP},q=dP;Object.keys(by).forEach(function(e){return q[e]=by[e]});function ls(e){dt("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}var Vu=mx(!1,function(e,t,n,r,i){var o=n.get,a=n.set,s=i[0]||{};Qp(e).addComputedProp(e,t,Yu({get:o,set:a,context:e},s))}),hP=Vu({equals:Oa.structural}),Ct=function(t,n,r){if(typeof n=="string"||t!==null&&typeof t=="object"&&arguments.length===1)return Vu.apply(null,arguments);var i=typeof n=="object"?n:{};return i.get=t,i.set=typeof n=="function"?n:i.set,i.name=i.name||t.name||"",new Ca(i)};Ct.struct=hP;var vt;(function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"})(vt||(vt={}));var Zr;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Zr||(Zr={}));var qu=function(){function e(t){this.cause=t}return e}();function _s(e){return e instanceof qu}function lh(e){switch(e.dependenciesState){case vt.UP_TO_DATE:return!1;case vt.NOT_TRACKING:case vt.STALE:return!0;case vt.POSSIBLY_STALE:{for(var t=qp(!0),n=Ha(),r=e.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Ta(a)){if(Oe.disableErrorBoundaries)a.get();else try{a.get()}catch{return Xi(n),Ns(t),!0}if(e.dependenciesState===vt.STALE)return Xi(n),Ns(t),!0}}return Ex(e),Xi(n),Ns(t),!1}}}function Aa(e){var t=e.observers.size>0;Oe.computationDepth>0&&t&&dt(!1),!Oe.allowStateChanges&&(t||Oe.enforceActions==="strict")&&dt(!1)}function xx(e,t,n){var r=qp(!0);Ex(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Oe.runId;var i=Oe.trackingDerivation;Oe.trackingDerivation=e;var o;if(Oe.disableErrorBoundaries===!0)o=t.call(n);else try{o=t.call(n)}catch(a){o=new qu(a)}return Oe.trackingDerivation=i,pP(e),Ns(r),o}function pP(e){for(var t=e.observing,n=e.observing=e.newObserving,r=vt.UP_TO_DATE,i=0,o=e.unboundDepsCount,a=0;a<o;a++){var s=n[a];s.diffValue===0&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}for(n.length=i,e.newObserving=null,o=t.length;o--;){var s=t[o];s.diffValue===0&&Ax(s,e),s.diffValue=0}for(;i--;){var s=n[i];s.diffValue===1&&(s.diffValue=0,xP(s,e))}r!==vt.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}function uh(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Ax(t[n],e);e.dependenciesState=vt.NOT_TRACKING}function wx(e){var t=Ha();try{return e()}finally{Xi(t)}}function Ha(){var e=Oe.trackingDerivation;return Oe.trackingDerivation=null,e}function Xi(e){Oe.trackingDerivation=e}function qp(e){var t=Oe.allowStateReads;return Oe.allowStateReads=e,t}function Ns(e){Oe.allowStateReads=e}function Ex(e){if(e.dependenciesState!==vt.UP_TO_DATE){e.dependenciesState=vt.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=vt.UP_TO_DATE}}var Zu=0,vP=1,xy=Object.getOwnPropertyDescriptor(function(){},"name");xy&&xy.configurable;function To(e,t,n){var r=function(){return Sx(e,t,n||this,arguments)};return r.isMobxAction=!0,r}function Sx(e,t,n,r){var i=gP();try{return t.apply(n,r)}catch(o){throw i.error=o,o}finally{yP(i)}}function gP(e,t,n){var r=sr(),i=0,o=Ha();Pr();var a=lf(!0),s=qp(!0),l={prevDerivation:o,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:r,startTime:i,actionId:vP++,parentActionId:Zu};return Zu=l.actionId,l}function yP(e){Zu!==e.actionId&&dt("invalid action stack. did you forget to finish an action?"),Zu=e.parentActionId,e.error!==void 0&&(Oe.suppressReactionErrors=!0),uf(e.prevAllowStateChanges),Ns(e.prevAllowStateReads),Nr(),Xi(e.prevDerivation),e.notifySpy,Oe.suppressReactionErrors=!1}function lf(e){var t=Oe.allowStateChanges;return Oe.allowStateChanges=e,t}function uf(e){Oe.allowStateChanges=e}var Mo=function(e){rP(t,e);function t(n,r,i,o,a){i===void 0&&(i="ObservableValue@"+Ln()),a===void 0&&(a=Oa.default);var s=e.call(this,i)||this;return s.enhancer=r,s.name=i,s.equals=a,s.hasUnreportedChange=!1,s.value=r(n,void 0,i),s}return t.prototype.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.prototype.set=function(n){this.value,n=this.prepareNewValue(n),n!==Oe.UNCHANGED&&this.setNewValue(n)},t.prototype.prepareNewValue=function(n){if(Aa(this),Jr(this)){var r=Qr(this,{object:this,type:"update",newValue:n});if(!r)return Oe.UNCHANGED;n=r.newValue}return n=this.enhancer(n,this.value,this.name),this.equals(this.value,n)?Oe.UNCHANGED:n},t.prototype.setNewValue=function(n){var r=this.value;this.value=n,this.reportChanged(),Rr(this)&&Dr(this,{type:"update",object:this,newValue:n,oldValue:r})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(n){return Pl(this,n)},t.prototype.observe=function(n,r){return r&&n({object:this,type:"update",newValue:this.value,oldValue:void 0}),Nl(this,n)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return yx(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}($a),mP=Ji("ObservableValue",Mo),Ca=function(){function e(t){this.dependenciesState=vt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=vt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Ln(),this.value=new qu(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Zr.NONE,Co(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+Ln(),t.set&&(this.setter=To(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?Oa.structural:Oa.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return e.prototype.onBecomeStale=function(){SP(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},e.prototype.get=function(){this.isComputing&&dt("Cycle detected in computation "+this.name+": "+this.derivation),Oe.inBatch===0&&this.observers.size===0&&!this.keepAlive?lh(this)&&(this.warnAboutUntrackedRead(),Pr(),this.value=this.computeValue(!1),Nr()):(Tx(this),lh(this)&&this.trackAndCompute()&&EP(this));var t=this.value;if(_s(t))throw t.cause;return t},e.prototype.peek=function(){var t=this.computeValue(!1);if(_s(t))throw t.cause;return t},e.prototype.set=function(t){if(this.setter){Co(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else Co(!1,!1)},e.prototype.trackAndCompute=function(){var t=this.value,n=this.dependenciesState===vt.NOT_TRACKING,r=this.computeValue(!0),i=n||_s(t)||_s(r)||!this.equals(t,r);return i&&(this.value=r),i},e.prototype.computeValue=function(t){this.isComputing=!0,Oe.computationDepth++;var n;if(t)n=xx(this,this.derivation,this.scope);else if(Oe.disableErrorBoundaries===!0)n=this.derivation.call(this.scope);else try{n=this.derivation.call(this.scope)}catch(r){n=new qu(r)}return Oe.computationDepth--,this.isComputing=!1,n},e.prototype.suspend=function(){this.keepAlive||(uh(this),this.value=void 0)},e.prototype.observe=function(t,n){var r=this,i=!0,o=void 0;return RP(function(){var a=r.get();if(!i||n){var s=Ha();t({type:"update",object:r,newValue:a,oldValue:o}),Xi(s)}i=!1,o=a})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return yx(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),Ta=Ji("ComputedValue",Ca),Ou=function(){function e(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return e}(),_P={};function ch(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:_P}var Au=!0,Ox=!1,Oe=function(){var e=ch();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Au=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Ou().version&&(Au=!1),Au?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Ou):(setTimeout(function(){Ox||dt("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ou)}();function bP(){(Oe.pendingReactions.length||Oe.inBatch||Oe.isRunningReactions)&&dt("isolateGlobalState should be called before MobX is running any reactions"),Ox=!0,Au&&(--ch().__mobxInstanceCount===0&&(ch().__mobxGlobals=void 0),Oe=new Ou)}function fh(){return Oe}function xP(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ax(e,t){e.observers.delete(t),e.observers.size===0&&Cx(e)}function Cx(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,Oe.pendingUnobservations.push(e))}function Pr(){Oe.inBatch++}function Nr(){if(--Oe.inBatch===0){Nx();for(var e=Oe.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,n.observers.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Ca&&n.suspend())}Oe.pendingUnobservations=[]}}function Tx(e){var t=Oe.trackingDerivation;return t!==null?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(e.observers.size===0&&Oe.inBatch>0&&Cx(e),!1)}function wP(e){e.lowestObserverState!==vt.STALE&&(e.lowestObserverState=vt.STALE,e.observers.forEach(function(t){t.dependenciesState===vt.UP_TO_DATE&&(t.isTracing!==Zr.NONE&&Mx(t,e),t.onBecomeStale()),t.dependenciesState=vt.STALE}))}function EP(e){e.lowestObserverState!==vt.STALE&&(e.lowestObserverState=vt.STALE,e.observers.forEach(function(t){t.dependenciesState===vt.POSSIBLY_STALE?t.dependenciesState=vt.STALE:t.dependenciesState===vt.UP_TO_DATE&&(e.lowestObserverState=vt.UP_TO_DATE)}))}function SP(e){e.lowestObserverState===vt.UP_TO_DATE&&(e.lowestObserverState=vt.POSSIBLY_STALE,e.observers.forEach(function(t){t.dependenciesState===vt.UP_TO_DATE&&(t.dependenciesState=vt.POSSIBLY_STALE,t.isTracing!==Zr.NONE&&Mx(t,e),t.onBecomeStale())}))}function Mx(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===Zr.BREAK){var n=[];Px(jP(e),n,1),new Function(`debugger;
/*
Tracing '`+e.name+`'

You are entering this break point because derivation '`+e.name+"' is being traced and '"+t.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof Ca?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+n.join(`
`)+`
*/
    `)()}}function Px(e,t,n){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(n).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(r){return Px(r,t,n+1)})}var ol=function(){function e(t,n,r,i){t===void 0&&(t="Reaction@"+Ln()),i===void 0&&(i=!1),this.name=t,this.onInvalidate=n,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=vt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Ln(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Zr.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Oe.pendingReactions.push(this),Nx())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Pr(),this._isScheduled=!1,lh(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&sr()}catch(t){this.reportExceptionInDerivation(t)}}Nr()}},e.prototype.track=function(t){if(!this.isDisposed){Pr(),this._isRunning=!0;var n=xx(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&uh(this),_s(n)&&this.reportExceptionInDerivation(n.cause),Nr()}},e.prototype.reportExceptionInDerivation=function(t){var n=this;if(this.errorHandler){this.errorHandler(t,this);return}if(Oe.disableErrorBoundaries)throw t;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Oe.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,t),Oe.globalReactionErrorHandlers.forEach(function(i){return i(t,n)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Pr(),uh(this),Nr()))},e.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[$e]=this,t},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(t){t===void 0&&(t=!1),UP(this,t)},e}(),wy=100,dh=function(e){return e()};function Nx(){Oe.inBatch>0||Oe.isRunningReactions||dh(OP)}function OP(){Oe.isRunningReactions=!0;for(var e=Oe.pendingReactions,t=0;e.length>0;){++t===wy&&(console.error("Reaction doesn't converge to a stable state after "+wy+" iterations."+(" Probably there is a cycle in the reactive function: "+e[0])),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Oe.isRunningReactions=!1}var Ju=Ji("Reaction",ol);function AP(e){var t=dh;dh=function(n){return e(function(){return t(n)})}}function sr(){return!1}function CP(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function TP(){dt(!1)}function Ey(e){return function(t,n,r){if(r){if(r.value)return{value:To(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return To(e,i.call(this))}}}return MP(e).apply(this,arguments)}}function MP(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(i){Ba(this,n,K(e,i))}})}}function PP(e,t,n,r){return r===!0?(ud(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return ud(this,t,n.value||n.initializer.call(this)),this[t]},set:TP}:{enumerable:!1,configurable:!0,set:function(i){ud(this,t,i)},get:function(){}}}var K=function(t,n,r,i){if(arguments.length===1&&typeof t=="function")return To(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof n=="function")return To(t,n);if(arguments.length===1&&typeof t=="string")return Ey(t);if(i===!0)Ba(t,n,To(t.name||n,r.value,this));else return Ey(n).apply(null,arguments)};K.bound=PP;function NP(e,t){var n=typeof e=="string"?e:e.name||"<unnamed action>",r=typeof e=="function"?e:t;return Sx(n,r,this,void 0)}function ud(e,t,n){Ba(e,t,To(t,n.bind(e)))}function RP(e,t){t===void 0&&(t=Up);var n=t&&t.name||e.name||"Autorun@"+Ln(),r=!t.scheduler&&!t.delay,i;if(r)i=new ol(n,function(){this.track(s)},t.onError,t.requiresObservable);else{var o=Rx(t),a=!1;i=new ol(n,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(s)}))},t.onError,t.requiresObservable)}function s(){e(i)}return i.schedule(),i.getDisposer()}var DP=function(e){return e()};function Rx(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:DP}function Dx(e,t,n){n===void 0&&(n=Up);var r=n.name||"Reaction@"+Ln(),i=K(r,n.onError?LP(n.onError,t):t),o=!n.scheduler&&!n.delay,a=Rx(n),s=!0,l=!1,u,c=n.compareStructural?Oa.structural:n.equals||Oa.default,f=new ol(r,function(){s||o?d():l||(l=!0,a(d))},n.onError,n.requiresObservable);function d(){if(l=!1,!f.isDisposed){var h=!1;f.track(function(){var v=e(f);h=s||!c(u,v),u=v}),s&&n.fireImmediately&&i(u,f),!s&&h===!0&&i(u,f),s&&(s=!1)}}return f.schedule(),f.getDisposer()}function LP(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}function IP(e,t,n){return Ix("onBecomeObserved",e,t)}function Lx(e,t,n){return Ix("onBecomeUnobserved",e,t)}function Ix(e,t,n,r){var i=Yi(t),o=n,a=e+"Listeners";i[a]?i[a].add(o):i[a]=new Set([o]);var s=i[e];return typeof s!="function"?dt(!1):function(){var l=i[a];l&&(l.delete(o),l.size===0&&delete i[a])}}function kP(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.computedConfigurable,i=e.disableErrorBoundaries,o=e.reactionScheduler,a=e.reactionRequiresObservable,s=e.observableRequiresReaction;if(bP(),t!==void 0){var l=void 0;switch(t){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:dt("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Oe.enforceActions=l,Oe.allowStateChanges=!(l===!0||l==="strict")}n!==void 0&&(Oe.computedRequiresReaction=!!n),a!==void 0&&(Oe.reactionRequiresObservable=!!a),s!==void 0&&(Oe.observableRequiresReaction=!!s,Oe.allowStateReads=!Oe.observableRequiresReaction),r!==void 0&&(Oe.computedConfigurable=!!r),i!==void 0&&(i===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Oe.disableErrorBoundaries=!!i),o&&AP(o)}function hh(e,t,n,r){r=sa(r);var i=kx(r);return Do(e),Qp(e,r.name,i.enhancer),t&&jx(e,t,n,i),e}function kx(e){return e.defaultDecorator||(e.deep===!1?bx:Vp)}function jx(e,t,n,r){var i,o,a,s,l,u;Pr();try{var a=eP(t);try{for(var c=Kr(a),f=c.next();!f.done;f=c.next()){var u=f.value,d=Object.getOwnPropertyDescriptor(t,u),h=n&&u in n?n[u]:d.get?Vu:r,v=h(e,u,d,!0);v&&Object.defineProperty(e,u,v)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}finally{Nr()}}function jP(e,t){return Bx(Yi(e,t))}function Bx(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=qM(e.observing).map(Bx)),t}function Fx(e,t){if(e==null)return!1;if(t!==void 0){if(jr(e)===!1||!e[$e].values.has(t))return!1;var n=Yi(e,t);return Ta(n)}return Ta(e)}function BP(e){return arguments.length>1?dt(!1):Fx(e)}function Sy(e,t){return typeof t!="string"?dt(!1):Fx(e,t)}function FP(e,t){return e==null?!1:jr(e)||!!e[$e]||Gp(e)||Ju(e)||Ta(e)}function Ma(e){return arguments.length!==1&&dt(!1),FP(e)}function Pa(e){return jr(e)?e[$e].getKeys():In(e)||dr(e)?Array.from(e.keys()):ni(e)?e.map(function(t,n){return n}):dt(!1)}function $P(e){return jr(e)?Pa(e).map(function(t){return e[t]}):In(e)?Pa(e).map(function(t){return e.get(t)}):dr(e)?Array.from(e.values()):ni(e)?e.slice():dt(!1)}function HP(e){return jr(e)?Pa(e).map(function(t){return[t,e[t]]}):In(e)?Pa(e).map(function(t){return[t,e.get(t)]}):dr(e)?Array.from(e.entries()):ni(e)?e.map(function(t,n){return[n,t]}):dt(!1)}function Zp(e,t,n){if(arguments.length===2&&!dr(e)){Pr();var r=t;try{for(var i in r)Zp(e,i,r[i])}finally{Nr()}return}if(jr(e)){var o=e[$e],a=o.values.get(t);a?o.write(t,n):o.addObservableProp(t,n,o.defaultEnhancer)}else if(In(e))e.set(t,n);else if(dr(e))e.add(t);else if(ni(e))typeof t!="number"&&(t=parseInt(t,10)),Co(t>=0,"Not a valid index: '"+t+"'"),Pr(),t>=e.length&&(e.length=t+1),e[t]=n,Nr();else return dt(!1)}function $x(e,t,n,r){return WP(e,t,n)}function WP(e,t,n){return cf(e).observe(t,n)}var zP={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Zo(e,t,n,r){return r.detectCycles&&e.set(t,n),n}function Di(e,t,n){if(!t.recurseEverything&&!Ma(e)||typeof e!="object")return e;if(e===null)return null;if(e instanceof Date)return e;if(mP(e))return Di(e.get(),t,n);Ma(e)&&Pa(e);var r=t.detectCycles===!0;if(r&&e!==null&&n.has(e))return n.get(e);if(ni(e)||Array.isArray(e)){var i=Zo(n,e,[],t),o=e.map(function(h){return Di(h,t,n)});i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(dr(e)||Object.getPrototypeOf(e)===Set.prototype)if(t.exportMapsAsObjects===!1){var l=Zo(n,e,new Set,t);return e.forEach(function(h){l.add(Di(h,t,n))}),l}else{var u=Zo(n,e,[],t);return e.forEach(function(h){u.push(Di(h,t,n))}),u}if(In(e)||Object.getPrototypeOf(e)===Map.prototype)if(t.exportMapsAsObjects===!1){var c=Zo(n,e,new Map,t);return e.forEach(function(h,v){c.set(v,Di(h,t,n))}),c}else{var f=Zo(n,e,{},t);return e.forEach(function(h,v){f[v]=Di(h,t,n)}),f}var d=Zo(n,e,{},t);return gx(e).forEach(function(h){d[h]=Di(e[h],t,n)}),d}function wr(e,t){typeof t=="boolean"&&(t={detectCycles:t}),t||(t=zP),t.detectCycles=t.detectCycles===void 0?t.recurseEverything===!0:t.detectCycles===!0;var n;return t.detectCycles&&(n=new Map),Di(e,t,n)}function UP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;typeof e[e.length-1]=="boolean"&&(n=e.pop());var r=XP(e);if(!r)return dt(!1);r.isTracing===Zr.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Zr.BREAK:Zr.LOG}function XP(e){switch(e.length){case 0:return Oe.trackingDerivation;case 1:return Yi(e[0]);case 2:return Yi(e[0],e[1])}}function Sr(e,t){t===void 0&&(t=void 0),Pr();try{return e.apply(t)}finally{Nr()}}function Vl(e){return e[$e]}function ql(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"}var GP={has:function(e,t){if(t===$e||t==="constructor"||t===Ku)return!0;var n=Vl(e);return ql(t)?n.has(t):t in e},get:function(e,t){if(t===$e||t==="constructor"||t===Ku)return e[t];var n=Vl(e),r=n.values.get(t);if(r instanceof $a){var i=r.get();return i===void 0&&n.has(t),i}return ql(t)&&n.has(t),e[t]},set:function(e,t,n){return ql(t)?(Zp(e,t,n),!0):!1},deleteProperty:function(e,t){if(!ql(t))return!1;var n=Vl(e);return n.remove(t),!0},ownKeys:function(e){var t=Vl(e);return t.keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return dt("Dynamic observable objects cannot be frozen"),!1}};function YP(e){var t=new Proxy(e,GP);return e[$e].proxy=t,t}function Jr(e){return e.interceptors!==void 0&&e.interceptors.length>0}function Pl(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),vx(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Qr(e,t){var n=Ha();try{for(var r=Kp(e.interceptors||[]),i=0,o=r.length;i<o&&(t=r[i](t),Co(!t||t.type,"Intercept handlers should return nothing or a change object"),!!t);i++);return t}finally{Xi(n)}}function Rr(e){return e.changeListeners!==void 0&&e.changeListeners.length>0}function Nl(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),vx(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Dr(e,t){var n=Ha(),r=e.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](t);Xi(n)}}var KP=1e4,VP={get:function(e,t){return t===$e?e[$e]:t==="length"?e[$e].getArrayLength():typeof t=="number"?hi.get.call(e,t):typeof t=="string"&&!isNaN(t)?hi.get.call(e,parseInt(t)):hi.hasOwnProperty(t)?hi[t]:e[t]},set:function(e,t,n){return t==="length"&&e[$e].setArrayLength(n),typeof t=="number"&&hi.set.call(e,t,n),typeof t=="symbol"||isNaN(t)?e[t]=n:hi.set.call(e,parseInt(t),n),!0},preventExtensions:function(e){return dt("Observable arrays cannot be frozen"),!1}};function qP(e,t,n,r){n===void 0&&(n="ObservableArray@"+Ln()),r===void 0&&(r=!1);var i=new Hx(n,t,r);JM(i.values,$e,i);var o=new Proxy(i.values,VP);if(i.proxy=o,e&&e.length){var a=lf(!0);i.spliceWithArray(0,0,e),uf(a)}return o}var Hx=function(){function e(t,n,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new $a(t||"ObservableArray@"+Ln()),this.enhancer=function(i,o){return n(i,o,t+"[..]")}}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.dehanceValues=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},e.prototype.intercept=function(t){return Pl(this,t)},e.prototype.observe=function(t,n){return n===void 0&&(n=!1),n&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Nl(this,t)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(t){if(typeof t!="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var n=this.values.length;if(t!==n)if(t>n){for(var r=new Array(t-n),i=0;i<t-n;i++)r[i]=void 0;this.spliceWithArray(n,0,r)}else this.spliceWithArray(t,n-t)},e.prototype.updateArrayLength=function(t,n){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=n},e.prototype.spliceWithArray=function(t,n,r){var i=this;Aa(this.atom);var o=this.values.length;if(t===void 0?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),arguments.length===1?n=o-t:n==null?n=0:n=Math.max(0,Math.min(n,o-t)),r===void 0&&(r=Gu),Jr(this)){var a=Qr(this,{object:this.proxy,type:"splice",index:t,removedCount:n,added:r});if(!a)return Gu;n=a.removedCount,r=a.added}r=r.length===0?r:r.map(function(l){return i.enhancer(l,void 0)});var s=this.spliceItemsIntoValues(t,n,r);return(n!==0||r.length!==0)&&this.notifyArraySplice(t,r,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(t,n,r){var i;if(r.length<KP)return(i=this.values).splice.apply(i,Kp([t,n],r));var o=this.values.slice(t,t+n);return this.values=this.values.slice(0,t).concat(r,this.values.slice(t+n)),o},e.prototype.notifyArrayChildUpdate=function(t,n,r){var i=!this.owned&&sr(),o=Rr(this),a=o||i?{object:this.proxy,type:"update",index:t,newValue:n,oldValue:r}:null;this.atom.reportChanged(),o&&Dr(this,a)},e.prototype.notifyArraySplice=function(t,n,r){var i=!this.owned&&sr(),o=Rr(this),a=o||i?{object:this.proxy,type:"splice",index:t,removed:r,added:n,removedCount:r.length,addedCount:n.length}:null;this.atom.reportChanged(),o&&Dr(this,a)},e}(),hi={intercept:function(e){return this[$e].intercept(e)},observe:function(e,t){t===void 0&&(t=!1);var n=this[$e];return n.observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[$e];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this[$e];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(e);case 2:return i.spliceWithArray(e,t)}return i.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){var r=this[$e];return r.spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[$e];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[$e].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[$e];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[$e],n=t.dehanceValues(t.values).indexOf(e);return n>-1?(this.splice(n,1),!0):!1},get:function(e){var t=this[$e];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[$e],r=n.values;if(e<r.length){Aa(n.atom);var i=r[e];if(Jr(n)){var o=Qr(n,{type:"update",object:n.proxy,index:e,newValue:t});if(!o)return;t=o.newValue}t=n.enhancer(t,i);var a=t!==i;a&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else if(e===r.length)n.spliceWithArray(e,0,[t]);else throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){typeof Array.prototype[e]=="function"&&(hi[e]=function(){var t=this[$e];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)})});["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(e){typeof Array.prototype[e]=="function"&&(hi[e]=function(t,n){var r=this,i=this[$e];i.atom.reportObserved();var o=i.dehanceValues(i.values);return o[e](function(a,s){return t.call(n,a,s,r)},n)})});["reduce","reduceRight"].forEach(function(e){hi[e]=function(){var t=this,n=this[$e];n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(i,o,a){return o=n.dehanceValue(o),r(i,o,a,t)},n.values[e].apply(n.values,arguments)}});var ZP=Ji("ObservableArrayAdministration",Hx);function ni(e){return Xp(e)&&ZP(e[$e])}var Oy,JP={},Jp=function(){function e(t,n,r){if(n===void 0&&(n=Ml),r===void 0&&(r="ObservableMap@"+Ln()),this.enhancer=n,this.name=r,this[Oy]=JP,this._keysAtom=Yp(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return e.prototype._has=function(t){return this._data.has(t)},e.prototype.has=function(t){var n=this;if(!Oe.trackingDerivation)return this._has(t);var r=this._hasMap.get(t);if(!r){var i=r=new Mo(this._has(t),af,this.name+"."+Hi(t)+"?",!1);this._hasMap.set(t,i),Lx(i,function(){return n._hasMap.delete(t)})}return r.get()},e.prototype.set=function(t,n){var r=this._has(t);if(Jr(this)){var i=Qr(this,{type:r?"update":"add",object:this,newValue:n,name:t});if(!i)return this;n=i.newValue}return r?this._updateValue(t,n):this._addValue(t,n),this},e.prototype.delete=function(t){var n=this;if(Aa(this._keysAtom),Jr(this)){var r=Qr(this,{type:"delete",object:this,name:t});if(!r)return!1}if(this._has(t)){var i=sr(),o=Rr(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return Sr(function(){n._keysAtom.reportChanged(),n._updateHasMapEntry(t,!1);var s=n._data.get(t);s.setNewValue(void 0),n._data.delete(t)}),o&&Dr(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(t,n){var r=this._hasMap.get(t);r&&r.setNewValue(n)},e.prototype._updateValue=function(t,n){var r=this._data.get(t);if(n=r.prepareNewValue(n),n!==Oe.UNCHANGED){var i=sr(),o=Rr(this),a=o||i?{type:"update",object:this,oldValue:r.value,name:t,newValue:n}:null;r.setNewValue(n),o&&Dr(this,a)}},e.prototype._addValue=function(t,n){var r=this;Aa(this._keysAtom),Sr(function(){var s=new Mo(n,r.enhancer,r.name+"."+Hi(t),!1);r._data.set(t,s),n=s.value,r._updateHasMapEntry(t,!0),r._keysAtom.reportChanged()});var i=sr(),o=Rr(this),a=o||i?{type:"add",object:this,name:t,newValue:n}:null;o&&Dr(this,a)},e.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var t=this,n=this.keys();return Qu({next:function(){var r=n.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:t.get(o)}}})},e.prototype.entries=function(){var t=this,n=this.keys();return Qu({next:function(){var r=n.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:[o,t.get(o)]}}})},e.prototype[Oy=$e,Symbol.iterator]=function(){return this.entries()},e.prototype.forEach=function(t,n){var r,i;try{for(var o=Kr(this),a=o.next();!a.done;a=o.next()){var s=ua(a.value,2),l=s[0],u=s[1];t.call(n,u,l,this)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.merge=function(t){var n=this;return In(t)&&(t=t.toJS()),Sr(function(){var r=lf(!0);try{ja(t)?gx(t).forEach(function(i){return n.set(i,t[i])}):Array.isArray(t)?t.forEach(function(i){var o=ua(i,2),a=o[0],s=o[1];return n.set(a,s)}):Fa(t)?(t.constructor!==Map&&dt("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach(function(i,o){return n.set(o,i)})):t!=null&&dt("Cannot initialize map from "+t)}finally{uf(r)}}),this},e.prototype.clear=function(){var t=this;Sr(function(){wx(function(){var n,r;try{for(var i=Kr(t.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;t.delete(a)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})})},e.prototype.replace=function(t){var n=this;return Sr(function(){var r,i,o,a,s=ZM(t),l=new Map,u=!1;try{for(var c=Kr(n._data.keys()),f=c.next();!f.done;f=c.next()){var d=f.value;if(!s.has(d)){var h=n.delete(d);if(h)u=!0;else{var v=n._data.get(d);l.set(d,v)}}}}catch(k){r={error:k}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}try{for(var p=Kr(s.entries()),g=p.next();!g.done;g=p.next()){var y=ua(g.value,2),d=y[0],v=y[1],m=n._data.has(d);if(n.set(d,v),n._data.has(d)){var M=n._data.get(d);l.set(d,M),m||(u=!0)}}}catch(k){o={error:k}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(!u)if(n._data.size!==l.size)n._keysAtom.reportChanged();else for(var T=n._data.keys(),L=l.keys(),N=T.next(),E=L.next();!N.done;){if(N.value!==E.value){n._keysAtom.reportChanged();break}N=T.next(),E=L.next()}n._data=l}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t,n,r={};try{for(var i=Kr(this),o=i.next();!o.done;o=i.next()){var a=ua(o.value,2),s=a[0],l=a[1];r[typeof s=="symbol"?s:Hi(s)]=l}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map(function(n){return Hi(n)+": "+(""+t.get(n))}).join(", ")+" }]"},e.prototype.observe=function(t,n){return Nl(this,t)},e.prototype.intercept=function(t){return Pl(this,t)},e}(),In=Ji("ObservableMap",Jp),Ay,QP={},Wx=function(){function e(t,n,r){if(n===void 0&&(n=Ml),r===void 0&&(r="ObservableSet@"+Ln()),this.name=r,this[Ay]=QP,this._data=new Set,this._atom=Yp(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return n(i,o,r)},t&&this.replace(t)}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.clear=function(){var t=this;Sr(function(){wx(function(){var n,r;try{for(var i=Kr(t._data.values()),o=i.next();!o.done;o=i.next()){var a=o.value;t.delete(a)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})})},e.prototype.forEach=function(t,n){var r,i;try{for(var o=Kr(this),a=o.next();!a.done;a=o.next()){var s=a.value;t.call(n,s,s,this)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(t){var n=this;if(Aa(this._atom),Jr(this)){var r=Qr(this,{type:"add",object:this,newValue:t});if(!r)return this}if(!this.has(t)){Sr(function(){n._data.add(n.enhancer(t,void 0)),n._atom.reportChanged()});var i=sr(),o=Rr(this),r=o||i?{type:"add",object:this,newValue:t}:null;o&&Dr(this,r)}return this},e.prototype.delete=function(t){var n=this;if(Jr(this)){var r=Qr(this,{type:"delete",object:this,oldValue:t});if(!r)return!1}if(this.has(t)){var i=sr(),o=Rr(this),r=o||i?{type:"delete",object:this,oldValue:t}:null;return Sr(function(){n._atom.reportChanged(),n._data.delete(t)}),o&&Dr(this,r),!0}return!1},e.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},e.prototype.entries=function(){var t=0,n=Array.from(this.keys()),r=Array.from(this.values());return Qu({next:function(){var i=t;return t+=1,i<r.length?{value:[n[i],r[i]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var t=this,n=0,r=Array.from(this._data.values());return Qu({next:function(){return n<r.length?{value:t.dehanceValue(r[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(t){var n=this;return dr(t)&&(t=t.toJS()),Sr(function(){var r=lf(!0);try{Array.isArray(t)?(n.clear(),t.forEach(function(i){return n.add(i)})):Tl(t)?(n.clear(),t.forEach(function(i){return n.add(i)})):t!=null&&dt("Cannot initialize set from "+t)}finally{uf(r)}}),this},e.prototype.observe=function(t,n){return Nl(this,t)},e.prototype.intercept=function(t){return Pl(this,t)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[Ay=$e,Symbol.iterator]=function(){return this.values()},e}(),dr=Ji("ObservableSet",Wx),zx=function(){function e(t,n,r,i){n===void 0&&(n=new Map),this.target=t,this.values=n,this.name=r,this.defaultEnhancer=i,this.keysAtom=new $a(r+".keys")}return e.prototype.read=function(t){return this.values.get(t).get()},e.prototype.write=function(t,n){var r=this.target,i=this.values.get(t);if(i instanceof Ca){i.set(n);return}if(Jr(this)){var o=Qr(this,{type:"update",object:this.proxy||r,name:t,newValue:n});if(!o)return;n=o.newValue}if(n=i.prepareNewValue(n),n!==Oe.UNCHANGED){var a=Rr(this),s=sr(),o=a||s?{type:"update",object:this.proxy||r,oldValue:i.value,name:t,newValue:n}:null;i.setNewValue(n),a&&Dr(this,o)}},e.prototype.has=function(t){var n=this.pendingKeys||(this.pendingKeys=new Map),r=n.get(t);if(r)return r.get();var i=!!this.values.get(t);return r=new Mo(i,af,this.name+"."+Hi(t)+"?",!1),n.set(t,r),r.get()},e.prototype.addObservableProp=function(t,n,r){r===void 0&&(r=this.defaultEnhancer);var i=this.target;if(Jr(this)){var o=Qr(this,{object:this.proxy||i,name:t,type:"add",newValue:n});if(!o)return;n=o.newValue}var a=new Mo(n,r,this.name+"."+Hi(t),!1);this.values.set(t,a),n=a.value,Object.defineProperty(i,t,eN(t)),this.notifyPropertyAddition(t,n)},e.prototype.addComputedProp=function(t,n,r){var i=this.target;r.name=r.name||this.name+"."+Hi(n),this.values.set(n,new Ca(r)),(t===i||QM(t,n))&&Object.defineProperty(t,n,tN(n))},e.prototype.remove=function(t){if(this.values.has(t)){var n=this.target;if(Jr(this)){var r=Qr(this,{object:this.proxy||n,name:t,type:"remove"});if(!r)return}try{Pr();var i=Rr(this),o=sr(),a=this.values.get(t),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var l=this.pendingKeys.get(t);l&&l.set(!1)}delete this.target[t];var r=i||o?{type:"remove",object:this.proxy||n,oldValue:s,name:t}:null;i&&Dr(this,r)}finally{Nr()}}},e.prototype.illegalAccess=function(t,n){console.warn("Property '"+n+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(t,n){return Nl(this,t)},e.prototype.intercept=function(t){return Pl(this,t)},e.prototype.notifyPropertyAddition=function(t,n){var r=Rr(this),i=sr(),o=r||i?{type:"add",object:this.proxy||this.target,name:t,newValue:n}:null;if(r&&Dr(this,o),this.pendingKeys){var a=this.pendingKeys.get(t);a&&a.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var t,n;this.keysAtom.reportObserved();var r=[];try{for(var i=Kr(this.values),o=i.next();!o.done;o=i.next()){var a=ua(o.value,2),s=a[0],l=a[1];l instanceof Mo&&r.push(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e}();function Qp(e,t,n){if(t===void 0&&(t=""),n===void 0&&(n=Ml),Object.prototype.hasOwnProperty.call(e,$e))return e[$e];ja(e)||(t=(e.constructor.name||"ObservableObject")+"@"+Ln()),t||(t="ObservableObject@"+Ln());var r=new zx(e,new Map,Hi(t),n);return Ba(e,$e,r),r}var Cy=Object.create(null),Ty=Object.create(null);function eN(e){return Cy[e]||(Cy[e]={configurable:!0,enumerable:!0,get:function(){return this[$e].read(e)},set:function(t){this[$e].write(e,t)}})}function My(e){var t=e[$e];return t||(Do(e),e[$e])}function tN(e){return Ty[e]||(Ty[e]={configurable:Oe.computedConfigurable,enumerable:!1,get:function(){return My(this).read(e)},set:function(t){My(this).write(e,t)}})}var nN=Ji("ObservableObjectAdministration",zx);function jr(e){return Xp(e)?(Do(e),nN(e[$e])):!1}function Yi(e,t){if(typeof e=="object"&&e!==null){if(ni(e))return t!==void 0&&dt(!1),e[$e].atom;if(dr(e))return e[$e];if(In(e)){var n=e;if(t===void 0)return n._keysAtom;var r=n._data.get(t)||n._hasMap.get(t);return r||dt(!1),r}if(Do(e),t&&!e[$e]&&e[t],jr(e)){if(!t)return dt(!1);var r=e[$e].values.get(t);return r||dt(!1),r}if(Gp(e)||Ta(e)||Ju(e))return e}else if(typeof e=="function"&&Ju(e[$e]))return e[$e];return dt(!1)}function cf(e,t){if(e||dt("Expecting some object"),t!==void 0)return cf(Yi(e,t));if(Gp(e)||Ta(e)||Ju(e)||In(e)||dr(e))return e;if(Do(e),e[$e])return e[$e];dt(!1)}function rN(e,t){var n;return t!==void 0?n=Yi(e,t):jr(e)||In(e)||dr(e)?n=cf(e):n=Yi(e),n.name}var Py=Object.prototype.toString;function Ux(e,t,n){return n===void 0&&(n=-1),ph(e,t,n)}function ph(e,t,n,r,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var a=Py.call(e);if(a!==Py.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=Ny(e),t=Ny(t);var s=a==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(typeof l=="function"&&l instanceof l&&typeof u=="function"&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var c=r.length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!ph(e[c],t[c],n-1,r,i))return!1}else{var f=Object.keys(e),d=void 0;if(c=f.length,Object.keys(t).length!==c)return!1;for(;c--;)if(d=f[c],!(iN(t,d)&&ph(e[d],t[d],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function Ny(e){return ni(e)?e.slice():Fa(e)||In(e)||Tl(e)||dr(e)?Array.from(e.entries()):e}function iN(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qu(e){return e[Symbol.iterator]=oN,e}function oN(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:CP,extras:{getDebugName:rN},$mobx:$e});function aN(e){return!(e.prototype&&e.prototype.render)&&!ot.isPrototypeOf(e)}function Xx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.prefix,r=n===void 0?"":n,i=t.suffix,o=i===void 0?"":i,a=e.displayName||e.name||e.constructor&&e.constructor.name||"<component>";return r+a+o}var Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gx=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Yx=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kx=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Vx=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Dy=console;function sN(e){var t=fh().allowStateChanges;return fh().allowStateChanges=e,t}function lN(e){fh().allowStateChanges=e}function uN(e,t,n,r,i){var o=sN(e),a=void 0;try{a=t(n,r,i)}finally{lN(o)}return a}function Ly(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e[t],i=qx[t],o=r?n===!0?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;e[t]=o}function Iy(e,t){if(e==null||t==null||(typeof e>"u"?"undefined":Ry(e))!=="object"||(typeof t>"u"?"undefined":Ry(t))!=="object")return e!==t;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(var r=void 0,i=n.length-1;r=n[i];i--)if(t[r]!==e[r])return!0;return!1}var qx={componentWillMount:function(){var t=this,n=Xx(this),r=!1,i=!1;function o(f){var d=this[f],h=Yp("reactive "+f);Object.defineProperty(this,f,{configurable:!0,enumerable:!0,get:function(){return h.reportObserved(),d},set:function(p){!i&&Iy(d,p)?(d=p,r=!0,h.reportChanged(),r=!1):d=p}})}o.call(this,"props"),o.call(this,"state");var a=this.render.bind(this),s=null,l=!1,u=function(){return s=new ol(n+".render()",function(){if(!l&&(l=!0,typeof t.componentWillReact=="function"&&t.componentWillReact(),t.__$mobxIsUnmounted!==!0)){var d=!0;try{i=!0,r||ot.prototype.forceUpdate.call(t),d=!1}finally{i=!1,d&&s.dispose()}}}),s.reactComponent=t,c.$mobx=s,t.render=c,c(t.props,t.state,t.context)},c=function(d,h,v){l=!1;var p=void 0,g=void 0;if(s.track(function(){try{g=uN(!1,a,d,h,v)}catch(y){p=y}}),p)throw p;return g};this.render=u},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(t,n){return this.state!==n?!0:Iy(this.props,t)}};function ev(e){if(arguments.length>1&&Dy.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),e.isMobxInjector===!0&&Dy.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),aN(e)){var t,n;return ev((n=t=function(i){Kx(o,i);function o(){return Gx(this,o),Vx(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return Yx(o,[{key:"render",value:function(){return e.call(this,this.props,this.context)}}]),o}(ot),t.displayName=Xx(e),n))}if(!e)throw new Error("Please pass a valid component to 'observer'");var r=e.prototype||e;return cN(r),e.isMobXReactObserver=!0,e}function cN(e){Ly(e,"componentWillMount",!0),Ly(e,"componentDidMount"),e.shouldComponentUpdate||(e.shouldComponentUpdate=qx.shouldComponentUpdate)}var fN=ev(function(e){var t=e.children;return t[0]()});fN.displayName="Observer";var dN=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hN(e,t){return t={exports:{}},e(t,t.exports),t.exports}hN(function(e,t){(function(n,r){e.exports=r()})(dN,function(){var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);return function c(f,d,h){if(typeof d!="string"){if(u){var v=l(d);v&&v!==u&&c(f,v,h)}var p=o(d);a&&(p=p.concat(a(d)));for(var g=0;g<p.length;++g){var y=p[g];if(!n[y]&&!r[y]&&(!h||!h[y])){var m=s(d,y);try{i(f,y,m)}catch{}}}return f}return f}})});var ky={children:!0,key:!0,ref:!0},jy=console;(function(e){Kx(t,e);function t(){return Gx(this,t),Vx(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Yx(t,[{key:"render",value:function(r){var i=r.children;return i.length>1?Te("div",null," ",i," "):i[0]}},{key:"getChildContext",value:function(){var r={},i=this.context.mobxStores;if(i)for(var o in i)r[o]=i[o];for(var a in this.props)!ky[a]&&a!=="suppressChangedStoreWarning"&&(r[a]=this.props[a]);return{mobxStores:r}}},{key:"componentWillReceiveProps",value:function(r){if(Object.keys(r).length!==Object.keys(this.props).length&&jy.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!r.suppressChangedStoreWarning)for(var i in r)!ky[i]&&this.props[i]!==r[i]&&jy.warn("MobX Provider: Provided store '"+i+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t})(ot);if(!ot)throw new Error("mobx-preact requires Preact to be available");var Gr,cd,By,Zx=[],an=nt,Fy=an.__b,$y=an.__r,Hy=an.diffed,Wy=an.__c,zy=an.unmount,Uy=an.__;function pN(){for(var e;e=Zx.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Cu),e.__H.__h.forEach(vh),e.__H.__h=[]}catch(t){e.__H.__h=[],an.__e(t,e.__v)}}an.__b=function(e){Gr=null,Fy&&Fy(e)},an.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Uy&&Uy(e,t)},an.__r=function(e){$y&&$y(e);var t=(Gr=e.__c).__H;t&&(cd===Gr?(t.__h=[],Gr.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Cu),t.__h.forEach(vh),t.__h=[])),cd=Gr},an.diffed=function(e){Hy&&Hy(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Zx.push(t)!==1&&By===an.requestAnimationFrame||((By=an.requestAnimationFrame)||vN)(pN)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),cd=Gr=null},an.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Cu),n.__h=n.__h.filter(function(r){return!r.__||vh(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],an.__e(r,n.__v)}}),Wy&&Wy(e,t)},an.unmount=function(e){zy&&zy(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Cu(r)}catch(i){t=i}}),n.__H=void 0,t&&an.__e(t,n.__v))};var Xy=typeof requestAnimationFrame=="function";function vN(e){var t,n=function(){clearTimeout(r),Xy&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);Xy&&(t=requestAnimationFrame(n))}function Cu(e){var t=Gr,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Gr=t}function vh(e){var t=Gr;e.__c=e.__(),Gr=t}function gN(e,t){for(var n in t)e[n]=t[n];return e}function Gy(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Yy(e,t){this.props=e,this.context=t}(Yy.prototype=new ot).isPureReactComponent=!0,Yy.prototype.shouldComponentUpdate=function(e,t){return Gy(this.props,e)||Gy(this.state,t)};var Ky=nt.__b;nt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ky&&Ky(e)};var yN=nt.__e;nt.__e=function(e,t,n,r){if(e.then){for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}yN(e,t,n,r)};var Vy=nt.unmount;function Jx(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=gN({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return Jx(r,t,n)})),e}function Qx(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return Qx(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function fd(){this.__u=0,this.o=null,this.__b=null}function ew(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Zl(){this.i=null,this.l=null}nt.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Vy&&Vy(e)},(fd.prototype=new ot).__c=function(e,t){var n=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=ew(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Qx(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},fd.prototype.componentWillUnmount=function(){this.o=[]},fd.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Jx(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&Te(Ea,null,e.fallback);return i&&(i.__u&=-33),[Te(Ea,null,t.__a?null:e.children),i]};var qy=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(Zl.prototype=new ot).__a=function(e){var t=this,n=ew(t.__v),r=t.l.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),qy(t,e,r)):i()};n?n(o):o()}},Zl.prototype.render=function(e){this.i=null,this.l=new Map;var t=Xu(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Zl.prototype.componentDidUpdate=Zl.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){qy(e,n,t)})};var mN=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,_N=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,bN=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,xN=/[A-Z0-9]/g,wN=typeof document<"u",EN=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Zy(e,t,n){return t.__k==null&&(t.textContent=""),KM(e,t),typeof n=="function"&&n(),e?e.__c:null}ot.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ot.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Jy=nt.event;function SN(){}function ON(){return this.cancelBubble}function AN(){return this.defaultPrevented}nt.event=function(e){return Jy&&(e=Jy(e)),e.persist=SN,e.isPropagationStopped=ON,e.isDefaultPrevented=AN,e.nativeEvent=e};var CN={enumerable:!1,configurable:!0,get:function(){return this.class}},Qy=nt.vnode;nt.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={},o=r.indexOf("-")===-1;for(var a in n){var s=n[a];if(!(a==="value"&&"defaultValue"in n&&s==null||wN&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||EN(n.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":bN.test(a)&&(a=l):l=a="oninput":o&&_N.test(a)?a=a.replace(xN,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Xu(n.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Xu(n.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",CN)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=mN,Qy&&Qy(e)};var em=nt.__r;nt.__r=function(e){em&&em(e),e.__c};var tm=nt.diffed;nt.diffed=function(e){tm&&tm(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};var TN=0;function V(e,t,n,r,i,o){t||(t={});var a,s,l=t;if("ref"in l)for(s in l={},t)s=="ref"?a=t[s]:l[s]=t[s];var u={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--TN,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return nt.vnode&&nt.vnode(u),u}var tw=typeof global=="object"&&global&&global.Object===Object&&global,MN=typeof self=="object"&&self&&self.Object===Object&&self,Qt=tw||MN||Function("return this")(),yn=Qt.Symbol,nw=Object.prototype,PN=nw.hasOwnProperty,NN=nw.toString,us=yn?yn.toStringTag:void 0;function RN(e){var t=PN.call(e,us),n=e[us];try{e[us]=void 0;var r=!0}catch{}var i=NN.call(e);return r&&(t?e[us]=n:delete e[us]),i}var DN=Object.prototype,LN=DN.toString;function IN(e){return LN.call(e)}var kN="[object Null]",jN="[object Undefined]",nm=yn?yn.toStringTag:void 0;function Cn(e){return e==null?e===void 0?jN:kN:nm&&nm in Object(e)?RN(e):IN(e)}function $t(e){return e!=null&&typeof e=="object"}var BN="[object Symbol]";function Yn(e){return typeof e=="symbol"||$t(e)&&Cn(e)==BN}var FN=NaN;function rm(e){return typeof e=="number"?e:Yn(e)?FN:+e}function kt(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ke=Array.isArray,im=yn?yn.prototype:void 0,om=im?im.toString:void 0;function Kn(e){if(typeof e=="string")return e;if(Ke(e))return kt(e,Kn)+"";if(Yn(e))return om?om.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ff(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=Kn(n),r=Kn(r)):(n=rm(n),r=rm(r)),i=e(n,r)}return i}}var $N=ff(function(e,t){return e+t},0),HN=/\s/;function rw(e){for(var t=e.length;t--&&HN.test(e.charAt(t)););return t}var WN=/^\s+/;function iw(e){return e&&e.slice(0,rw(e)+1).replace(WN,"")}function jt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var am=NaN,zN=/^[-+]0x[0-9a-f]+$/i,UN=/^0b[01]+$/i,XN=/^0o[0-7]+$/i,GN=parseInt;function lr(e){if(typeof e=="number")return e;if(Yn(e))return am;if(jt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=iw(e);var n=UN.test(e);return n||XN.test(e)?GN(e.slice(2),n?2:8):zN.test(e)?am:+e}var YN=1/0,KN=17976931348623157e292;function _i(e){if(!e)return e===0?e:0;if(e=lr(e),e===YN||e===-1/0){var t=e<0?-1:1;return t*KN}return e===e?e:0}function rt(e){var t=_i(e),n=t%1;return t===t?n?t-n:t:0}var VN="Expected a function";function qN(e,t){if(typeof t!="function")throw new TypeError(VN);return e=rt(e),function(){if(--e<1)return t.apply(this,arguments)}}function kn(e){return e}var ZN="[object AsyncFunction]",JN="[object Function]",QN="[object GeneratorFunction]",eR="[object Proxy]";function Ei(e){if(!jt(e))return!1;var t=Cn(e);return t==JN||t==QN||t==ZN||t==eR}var Tu=Qt["__core-js_shared__"],sm=function(){var e=/[^.]+$/.exec(Tu&&Tu.keys&&Tu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function tR(e){return!!sm&&sm in e}var nR=Function.prototype,rR=nR.toString;function Wo(e){if(e!=null){try{return rR.call(e)}catch{}try{return e+""}catch{}}return""}var iR=/[\\^$.*+?()[\]{}|]/g,oR=/^\[object .+?Constructor\]$/,aR=Function.prototype,sR=Object.prototype,lR=aR.toString,uR=sR.hasOwnProperty,cR=RegExp("^"+lR.call(uR).replace(iR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ow(e){if(!jt(e)||tR(e))return!1;var t=Ei(e)?cR:oR;return t.test(Wo(e))}function fR(e,t){return e==null?void 0:e[t]}function zo(e,t){var n=fR(e,t);return ow(n)?n:void 0}var al=zo(Qt,"WeakMap"),ec=al&&new al,aw=ec?function(e,t){return ec.set(e,t),e}:kn,lm=Object.create,Wa=function(){function e(){}return function(t){if(!jt(t))return{};if(lm)return lm(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function sl(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wa(e.prototype),r=e.apply(n,t);return jt(r)?r:n}}var dR=1;function hR(e,t,n){var r=t&dR,i=sl(e);function o(){var a=this&&this!==Qt&&this instanceof o?i:e;return a.apply(r?n:this,arguments)}return o}function Vn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var pR=Math.max;function sw(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=pR(o-a,0),c=Array(l+u),f=!r;++s<l;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}var vR=Math.max;function lw(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=vR(o-s,0),f=Array(c+u),d=!r;++i<c;)f[i]=e[i];for(var h=i;++l<u;)f[h+l]=t[l];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=e[i++]);return f}function gR(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function df(){}var yR=4294967295;function lt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yR,this.__views__=[]}lt.prototype=Wa(df.prototype);lt.prototype.constructor=lt;function ga(){}var tv=ec?function(e){return ec.get(e)}:ga,ya={},mR=Object.prototype,_R=mR.hasOwnProperty;function Mu(e){for(var t=e.name+"",n=ya[t],r=_R.call(ya,t)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==e)return i.name}return t}function hr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}hr.prototype=Wa(df.prototype);hr.prototype.constructor=hr;function Dn(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function uw(e){if(e instanceof lt)return e.clone();var t=new hr(e.__wrapped__,e.__chain__);return t.__actions__=Dn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var bR=Object.prototype,xR=bR.hasOwnProperty;function b(e){if($t(e)&&!Ke(e)&&!(e instanceof lt)){if(e instanceof hr)return e;if(xR.call(e,"__wrapped__"))return uw(e)}return new hr(e)}b.prototype=df.prototype;b.prototype.constructor=b;function gh(e){var t=Mu(e),n=b[t];if(typeof n!="function"||!(t in lt.prototype))return!1;if(e===n)return!0;var r=tv(n);return!!r&&e===r[0]}var wR=800,ER=16,SR=Date.now;function cw(e){var t=0,n=0;return function(){var r=SR(),i=ER-(r-n);if(n=r,i>0){if(++t>=wR)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fw=cw(aw),OR=/\{\n\/\* \[wrapped with (.+)\] \*/,AR=/,? & /;function CR(e){var t=e.match(OR);return t?t[1].split(AR):[]}var TR=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function MR(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(TR,`{
/* [wrapped with `+t+`] */
`)}function nv(e){return function(){return e}}var tc=function(){try{var e=zo(Object,"defineProperty");return e({},"",{}),e}catch{}}(),PR=tc?function(e,t){return tc(e,"toString",{configurable:!0,enumerable:!1,value:nv(t),writable:!0})}:kn,rv=cw(PR);function gr(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function hf(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function dw(e){return e!==e}function NR(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function za(e,t,n){return t===t?NR(e,t,n):hf(e,dw,n)}function pf(e,t){var n=e==null?0:e.length;return!!n&&za(e,t,0)>-1}var RR=1,DR=2,LR=8,IR=16,kR=32,jR=64,BR=128,FR=256,$R=512,HR=[["ary",BR],["bind",RR],["bindKey",DR],["curry",LR],["curryRight",IR],["flip",$R],["partial",kR],["partialRight",jR],["rearg",FR]];function WR(e,t){return gr(HR,function(n){var r="_."+n[0];t&n[1]&&!pf(e,r)&&e.push(r)}),e.sort()}function hw(e,t,n){var r=t+"";return rv(e,MR(r,WR(CR(r),n)))}var zR=4,UR=8,um=32,cm=64;function pw(e,t,n,r,i,o,a,s,l,u){var c=t&UR,f=c?a:void 0,d=c?void 0:a,h=c?o:void 0,v=c?void 0:o;t|=c?um:cm,t&=~(c?cm:um),t&zR||(t&=-4);var p=[e,t,i,h,f,v,d,s,l,u],g=n.apply(void 0,p);return gh(e)&&fw(g,p),g.placeholder=r,hw(g,e,t)}function Ua(e){var t=e;return t.placeholder}var XR=9007199254740991,GR=/^(?:0|[1-9]\d*)$/;function Si(e,t){var n=typeof e;return t=t??XR,!!t&&(n=="number"||n!="symbol"&&GR.test(e))&&e>-1&&e%1==0&&e<t}var YR=Math.min;function KR(e,t){for(var n=e.length,r=YR(t.length,n),i=Dn(e);r--;){var o=t[r];e[r]=Si(o,n)?i[o]:void 0}return e}var fm="__lodash_placeholder__";function Ki(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];(a===t||a===fm)&&(e[n]=fm,o[i++]=n)}return o}var VR=1,qR=2,ZR=8,JR=16,QR=128,eD=512;function vf(e,t,n,r,i,o,a,s,l,u){var c=t&QR,f=t&VR,d=t&qR,h=t&(ZR|JR),v=t&eD,p=d?void 0:sl(e);function g(){for(var y=arguments.length,m=Array(y),M=y;M--;)m[M]=arguments[M];if(h)var T=Ua(g),L=gR(m,T);if(r&&(m=sw(m,r,i,h)),o&&(m=lw(m,o,a,h)),y-=L,h&&y<u){var N=Ki(m,T);return pw(e,t,vf,g.placeholder,n,m,N,s,l,u-y)}var E=f?n:this,k=d?E[e]:e;return y=m.length,s?m=KR(m,s):v&&y>1&&m.reverse(),c&&l<y&&(m.length=l),this&&this!==Qt&&this instanceof g&&(k=p||sl(k)),k.apply(E,m)}return g}function tD(e,t,n){var r=sl(e);function i(){for(var o=arguments.length,a=Array(o),s=o,l=Ua(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Ki(a,l);if(o-=u.length,o<n)return pw(e,t,vf,i.placeholder,void 0,a,u,void 0,void 0,n-o);var c=this&&this!==Qt&&this instanceof i?r:e;return Vn(c,this,a)}return i}var nD=1;function rD(e,t,n,r){var i=t&nD,o=sl(e);function a(){for(var s=-1,l=arguments.length,u=-1,c=r.length,f=Array(c+l),d=this&&this!==Qt&&this instanceof a?o:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++s];return Vn(d,i?n:this,f)}return a}var dm="__lodash_placeholder__",dd=1,iD=2,oD=4,hm=8,cs=128,pm=256,aD=Math.min;function sD(e,t){var n=e[1],r=t[1],i=n|r,o=i<(dd|iD|cs),a=r==cs&&n==hm||r==cs&&n==pm&&e[7].length<=t[8]||r==(cs|pm)&&t[7].length<=t[8]&&n==hm;if(!(o||a))return e;r&dd&&(e[2]=t[2],i|=n&dd?0:oD);var s=t[3];if(s){var l=e[3];e[3]=l?sw(l,s,t[4]):s,e[4]=l?Ki(e[3],dm):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?lw(l,s,t[6]):s,e[6]=l?Ki(e[5],dm):t[6]),s=t[7],s&&(e[7]=s),r&cs&&(e[8]=e[8]==null?t[8]:aD(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}var lD="Expected a function",vm=1,uD=2,gm=8,ym=16,mm=32,cD=64,_m=Math.max;function Oi(e,t,n,r,i,o,a,s){var l=t&uD;if(!l&&typeof e!="function")throw new TypeError(lD);var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),a=a===void 0?a:_m(rt(a),0),s=s===void 0?s:rt(s),u-=i?i.length:0,t&cD){var c=r,f=i;r=i=void 0}var d=l?void 0:tv(e),h=[e,t,n,r,i,c,f,o,a,s];if(d&&sD(h,d),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===void 0?l?0:e.length:_m(h[9]-u,0),!s&&t&(gm|ym)&&(t&=-25),!t||t==vm)var v=hR(e,t,n);else t==gm||t==ym?v=tD(e,t,s):(t==mm||t==(vm|mm))&&!i.length?v=rD(e,t,n,r):v=vf.apply(void 0,h);var p=d?aw:fw;return hw(p(v,h),e,t)}var fD=128;function vw(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Oi(e,fD,void 0,void 0,void 0,void 0,t)}function Ai(e,t,n){t=="__proto__"&&tc?tc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Br(e,t){return e===t||e!==e&&t!==t}var dD=Object.prototype,hD=dD.hasOwnProperty;function Rl(e,t,n){var r=e[t];(!(hD.call(e,t)&&Br(r,n))||n===void 0&&!(t in e))&&Ai(e,t,n)}function ri(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),i?Ai(n,s,l):Rl(n,s,l)}return n}var bm=Math.max;function gw(e,t,n){return t=bm(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=bm(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Vn(e,this,s)}}function at(e,t){return rv(gw(e,t,kn),e+"")}var pD=9007199254740991;function gf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=pD}function jn(e){return e!=null&&gf(e.length)&&!Ei(e)}function Sn(e,t,n){if(!jt(n))return!1;var r=typeof t;return(r=="number"?jn(n)&&Si(t,n.length):r=="string"&&t in n)?Br(n[t],e):!1}function Xa(e){return at(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&Sn(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var vD=Object.prototype;function Dl(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||vD;return e===n}function iv(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var gD="[object Arguments]";function xm(e){return $t(e)&&Cn(e)==gD}var yw=Object.prototype,yD=yw.hasOwnProperty,mD=yw.propertyIsEnumerable,Lo=xm(function(){return arguments}())?xm:function(e){return $t(e)&&yD.call(e,"callee")&&!mD.call(e,"callee")};function ov(){return!1}var mw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wm=mw&&typeof module=="object"&&module&&!module.nodeType&&module,_D=wm&&wm.exports===mw,Em=_D?Qt.Buffer:void 0,bD=Em?Em.isBuffer:void 0,Vi=bD||ov,xD="[object Arguments]",wD="[object Array]",ED="[object Boolean]",SD="[object Date]",OD="[object Error]",AD="[object Function]",CD="[object Map]",TD="[object Number]",MD="[object Object]",PD="[object RegExp]",ND="[object Set]",RD="[object String]",DD="[object WeakMap]",LD="[object ArrayBuffer]",ID="[object DataView]",kD="[object Float32Array]",jD="[object Float64Array]",BD="[object Int8Array]",FD="[object Int16Array]",$D="[object Int32Array]",HD="[object Uint8Array]",WD="[object Uint8ClampedArray]",zD="[object Uint16Array]",UD="[object Uint32Array]",Lt={};Lt[kD]=Lt[jD]=Lt[BD]=Lt[FD]=Lt[$D]=Lt[HD]=Lt[WD]=Lt[zD]=Lt[UD]=!0;Lt[xD]=Lt[wD]=Lt[LD]=Lt[ED]=Lt[ID]=Lt[SD]=Lt[OD]=Lt[AD]=Lt[CD]=Lt[TD]=Lt[MD]=Lt[PD]=Lt[ND]=Lt[RD]=Lt[DD]=!1;function XD(e){return $t(e)&&gf(e.length)&&!!Lt[Cn(e)]}function qn(e){return function(t){return e(t)}}var _w=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rs=_w&&typeof module=="object"&&module&&!module.nodeType&&module,GD=Rs&&Rs.exports===_w,hd=GD&&tw.process,pr=function(){try{var e=Rs&&Rs.require&&Rs.require("util").types;return e||hd&&hd.binding&&hd.binding("util")}catch{}}(),Sm=pr&&pr.isTypedArray,Ga=Sm?qn(Sm):XD,YD=Object.prototype,KD=YD.hasOwnProperty;function bw(e,t){var n=Ke(e),r=!n&&Lo(e),i=!n&&!r&&Vi(e),o=!n&&!r&&!i&&Ga(e),a=n||r||i||o,s=a?iv(e.length,String):[],l=s.length;for(var u in e)(t||KD.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Si(u,l)))&&s.push(u);return s}function xw(e,t){return function(n){return e(t(n))}}var VD=xw(Object.keys,Object),qD=Object.prototype,ZD=qD.hasOwnProperty;function av(e){if(!Dl(e))return VD(e);var t=[];for(var n in Object(e))ZD.call(e,n)&&n!="constructor"&&t.push(n);return t}function en(e){return jn(e)?bw(e):av(e)}var JD=Object.prototype,QD=JD.hasOwnProperty,_t=Xa(function(e,t){if(Dl(t)||jn(t)){ri(t,en(t),e);return}for(var n in t)QD.call(t,n)&&Rl(e,n,t[n])});function eL(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var tL=Object.prototype,nL=tL.hasOwnProperty;function rL(e){if(!jt(e))return eL(e);var t=Dl(e),n=[];for(var r in e)r=="constructor"&&(t||!nL.call(e,r))||n.push(r);return n}function Bn(e){return jn(e)?bw(e,!0):rL(e)}var iL=Xa(function(e,t){ri(t,Bn(t),e)}),yh=Xa(function(e,t,n,r){ri(t,Bn(t),e,r)}),oL=Xa(function(e,t,n,r){ri(t,en(t),e,r)}),aL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sL=/^\w*$/;function sv(e,t){if(Ke(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Yn(e)?!0:sL.test(e)||!aL.test(e)||t!=null&&e in Object(t)}var ll=zo(Object,"create");function lL(){this.__data__=ll?ll(null):{},this.size=0}function uL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cL="__lodash_hash_undefined__",fL=Object.prototype,dL=fL.hasOwnProperty;function hL(e){var t=this.__data__;if(ll){var n=t[e];return n===cL?void 0:n}return dL.call(t,e)?t[e]:void 0}var pL=Object.prototype,vL=pL.hasOwnProperty;function gL(e){var t=this.__data__;return ll?t[e]!==void 0:vL.call(t,e)}var yL="__lodash_hash_undefined__";function mL(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ll&&t===void 0?yL:t,this}function Io(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Io.prototype.clear=lL;Io.prototype.delete=uL;Io.prototype.get=hL;Io.prototype.has=gL;Io.prototype.set=mL;function _L(){this.__data__=[],this.size=0}function yf(e,t){for(var n=e.length;n--;)if(Br(e[n][0],t))return n;return-1}var bL=Array.prototype,xL=bL.splice;function wL(e){var t=this.__data__,n=yf(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():xL.call(t,n,1),--this.size,!0}function EL(e){var t=this.__data__,n=yf(t,e);return n<0?void 0:t[n][1]}function SL(e){return yf(this.__data__,e)>-1}function OL(e,t){var n=this.__data__,r=yf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Ci(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ci.prototype.clear=_L;Ci.prototype.delete=wL;Ci.prototype.get=EL;Ci.prototype.has=SL;Ci.prototype.set=OL;var ul=zo(Qt,"Map");function AL(){this.size=0,this.__data__={hash:new Io,map:new(ul||Ci),string:new Io}}function CL(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function mf(e,t){var n=e.__data__;return CL(t)?n[typeof t=="string"?"string":"hash"]:n.map}function TL(e){var t=mf(this,e).delete(e);return this.size-=t?1:0,t}function ML(e){return mf(this,e).get(e)}function PL(e){return mf(this,e).has(e)}function NL(e,t){var n=mf(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Ti(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ti.prototype.clear=AL;Ti.prototype.delete=TL;Ti.prototype.get=ML;Ti.prototype.has=PL;Ti.prototype.set=NL;var RL="Expected a function";function _f(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(RL);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(_f.Cache||Ti),n}_f.Cache=Ti;var DL=500;function LL(e){var t=_f(e,function(r){return n.size===DL&&n.clear(),r}),n=t.cache;return t}var IL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kL=/\\(\\)?/g,ww=LL(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(IL,function(n,r,i,o){t.push(i?o.replace(kL,"$1"):r||n)}),t});function Ot(e){return e==null?"":Kn(e)}function Qi(e,t){return Ke(e)?e:sv(e,t)?[e]:ww(Ot(e))}function ii(e){if(typeof e=="string"||Yn(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Uo(e,t){t=Qi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ii(t[n++])];return n&&n==r?e:void 0}function eo(e,t,n){var r=e==null?void 0:Uo(e,t);return r===void 0?n:r}function lv(e,t){for(var n=-1,r=t.length,i=Array(r),o=e==null;++n<r;)i[n]=o?void 0:eo(e,t[n]);return i}function to(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Om=yn?yn.isConcatSpreadable:void 0;function jL(e){return Ke(e)||Lo(e)||!!(Om&&e&&e[Om])}function un(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=jL),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?un(s,t-1,n,r,i):to(i,s):r||(i[i.length]=s)}return i}function Ew(e){var t=e==null?0:e.length;return t?un(e,1):[]}function Mi(e){return rv(gw(e,void 0,Ew),e+"")}var BL=Mi(lv),bf=xw(Object.getPrototypeOf,Object),FL="[object Object]",$L=Function.prototype,HL=Object.prototype,Sw=$L.toString,WL=HL.hasOwnProperty,zL=Sw.call(Object);function Ll(e){if(!$t(e)||Cn(e)!=FL)return!1;var t=bf(e);if(t===null)return!0;var n=WL.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Sw.call(n)==zL}var UL="[object DOMException]",XL="[object Error]";function uv(e){if(!$t(e))return!1;var t=Cn(e);return t==XL||t==UL||typeof e.message=="string"&&typeof e.name=="string"&&!Ll(e)}var Ow=at(function(e,t){try{return Vn(e,void 0,t)}catch(n){return uv(n)?n:new Error(n)}}),GL="Expected a function";function Aw(e,t){var n;if(typeof t!="function")throw new TypeError(GL);return e=rt(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var YL=1,KL=32,xf=at(function(e,t,n){var r=YL;if(n.length){var i=Ki(n,Ua(xf));r|=KL}return Oi(e,r,t,n,i)});xf.placeholder={};var VL=Mi(function(e,t){return gr(t,function(n){n=ii(n),Ai(e,n,xf(e[n],e))}),e}),qL=1,ZL=2,JL=32,cv=at(function(e,t,n){var r=qL|ZL;if(n.length){var i=Ki(n,Ua(cv));r|=JL}return Oi(t,r,e,n,i)});cv.placeholder={};function vr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function no(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:vr(e,t,n)}var QL="\\ud800-\\udfff",e2="\\u0300-\\u036f",t2="\\ufe20-\\ufe2f",n2="\\u20d0-\\u20ff",r2=e2+t2+n2,i2="\\ufe0e\\ufe0f",o2="\\u200d",a2=RegExp("["+o2+QL+r2+i2+"]");function Ya(e){return a2.test(e)}function s2(e){return e.split("")}var Cw="\\ud800-\\udfff",l2="\\u0300-\\u036f",u2="\\ufe20-\\ufe2f",c2="\\u20d0-\\u20ff",f2=l2+u2+c2,d2="\\ufe0e\\ufe0f",h2="["+Cw+"]",mh="["+f2+"]",_h="\\ud83c[\\udffb-\\udfff]",p2="(?:"+mh+"|"+_h+")",Tw="[^"+Cw+"]",Mw="(?:\\ud83c[\\udde6-\\uddff]){2}",Pw="[\\ud800-\\udbff][\\udc00-\\udfff]",v2="\\u200d",Nw=p2+"?",Rw="["+d2+"]?",g2="(?:"+v2+"(?:"+[Tw,Mw,Pw].join("|")+")"+Rw+Nw+")*",y2=Rw+Nw+g2,m2="(?:"+[Tw+mh+"?",mh,Mw,Pw,h2].join("|")+")",_2=RegExp(_h+"(?="+_h+")|"+m2+y2,"g");function b2(e){return e.match(_2)||[]}function kr(e){return Ya(e)?b2(e):s2(e)}function Dw(e){return function(t){t=Ot(t);var n=Ya(t)?kr(t):void 0,r=n?n[0]:t.charAt(0),i=n?no(n,1).join(""):t.slice(1);return r[e]()+i}}var fv=Dw("toUpperCase");function Lw(e){return fv(Ot(e).toLowerCase())}function dv(e,t,n,r){var i=-1,o=e==null?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function hv(e){return function(t){return e==null?void 0:e[t]}}var x2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},w2=hv(x2),E2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,S2="\\u0300-\\u036f",O2="\\ufe20-\\ufe2f",A2="\\u20d0-\\u20ff",C2=S2+O2+A2,T2="["+C2+"]",M2=RegExp(T2,"g");function Iw(e){return e=Ot(e),e&&e.replace(E2,w2).replace(M2,"")}var P2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function N2(e){return e.match(P2)||[]}var R2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function D2(e){return R2.test(e)}var kw="\\ud800-\\udfff",L2="\\u0300-\\u036f",I2="\\ufe20-\\ufe2f",k2="\\u20d0-\\u20ff",j2=L2+I2+k2,jw="\\u2700-\\u27bf",Bw="a-z\\xdf-\\xf6\\xf8-\\xff",B2="\\xac\\xb1\\xd7\\xf7",F2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$2="\\u2000-\\u206f",H2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fw="A-Z\\xc0-\\xd6\\xd8-\\xde",W2="\\ufe0e\\ufe0f",$w=B2+F2+$2+H2,Hw="['’]",Am="["+$w+"]",z2="["+j2+"]",Ww="\\d+",U2="["+jw+"]",zw="["+Bw+"]",Uw="[^"+kw+$w+Ww+jw+Bw+Fw+"]",X2="\\ud83c[\\udffb-\\udfff]",G2="(?:"+z2+"|"+X2+")",Y2="[^"+kw+"]",Xw="(?:\\ud83c[\\udde6-\\uddff]){2}",Gw="[\\ud800-\\udbff][\\udc00-\\udfff]",la="["+Fw+"]",K2="\\u200d",Cm="(?:"+zw+"|"+Uw+")",V2="(?:"+la+"|"+Uw+")",Tm="(?:"+Hw+"(?:d|ll|m|re|s|t|ve))?",Mm="(?:"+Hw+"(?:D|LL|M|RE|S|T|VE))?",Yw=G2+"?",Kw="["+W2+"]?",q2="(?:"+K2+"(?:"+[Y2,Xw,Gw].join("|")+")"+Kw+Yw+")*",Z2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",J2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Q2=Kw+Yw+q2,eI="(?:"+[U2,Xw,Gw].join("|")+")"+Q2,tI=RegExp([la+"?"+zw+"+"+Tm+"(?="+[Am,la,"$"].join("|")+")",V2+"+"+Mm+"(?="+[Am,la+Cm,"$"].join("|")+")",la+"?"+Cm+"+"+Tm,la+"+"+Mm,J2,Z2,Ww,eI].join("|"),"g");function nI(e){return e.match(tI)||[]}function Vw(e,t,n){return e=Ot(e),t=n?void 0:t,t===void 0?D2(e)?nI(e):N2(e):e.match(t)||[]}var rI="['’]",iI=RegExp(rI,"g");function Ka(e){return function(t){return dv(Vw(Iw(t).replace(iI,"")),e,"")}}var oI=Ka(function(e,t,n){return t=t.toLowerCase(),e+(n?Lw(t):t)});function aI(){if(!arguments.length)return[];var e=arguments[0];return Ke(e)?e:[e]}var sI=Qt.isFinite,lI=Math.min;function pv(e){var t=Math[e];return function(n,r){if(n=lr(n),r=r==null?0:lI(rt(r),292),r&&sI(n)){var i=(Ot(n)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+r));return i=(Ot(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var uI=pv("ceil");function qw(e){var t=b(e);return t.__chain__=!0,t}var cI=Math.ceil,fI=Math.max;function dI(e,t,n){(n?Sn(e,t,n):t===void 0)?t=1:t=fI(rt(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(cI(r/t));i<r;)a[o++]=vr(e,i,i+=t);return a}function Xo(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function hI(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=lr(n),n=n===n?n:0),t!==void 0&&(t=lr(t),t=t===t?t:0),Xo(lr(e),t,n)}function pI(){this.__data__=new Ci,this.size=0}function vI(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function gI(e){return this.__data__.get(e)}function yI(e){return this.__data__.has(e)}var mI=200;function _I(e,t){var n=this.__data__;if(n instanceof Ci){var r=n.__data__;if(!ul||r.length<mI-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ti(r)}return n.set(e,t),this.size=n.size,this}function Lr(e){var t=this.__data__=new Ci(e);this.size=t.size}Lr.prototype.clear=pI;Lr.prototype.delete=vI;Lr.prototype.get=gI;Lr.prototype.has=yI;Lr.prototype.set=_I;function Zw(e,t){return e&&ri(t,en(t),e)}function bI(e,t){return e&&ri(t,Bn(t),e)}var Jw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pm=Jw&&typeof module=="object"&&module&&!module.nodeType&&module,xI=Pm&&Pm.exports===Jw,Nm=xI?Qt.Buffer:void 0,Rm=Nm?Nm.allocUnsafe:void 0;function Qw(e,t){if(t)return e.slice();var n=e.length,r=Rm?Rm(n):new e.constructor(n);return e.copy(r),r}function ro(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function vv(){return[]}var wI=Object.prototype,EI=wI.propertyIsEnumerable,Dm=Object.getOwnPropertySymbols,gv=Dm?function(e){return e==null?[]:(e=Object(e),ro(Dm(e),function(t){return EI.call(e,t)}))}:vv;function SI(e,t){return ri(e,gv(e),t)}var OI=Object.getOwnPropertySymbols,eE=OI?function(e){for(var t=[];e;)to(t,gv(e)),e=bf(e);return t}:vv;function AI(e,t){return ri(e,eE(e),t)}function tE(e,t,n){var r=t(e);return Ke(e)?r:to(r,n(e))}function bh(e){return tE(e,en,gv)}function yv(e){return tE(e,Bn,eE)}var xh=zo(Qt,"DataView"),wh=zo(Qt,"Promise"),ma=zo(Qt,"Set"),Lm="[object Map]",CI="[object Object]",Im="[object Promise]",km="[object Set]",jm="[object WeakMap]",Bm="[object DataView]",TI=Wo(xh),MI=Wo(ul),PI=Wo(wh),NI=Wo(ma),RI=Wo(al),pn=Cn;(xh&&pn(new xh(new ArrayBuffer(1)))!=Bm||ul&&pn(new ul)!=Lm||wh&&pn(wh.resolve())!=Im||ma&&pn(new ma)!=km||al&&pn(new al)!=jm)&&(pn=function(e){var t=Cn(e),n=t==CI?e.constructor:void 0,r=n?Wo(n):"";if(r)switch(r){case TI:return Bm;case MI:return Lm;case PI:return Im;case NI:return km;case RI:return jm}return t});var DI=Object.prototype,LI=DI.hasOwnProperty;function II(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&LI.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var nc=Qt.Uint8Array;function mv(e){var t=new e.constructor(e.byteLength);return new nc(t).set(new nc(e)),t}function kI(e,t){var n=t?mv(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var jI=/\w*$/;function BI(e){var t=new e.constructor(e.source,jI.exec(e));return t.lastIndex=e.lastIndex,t}var Fm=yn?yn.prototype:void 0,$m=Fm?Fm.valueOf:void 0;function FI(e){return $m?Object($m.call(e)):{}}function nE(e,t){var n=t?mv(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var $I="[object Boolean]",HI="[object Date]",WI="[object Map]",zI="[object Number]",UI="[object RegExp]",XI="[object Set]",GI="[object String]",YI="[object Symbol]",KI="[object ArrayBuffer]",VI="[object DataView]",qI="[object Float32Array]",ZI="[object Float64Array]",JI="[object Int8Array]",QI="[object Int16Array]",ek="[object Int32Array]",tk="[object Uint8Array]",nk="[object Uint8ClampedArray]",rk="[object Uint16Array]",ik="[object Uint32Array]";function ok(e,t,n){var r=e.constructor;switch(t){case KI:return mv(e);case $I:case HI:return new r(+e);case VI:return kI(e,n);case qI:case ZI:case JI:case QI:case ek:case tk:case nk:case rk:case ik:return nE(e,n);case WI:return new r;case zI:case GI:return new r(e);case UI:return BI(e);case XI:return new r;case YI:return FI(e)}}function rE(e){return typeof e.constructor=="function"&&!Dl(e)?Wa(bf(e)):{}}var ak="[object Map]";function sk(e){return $t(e)&&pn(e)==ak}var Hm=pr&&pr.isMap,iE=Hm?qn(Hm):sk,lk="[object Set]";function uk(e){return $t(e)&&pn(e)==lk}var Wm=pr&&pr.isSet,oE=Wm?qn(Wm):uk,ck=1,fk=2,dk=4,aE="[object Arguments]",hk="[object Array]",pk="[object Boolean]",vk="[object Date]",gk="[object Error]",sE="[object Function]",yk="[object GeneratorFunction]",mk="[object Map]",_k="[object Number]",lE="[object Object]",bk="[object RegExp]",xk="[object Set]",wk="[object String]",Ek="[object Symbol]",Sk="[object WeakMap]",Ok="[object ArrayBuffer]",Ak="[object DataView]",Ck="[object Float32Array]",Tk="[object Float64Array]",Mk="[object Int8Array]",Pk="[object Int16Array]",Nk="[object Int32Array]",Rk="[object Uint8Array]",Dk="[object Uint8ClampedArray]",Lk="[object Uint16Array]",Ik="[object Uint32Array]",Pt={};Pt[aE]=Pt[hk]=Pt[Ok]=Pt[Ak]=Pt[pk]=Pt[vk]=Pt[Ck]=Pt[Tk]=Pt[Mk]=Pt[Pk]=Pt[Nk]=Pt[mk]=Pt[_k]=Pt[lE]=Pt[bk]=Pt[xk]=Pt[wk]=Pt[Ek]=Pt[Rk]=Pt[Dk]=Pt[Lk]=Pt[Ik]=!0;Pt[gk]=Pt[sE]=Pt[Sk]=!1;function ur(e,t,n,r,i,o){var a,s=t&ck,l=t&fk,u=t&dk;if(n&&(a=i?n(e,r,i,o):n(e)),a!==void 0)return a;if(!jt(e))return e;var c=Ke(e);if(c){if(a=II(e),!s)return Dn(e,a)}else{var f=pn(e),d=f==sE||f==yk;if(Vi(e))return Qw(e,s);if(f==lE||f==aE||d&&!i){if(a=l||d?{}:rE(e),!s)return l?AI(e,bI(a,e)):SI(e,Zw(a,e))}else{if(!Pt[f])return i?e:{};a=ok(e,f,s)}}o||(o=new Lr);var h=o.get(e);if(h)return h;o.set(e,a),oE(e)?e.forEach(function(g){a.add(ur(g,t,n,g,e,o))}):iE(e)&&e.forEach(function(g,y){a.set(y,ur(g,t,n,y,e,o))});var v=u?l?yv:bh:l?Bn:en,p=c?void 0:v(e);return gr(p||e,function(g,y){p&&(y=g,g=e[y]),Rl(a,y,ur(g,t,n,y,e,o))}),a}var kk=4;function jk(e){return ur(e,kk)}var Bk=1,Fk=4;function ze(e){return ur(e,Bk|Fk)}var $k=1,Hk=4;function Wk(e,t){return t=typeof t=="function"?t:void 0,ur(e,$k|Hk,t)}var zk=4;function Uk(e,t){return t=typeof t=="function"?t:void 0,ur(e,zk,t)}function Xk(){return new hr(this.value(),this.__chain__)}function Gk(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function Yk(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return to(Ke(n)?Dn(n):[n],un(t,1))}var Kk="__lodash_hash_undefined__";function Vk(e){return this.__data__.set(e,Kk),this}function qk(e){return this.__data__.has(e)}function ko(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ti;++t<n;)this.add(e[t])}ko.prototype.add=ko.prototype.push=Vk;ko.prototype.has=qk;function _v(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function cl(e,t){return e.has(t)}var Zk=1,Jk=2;function uE(e,t,n,r,i,o){var a=n&Zk,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var f=-1,d=!0,h=n&Jk?new ko:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var v=e[f],p=t[f];if(r)var g=a?r(p,v,f,t,e,o):r(v,p,f,e,t,o);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!_v(t,function(y,m){if(!cl(h,m)&&(v===y||i(v,y,n,r,o)))return h.push(m)})){d=!1;break}}else if(!(v===p||i(v,p,n,r,o))){d=!1;break}}return o.delete(e),o.delete(t),d}function bv(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function wf(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Qk=1,ej=2,tj="[object Boolean]",nj="[object Date]",rj="[object Error]",ij="[object Map]",oj="[object Number]",aj="[object RegExp]",sj="[object Set]",lj="[object String]",uj="[object Symbol]",cj="[object ArrayBuffer]",fj="[object DataView]",zm=yn?yn.prototype:void 0,pd=zm?zm.valueOf:void 0;function dj(e,t,n,r,i,o,a){switch(n){case fj:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cj:return!(e.byteLength!=t.byteLength||!o(new nc(e),new nc(t)));case tj:case nj:case oj:return Br(+e,+t);case rj:return e.name==t.name&&e.message==t.message;case aj:case lj:return e==t+"";case ij:var s=bv;case sj:var l=r&Qk;if(s||(s=wf),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=ej,a.set(e,t);var c=uE(s(e),s(t),r,i,o,a);return a.delete(e),c;case uj:if(pd)return pd.call(e)==pd.call(t)}return!1}var hj=1,pj=Object.prototype,vj=pj.hasOwnProperty;function gj(e,t,n,r,i,o){var a=n&hj,s=bh(e),l=s.length,u=bh(t),c=u.length;if(l!=c&&!a)return!1;for(var f=l;f--;){var d=s[f];if(!(a?d in t:vj.call(t,d)))return!1}var h=o.get(e),v=o.get(t);if(h&&v)return h==t&&v==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++f<l;){d=s[f];var y=e[d],m=t[d];if(r)var M=a?r(m,y,d,t,e,o):r(y,m,d,e,t,o);if(!(M===void 0?y===m||i(y,m,n,r,o):M)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var T=e.constructor,L=t.constructor;T!=L&&"constructor"in e&&"constructor"in t&&!(typeof T=="function"&&T instanceof T&&typeof L=="function"&&L instanceof L)&&(p=!1)}return o.delete(e),o.delete(t),p}var yj=1,Um="[object Arguments]",Xm="[object Array]",Jl="[object Object]",mj=Object.prototype,Gm=mj.hasOwnProperty;function _j(e,t,n,r,i,o){var a=Ke(e),s=Ke(t),l=a?Xm:pn(e),u=s?Xm:pn(t);l=l==Um?Jl:l,u=u==Um?Jl:u;var c=l==Jl,f=u==Jl,d=l==u;if(d&&Vi(e)){if(!Vi(t))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new Lr),a||Ga(e)?uE(e,t,n,r,i,o):dj(e,t,l,n,r,i,o);if(!(n&yj)){var h=c&&Gm.call(e,"__wrapped__"),v=f&&Gm.call(t,"__wrapped__");if(h||v){var p=h?e.value():e,g=v?t.value():t;return o||(o=new Lr),i(p,g,n,r,o)}}return d?(o||(o=new Lr),gj(e,t,n,r,i,o)):!1}function Il(e,t,n,r,i){return e===t?!0:e==null||t==null||!$t(e)&&!$t(t)?e!==e&&t!==t:_j(e,t,n,r,Il,i)}var bj=1,xj=2;function xv(e,t,n,r){var i=n.length,o=i,a=!r;if(e==null)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var l=s[0],u=e[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var f=new Lr;if(r)var d=r(u,c,l,e,t,f);if(!(d===void 0?Il(c,u,bj|xj,r,f):d))return!1}}return!0}function cE(e){return e===e&&!jt(e)}function wv(e){for(var t=en(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,cE(i)]}return t}function fE(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function dE(e){var t=wv(e);return t.length==1&&t[0][2]?fE(t[0][0],t[0][1]):function(n){return n===e||xv(n,e,t)}}function wj(e,t){return e!=null&&t in Object(e)}function hE(e,t,n){t=Qi(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=ii(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&gf(i)&&Si(a,i)&&(Ke(e)||Lo(e)))}function Ev(e,t){return e!=null&&hE(e,t,wj)}var Ej=1,Sj=2;function pE(e,t){return sv(e)&&cE(t)?fE(ii(e),t):function(n){var r=eo(n,e);return r===void 0&&r===t?Ev(n,e):Il(t,r,Ej|Sj)}}function Sv(e){return function(t){return t==null?void 0:t[e]}}function Oj(e){return function(t){return Uo(t,e)}}function vE(e){return sv(e)?Sv(ii(e)):Oj(e)}function Ve(e){return typeof e=="function"?e:e==null?kn:typeof e=="object"?Ke(e)?pE(e[0],e[1]):dE(e):vE(e)}var Aj="Expected a function";function Cj(e){var t=e==null?0:e.length,n=Ve;return e=t?kt(e,function(r){if(typeof r[1]!="function")throw new TypeError(Aj);return[n(r[0]),r[1]]}):[],at(function(r){for(var i=-1;++i<t;){var o=e[i];if(Vn(o[0],this,r))return Vn(o[1],this,r)}})}function gE(e,t,n){var r=n.length;if(e==null)return!r;for(e=Object(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===void 0&&!(i in e)||!o(a))return!1}return!0}function Tj(e){var t=en(e);return function(n){return gE(n,e,t)}}var Mj=1;function Pj(e){return Tj(ur(e,Mj))}function Nj(e,t){return t==null||gE(e,t,en(t))}function Rj(e,t,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function yE(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(n(o[l],l,o)===!1)break}return t}}var Ov=yE();function oi(e,t){return e&&Ov(e,t,en)}function mE(e,t){return function(n,r){if(n==null)return n;if(!jn(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var io=mE(oi);function Dj(e,t,n,r){return io(e,function(i,o,a){t(r,i,n(i),a)}),r}function Ef(e,t){return function(n,r){var i=Ke(n)?Rj:Dj,o=t?t():{};return i(n,e,Ve(r),o)}}var Lj=Object.prototype,Ij=Lj.hasOwnProperty,kj=Ef(function(e,t,n){Ij.call(e,n)?++e[n]:Ai(e,n,1)});function jj(e,t){var n=Wa(e);return t==null?n:Zw(n,t)}var Bj=8;function Av(e,t,n){t=n?void 0:t;var r=Oi(e,Bj,void 0,void 0,void 0,void 0,void 0,t);return r.placeholder=Av.placeholder,r}Av.placeholder={};var Fj=16;function Cv(e,t,n){t=n?void 0:t;var r=Oi(e,Fj,void 0,void 0,void 0,void 0,void 0,t);return r.placeholder=Cv.placeholder,r}Cv.placeholder={};var Pu=function(){return Qt.Date.now()},$j="Expected a function",Hj=Math.max,Wj=Math.min;function Sf(e,t,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError($j);t=lr(t)||0,jt(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Hj(lr(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(N){var E=r,k=i;return r=i=void 0,u=N,a=e.apply(k,E),a}function v(N){return u=N,s=setTimeout(y,t),c?h(N):a}function p(N){var E=N-l,k=N-u,Y=t-E;return f?Wj(Y,o-k):Y}function g(N){var E=N-l,k=N-u;return l===void 0||E>=t||E<0||f&&k>=o}function y(){var N=Pu();if(g(N))return m(N);s=setTimeout(y,p(N))}function m(N){return s=void 0,d&&r?h(N):(r=i=void 0,a)}function M(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function T(){return s===void 0?a:m(Pu())}function L(){var N=Pu(),E=g(N);if(r=arguments,i=this,l=N,E){if(s===void 0)return v(l);if(f)return clearTimeout(s),s=setTimeout(y,t),h(l)}return s===void 0&&(s=setTimeout(y,t)),a}return L.cancel=M,L.flush=T,L}function zj(e,t){return e==null||e!==e?t:e}var _E=Object.prototype,Uj=_E.hasOwnProperty,Xj=at(function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Sn(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Bn(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(c===void 0||Br(c,_E[u])&&!Uj.call(e,u))&&(e[u]=o[u])}return e});function Eh(e,t,n){(n!==void 0&&!Br(e[t],n)||n===void 0&&!(t in e))&&Ai(e,t,n)}function zt(e){return $t(e)&&jn(e)}function Sh(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function bE(e){return ri(e,Bn(e))}function Gj(e,t,n,r,i,o,a){var s=Sh(e,n),l=Sh(t,n),u=a.get(l);if(u){Eh(e,n,u);return}var c=o?o(s,l,n+"",e,t,a):void 0,f=c===void 0;if(f){var d=Ke(l),h=!d&&Vi(l),v=!d&&!h&&Ga(l);c=l,d||h||v?Ke(s)?c=s:zt(s)?c=Dn(s):h?(f=!1,c=Qw(l,!0)):v?(f=!1,c=nE(l,!0)):c=[]:Ll(l)||Lo(l)?(c=s,Lo(s)?c=bE(s):(!jt(s)||Ei(s))&&(c=rE(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Eh(e,n,c)}function Of(e,t,n,r,i){e!==t&&Ov(t,function(o,a){if(i||(i=new Lr),jt(o))Gj(e,t,a,n,Of,r,i);else{var s=r?r(Sh(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),Eh(e,a,s)}},Bn)}function xE(e,t,n,r,i,o){return jt(e)&&jt(t)&&(o.set(t,e),Of(e,t,void 0,xE,o),o.delete(t)),e}var wE=Xa(function(e,t,n,r){Of(e,t,n,r)}),Yj=at(function(e){return e.push(void 0,xE),Vn(wE,void 0,e)}),Kj="Expected a function";function EE(e,t,n){if(typeof e!="function")throw new TypeError(Kj);return setTimeout(function(){e.apply(void 0,n)},t)}var Vj=at(function(e,t){return EE(e,1,t)}),qj=at(function(e,t,n){return EE(e,lr(t)||0,n)});function Tv(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Zj=200;function kl(e,t,n,r){var i=-1,o=pf,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=kt(t,qn(n))),r?(o=Tv,a=!1):t.length>=Zj&&(o=cl,a=!1,t=new ko(t));e:for(;++i<s;){var c=e[i],f=n==null?c:n(c);if(c=r||c!==0?c:0,a&&f===f){for(var d=u;d--;)if(t[d]===f)continue e;l.push(c)}else o(t,f,r)||l.push(c)}return l}var Jj=at(function(e,t){return zt(e)?kl(e,un(t,1,zt,!0)):[]});function Zn(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Qj=at(function(e,t){var n=Zn(t);return zt(n)&&(n=void 0),zt(e)?kl(e,un(t,1,zt,!0),Ve(n)):[]}),eB=at(function(e,t){var n=Zn(t);return zt(n)&&(n=void 0),zt(e)?kl(e,un(t,1,zt,!0),void 0,n):[]}),tB=ff(function(e,t){return e/t},1);function nB(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===void 0?1:rt(t),vr(e,t<0?0:t,r)):[]}function rB(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===void 0?1:rt(t),t=r-t,vr(e,0,t<0?0:t)):[]}function Af(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?vr(e,r?0:o,r?o+1:i):vr(e,r?o+1:0,r?i:o)}function iB(e,t){return e&&e.length?Af(e,Ve(t),!0,!0):[]}function oB(e,t){return e&&e.length?Af(e,Ve(t),!0):[]}function ai(e){return typeof e=="function"?e:kn}function pt(e,t){var n=Ke(e)?gr:io;return n(e,ai(t))}function aB(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var SE=yE(!0);function Mv(e,t){return e&&SE(e,t,en)}var OE=mE(Mv,!0);function sB(e,t){var n=Ke(e)?aB:OE;return n(e,ai(t))}function lB(e,t,n){e=Ot(e),t=Kn(t);var r=e.length;n=n===void 0?r:Xo(rt(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function uB(e,t){return kt(t,function(n){return[n,e[n]]})}function cB(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=[r,r]}),n}var fB="[object Map]",dB="[object Set]";function AE(e){return function(t){var n=pn(t);return n==fB?bv(t):n==dB?cB(t):uB(t,e(t))}}var Pi=AE(en),hB=AE(Bn),pB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vB=hv(pB),CE=/[&<>"']/g,gB=RegExp(CE.source);function TE(e){return e=Ot(e),e&&gB.test(e)?e.replace(CE,vB):e}var ME=/[\\^$.*+?()[\]{}|]/g,yB=RegExp(ME.source);function mB(e){return e=Ot(e),e&&yB.test(e)?e.replace(ME,"\\$&"):e}function PE(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function _B(e,t){var n=!0;return io(e,function(r,i,o){return n=!!t(r,i,o),n}),n}function bB(e,t,n){var r=Ke(e)?PE:_B;return n&&Sn(e,t,n)&&(t=void 0),r(e,Ve(t))}var xB=4294967295;function NE(e){return e?Xo(rt(e),0,xB):0}function wB(e,t,n,r){var i=e.length;for(n=rt(n),n<0&&(n=-n>i?0:i+n),r=r===void 0||r>i?i:rt(r),r<0&&(r+=i),r=n>r?0:NE(r);n<r;)e[n++]=t;return e}function EB(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Sn(e,t,n)&&(n=0,r=i),wB(e,t,n,r)):[]}function RE(e,t){var n=[];return io(e,function(r,i,o){t(r,i,o)&&n.push(r)}),n}function SB(e,t){var n=Ke(e)?ro:RE;return n(e,Ve(t))}function DE(e){return function(t,n,r){var i=Object(t);if(!jn(t)){var o=Ve(n);t=en(t),n=function(s){return o(i[s],s,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}var OB=Math.max;function Pv(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:rt(n);return i<0&&(i=OB(r+i,0)),hf(e,Ve(t),i)}var qi=DE(Pv);function LE(e,t,n){var r;return n(e,function(i,o,a){if(t(i,o,a))return r=o,!1}),r}function AB(e,t){return LE(e,Ve(t),oi)}var CB=Math.max,TB=Math.min;function IE(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return n!==void 0&&(i=rt(n),i=n<0?CB(r+i,0):TB(i,r-1)),hf(e,Ve(t),i,!0)}var MB=DE(IE);function PB(e,t){return LE(e,Ve(t),Mv)}function NB(e){return e&&e.length?e[0]:void 0}function kE(e,t){var n=-1,r=jn(e)?Array(e.length):[];return io(e,function(i,o,a){r[++n]=t(i,o,a)}),r}function Jn(e,t){var n=Ke(e)?kt:kE;return n(e,Ve(t))}function RB(e,t){return un(Jn(e,t),1)}var DB=1/0;function LB(e,t){return un(Jn(e,t),DB)}function IB(e,t,n){return n=n===void 0?1:rt(n),un(Jn(e,t),n)}var kB=1/0;function jB(e){var t=e==null?0:e.length;return t?un(e,kB):[]}function BB(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:rt(t),un(e,t)):[]}var FB=512;function $B(e){return Oi(e,FB)}var HB=pv("floor"),WB="Expected a function",zB=8,UB=32,XB=128,GB=256;function jE(e){return Mi(function(t){var n=t.length,r=n,i=hr.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new TypeError(WB);if(i&&!a&&Mu(o)=="wrapper")var a=new hr([],!0)}for(r=a?r:n;++r<n;){o=t[r];var s=Mu(o),l=s=="wrapper"?tv(o):void 0;l&&gh(l[0])&&l[1]==(XB|zB|UB|GB)&&!l[4].length&&l[9]==1?a=a[Mu(l[0])].apply(a,l[3]):a=o.length==1&&gh(o)?a[s]():a.thru(o)}return function(){var u=arguments,c=u[0];if(a&&u.length==1&&Ke(c))return a.plant(c).value();for(var f=0,d=n?t[f].apply(this,u):c;++f<n;)d=t[f].call(this,d);return d}})}var YB=jE(),KB=jE(!0);function VB(e,t){return e==null?e:Ov(e,ai(t),Bn)}function qB(e,t){return e==null?e:SE(e,ai(t),Bn)}function ZB(e,t){return e&&oi(e,ai(t))}function JB(e,t){return e&&Mv(e,ai(t))}function QB(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Cf(e,t){return ro(t,function(n){return Ei(e[n])})}function e3(e){return e==null?[]:Cf(e,en(e))}function t3(e){return e==null?[]:Cf(e,Bn(e))}var n3=Object.prototype,r3=n3.hasOwnProperty,i3=Ef(function(e,t,n){r3.call(e,n)?e[n].push(t):Ai(e,n,[t])});function Nv(e,t){return e>t}function Tf(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=lr(t),n=lr(n)),e(t,n)}}var o3=Tf(Nv),a3=Tf(function(e,t){return e>=t}),s3=Object.prototype,l3=s3.hasOwnProperty;function u3(e,t){return e!=null&&l3.call(e,t)}function rc(e,t){return e!=null&&hE(e,t,u3)}var c3=Math.max,f3=Math.min;function d3(e,t,n){return e>=f3(t,n)&&e<c3(t,n)}function h3(e,t,n){return t=_i(t),n===void 0?(n=t,t=0):n=_i(n),e=lr(e),d3(e,t,n)}var p3="[object String]";function Mf(e){return typeof e=="string"||!Ke(e)&&$t(e)&&Cn(e)==p3}function Rv(e,t){return kt(t,function(n){return e[n]})}function Va(e){return e==null?[]:Rv(e,en(e))}var v3=Math.max;function g3(e,t,n,r){e=jn(e)?e:Va(e),n=n&&!r?rt(n):0;var i=e.length;return n<0&&(n=v3(i+n,0)),Mf(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&za(e,t,n)>-1}var y3=Math.max;function BE(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:rt(n);return i<0&&(i=y3(r+i,0)),za(e,t,i)}function m3(e){var t=e==null?0:e.length;return t?vr(e,0,-1):[]}var _3=Math.min;function Dv(e,t,n){for(var r=n?Tv:pf,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=kt(c,qn(t))),l=_3(c.length,l),s[a]=!n&&(t||i>=120&&c.length>=120)?new ko(a&&c):void 0}c=e[0];var f=-1,d=s[0];e:for(;++f<i&&u.length<l;){var h=c[f],v=t?t(h):h;if(h=n||h!==0?h:0,!(d?cl(d,v):r(u,v,n))){for(a=o;--a;){var p=s[a];if(!(p?cl(p,v):r(e[a],v,n)))continue e}d&&d.push(v),u.push(h)}}return u}function Lv(e){return zt(e)?e:[]}var b3=at(function(e){var t=kt(e,Lv);return t.length&&t[0]===e[0]?Dv(t):[]}),x3=at(function(e){var t=Zn(e),n=kt(e,Lv);return t===Zn(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Dv(n,Ve(t)):[]}),w3=at(function(e){var t=Zn(e),n=kt(e,Lv);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Dv(n,void 0,t):[]});function E3(e,t,n,r){return oi(e,function(i,o,a){t(r,n(i),o,a)}),r}function FE(e,t){return function(n,r){return E3(n,e,t(r),{})}}var S3=Object.prototype,O3=S3.toString,A3=FE(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=O3.call(t)),e[t]=n},nv(kn)),$E=Object.prototype,C3=$E.hasOwnProperty,T3=$E.toString,M3=FE(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=T3.call(t)),C3.call(e,t)?e[t].push(n):e[t]=[n]},Ve);function HE(e,t){return t.length<2?e:Uo(e,vr(t,0,-1))}function jl(e,t,n){t=Qi(t,e),e=HE(e,t);var r=e==null?e:e[ii(Zn(t))];return r==null?void 0:Vn(r,e,n)}var P3=at(jl),N3=at(function(e,t,n){var r=-1,i=typeof t=="function",o=jn(e)?Array(e.length):[];return io(e,function(a){o[++r]=i?Vn(t,a,n):jl(a,t,n)}),o}),R3="[object ArrayBuffer]";function D3(e){return $t(e)&&Cn(e)==R3}var Ym=pr&&pr.isArrayBuffer,L3=Ym?qn(Ym):D3,I3="[object Boolean]";function ic(e){return e===!0||e===!1||$t(e)&&Cn(e)==I3}var k3="[object Date]";function j3(e){return $t(e)&&Cn(e)==k3}var Km=pr&&pr.isDate,B3=Km?qn(Km):j3;function F3(e){return $t(e)&&e.nodeType===1&&!Ll(e)}var $3="[object Map]",H3="[object Set]",W3=Object.prototype,z3=W3.hasOwnProperty;function Iv(e){if(e==null)return!0;if(jn(e)&&(Ke(e)||typeof e=="string"||typeof e.splice=="function"||Vi(e)||Ga(e)||Lo(e)))return!e.length;var t=pn(e);if(t==$3||t==H3)return!e.size;if(Dl(e))return!av(e).length;for(var n in e)if(z3.call(e,n))return!1;return!0}function Oh(e,t){return Il(e,t)}function U3(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?Il(e,t,void 0,n):!!r}var X3=Qt.isFinite;function G3(e){return typeof e=="number"&&X3(e)}function WE(e){return typeof e=="number"&&e==rt(e)}function Y3(e,t){return e===t||xv(e,t,wv(t))}function K3(e,t,n){return n=typeof n=="function"?n:void 0,xv(e,t,wv(t),n)}var V3="[object Number]";function zE(e){return typeof e=="number"||$t(e)&&Cn(e)==V3}function q3(e){return zE(e)&&e!=+e}var Z3=Tu?Ei:ov,J3="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function Q3(e){if(Z3(e))throw new Error(J3);return ow(e)}function ir(e){return e==null}function eF(e){return e===null}var tF="[object RegExp]";function nF(e){return $t(e)&&Cn(e)==tF}var Vm=pr&&pr.isRegExp,kv=Vm?qn(Vm):nF,rF=9007199254740991;function iF(e){return WE(e)&&e>=-9007199254740991&&e<=rF}function jo(e){return e===void 0}var oF="[object WeakMap]";function aF(e){return $t(e)&&pn(e)==oF}var sF="[object WeakSet]";function lF(e){return $t(e)&&Cn(e)==sF}var uF=1;function cF(e){return Ve(typeof e=="function"?e:ur(e,uF))}var fF=Array.prototype,dF=fF.join;function hF(e,t){return e==null?"":dF.call(e,t)}var pF=Ka(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),vF=Ef(function(e,t,n){Ai(e,n,t)});function gF(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}var yF=Math.max,mF=Math.min;function _F(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r;return n!==void 0&&(i=rt(n),i=i<0?yF(r+i,0):mF(i,r-1)),t===t?gF(e,t,i):hf(e,dw,i,!0)}var bF=Ka(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),xF=Dw("toLowerCase");function jv(e,t){return e<t}var wF=Tf(jv),EF=Tf(function(e,t){return e<=t});function UE(e,t){var n={};return t=Ve(t),oi(e,function(r,i,o){Ai(n,t(r,i,o),r)}),n}function SF(e,t){var n={};return t=Ve(t),oi(e,function(r,i,o){Ai(n,i,t(r,i,o))}),n}var OF=1;function AF(e){return dE(ur(e,OF))}var CF=1;function TF(e,t){return pE(e,ur(t,CF))}function Pf(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(a!=null&&(s===void 0?a===a&&!Yn(a):n(a,s)))var s=a,l=o}return l}function MF(e){return e&&e.length?Pf(e,kn,Nv):void 0}function PF(e,t){return e&&e.length?Pf(e,Ve(t),Nv):void 0}function Bv(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==void 0&&(n=n===void 0?o:n+o)}return n}var NF=NaN;function XE(e,t){var n=e==null?0:e.length;return n?Bv(e,t)/n:NF}function RF(e){return XE(e,kn)}function DF(e,t){return XE(e,Ve(t))}var Na=Xa(function(e,t,n){Of(e,t,n)}),LF=at(function(e,t){return function(n){return jl(n,e,t)}}),IF=at(function(e,t){return function(n){return jl(e,n,t)}});function kF(e){return e&&e.length?Pf(e,kn,jv):void 0}function jF(e,t){return e&&e.length?Pf(e,Ve(t),jv):void 0}function BF(e,t,n){var r=en(t),i=Cf(t,r),o=!(jt(n)&&"chain"in n)||!!n.chain,a=Ei(e);return gr(i,function(s){var l=t[s];e[s]=l,a&&(e.prototype[s]=function(){var u=this.__chain__;if(o||u){var c=e(this.__wrapped__),f=c.__actions__=Dn(this.__actions__);return f.push({func:l,args:arguments,thisArg:e}),c.__chain__=u,c}return l.apply(e,to([this.value()],arguments))})}),e}var FF=ff(function(e,t){return e*t},1),$F="Expected a function";function Nf(e){if(typeof e!="function")throw new TypeError($F);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function HF(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var WF="[object Map]",zF="[object Set]",vd=yn?yn.iterator:void 0;function GE(e){if(!e)return[];if(jn(e))return Mf(e)?kr(e):Dn(e);if(vd&&e[vd])return HF(e[vd]());var t=pn(e),n=t==WF?bv:t==zF?wf:Va;return n(e)}function UF(){this.__values__===void 0&&(this.__values__=GE(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function YE(e,t){var n=e.length;if(n)return t+=t<0?n:0,Si(t,n)?e[t]:void 0}function XF(e,t){return e&&e.length?YE(e,rt(t)):void 0}function GF(e){return e=rt(e),at(function(t){return YE(t,e)})}function Fv(e,t){return t=Qi(t,e),e=HE(e,t),e==null||delete e[ii(Zn(t))]}function YF(e){return Ll(e)?void 0:e}var KF=1,VF=2,qF=4,ZF=Mi(function(e,t){var n={};if(e==null)return n;var r=!1;t=kt(t,function(o){return o=Qi(o,e),r||(r=o.length>1),o}),ri(e,yv(e),n),r&&(n=ur(n,KF|VF|qF,YF));for(var i=t.length;i--;)Fv(n,t[i]);return n});function Bl(e,t,n,r){if(!jt(e))return e;t=Qi(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var l=ii(t[i]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=a){var c=s[l];u=r?r(c,l,s):void 0,u===void 0&&(u=jt(c)?c:Si(t[i+1])?[]:{})}Rl(s,l,u),s=s[l]}return e}function KE(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Uo(e,a);n(s,a)&&Bl(o,Qi(a,e),s)}return o}function VE(e,t){if(e==null)return{};var n=kt(yv(e),function(r){return[r]});return t=Ve(t),KE(e,n,function(r,i){return t(r,i[0])})}function JF(e,t){return VE(e,Nf(Ve(t)))}function QF(e){return Aw(2,e)}function e4(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function qE(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,o=Yn(e),a=t!==void 0,s=t===null,l=t===t,u=Yn(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function t4(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=qE(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return e.index-t.index}function ZE(e,t,n){t.length?t=kt(t,function(o){return Ke(o)?function(a){return Uo(a,o.length===1?o[0]:o)}:o}):t=[kn];var r=-1;t=kt(t,qn(Ve));var i=kE(e,function(o,a,s){var l=kt(t,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return e4(i,function(o,a){return t4(o,a,n)})}function n4(e,t,n,r){return e==null?[]:(Ke(t)||(t=t==null?[]:[t]),n=r?void 0:n,Ke(n)||(n=n==null?[]:[n]),ZE(e,t,n))}function $v(e){return Mi(function(t){return t=kt(t,qn(Ve)),at(function(n){var r=this;return e(t,function(i){return Vn(i,r,n)})})})}var r4=$v(kt),i4=at,o4=Math.min,a4=i4(function(e,t){t=t.length==1&&Ke(t[0])?kt(t[0],qn(Ve)):kt(un(t,1),qn(Ve));var n=t.length;return at(function(r){for(var i=-1,o=o4(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Vn(e,this,r)})}),s4=$v(PE),l4=$v(_v),u4=9007199254740991,c4=Math.floor;function Ah(e,t){var n="";if(!e||t<1||t>u4)return n;do t%2&&(n+=e),t=c4(t/2),t&&(e+=e);while(t);return n}var f4=Sv("length"),JE="\\ud800-\\udfff",d4="\\u0300-\\u036f",h4="\\ufe20-\\ufe2f",p4="\\u20d0-\\u20ff",v4=d4+h4+p4,g4="\\ufe0e\\ufe0f",y4="["+JE+"]",Ch="["+v4+"]",Th="\\ud83c[\\udffb-\\udfff]",m4="(?:"+Ch+"|"+Th+")",QE="[^"+JE+"]",eS="(?:\\ud83c[\\udde6-\\uddff]){2}",tS="[\\ud800-\\udbff][\\udc00-\\udfff]",_4="\\u200d",nS=m4+"?",rS="["+g4+"]?",b4="(?:"+_4+"(?:"+[QE,eS,tS].join("|")+")"+rS+nS+")*",x4=rS+nS+b4,w4="(?:"+[QE+Ch+"?",Ch,eS,tS,y4].join("|")+")",qm=RegExp(Th+"(?="+Th+")|"+w4+x4,"g");function E4(e){for(var t=qm.lastIndex=0;qm.test(e);)++t;return t}function qa(e){return Ya(e)?E4(e):f4(e)}var S4=Math.ceil;function oc(e,t){t=t===void 0?" ":Kn(t);var n=t.length;if(n<2)return n?Ah(t,e):t;var r=Ah(t,S4(e/qa(t)));return Ya(t)?no(kr(r),0,e).join(""):r.slice(0,e)}var O4=Math.ceil,A4=Math.floor;function C4(e,t,n){e=Ot(e),t=rt(t);var r=t?qa(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return oc(A4(i),n)+e+oc(O4(i),n)}function T4(e,t,n){e=Ot(e),t=rt(t);var r=t?qa(e):0;return t&&r<t?e+oc(t-r,n):e}function M4(e,t,n){e=Ot(e),t=rt(t);var r=t?qa(e):0;return t&&r<t?oc(t-r,n)+e:e}var P4=/^\s+/,N4=Qt.parseInt;function R4(e,t,n){return n||t==null?t=0:t&&(t=+t),N4(Ot(e).replace(P4,""),t||0)}var D4=32,Rf=at(function(e,t){var n=Ki(t,Ua(Rf));return Oi(e,D4,void 0,t,n)});Rf.placeholder={};var L4=64,Hv=at(function(e,t){var n=Ki(t,Ua(Hv));return Oi(e,L4,void 0,t,n)});Hv.placeholder={};var I4=Ef(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function k4(e,t){return KE(e,t,function(n,r){return Ev(e,r)})}var Eo=Mi(function(e,t){return e==null?{}:k4(e,t)});function j4(e){for(var t,n=this;n instanceof df;){var r=uw(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function B4(e){return function(t){return e==null?void 0:Uo(e,t)}}function F4(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var $4=Array.prototype,Zm=$4.splice;function Wv(e,t,n,r){var i=r?F4:za,o=-1,a=t.length,s=e;for(e===t&&(t=Dn(t)),n&&(s=kt(e,qn(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Zm.call(s,l,1),Zm.call(e,l,1);return e}function iS(e,t){return e&&e.length&&t&&t.length?Wv(e,t):e}var H4=at(iS);function W4(e,t,n){return e&&e.length&&t&&t.length?Wv(e,t,Ve(n)):e}function z4(e,t,n){return e&&e.length&&t&&t.length?Wv(e,t,void 0,n):e}var U4=Array.prototype,X4=U4.splice;function oS(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Si(i)?X4.call(e,i,1):Fv(e,i)}}return e}var G4=Mi(function(e,t){var n=e==null?0:e.length,r=lv(e,t);return oS(e,kt(t,function(i){return Si(i,n)?+i:i}).sort(qE)),r}),Y4=Math.floor,K4=Math.random;function zv(e,t){return e+Y4(K4()*(t-e+1))}var V4=parseFloat,q4=Math.min,Z4=Math.random;function J4(e,t,n){if(n&&typeof n!="boolean"&&Sn(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=_i(e),t===void 0?(t=e,e=0):t=_i(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Z4();return q4(e+i*(t-e+V4("1e-"+((i+"").length-1))),t)}return zv(e,t)}var Q4=Math.ceil,e$=Math.max;function t$(e,t,n,r){for(var i=-1,o=e$(Q4((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a}function aS(e){return function(t,n,r){return r&&typeof r!="number"&&Sn(t,n,r)&&(n=r=void 0),t=_i(t),n===void 0?(n=t,t=0):n=_i(n),r=r===void 0?t<n?1:-1:_i(r),t$(t,n,r,e)}}var n$=aS(),r$=aS(!0),i$=256,o$=Mi(function(e,t){return Oi(e,i$,void 0,void 0,void 0,t)});function sS(e,t,n,r,i){return i(e,function(o,a,s){n=r?(r=!1,o):t(n,o,a,s)}),n}function lS(e,t,n){var r=Ke(e)?dv:sS,i=arguments.length<3;return r(e,Ve(t),n,i,io)}function a$(e,t,n,r){var i=e==null?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function s$(e,t,n){var r=Ke(e)?a$:sS,i=arguments.length<3;return r(e,Ve(t),n,i,OE)}function l$(e,t){var n=Ke(e)?ro:RE;return n(e,Nf(Ve(t)))}function u$(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],o=e.length;for(t=Ve(t);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return oS(e,i),n}function c$(e,t,n){return(n?Sn(e,t,n):t===void 0)?t=1:t=rt(t),Ah(Ot(e),t)}function f$(){var e=arguments,t=Ot(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var d$="Expected a function";function h$(e,t){if(typeof e!="function")throw new TypeError(d$);return t=t===void 0?t:rt(t),at(e,t)}function p$(e,t,n){t=Qi(t,e);var r=-1,i=t.length;for(i||(i=1,e=void 0);++r<i;){var o=e==null?void 0:e[ii(t[r])];o===void 0&&(r=i,o=n),e=Ei(o)?o.call(e):o}return e}var v$=Array.prototype,g$=v$.reverse;function Mh(e){return e==null?e:g$.call(e)}var y$=pv("round");function uS(e){var t=e.length;return t?e[zv(0,t-1)]:void 0}function m$(e){return uS(Va(e))}function _$(e){var t=Ke(e)?uS:m$;return t(e)}function Df(e,t){var n=-1,r=e.length,i=r-1;for(t=t===void 0?r:t;++n<t;){var o=zv(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function b$(e,t){return Df(Dn(e),Xo(t,0,e.length))}function x$(e,t){var n=Va(e);return Df(n,Xo(t,0,n.length))}function w$(e,t,n){(n?Sn(e,t,n):t===void 0)?t=1:t=rt(t);var r=Ke(e)?b$:x$;return r(e,t)}function cS(e,t,n){return e==null?e:Bl(e,t,n)}function E$(e,t,n,r){return r=typeof r=="function"?r:void 0,e==null?e:Bl(e,t,n,r)}function S$(e){return Df(Dn(e))}function O$(e){return Df(Va(e))}function A$(e){var t=Ke(e)?S$:O$;return t(e)}var C$="[object Map]",T$="[object Set]";function M$(e){if(e==null)return 0;if(jn(e))return Mf(e)?qa(e):e.length;var t=pn(e);return t==C$||t==T$?e.size:av(e).length}function P$(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Sn(e,t,n)?(t=0,n=r):(t=t==null?0:rt(t),n=n===void 0?r:rt(n)),vr(e,t,n)):[]}var N$=Ka(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function R$(e,t){var n;return io(e,function(r,i,o){return n=t(r,i,o),!n}),!!n}function D$(e,t,n){var r=Ke(e)?_v:R$;return n&&Sn(e,t,n)&&(t=void 0),r(e,Ve(t))}var L$=at(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Sn(e,t[0],t[1])?t=[]:n>2&&Sn(t[0],t[1],t[2])&&(t=[t[0]]),ZE(e,un(t,1),[])}),I$=4294967295,k$=I$-1,j$=Math.floor,B$=Math.min;function Uv(e,t,n,r){var i=0,o=e==null?0:e.length;if(o===0)return 0;t=n(t);for(var a=t!==t,s=t===null,l=Yn(t),u=t===void 0;i<o;){var c=j$((i+o)/2),f=n(e[c]),d=f!==void 0,h=f===null,v=f===f,p=Yn(f);if(a)var g=r||v;else u?g=v&&(r||d):s?g=v&&d&&(r||!h):l?g=v&&d&&!h&&(r||!p):h||p?g=!1:g=r?f<=t:f<t;g?i=c+1:o=c}return B$(o,k$)}var F$=4294967295,$$=F$>>>1;function Lf(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t=="number"&&t===t&&i<=$$){for(;r<i;){var o=r+i>>>1,a=e[o];a!==null&&!Yn(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Uv(e,t,kn,n)}function H$(e,t){return Lf(e,t)}function W$(e,t,n){return Uv(e,t,Ve(n))}function z$(e,t){var n=e==null?0:e.length;if(n){var r=Lf(e,t);if(r<n&&Br(e[r],t))return r}return-1}function U$(e,t){return Lf(e,t,!0)}function X$(e,t,n){return Uv(e,t,Ve(n),!0)}function G$(e,t){var n=e==null?0:e.length;if(n){var r=Lf(e,t,!0)-1;if(Br(e[r],t))return r}return-1}function fS(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Br(s,l)){var l=s;o[i++]=a===0?0:a}}return o}function Y$(e){return e&&e.length?fS(e):[]}function K$(e,t){return e&&e.length?fS(e,Ve(t)):[]}var V$=4294967295;function q$(e,t,n){return n&&typeof n!="number"&&Sn(e,t,n)&&(t=n=void 0),n=n===void 0?V$:n>>>0,n?(e=Ot(e),e&&(typeof t=="string"||t!=null&&!kv(t))&&(t=Kn(t),!t&&Ya(e))?no(kr(e),0,n):e.split(t,n)):[]}var Z$="Expected a function",J$=Math.max;function Q$(e,t){if(typeof e!="function")throw new TypeError(Z$);return t=t==null?0:J$(rt(t),0),at(function(n){var r=n[t],i=no(n,0,t);return r&&to(i,r),Vn(e,this,i)})}var eH=Ka(function(e,t,n){return e+(n?" ":"")+fv(t)});function tH(e,t,n){return e=Ot(e),n=n==null?0:Xo(rt(n),0,e.length),t=Kn(t),e.slice(n,n+t.length)==t}function nH(){return{}}function rH(){return""}function iH(){return!0}var oH=ff(function(e,t){return e-t},0);function aH(e){return e&&e.length?Bv(e,kn):0}function sH(e,t){return e&&e.length?Bv(e,Ve(t)):0}function lH(e){var t=e==null?0:e.length;return t?vr(e,1,t):[]}function uH(e,t,n){return e&&e.length?(t=n||t===void 0?1:rt(t),vr(e,0,t<0?0:t)):[]}function cH(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===void 0?1:rt(t),t=r-t,vr(e,t<0?0:t,r)):[]}function fH(e,t){return e&&e.length?Af(e,Ve(t),!1,!0):[]}function dH(e,t){return e&&e.length?Af(e,Ve(t)):[]}function hH(e,t){return t(e),e}var dS=Object.prototype,pH=dS.hasOwnProperty;function Jm(e,t,n,r){return e===void 0||Br(e,dS[n])&&!pH.call(r,n)?t:e}var vH={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function gH(e){return"\\"+vH[e]}var hS=/<%=([\s\S]+?)%>/g,yH=/<%-([\s\S]+?)%>/g,mH=/<%([\s\S]+?)%>/g,Ph={escape:yH,evaluate:mH,interpolate:hS,variable:"",imports:{_:{escape:TE}}},_H="Invalid `variable` option passed into `_.template`",bH=/\b__p \+= '';/g,xH=/\b(__p \+=) '' \+/g,wH=/(__e\(.*?\)|\b__t\)) \+\n'';/g,EH=/[()=,{}\[\]\/\s]/,SH=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ql=/($^)/,OH=/['\n\r\u2028\u2029\\]/g,AH=Object.prototype,Qm=AH.hasOwnProperty;function CH(e,t,n){var r=Ph.imports._.templateSettings||Ph;n&&Sn(e,t,n)&&(t=void 0),e=Ot(e),t=yh({},t,r,Jm);var i=yh({},t.imports,r.imports,Jm),o=en(i),a=Rv(i,o),s,l,u=0,c=t.interpolate||Ql,f="__p += '",d=RegExp((t.escape||Ql).source+"|"+c.source+"|"+(c===hS?SH:Ql).source+"|"+(t.evaluate||Ql).source+"|$","g"),h=Qm.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(d,function(g,y,m,M,T,L){return m||(m=M),f+=e.slice(u,L).replace(OH,gH),y&&(s=!0,f+=`' +
__e(`+y+`) +
'`),T&&(l=!0,f+=`';
`+T+`;
__p += '`),m&&(f+=`' +
((__t = (`+m+`)) == null ? '' : __t) +
'`),u=L+g.length,g}),f+=`';
`;var v=Qm.call(t,"variable")&&t.variable;if(!v)f=`with (obj) {
`+f+`
}
`;else if(EH.test(v))throw new Error(_H);f=(l?f.replace(bH,""):f).replace(xH,"$1").replace(wH,"$1;"),f="function("+(v||"obj")+`) {
`+(v?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var p=Ow(function(){return Function(o,h+"return "+f).apply(void 0,a)});if(p.source=f,uv(p))throw p;return p}var TH="Expected a function";function pS(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(TH);return jt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Sf(e,t,{leading:r,maxWait:t,trailing:i})}function If(e,t){return t(e)}var MH=9007199254740991,gd=4294967295,PH=Math.min;function NH(e,t){if(e=rt(e),e<1||e>MH)return[];var n=gd,r=PH(e,gd);t=ai(t),e-=gd;for(var i=iv(r,t);++n<e;)t(n);return i}function RH(){return this}function vS(e,t){var n=e;return n instanceof lt&&(n=n.value()),dv(t,function(r,i){return i.func.apply(i.thisArg,to([r],i.args))},n)}function DH(){return vS(this.__wrapped__,this.__actions__)}function LH(e){return Ot(e).toLowerCase()}function IH(e){return Ke(e)?kt(e,ii):Yn(e)?[e]:Dn(ww(Ot(e)))}var kH=9007199254740991;function jH(e){return e?Xo(rt(e),-9007199254740991,kH):e===0?e:0}function BH(e){return Ot(e).toUpperCase()}function FH(e,t,n){var r=Ke(e),i=r||Vi(e)||Ga(e);if(t=Ve(t),n==null){var o=e&&e.constructor;i?n=r?new o:[]:jt(e)?n=Ei(o)?Wa(bf(e)):{}:n={}}return(i?gr:oi)(e,function(a,s,l){return t(n,a,s,l)}),n}function gS(e,t){for(var n=e.length;n--&&za(t,e[n],0)>-1;);return n}function yS(e,t){for(var n=-1,r=e.length;++n<r&&za(t,e[n],0)>-1;);return n}function $H(e,t,n){if(e=Ot(e),e&&(n||t===void 0))return iw(e);if(!e||!(t=Kn(t)))return e;var r=kr(e),i=kr(t),o=yS(r,i),a=gS(r,i)+1;return no(r,o,a).join("")}function HH(e,t,n){if(e=Ot(e),e&&(n||t===void 0))return e.slice(0,rw(e)+1);if(!e||!(t=Kn(t)))return e;var r=kr(e),i=gS(r,kr(t))+1;return no(r,0,i).join("")}var WH=/^\s+/;function zH(e,t,n){if(e=Ot(e),e&&(n||t===void 0))return e.replace(WH,"");if(!e||!(t=Kn(t)))return e;var r=kr(e),i=yS(r,kr(t));return no(r,i).join("")}var UH=30,XH="...",GH=/\w*$/;function YH(e,t){var n=UH,r=XH;if(jt(t)){var i="separator"in t?t.separator:i;n="length"in t?rt(t.length):n,r="omission"in t?Kn(t.omission):r}e=Ot(e);var o=e.length;if(Ya(e)){var a=kr(e);o=a.length}if(n>=o)return e;var s=n-qa(r);if(s<1)return r;var l=a?no(a,0,s).join(""):e.slice(0,s);if(i===void 0)return l+r;if(a&&(s+=l.length-s),kv(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,Ot(GH.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===void 0?s:f)}}else if(e.indexOf(Kn(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r}function KH(e){return vw(e,1)}var VH={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qH=hv(VH),mS=/&(?:amp|lt|gt|quot|#39);/g,ZH=RegExp(mS.source);function JH(e){return e=Ot(e),e&&ZH.test(e)?e.replace(mS,qH):e}var QH=1/0,e5=ma&&1/wf(new ma([,-0]))[1]==QH?function(e){return new ma(e)}:ga,t5=200;function Zi(e,t,n){var r=-1,i=pf,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Tv;else if(o>=t5){var u=t?null:e5(e);if(u)return wf(u);a=!1,i=cl,l=new ko}else l=t?[]:s;e:for(;++r<o;){var c=e[r],f=t?t(c):c;if(c=n||c!==0?c:0,a&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}var n5=at(function(e){return Zi(un(e,1,zt,!0))}),r5=at(function(e){var t=Zn(e);return zt(t)&&(t=void 0),Zi(un(e,1,zt,!0),Ve(t))}),i5=at(function(e){var t=Zn(e);return t=typeof t=="function"?t:void 0,Zi(un(e,1,zt,!0),void 0,t)});function o5(e){return e&&e.length?Zi(e):[]}function a5(e,t){return e&&e.length?Zi(e,Ve(t)):[]}function s5(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Zi(e,void 0,t):[]}var l5=0;function u5(e){var t=++l5;return Ot(e)+t}function c5(e,t){return e==null?!0:Fv(e,t)}var f5=Math.max;function Xv(e){if(!(e&&e.length))return[];var t=0;return e=ro(e,function(n){if(zt(n))return t=f5(n.length,t),!0}),iv(t,function(n){return kt(e,Sv(n))})}function _S(e,t){if(!(e&&e.length))return[];var n=Xv(e);return t==null?n:kt(n,function(r){return Vn(t,void 0,r)})}function bS(e,t,n,r){return Bl(e,t,n(Uo(e,t)),r)}function d5(e,t,n){return e==null?e:bS(e,t,ai(n))}function h5(e,t,n,r){return r=typeof r=="function"?r:void 0,e==null?e:bS(e,t,ai(n),r)}var p5=Ka(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function v5(e){return e==null?[]:Rv(e,Bn(e))}var g5=at(function(e,t){return zt(e)?kl(e,t):[]});function y5(e,t){return Rf(ai(t),e)}var m5=Mi(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(o){return lv(o,e)};return t>1||this.__actions__.length||!(r instanceof lt)||!Si(n)?this.thru(i):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:If,args:[i],thisArg:void 0}),new hr(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(void 0),o}))});function _5(){return qw(this)}function b5(){var e=this.__wrapped__;if(e instanceof lt){var t=e;return this.__actions__.length&&(t=new lt(this)),t=t.reverse(),t.__actions__.push({func:If,args:[Mh],thisArg:void 0}),new hr(t,this.__chain__)}return this.thru(Mh)}function Gv(e,t,n){var r=e.length;if(r<2)return r?Zi(e[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=kl(o[i]||a,e[s],t,n));return Zi(un(o,1),t,n)}var x5=at(function(e){return Gv(ro(e,zt))}),w5=at(function(e){var t=Zn(e);return zt(t)&&(t=void 0),Gv(ro(e,zt),Ve(t))}),E5=at(function(e){var t=Zn(e);return t=typeof t=="function"?t:void 0,Gv(ro(e,zt),void 0,t)}),S5=at(Xv);function xS(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function O5(e,t){return xS(e||[],t||[],Rl)}function A5(e,t){return xS(e||[],t||[],Bl)}var C5=at(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,_S(e,n)});const Se={chunk:dI,compact:Gk,concat:Yk,difference:Jj,differenceBy:Qj,differenceWith:eB,drop:nB,dropRight:rB,dropRightWhile:iB,dropWhile:oB,fill:EB,findIndex:Pv,findLastIndex:IE,flatten:Ew,flattenDeep:jB,flattenDepth:BB,fromPairs:QB,head:NB,indexOf:BE,initial:m3,intersection:b3,intersectionBy:x3,intersectionWith:w3,join:hF,lastIndexOf:_F,nth:XF,pull:H4,pullAll:iS,pullAllBy:W4,pullAllWith:z4,pullAt:G4,remove:u$,reverse:Mh,slice:P$,sortedIndex:H$,sortedIndexBy:W$,sortedIndexOf:z$,sortedLastIndex:U$,sortedLastIndexBy:X$,sortedLastIndexOf:G$,sortedUniq:Y$,sortedUniqBy:K$,tail:lH,take:uH,takeRight:cH,takeRightWhile:fH,takeWhile:dH,union:n5,unionBy:r5,unionWith:i5,uniq:o5,uniqBy:a5,uniqWith:s5,unzip:Xv,unzipWith:_S,without:g5,xor:x5,xorBy:w5,xorWith:E5,zip:S5,zipObject:O5,zipObjectDeep:A5,zipWith:C5},Tt={countBy:kj,every:bB,filter:SB,find:qi,findLast:MB,flatMap:RB,flatMapDeep:LB,flatMapDepth:IB,forEach:pt,forEachRight:sB,groupBy:i3,includes:g3,invokeMap:N3,keyBy:vF,map:Jn,orderBy:n4,partition:I4,reduce:lS,reduceRight:s$,reject:l$,sample:_$,sampleSize:w$,shuffle:A$,size:M$,some:D$,sortBy:L$},T5={now:Pu},Ht={after:qN,ary:vw,before:Aw,bind:xf,bindKey:cv,curry:Av,curryRight:Cv,debounce:Sf,defer:Vj,delay:qj,flip:$B,memoize:_f,once:QF,overArgs:a4,partial:Rf,partialRight:Hv,rearg:o$,rest:h$,spread:Q$,throttle:pS,unary:KH,wrap:y5},Le={castArray:aI,clone:jk,cloneDeep:ze,cloneDeepWith:Wk,cloneWith:Uk,conformsTo:Nj,eq:Br,gt:o3,gte:a3,isArguments:Lo,isArrayBuffer:L3,isArrayLike:jn,isArrayLikeObject:zt,isBoolean:ic,isBuffer:Vi,isDate:B3,isElement:F3,isEmpty:Iv,isEqual:Oh,isEqualWith:U3,isError:uv,isFinite:G3,isFunction:Ei,isInteger:WE,isLength:gf,isMap:iE,isMatch:Y3,isMatchWith:K3,isNaN:q3,isNative:Q3,isNil:ir,isNull:eF,isNumber:zE,isObjectLike:$t,isPlainObject:Ll,isRegExp:kv,isSafeInteger:iF,isSet:oE,isString:Mf,isSymbol:Yn,isTypedArray:Ga,isUndefined:jo,isWeakMap:aF,isWeakSet:lF,lt:wF,lte:EF,toArray:GE,toFinite:_i,toLength:NE,toNumber:lr,toPlainObject:bE,toSafeInteger:jH,toString:Ot},Tn={add:$N,ceil:uI,divide:tB,floor:HB,max:MF,maxBy:PF,mean:RF,meanBy:DF,min:kF,minBy:jF,multiply:FF,round:y$,subtract:oH,sum:aH,sumBy:sH},Yv={clamp:hI,inRange:h3,random:J4},Ue={assign:_t,assignIn:iL,assignInWith:yh,assignWith:oL,at:BL,create:jj,defaults:Xj,defaultsDeep:Yj,findKey:AB,findLastKey:PB,forIn:VB,forInRight:qB,forOwn:ZB,forOwnRight:JB,functions:e3,functionsIn:t3,get:eo,has:rc,hasIn:Ev,invert:A3,invertBy:M3,invoke:P3,keysIn:Bn,mapKeys:UE,mapValues:SF,merge:Na,mergeWith:wE,omit:ZF,omitBy:JF,pick:Eo,pickBy:VE,result:p$,set:cS,setWith:E$,toPairs:Pi,toPairsIn:hB,transform:FH,unset:c5,update:d5,updateWith:h5,values:Va,valuesIn:v5},si={at:m5,chain:qw,commit:Xk,next:UF,plant:j4,reverse:b5,tap:hH,toIterator:RH,value:DH,wrapperChain:_5},bt={camelCase:oI,capitalize:Lw,deburr:Iw,endsWith:lB,escape:TE,escapeRegExp:mB,kebabCase:pF,lowerCase:bF,lowerFirst:xF,pad:C4,padEnd:T4,padStart:M4,parseInt:R4,repeat:c$,replace:f$,snakeCase:N$,split:q$,startCase:eH,startsWith:tH,template:CH,templateSettings:Ph,toLower:LH,toUpper:BH,trim:$H,trimEnd:HH,trimStart:zH,truncate:YH,unescape:JH,upperCase:p5,upperFirst:fv,words:Vw},At={attempt:Ow,bindAll:VL,cond:Cj,conforms:Pj,constant:nv,defaultTo:zj,flow:YB,flowRight:KB,iteratee:cF,matches:AF,matchesProperty:TF,method:LF,methodOf:IF,noop:ga,nthArg:GF,over:r4,overEvery:s4,overSome:l4,property:vE,propertyOf:B4,range:n$,rangeRight:r$,stubArray:vv,stubFalse:ov,stubObject:nH,stubString:rH,stubTrue:iH,times:NH,toPath:IH,uniqueId:u5};function M5(){var e=new lt(this.__wrapped__);return e.__actions__=Dn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Dn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Dn(this.__views__),e}function P5(){if(this.__filtered__){var e=new lt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var N5=Math.max,R5=Math.min;function D5(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=R5(t,e+a);break;case"takeRight":e=N5(e,t-a);break}}return{start:e,end:t}}var L5=1,I5=2,k5=Math.min;function j5(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ke(e),r=t<0,i=n?e.length:0,o=D5(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=k5(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return vS(e,this.__actions__);var v=[];e:for(;l--&&d<h;){u+=t;for(var p=-1,g=e[u];++p<f;){var y=c[p],m=y.iteratee,M=y.type,T=m(g);if(M==I5)g=T;else if(!T){if(M==L5)continue e;break e}}v[d++]=g}return v}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var B5="4.17.21",F5=2,$5=1,H5=3,wS=4294967295,W5=Array.prototype,z5=Object.prototype,ES=z5.hasOwnProperty,e_=yn?yn.iterator:void 0,U5=Math.max,t_=Math.min,Kv=function(e){return function(t,n,r){if(r==null){var i=jt(n),o=i&&en(n),a=o&&o.length&&Cf(n,o);(a?a.length:i)||(r=n,n=t,t=this)}return e(t,n,r)}}(BF);b.after=Ht.after;b.ary=Ht.ary;b.assign=Ue.assign;b.assignIn=Ue.assignIn;b.assignInWith=Ue.assignInWith;b.assignWith=Ue.assignWith;b.at=Ue.at;b.before=Ht.before;b.bind=Ht.bind;b.bindAll=At.bindAll;b.bindKey=Ht.bindKey;b.castArray=Le.castArray;b.chain=si.chain;b.chunk=Se.chunk;b.compact=Se.compact;b.concat=Se.concat;b.cond=At.cond;b.conforms=At.conforms;b.constant=At.constant;b.countBy=Tt.countBy;b.create=Ue.create;b.curry=Ht.curry;b.curryRight=Ht.curryRight;b.debounce=Ht.debounce;b.defaults=Ue.defaults;b.defaultsDeep=Ue.defaultsDeep;b.defer=Ht.defer;b.delay=Ht.delay;b.difference=Se.difference;b.differenceBy=Se.differenceBy;b.differenceWith=Se.differenceWith;b.drop=Se.drop;b.dropRight=Se.dropRight;b.dropRightWhile=Se.dropRightWhile;b.dropWhile=Se.dropWhile;b.fill=Se.fill;b.filter=Tt.filter;b.flatMap=Tt.flatMap;b.flatMapDeep=Tt.flatMapDeep;b.flatMapDepth=Tt.flatMapDepth;b.flatten=Se.flatten;b.flattenDeep=Se.flattenDeep;b.flattenDepth=Se.flattenDepth;b.flip=Ht.flip;b.flow=At.flow;b.flowRight=At.flowRight;b.fromPairs=Se.fromPairs;b.functions=Ue.functions;b.functionsIn=Ue.functionsIn;b.groupBy=Tt.groupBy;b.initial=Se.initial;b.intersection=Se.intersection;b.intersectionBy=Se.intersectionBy;b.intersectionWith=Se.intersectionWith;b.invert=Ue.invert;b.invertBy=Ue.invertBy;b.invokeMap=Tt.invokeMap;b.iteratee=At.iteratee;b.keyBy=Tt.keyBy;b.keys=en;b.keysIn=Ue.keysIn;b.map=Tt.map;b.mapKeys=Ue.mapKeys;b.mapValues=Ue.mapValues;b.matches=At.matches;b.matchesProperty=At.matchesProperty;b.memoize=Ht.memoize;b.merge=Ue.merge;b.mergeWith=Ue.mergeWith;b.method=At.method;b.methodOf=At.methodOf;b.mixin=Kv;b.negate=Nf;b.nthArg=At.nthArg;b.omit=Ue.omit;b.omitBy=Ue.omitBy;b.once=Ht.once;b.orderBy=Tt.orderBy;b.over=At.over;b.overArgs=Ht.overArgs;b.overEvery=At.overEvery;b.overSome=At.overSome;b.partial=Ht.partial;b.partialRight=Ht.partialRight;b.partition=Tt.partition;b.pick=Ue.pick;b.pickBy=Ue.pickBy;b.property=At.property;b.propertyOf=At.propertyOf;b.pull=Se.pull;b.pullAll=Se.pullAll;b.pullAllBy=Se.pullAllBy;b.pullAllWith=Se.pullAllWith;b.pullAt=Se.pullAt;b.range=At.range;b.rangeRight=At.rangeRight;b.rearg=Ht.rearg;b.reject=Tt.reject;b.remove=Se.remove;b.rest=Ht.rest;b.reverse=Se.reverse;b.sampleSize=Tt.sampleSize;b.set=Ue.set;b.setWith=Ue.setWith;b.shuffle=Tt.shuffle;b.slice=Se.slice;b.sortBy=Tt.sortBy;b.sortedUniq=Se.sortedUniq;b.sortedUniqBy=Se.sortedUniqBy;b.split=bt.split;b.spread=Ht.spread;b.tail=Se.tail;b.take=Se.take;b.takeRight=Se.takeRight;b.takeRightWhile=Se.takeRightWhile;b.takeWhile=Se.takeWhile;b.tap=si.tap;b.throttle=Ht.throttle;b.thru=If;b.toArray=Le.toArray;b.toPairs=Ue.toPairs;b.toPairsIn=Ue.toPairsIn;b.toPath=At.toPath;b.toPlainObject=Le.toPlainObject;b.transform=Ue.transform;b.unary=Ht.unary;b.union=Se.union;b.unionBy=Se.unionBy;b.unionWith=Se.unionWith;b.uniq=Se.uniq;b.uniqBy=Se.uniqBy;b.uniqWith=Se.uniqWith;b.unset=Ue.unset;b.unzip=Se.unzip;b.unzipWith=Se.unzipWith;b.update=Ue.update;b.updateWith=Ue.updateWith;b.values=Ue.values;b.valuesIn=Ue.valuesIn;b.without=Se.without;b.words=bt.words;b.wrap=Ht.wrap;b.xor=Se.xor;b.xorBy=Se.xorBy;b.xorWith=Se.xorWith;b.zip=Se.zip;b.zipObject=Se.zipObject;b.zipObjectDeep=Se.zipObjectDeep;b.zipWith=Se.zipWith;b.entries=Ue.toPairs;b.entriesIn=Ue.toPairsIn;b.extend=Ue.assignIn;b.extendWith=Ue.assignInWith;Kv(b,b);b.add=Tn.add;b.attempt=At.attempt;b.camelCase=bt.camelCase;b.capitalize=bt.capitalize;b.ceil=Tn.ceil;b.clamp=Yv.clamp;b.clone=Le.clone;b.cloneDeep=Le.cloneDeep;b.cloneDeepWith=Le.cloneDeepWith;b.cloneWith=Le.cloneWith;b.conformsTo=Le.conformsTo;b.deburr=bt.deburr;b.defaultTo=At.defaultTo;b.divide=Tn.divide;b.endsWith=bt.endsWith;b.eq=Le.eq;b.escape=bt.escape;b.escapeRegExp=bt.escapeRegExp;b.every=Tt.every;b.find=Tt.find;b.findIndex=Se.findIndex;b.findKey=Ue.findKey;b.findLast=Tt.findLast;b.findLastIndex=Se.findLastIndex;b.findLastKey=Ue.findLastKey;b.floor=Tn.floor;b.forEach=Tt.forEach;b.forEachRight=Tt.forEachRight;b.forIn=Ue.forIn;b.forInRight=Ue.forInRight;b.forOwn=Ue.forOwn;b.forOwnRight=Ue.forOwnRight;b.get=Ue.get;b.gt=Le.gt;b.gte=Le.gte;b.has=Ue.has;b.hasIn=Ue.hasIn;b.head=Se.head;b.identity=kn;b.includes=Tt.includes;b.indexOf=Se.indexOf;b.inRange=Yv.inRange;b.invoke=Ue.invoke;b.isArguments=Le.isArguments;b.isArray=Ke;b.isArrayBuffer=Le.isArrayBuffer;b.isArrayLike=Le.isArrayLike;b.isArrayLikeObject=Le.isArrayLikeObject;b.isBoolean=Le.isBoolean;b.isBuffer=Le.isBuffer;b.isDate=Le.isDate;b.isElement=Le.isElement;b.isEmpty=Le.isEmpty;b.isEqual=Le.isEqual;b.isEqualWith=Le.isEqualWith;b.isError=Le.isError;b.isFinite=Le.isFinite;b.isFunction=Le.isFunction;b.isInteger=Le.isInteger;b.isLength=Le.isLength;b.isMap=Le.isMap;b.isMatch=Le.isMatch;b.isMatchWith=Le.isMatchWith;b.isNaN=Le.isNaN;b.isNative=Le.isNative;b.isNil=Le.isNil;b.isNull=Le.isNull;b.isNumber=Le.isNumber;b.isObject=jt;b.isObjectLike=Le.isObjectLike;b.isPlainObject=Le.isPlainObject;b.isRegExp=Le.isRegExp;b.isSafeInteger=Le.isSafeInteger;b.isSet=Le.isSet;b.isString=Le.isString;b.isSymbol=Le.isSymbol;b.isTypedArray=Le.isTypedArray;b.isUndefined=Le.isUndefined;b.isWeakMap=Le.isWeakMap;b.isWeakSet=Le.isWeakSet;b.join=Se.join;b.kebabCase=bt.kebabCase;b.last=Zn;b.lastIndexOf=Se.lastIndexOf;b.lowerCase=bt.lowerCase;b.lowerFirst=bt.lowerFirst;b.lt=Le.lt;b.lte=Le.lte;b.max=Tn.max;b.maxBy=Tn.maxBy;b.mean=Tn.mean;b.meanBy=Tn.meanBy;b.min=Tn.min;b.minBy=Tn.minBy;b.stubArray=At.stubArray;b.stubFalse=At.stubFalse;b.stubObject=At.stubObject;b.stubString=At.stubString;b.stubTrue=At.stubTrue;b.multiply=Tn.multiply;b.nth=Se.nth;b.noop=At.noop;b.now=T5.now;b.pad=bt.pad;b.padEnd=bt.padEnd;b.padStart=bt.padStart;b.parseInt=bt.parseInt;b.random=Yv.random;b.reduce=Tt.reduce;b.reduceRight=Tt.reduceRight;b.repeat=bt.repeat;b.replace=bt.replace;b.result=Ue.result;b.round=Tn.round;b.sample=Tt.sample;b.size=Tt.size;b.snakeCase=bt.snakeCase;b.some=Tt.some;b.sortedIndex=Se.sortedIndex;b.sortedIndexBy=Se.sortedIndexBy;b.sortedIndexOf=Se.sortedIndexOf;b.sortedLastIndex=Se.sortedLastIndex;b.sortedLastIndexBy=Se.sortedLastIndexBy;b.sortedLastIndexOf=Se.sortedLastIndexOf;b.startCase=bt.startCase;b.startsWith=bt.startsWith;b.subtract=Tn.subtract;b.sum=Tn.sum;b.sumBy=Tn.sumBy;b.template=bt.template;b.times=At.times;b.toFinite=Le.toFinite;b.toInteger=rt;b.toLength=Le.toLength;b.toLower=bt.toLower;b.toNumber=Le.toNumber;b.toSafeInteger=Le.toSafeInteger;b.toString=Le.toString;b.toUpper=bt.toUpper;b.trim=bt.trim;b.trimEnd=bt.trimEnd;b.trimStart=bt.trimStart;b.truncate=bt.truncate;b.unescape=bt.unescape;b.uniqueId=At.uniqueId;b.upperCase=bt.upperCase;b.upperFirst=bt.upperFirst;b.each=Tt.forEach;b.eachRight=Tt.forEachRight;b.first=Se.head;Kv(b,function(){var e={};return oi(b,function(t,n){ES.call(b.prototype,n)||(e[n]=t)}),e}(),{chain:!1});b.VERSION=B5;(b.templateSettings=bt.templateSettings).imports._=b;gr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){b[e].placeholder=b});gr(["drop","take"],function(e,t){lt.prototype[e]=function(n){n=n===void 0?1:U5(rt(n),0);var r=this.__filtered__&&!t?new lt(this):this.clone();return r.__filtered__?r.__takeCount__=t_(n,r.__takeCount__):r.__views__.push({size:t_(n,wS),type:e+(r.__dir__<0?"Right":"")}),r},lt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});gr(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==$5||n==H5;lt.prototype[e]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:Ve(i),type:n}),o.__filtered__=o.__filtered__||r,o}});gr(["head","last"],function(e,t){var n="take"+(t?"Right":"");lt.prototype[e]=function(){return this[n](1).value()[0]}});gr(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");lt.prototype[e]=function(){return this.__filtered__?new lt(this):this[n](1)}});lt.prototype.compact=function(){return this.filter(kn)};lt.prototype.find=function(e){return this.filter(e).head()};lt.prototype.findLast=function(e){return this.reverse().find(e)};lt.prototype.invokeMap=at(function(e,t){return typeof e=="function"?new lt(this):this.map(function(n){return jl(n,e,t)})});lt.prototype.reject=function(e){return this.filter(Nf(Ve(e)))};lt.prototype.slice=function(e,t){e=rt(e);var n=this;return n.__filtered__&&(e>0||t<0)?new lt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=rt(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};lt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};lt.prototype.toArray=function(){return this.take(wS)};oi(lt.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=b[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);i&&(b.prototype[t]=function(){var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof lt,u=s[0],c=l||Ke(a),f=function(y){var m=i.apply(b,to([y],s));return r&&d?m[0]:m};c&&n&&typeof u=="function"&&u.length!=1&&(l=c=!1);var d=this.__chain__,h=!!this.__actions__.length,v=o&&!d,p=l&&!h;if(!o&&c){a=p?a:new lt(this);var g=e.apply(a,s);return g.__actions__.push({func:If,args:[f],thisArg:void 0}),new hr(g,d)}return v&&p?e.apply(this,s):(g=this.thru(f),v?r?g.value()[0]:g.value():g)})});gr(["pop","push","shift","sort","splice","unshift"],function(e){var t=W5[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);b.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Ke(o)?o:[],i)}return this[n](function(a){return t.apply(Ke(a)?a:[],i)})}});oi(lt.prototype,function(e,t){var n=b[t];if(n){var r=n.name+"";ES.call(ya,r)||(ya[r]=[]),ya[r].push({name:t,func:n})}});ya[vf(void 0,F5).name]=[{name:"wrapper",func:void 0}];lt.prototype.clone=M5;lt.prototype.reverse=P5;lt.prototype.value=j5;b.prototype.at=si.at;b.prototype.chain=si.wrapperChain;b.prototype.commit=si.commit;b.prototype.next=si.next;b.prototype.plant=si.plant;b.prototype.reverse=si.reverse;b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=si.value;b.prototype.first=b.prototype.head;e_&&(b.prototype[e_]=si.toIterator);var X5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},fl;(function(e){function t(n){var r=X5(n,[]),i=n.container;if(!i)throw new Error("Ensure the container of LogicFlow is specified and valid.");return _t({},e.defaults,r)}e.get=t})(fl||(fl={}));(function(e){e.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}})(fl||(fl={}));var n_={node:!1,edge:!1},G5={node:!0,edge:!0},Y5=function(e){return!e||typeof e=="boolean"?ze(e===!0?G5:n_):Na(ze(n_),e)},K5=function(){return eo(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function vn(e){try{return JSON.parse(JSON.stringify(e))}catch{return e}}var r_=200,V5=9999,q5=10,ut;(function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(ut||(ut={}));var It;(function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"})(It||(It={}));var tt;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.CUSTOM_HTML_NODE="custom-html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(tt||(tt={}));var Ae;(function(e){e.ELEMENT_CLICK="element:click",e.NODE_ADD="node:add",e.NODE_DELETE="node:delete",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_GROUP_COPY="node:group-copy-add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.NODE_ROTATE="node:rotate",e.NODE_RESIZE="node:resize",e.NODE_FOCUS="node:focus",e.NODE_BLUR="node:blur",e.NODE_PROPERTIES_CHANGE="node:properties-change",e.NODE_PROPERTIES_DELETE="node:properties-delete",e.EDGE_ADD="edge:add",e.EDGE_DELETE="edge:delete",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_FOCUS="edge:focus",e.EDGE_BLUR="edge:blur",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_CLICK="anchor:click",e.ANCHOR_MOUSEDOWN="anchor:mousedown",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.TEXT_MOUSEDOWN="text:mousedown",e.TEXT_DRAGSTART="text:dragstart",e.TEXT_DRAG="text:drag",e.TEXT_DROP="text:drop",e.TEXT_CLICK="text:click",e.TEXT_DBCLICK="text:dbclick",e.TEXT_BLUR="text:blur",e.TEXT_MOUSEMOVE="text:mousemove",e.TEXT_MOUSEUP="text:mouseup",e.TEXT_FOCUS="text:focus",e.TEXT_ADD="text:add",e.TEXT_UPDATE="text:update",e.TEXT_CLEAR="text:clear",e.LABEL_MOUSEDOWN="label:mousedown",e.LABEL_DRAGSTART="label:dragstart",e.LABEL_DRAG="label:drag",e.LABEL_DROP="label:drop",e.LABEL_CLICK="label:click",e.LABEL_DBCLICK="label:dbclick",e.LABEL_BLUR="label:blur",e.LABEL_MOUSEMOVE="label:mousemove",e.LABEL_MOUSEUP="label:mouseup",e.LABEL_FOCUS="label:focus",e.LABEL_ADD="label:add",e.LABEL_UPDATE="label:update",e.LABEL_CLEAR="label:clear",e.LABEL_DELETE="label:delete",e.LABEL_SHOULD_ADD="label:should-add",e.LABEL_BATCH_ADD="label:batch-add",e.LABEL_SHOULD_UPDATE="label:should-update",e.LABEL_SHOULD_DELETE="label:should-delete",e.LABEL_BATCH_DELETE="label:batch-delete",e.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",e.HISTORY_CHANGE="history:change",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered",e.GRAPH_UPDATED="graph:updated"})(Ae||(Ae={}));var Or;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(Or||(Or={}));var Rt;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Rt||(Rt={}));var cr;(function(e){e.TEXT="text",e.LABEL="label"})(cr||(cr={}));var Z5=0,yr=function(){function e(t){var n=t.onDragStart,r=n===void 0?ga:n,i=t.onDragging,o=i===void 0?ga:i,a=t.onDragEnd,s=a===void 0?ga:a,l=t.eventType,u=l===void 0?"":l,c=t.eventCenter,f=t.step,d=f===void 0?1:f,h=t.isStopPropagation,v=h===void 0?!0:h,p=t.model,g=t.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(m){var M,T,L=window==null?void 0:window.document;if(m.button===Z5){y.isStopPropagation&&m.stopPropagation(),y.isStartDragging=!0,y.startX=m.clientX,y.startY=m.clientY,L.addEventListener("mousemove",y.handleMouseMove,!1),L.addEventListener("mouseup",y.handleMouseUp,!1);var N=(M=y.model)===null||M===void 0?void 0:M.getData();(T=y.eventCenter)===null||T===void 0||T.emit(Ae["".concat(y.eventType,"_MOUSEDOWN")],{e:m,data:y.data||N}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(m){var M,T;if(y.isStopPropagation&&m.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=m.clientX-y.startX,y.sumDeltaY+=m.clientY-y.startY,y.startX=m.clientX,y.startY=m.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var L=y.sumDeltaX%y.step,N=y.sumDeltaY%y.step,E=y.sumDeltaX-L,k=y.sumDeltaY-N;y.sumDeltaX=L,y.sumDeltaY=N;var Y=(M=y.model)===null||M===void 0?void 0:M.getData();y.isDragging||((T=y.eventCenter)===null||T===void 0||T.emit(Ae["".concat(y.eventType,"_DRAGSTART")],{e:m,data:y.data||Y}),y.onDragStart({event:m})),y.isDragging=!0,Promise.resolve().then(function(){var ie,se;y.onDragging({deltaX:E,deltaY:k,event:m}),(ie=y.eventCenter)===null||ie===void 0||ie.emit(Ae["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:E,deltaY:k,e:m,data:y.data||Y}),(se=y.eventCenter)===null||se===void 0||se.emit(Ae["".concat(y.eventType,"_DRAG")],{e:m,data:y.data||Y})})}},this.handleMouseUp=function(m){var M=window.document;y.isStartDragging=!1,y.isStopPropagation&&m.stopPropagation(),Promise.resolve().then(function(){var T,L,N;M.removeEventListener("mousemove",y.handleMouseMove,!1),M.removeEventListener("mouseup",y.handleMouseUp,!1);var E=(T=y.model)===null||T===void 0?void 0:T.getData();(L=y.eventCenter)===null||L===void 0||L.emit(Ae["".concat(y.eventType,"_MOUSEUP")],{e:m,data:y.data||E}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:m}),(N=y.eventCenter)===null||N===void 0||N.emit(Ae["".concat(y.eventType,"_DROP")],{e:m,data:y.data||E}))})},this.cancelDrag=function(){var m=window==null?void 0:window.document;m.removeEventListener("mousemove",y.handleMouseMove,!1),m.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.destroy=function(){y.isStartDragging&&y.cancelDrag()},this.onDragStart=r,this.onDragging=o,this.onDragEnd=s,this.step=d,this.isStopPropagation=v,this.eventType=u,this.eventCenter=c,this.model=p,this.data=g}return e.prototype.setStep=function(t){this.step=t},e.prototype.setModel=function(t){this.model=t},e}(),J5=function(e){var t=e.x,n=e.y,r=e.width,i=e.height;return{x:t-r/2,y:n-i/2,x1:t+r/2,y1:n+i/2}},Q5=function(e){var t=e.startPoint,n=e.endPoint,r=(t.x+n.x)/2,i=(t.y+n.y)/2,o=Math.abs(t.x-n.x)+10,a=Math.abs(t.y-n.y)+10;return{x:r-o/2,y:i-a/2,x1:r+o/2,y1:i+a/2}},e8=function(e){var t=e.points,n=Bo(t),r=pl(n,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},t8=function(e){var t=e.path,n=Vv(t),r=pl(n,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},n8=function(e){if(e.modelType===tt.LINE_EDGE)return Q5(e);if(e.modelType===tt.POLYLINE_EDGE)return e8(e);if(e.modelType===tt.BEZIER_EDGE)return t8(e)},r8=function(e,t,n,r){var i=(t.y-e.y)*(r.x-n.x)-(e.x-t.x)*(n.y-r.y);if(i===0)return!1;var o=((t.x-e.x)*(r.x-n.x)*(n.y-e.y)+(t.y-e.y)*(r.x-n.x)*e.x-(r.y-n.y)*(t.x-e.x)*n.x)/i,a=-((t.y-e.y)*(r.y-n.y)*(n.x-e.x)+(t.x-e.x)*(r.y-n.y)*e.y-(r.x-n.x)*(t.y-e.y)*n.y)/i;return(o-e.x)*(o-t.x)<=0&&(a-e.y)*(a-t.y)<=0&&(o-n.x)*(o-r.x)<=0&&(a-n.y)*(a-r.y)<=0?{x:o,y:a}:!1},dl=function(e,t,n){var r=e.x,i=e.y,o=t.x,a=t.y,s=n.x,l=n.y,u=(l-a)/(s-o),c=a-u*o;return(r>=o&&r<=s||r<=o&&r>=s)&&(i>=a&&i<=l||i<=a&&i>=l)&&Math.abs(i-u*r-c)<Number.EPSILON},hl=function(e){var t=e.start,n=e.end,r=e.offset,i=e.verticalLength,o=e.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((n.y-t.y)/(n.x-t.x)),l=Math.atan(r/i),u=Math.sqrt(i*i+r*r);return o==="start"?n.x>=t.x?(a.leftX=t.x+u*Math.sin(s+l),a.leftY=t.y-u*Math.cos(s+l),a.rightX=t.x-u*Math.sin(s-l),a.rightY=t.y+u*Math.cos(s-l)):(a.leftX=t.x-u*Math.sin(s+l),a.leftY=t.y+u*Math.cos(s+l),a.rightX=t.x+u*Math.sin(s-l),a.rightY=t.y-u*Math.cos(s-l)):o==="end"&&(n.x>=t.x?(a.leftX=n.x+u*Math.sin(s-l),a.leftY=n.y-u*Math.cos(s-l),a.rightX=n.x-u*Math.sin(s+l),a.rightY=n.y+u*Math.cos(s+l)):(a.leftX=n.x-u*Math.sin(s-l),a.leftY=n.y+u*Math.cos(s-l),a.rightX=n.x+u*Math.sin(s+l),a.rightY=n.y-u*Math.cos(s+l))),a},ca=function(){return ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ca.apply(this,arguments)},or=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Wi=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},i8=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Nh=function(e){var t=[],n={};return e.forEach(function(r){var i="".concat(r.x,"-").concat(r.y);r.id=i,n[i]=r}),Object.keys(n).forEach(function(r){t.push(n[r])}),t},ac=function(e,t){return e.width===0&&e.height===0?e:{x:e.x,y:e.y,centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},o8=function(e,t){var n=Math.abs(e.x-t.centerX),r=Math.abs(e.y-t.centerY);return n/t.width>r/t.height?Rt.HORIZONTAL:Rt.VERTICAL},sc=function(e,t,n){var r=o8(n,t);return r===Rt.HORIZONTAL?{x:n.x>e.centerX?e.maxX:e.minX,y:n.y}:{x:n.x,y:n.y>e.centerY?e.maxY:e.minY}},i_=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{x:(n+i)/2,y:(r+o)/2,centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},pl=function(e,t){e===void 0&&(e=[]);var n=[],r=[];e.forEach(function(c){n.push(c.x),r.push(c.y)});var i=Math.min.apply(Math,Wi([],or(n),!1)),o=Math.max.apply(Math,Wi([],or(n),!1)),a=Math.min.apply(Math,Wi([],or(r),!1)),s=Math.max.apply(Math,Wi([],or(r),!1)),l=o-i,u=s-a;return t&&(l+=t,u+=t),{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,x:(i+o)/2,y:(a+s)/2,height:u,width:l}},lc=function(e){var t=e.minX,n=e.minY,r=e.maxX,i=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:i},{x:t,y:i}]},eu=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},a8=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},s8=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},l8=function(e,t){return Wi(Wi([],or(a8(e,t.x)),!1),or(s8(e,t.y)),!1)},Rh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},u8=function(e,t){var n=-2,r=0;return t.forEach(function(i){i&&(e.x===i.x&&(r+=n),e.y===i.y&&(r+=n))}),r},o_=function(e,t,n,r,i){return Rh(e,t)+Rh(e,n)+u8(e,[t,n,r,i])},SS=function(e,t,n,r,i){i||(i=0),e.unshift(t[r]),n[r]&&n[r]!==r&&i<=100&&SS(e,t,n,n[r],i+1)},c8=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},bs=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=r.x-n.x,s=r.y-n.y,l=(-o*(e.x-n.x)+i*(e.y-n.y))/(-a*o+i*s),u=(a*(e.y-n.y)-s*(e.x-n.x))/(-a*o+i*s);return l>=0&&l<=1&&u>=0&&u<=1},a_=function(e,t,n){if(n.width===0&&n.height===0)return!1;var r=or(lc(n),4),i=r[0],o=r[1],a=r[2],s=r[3];return bs(e,t,i,o)||bs(e,t,i,s)||bs(e,t,o,a)||bs(e,t,a,s)},f8=function(e,t,n,r){var i=[];return e.forEach(function(o){o!==t&&(o.x===t.x||o.y===t.y)&&!a_(o,t,n)&&!a_(o,t,r)&&i.push(o)}),Nh(i)},d8=function(e,t,n,r,i,o,a){var s=[],l=[t],u={},c={},f={};t.id&&(c[t.id]=0,f[t.id]=o_(t,n,t));var d={};e.forEach(function(p){p.id&&(d[p.id]=p)});for(var h=function(){var p,g=1/0;if(l.forEach(function(m){m.id&&f[m.id]<g&&(g=f[m.id],p=m)}),p===n&&n.id){var y=[];return SS(y,d,u,n.id),{value:y}}if(!p)return{value:[t,n]};c8(l,p),s.push(p),f8(e,p,r,i).forEach(function(m){if(s.indexOf(m)===-1&&(l.indexOf(m)===-1&&l.push(m),p!=null&&p.id&&(m!=null&&m.id))){var M=f[p.id]+Rh(p,m);if(c[m.id]&&M>=c[m.id])return;u[m.id]=p.id,c[m.id]=M,f[m.id]=c[m.id]+o_(m,n,t,o,a)}})};l.length;){var v=h();if(typeof v=="object")return v.value}return[t,n]},s_=function(e){return Un(e)},OS=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],r=e[t],i=e[t+1];n.x===r.x&&r.x===i.x||n.y===r.y&&r.y===i.y?e.splice(t,1):t++}return e},l_=function(e,t,n,r,i){var o=s_(n),a=s_(r),s=ac(o,i),l=ac(a,i),u=sc(s,o,e),c=sc(l,a,t);if(i8(s,l)){var f=p8(e,t,u,c);return Wi(Wi([e,u],or(f),!1),[c,t],!1)}var d=pl([u,c]),h=i_(s,d),v=i_(l,d),p=[];p=p.concat(lc(h)),p=p.concat(lc(v));var g={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[d,h,v].forEach(function(m){p=p.concat(l8(m,g).filter(function(M){return eu(M,s)&&eu(M,l)}))}),[{x:u.x,y:c.y},{x:c.x,y:u.y}].forEach(function(m){eu(m,s)&&eu(m,l)&&p.push(m)}),p.unshift(u),p.push(c),p=Nh(p);var y=d8(p,u,c,o,a,e,t);return y.unshift(e),y.push(t),y.length>2&&(y=OS(y)),Nh(y)},h8=function(e){if(e.length===1){var t=or(e,1),n=t[0];return[n,n]}else{for(var r=e[0],i=e[1],o=Ar(r.x,r.y,i.x,i.y),a=1;a<e.length-1;a++){var s=e[a],l=e[a+1],u=Ar(s.x,s.y,l.x,l.y);u>o&&(o=u,r=s,i=l)}return[r,i]}},u_=function(e,t,n){var r=yi(e,n),i=yi(t,n);return r&&i},c_=function(e,t,n){var r=yi(e,n),i=yi(t,n),o=r&&i,a=r||i;return!o&&a},f_=function(e,t,n){for(var r=void 0,i=Un(n),o=lc(i),a=0;a<o.length;a++){var s=bs(e,t,o[a],o[(a+1)%o.length]);s&&(r=[o[a],o[(a+1)%o.length]])}if(r)return r8(e,t,r[0],r[1])},uc=function(e,t){var n=void 0;return e.x===t.x?n=Rt.VERTICAL:e.y===t.y&&(n=Rt.HORIZONTAL),n},Bo=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(r){var i=or(r.split(","),2),o=i[0],a=i[1];n.push({x:Number(o),y:Number(a)})}),n},p8=function(e,t,n,r){var i=[],o=uc(e,n),a=uc(t,r);if(o===a)e.y===n.y?(i.push({x:n.x,y:(n.y+r.y)/2}),i.push({x:r.x,y:(n.y+r.y)/2})):(i.push({x:(n.x+r.x)/2,y:n.y}),i.push({x:(n.x+r.x)/2,y:r.y}));else{var s={x:n.x,y:r.y},l=dl(s,e,n),u=dl(s,t,r);if(l||u)s={x:r.x,y:n.y};else{var c=d_(s,e,n),f=d_(s,t,r);c&&f&&(s={x:r.x,y:n.y})}i.push(s)}return i},d_=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},AS=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:r>=1&&r<=126||r>=65376&&r<=65439?t+=1:t+=2}return t},v8=function(e){var t=e.start,n=e.end,r;if(t.x===n.x&&t.y===n.y)r="";else{var i={start:t,end:n,offset:10,verticalLength:5},o=hl(ca(ca({},i),{type:"start"})),a=hl(ca(ca({},i),{type:"end"}));r="M".concat(o.leftX," ").concat(o.leftY,`
    L`).concat(o.rightX," ").concat(o.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:r,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},h_=function(e){var t=e.start,n=e.end,r=e.sourceNode,i=e.targetNode,o=e.offset,a=Un(r),s=Un(i),l=ac(a,o),u=ac(s,o),c=sc(l,a,t),f=sc(u,s,n);return{sNext:c,ePre:f}},Vv=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(","),n=tu(t[0]),r=tu(t[1]),i=tu(t[2]),o=tu(t[3]);return[n,r,i,o]},tu=function(e){var t=or(e.replace(/(^\s*)/g,"").split(" "),2),n=t[0],r=t[1];return{x:+n,y:+r}},p_=function(e,t){var n=or(e,4),r=n[0],i=n[1],o=n[2],a=n[3],s=i6(r,i,o,a,t);return[s,e[3]]},CS=function(e,t){for(var n=e.x,r=e.y,i=Bo(t),o=Number.MAX_SAFE_INTEGER,a,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach(function(d){var h=d.start,v=d.end;if(h.x===v.x){var p={x:h.x,y:r},g=dl(p,h,v);if(g){var y=Math.abs(h.x-n);y<o&&(o=y,a=p)}}else if(h.y===v.y){var p={x:n,y:h.y},g=dl(p,h,v);if(g){var y=Math.abs(h.y-r);y<o&&(o=y,a=p)}}}),!a){var u=s[0],c=u.start,f=u.end;a={x:c.x+(f.x-c.x)/2,y:c.y+(f.y-c.y)/2}}return a},g8=function(e){return Eo(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},v_=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function y8(e,t){return typeof t!="function"?function(n,r,i){return Object.assign({type:e.edgeType},i)}:function(n,r,i){var o=t(n,r,i);return o?typeof o=="string"?Object.assign({},i,{type:o}):Object.assign({type:o},i):{type:e.edgeType}}}var m8=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,i=0;return pt(t,function(o){var a=AS(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:n*(r+2)+r/4}},Jo=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},nu=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};function Ra(e,t,n){return n&&t*Math.round(e/t)||e}function _8(e,t,n){if(!e)return[];var r=Math.min.apply(Math,nu([],Jo(e.map(function(p){return p[0]})),!1)),i=Math.max.apply(Math,nu([],Jo(e.map(function(p){return p[0]})),!1)),o=Math.min.apply(Math,nu([],Jo(e.map(function(p){return p[1]})),!1)),a=Math.max.apply(Math,nu([],Jo(e.map(function(p){return p[1]})),!1)),s=-r,l=-o,u=e.map(function(p){var g=Jo(p,2),y=g[0],m=g[1];return[y+s,m+l]}),c=i-r,f=a-o,d=t?t/c:1,h=n?n/f:1,v=Math.min(d,h);return u.map(function(p){var g=Jo(p,2),y=g[0],m=g[1];return[y*v,m*v]})}var yd=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},md=function(e,t,n){var r=yd(e,2),i=r[0],o=r[1],a=yd(t,2),s=a[0],l=a[1],u=yd(n,2),c=u[0],f=u[1];return i>s&&i<c&&o>l&&o<f},TS=function(e,t){var n=t.multipleSelectKey,r=!1;switch(n){case"meta":r=e.metaKey;break;case"alt":r=e.altKey;break;case"shift":r=e.shiftKey;break;case"ctrl":r=e.ctrlKey;break;default:r=!1;break}return r},qv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function g_(e,t){return e instanceof ln&&t instanceof ln}var MS=function(e){qv(t,e);function t(n,r,i){var o=e.call(this,3)||this;return o[0]=n,o[1]=r,o[2]=i,o.x=n,o.y=r,o.z=i,Object.setPrototypeOf(o,t.prototype),o}return t.prototype.add=function(n){if(g_(this,n))return new ln(this.x+n.x,this.y+n.y);var r=this.z+n.z;return new Dh((this.x+n.x)/r,(this.y+n.y)/r)},t.prototype.subtract=function(n){if(g_(this,n))return new ln(this.x-n.x,this.y-n.y);var r=this.z-n.z;return r===0?new ln(this.x-n.x,this.y-n.y):new Dh((this.x-n.x)/r,(this.y-n.y)/r)},t}(Array),ln=function(e){qv(t,e);function t(n,r,i){var o=e.call(this,n,r,i??0)||this;return Object.setPrototypeOf(o,t.prototype),o}return t.prototype.toString=function(){return"Vector"},t.prototype.dot=function(n){var r=this;return n.reduce(function(i,o,a){return i+o*r[a]})},t.prototype.cross=function(n){return new t(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},t.prototype.getLength=function(){return Math.hypot(this.x,this.y)},t.prototype.normalize=function(){var n=this.getLength();return new t(this.x/n,this.y/n)},t.prototype.crossZ=function(n){return this.x*n.y-this.y*n.x},t.prototype.angle=function(n){var r=this.crossZ(n),i=Math.acos(this.normalize().dot(n.normalize()));return r>=0?i:-i},t}(MS),Dh=function(e){qv(t,e);function t(n,r){var i=e.call(this,n,r,1)||this;return Object.setPrototypeOf(i,t.prototype),i}return t.prototype.toString=function(){return"Point"},t}(MS),kf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qo=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},_d=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Fl=function(e){kf(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.call(this,n.length)||this;return i.fill(new Array(3)),n.forEach(function(o,a){i[a]=o}),i.columns=n[0].length,i.rows=n.length,Object.setPrototypeOf(i,t.prototype),i}return t.prototype.getRow=function(n){return this[n]},t.prototype.getColumn=function(n){return _d([],Qo(this.map(function(r){return r[n]})),!1)},t.prototype.transpose=function(){for(var n=[],r=0;r<this.columns;r++)n.push(this.getColumn(r));return new(t.bind.apply(t,_d([void 0],Qo(n),!1)))},t.prototype.cross=function(n){var r=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===n.rows)for(var i=0;i<this.rows;i++)for(var o=this.getRow(i),a=function(l){var u=n.getColumn(l);r[i][l]=o.reduce(function(c,f,d){return c+f*u[d]},0)},s=0;s<n.columns;s++)a(s);return new(t.bind.apply(t,_d([void 0],Qo(r),!1)))},t.prototype.to2D=function(){return this.map(function(n){return[n[0],n[1]]})},t.prototype.toPoints=function(){return this.map(function(n){return new Dh(n[0],n[1])})},t.prototype.toString=function(){var n=Qo(this[0],2),r=n[0],i=n[1],o=Qo(this[1],2),a=o[0],s=o[1],l=Qo(this[2],2),u=l[0],c=l[1];return"matrix(".concat(r," ").concat(i," ").concat(a," ").concat(s," ").concat(u," ").concat(c,")")},t.prototype.translate=function(n,r){return this.cross(new cc(n,r))},t.prototype.rotate=function(n){return this.cross(new b8(n))},t.prototype.scale=function(n,r){return this.cross(new x8(n,r))},t}(Array),b8=function(e){kf(t,e);function t(n){var r=e.call(this,new ln(+Math.cos(n).toFixed(2),+Math.sin(n).toFixed(2),0),new ln(-Math.sin(n).toFixed(2),+Math.cos(n).toFixed(2),0),new ln(0,0,1))||this;return Object.setPrototypeOf(r,t.prototype),r}return t.prototype.inverse=function(){return this.transpose()},t}(Fl),x8=function(e){kf(t,e);function t(n,r){var i=e.call(this,new ln(n,0,0),new ln(0,r,0),new ln(0,0,1))||this;return i.sx=n,i.sy=r,Object.setPrototypeOf(i,t.prototype),i}return t.prototype.inverse=function(){return new t(1/this.sx,1/this.sy)},t}(Fl),cc=function(e){kf(t,e);function t(n,r){var i=e.call(this,new ln(1,0,0),new ln(0,1,0),new ln(n,r,1))||this;return i.tx=n,i.ty=r,Object.setPrototypeOf(i,t.prototype),i}return t.prototype.inverse=function(){return new t(-this.tx,-this.ty)},t}(Fl);kP({});var fc=function(){return fc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fc.apply(this,arguments)},w8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Lh=function(e){var t=e.anchors;return t},dc=function(e,t){for(var n=t.nodes,r,i=n.length-1;i>=0;i--){var o=n[i],a=O8(e,o);if(a){var s=o.getTargetAnchor(e);if(s){var l={node:o,anchorIndex:s.index,anchor:s.anchor};(!r||E8(o,r.node,t))&&(r=l)}}}return r},E8=function(e,t,n){return e.zIndex>t.zIndex?!0:n.nodesMap[e.id].index>n.nodesMap[t.id].index},S8=function(e,t){for(var n=Lh(t),r,i=Number.MAX_SAFE_INTEGER,o=0;o<n.length;o++){var a=Ar(e.x,e.y,n[o].x,n[o].y);a<i&&(i=a,r={index:o,anchor:fc(fc({},n[o]),{x:n[o].x,y:n[o].y,id:n[o].id})})}return r},Ar=function(e,t,n,r){return Math.hypot(e-n,t-r)},yi=function(e,t,n){n===void 0&&(n=0);var r=!1,i=Un(t),o=w8(new Fl([e.x,e.y,1]).translate(-t.x,-t.y).rotate(-t.rotate).translate(t.x,t.y)[0],2),a=o[0],s=o[1],l={x:a,y:s};return l.x>=i.minX-n&&l.x<=i.maxX+n&&l.y>=i.minY-n&&l.y<=i.maxY+n&&(r=!0),r},O8=function(e,t){return yi(e,t,5)},Un=function(e){var t=e.x,n=e.y,r=e.width,i=e.height;return{minX:t-r/2,minY:n-i/2,maxX:t+r/2,maxY:n+i/2,x:t,y:n,width:r,height:i,centerX:t,centerY:n}},A8=function(e){var t=e,n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius;return[{x:n-i/2+a,y:r-o/2+a,r:a},{x:n+i/2-a,y:r-o/2+a,r:a},{x:n-i/2+a,y:r+o/2-a,r:a},{x:n+i/2-a,y:r+o/2-a,r:a}]},y_=function(e,t,n){var r=A8(n),i,o=Number.MAX_SAFE_INTEGER;return r.forEach(function(a){var s=Ar(e.x,e.y,a.x,a.y);s<o&&(o=s,i=a)}),Ih(e,t,i)},Ih=function(e,t,n){var r,i=n.x,o=n.y,a=n.r;if(t===Rt.HORIZONTAL){var s=i-Math.sqrt(a*a-(e.y-o)*(e.y-o)),l=i+Math.sqrt(a*a-(e.y-o)*(e.y-o)),u=Math.abs(s-e.x)<Math.abs(l-e.x)?s:l;r={x:u,y:e.y}}else if(t===Rt.VERTICAL){var c=o-Math.sqrt(a*a-(e.x-i)*(e.x-i)),f=o+Math.sqrt(a*a-(e.x-i)*(e.x-i)),d=Math.abs(c-e.y)<Math.abs(f-e.y)?c:f;r={x:e.x,y:d}}return r},m_=function(e,t){var n=t,r=!1,i=n.x,o=n.y,a=n.width,s=n.height,l=n.radius,u={minX:i-a/2+l,maxX:i+a/2-l,minY:o-s/2+l,maxY:o+s/2-l};return e.y===o+s/2||e.y===o-s/2?r=e.x>u.minX&&e.x<u.maxX:(e.x===i+a/2||e.x===i-a/2)&&(r=e.y>u.minY&&e.y<u.maxY),r},__=function(e,t,n){var r,i=n,o=i.x,a=i.y,s=i.rx,l=i.ry;if(t===Rt.HORIZONTAL){var u=o-Math.sqrt(s*s-(e.y-a)*(e.y-a)*s*s/(l*l)),c=o+Math.sqrt(s*s-(e.y-a)*(e.y-a)*s*s/(l*l)),f=Math.abs(u-e.x)<Math.abs(c-e.x)?u:c;r={x:f,y:e.y}}else if(t===Rt.VERTICAL){var d=a-Math.sqrt(l*l-(e.x-o)*(e.x-o)*l*l/(s*s)),h=a+Math.sqrt(l*l-(e.x-o)*(e.x-o)*l*l/(s*s)),v=Math.abs(d-e.y)<Math.abs(h-e.y)?d:h;r={x:e.x,y:v}}return r},ru=function(e,t,n){for(var r=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,o,a=[],s=0;s<r.length;s++)a.push({start:r[s],end:r[(s+1)%r.length]});return a.forEach(function(l){var u=l.start,c=l.end,f=u,d=c;u.x>c.x&&(f=c,d=u);var h={x:e.x,y:e.y};if(f.x===d.x&&t===Rt.HORIZONTAL&&(h={x:f.x,y:e.y}),f.y===d.y&&t===Rt.VERTICAL&&(h={x:e.x,y:f.y}),f.x!==d.x&&f.y!==d.y){var v=(d.y-f.y)/(d.x-f.x),p=(f.x*d.y-d.x*f.y)/(f.x-d.x);t===Rt.HORIZONTAL?h={x:(e.y-p)/v,y:e.y}:t===Rt.VERTICAL&&(h={x:e.x,y:v*e.x+p})}var g=dl(h,u,c);if(g){var y=Ar(h.x,h.y,e.x,e.y);y<i&&(i=y,o=h)}}),o},C8=function(e){var t=Eo(e,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return t},b_=function(e,t,n,r){var i=e.x,o=e.y;return t.x>e.x?i=e.x+n/2:t.x<e.x&&(i=e.x-n/2),t.y>e.y?o=e.y+r/2:t.y<e.y&&(o=e.y-r/2),{x:i,y:o}},PS=function(e){var t=e.rows,n=e.style,r=e.rowsLength,i=e.className,o=document.createElement("div");o.className=i,o.style.fontSize="".concat(n.fontSize),o.style.width="".concat(n.width),o.style.lineHeight="".concat(n.lineHeight),o.style.padding="".concat(n.padding),n.fontFamily&&(o.style.fontFamily="".concat(n.fontFamily)),r>1?t.forEach(function(s){var l=document.createElement("div");l.textContent=s,o.appendChild(l)}):o.textContent=t[0],document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},x_=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,i=0;return t&&t.forEach(function(o){var a=AS(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:n*(r+2)+r/4}},hc=function(e){return typeof e!="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e};let iu;const T8=new Uint8Array(16);function M8(){if(!iu&&(iu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!iu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iu(T8)}const on=[];for(let e=0;e<256;++e)on.push((e+256).toString(16).slice(1));function P8(e,t=0){return on[e[t+0]]+on[e[t+1]]+on[e[t+2]]+on[e[t+3]]+"-"+on[e[t+4]]+on[e[t+5]]+"-"+on[e[t+6]]+on[e[t+7]]+"-"+on[e[t+8]]+on[e[t+9]]+"-"+on[e[t+10]]+on[e[t+11]]+on[e[t+12]]+on[e[t+13]]+on[e[t+14]]+on[e[t+15]]}const N8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w_={randomUUID:N8};function R8(e,t,n){if(w_.randomUUID&&!e)return w_.randomUUID();e=e||{};const r=e.random||(e.rng||M8)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,P8(r)}var Gi=function(){return R8()},Ds=new Map,NS=function(e){var t=Gi();function n(){e();var i=Ds.get(t);if(i){var o=window.requestAnimationFrame(n);Ds.set(t,o)}}var r=window.requestAnimationFrame(n);return Ds.set(t,r),t},pc=function(e){var t=Ds.get(e);t&&(window.cancelAnimationFrame(t),Ds.delete(e))},vl=function(){return vl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vl.apply(this,arguments)},D8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function RS(e){var t=e.x,n=t===void 0?0:t,r=e.y,i=r===void 0?0:r,o=e.value,a=e.fontSize,s=a===void 0?12:a,l=e.fill,u=l===void 0?"currentColor":l,c=e.overflowMode,f=c===void 0?"default":c,d=e.textWidth,h=d===void 0?void 0:d,v=e.model,p={x:n,y:i,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(pt(Pi(e),function(L){var N=D8(L,2),E=N[0],k=N[1];typeof k!="object"&&(p[E]=k)}),o){var g=String(o).split(/[\r\n]/g),y=g.length;if(f!=="default"){var m=v.BaseType,M=v.modelType;if(m===It.NODE&&M!==tt.TEXT_NODE||m===It.EDGE&&h)return L8(e)}if(y>1){var T=g.map(function(L,N){var E=s+2,k=(N-(y-1)/2)*E;return V("tspan",{className:"lf-text-tspan",x:n,y:i+k,children:L})});return V("text",vl({},p,{children:T}))}return V("text",vl({},p,{children:o}))}return null}function L8(e){var t=e.x,n=e.y,r=e.value,i=e.model,o=e.textWidth,a=e.fontSize,s=a===void 0?12:a,l=e.lineHeight,u=e.fontFamily,c=u===void 0?"":u,f=e.wrapPadding,d=f===void 0?"0, 0":f,h=e.overflowMode,v=i.width,p=i.height,g=i.textHeight,y=o||v,m=String(r).split(/[\r\n]/g),M=m.length,T=PS({rows:m,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:c,lineHeight:l,padding:d},rowsLength:M,className:"lf-get-text-height"}),L=p>T?p:T;g&&(L=g);var N=h==="ellipsis";return N&&(L=s+2),V("g",{children:V("foreignObject",{width:y,height:L,x:t-y/2,y:n-L/2,style:{overflow:"visible",textAlign:"left"},children:V("div",{className:"lf-node-text-auto-wrap",style:{minHeight:L,width:y,padding:d},children:V("div",{className:N?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:N?m.join(""):"",style:vl({},e),children:m.map(function(E){return V("div",{className:"lf-node-text--auto-wrap-inner",children:E})})})})})})}var kh=function(){return kh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kh.apply(this,arguments)},I8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Da(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return pt(Pi(e),function(n){var r=I8(n,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(t[i]=o)}),V("line",kh({},t))}var jh=function(){return jh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jh.apply(this,arguments)},k8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function ar(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.className,a=e.strokeWidth,s=e.radius,l=s===void 0?0:s,u=t-r/2,c=n-i/2,f={};return f["stroke-width"]=a,pt(Pi(e),function(d){var h=k8(d,2),v=h[0],p=h[1];typeof p!="object"&&(f[v]=p)}),o?f.className="lf-basic-shape ".concat(o):f.className="lf-basic-shape",l&&(f.rx=l,f.ry=l),f.x=u,f.y=c,V("rect",jh({},f))}var Bh=function(){return Bh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bh.apply(this,arguments)},j8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function gl(e){var t={d:""};return pt(Pi(e),function(n){var r=j8(n,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(t[i]=o)}),V("path",Bh({},t))}var Fh=function(){return Fh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fh.apply(this,arguments)},B8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function La(e){var t=e.x,n=t===void 0?0:t,r=e.y,i=r===void 0?0:r,o=e.r,a=o===void 0?4:o,s=e.className,l={cx:n,cy:i,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return pt(Pi(e),function(u){var c=B8(u,2),f=c[0],d=c[1];typeof d!="object"&&(l[f]=d)}),s?l.className="lf-basic-shape ".concat(s):l.className="lf-basic-shape",V("circle",Fh({},l))}var $h=function(){return $h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$h.apply(this,arguments)},F8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function $8(e){var t=e.x,n=t===void 0?0:t,r=e.y,i=r===void 0?0:r,o=e.rx,a=o===void 0?4:o,s=e.ry,l=s===void 0?4:s,u=e.className,c={cx:n,cy:i,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return pt(Pi(e),function(f){var d=F8(f,2),h=d[0],v=d[1];typeof v!="object"&&(c[h]=v)}),u?c.className="lf-basic-shape ".concat(u):c.className="lf-basic-shape",V("ellipse",$h({},c))}var Hh=function(){return Hh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hh.apply(this,arguments)},H8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Zv(e){var t=e.points,n=t===void 0?[]:t,r=e.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return pt(Pi(e),function(o){var a=H8(o,2),s=a[0],l=a[1];typeof l!="object"&&(i[s]=l)}),r?i.classNmae="lf-basic-shape ".concat(r):i.className="lf-basic-shape",i.points=n.map(function(o){return o.join(",")}).join(" "),V("polygon",Hh({},i))}var Wh=function(){return Wh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wh.apply(this,arguments)},W8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function z8(e){var t=e.className,n={points:"",fill:"none"};return pt(Pi(e),function(r){var i=W8(r,2),o=i[0],a=i[1];(o==="style"||typeof a!="object")&&(n[o]=a)}),t&&(n.className="".concat(t)),V("polyline",Wh({},n))}var DS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yl=function(){return yl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yl.apply(this,arguments)},U8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},X8=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},St;(function(e){e[e.LEFT_TOP=0]="LEFT_TOP",e[e.RIGHT_TOP=1]="RIGHT_TOP",e[e.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",e[e.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(St||(St={}));var G8=function(e){DS(t,e);function t(n){var r=e.call(this)||this;r.updateEdgePointByAnchors=function(){var s=r.nodeModel,l=s.id,u=s.anchors,c=r.graphModel.getNodeEdges(l);pt(c,function(f){if(f.sourceNodeId===l){var d=qi(u,function(h){return h.id===f.sourceAnchorId});d&&f.updateStartPoint({x:d.x,y:d.y})}else if(f.targetNodeId===l){var d=qi(u,function(v){return v.id===f.targetAnchorId});d&&f.updateEndPoint({x:d.x,y:d.y})}})},r.triggerResizeEvent=function(s,l,u,c,f,d){r.graphModel.eventCenter.emit(Ae.NODE_RESIZE,{preData:s,data:l,deltaX:u,deltaY:c,index:f,model:d})},r.recalcResizeInfo=function(s,l,u,c,f){u===void 0&&(u=1),c===void 0&&(c=!1),f===void 0&&(f=!1);var d=ze(l),h=d.deltaX,v=d.deltaY,p=d.width,g=d.height,y=d.PCTResizeInfo;if(y){var m=4,M=0,T=0;switch(s){case St.LEFT_TOP:T=(h*-1-v)/m;break;case St.RIGHT_TOP:T=(h-v)/m;break;case St.RIGHT_BOTTOM:T=(h+v)/m;break;case St.LEFT_BOTTOM:T=(h*-1+v)/m;break}T!==0&&(M=Math.round(T/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+M,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+M,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var L=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),N=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case St.LEFT_TOP:h=p-L,v=g-N;break;case St.RIGHT_TOP:h=L-p,v=g-N;break;case St.RIGHT_BOTTOM:h=L-p,v=N-g;break;case St.LEFT_BOTTOM:h=p-L,v=N-g;break}return d}switch(s){case St.LEFT_TOP:d.width=c?p:p-h*u,d.height=f?g:g-v*u;break;case St.RIGHT_TOP:d.width=c?p:p+h*u,d.height=f?g:g-v*u;break;case St.RIGHT_BOTTOM:d.width=c?p:p+h*u,d.height=f?g:g+v*u;break;case St.LEFT_BOTTOM:d.width=c?p:p-h*u,d.height=f?g:g+v*u;break}return d},r.resizeNode=function(s){var l=s.deltaX,u=s.deltaY,c=r.index,f=r.props,d=f.model,h=f.graphModel,v=f.x,p=f.y;LS({x:v,y:p,deltaX:l,deltaY:u,index:c,nodeModel:d,graphModel:h,cancelCallback:function(){r.dragHandler.cancelDrag()}})},r.onDragStart=function(){r.graphModel.selectNodeById(r.nodeModel.id)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,c=r.graphModel.transformModel,f=X8(c.fixDeltaXY(l,u),2),d=f[0],h=f[1];r.resizeNode({deltaX:d,deltaY:h})},r.onDragEnd=function(){var s=r.nodeModel.x,l=r.nodeModel.y;r.nodeModel.moveTo(s,l),r.updateEdgePointByAnchors()};var i=n.index,o=n.model,a=n.graphModel;return r.index=i,r.nodeModel=o,r.graphModel=a,r.dragHandler=new yr({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:a.gridSize}),r}return t.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},t.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.direction,a=n.model,s=a.getResizeControlStyle(),l=s.width,u=s.height,c=U8(s,["width","height"]);return V("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[V(ar,yl({className:"lf-resize-control-content",x:r,y:i,width:l??7,height:u??7},c)),V(ar,{className:"lf-resize-control-content",x:r,y:i,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},t}(ot),Y8=function(e){DS(t,e);function t(){return e.call(this)||this}return t.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=Un(r),a=o.minX,s=o.minY,l=o.maxX,u=o.maxY,c=[{index:St.LEFT_TOP,direction:"nw",x:a,y:s},{index:St.RIGHT_TOP,direction:"ne",x:l,y:s},{index:St.RIGHT_BOTTOM,direction:"se",x:l,y:u},{index:St.LEFT_BOTTOM,direction:"sw",x:a,y:u}];return Jn(c,function(f){return V(G8,yl({},f,{model:r,graphModel:i}))})},t.prototype.getResizeOutline=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getResizeOutlineStyle();return V(ar,yl({},s,{x:r,y:i,width:o,height:a}))},t.prototype.render=function(){return V("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},t}(ot);function K8(e,t){var n=e.x,r=e.y,i=t.x,o=t.y,a={x:n+(i-n)/2,y:r+(o-r)/2};return a}function xs(e,t,n){var r=V8(n),i=e.x-t.x,o=e.y-t.y,a=i*Math.cos(r)-o*Math.sin(r)+t.x,s=i*Math.sin(r)+o*Math.cos(r)+t.y;return{x:a,y:s}}function V8(e){return e*Math.PI/180}function q8(e){return e/Math.PI*180}function Z8(e,t,n,r,i,o,a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!1);var u=t.deltaX,c=t.deltaY,f=t.width,d=t.height,h=q8(n),v={x:r,y:i},p={x:o,y:a},g=xs(v,p,h),y={x:g.x+u,y:g.y+c},m=t6(g,y,p,h,s,l,f,d),M=m.width,T=m.height,L=m.center;return t.width=M*e,t.height=T*e,t.deltaX=(L.x-p.x)*2,t.deltaY=(L.y-p.y)*2,t}var J8=function(e,t,n,r,i,o,a,s,l,u){n===void 0&&(n=1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=0);var c=ze(t),f=c.deltaX,d=c.deltaY,h=c.width,v=c.height,p=c.PCTResizeInfo;if(p){var g=4,y=0,m=0;switch(e){case St.LEFT_TOP:m=(f*-1-d)/g;break;case St.RIGHT_TOP:m=(f-d)/g;break;case St.RIGHT_BOTTOM:m=(f+d)/g;break;case St.LEFT_BOTTOM:m=(f*-1+d)/g;break}m!==0&&(y=Math.round(m/p.ResizeBasis.basisHeight*1e5)/1e3),p.ResizePCT.widthPCT=Math.max(Math.min(p.ResizePCT.widthPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit),p.ResizePCT.heightPCT=Math.max(Math.min(p.ResizePCT.heightPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit);var M=Math.round(p.ResizePCT.widthPCT*p.ResizeBasis.basisWidth/100),T=Math.round(p.ResizePCT.heightPCT*p.ResizeBasis.basisHeight/100);switch(e){case St.LEFT_TOP:f=h-M,d=v-T;break;case St.RIGHT_TOP:f=M-h,d=v-T;break;case St.RIGHT_BOTTOM:f=M-h,d=T-v;break;case St.LEFT_BOTTOM:f=h-M,d=T-v;break}return c}if(o%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return Z8(n,c,o,a,s,l,u,r,i);switch(e){case St.LEFT_TOP:c.width=r?h:h-f*n,c.height=i?v:v-d*n;break;case St.RIGHT_TOP:c.width=r?h:h+f*n,c.height=i?v:v-d*n;break;case St.RIGHT_BOTTOM:c.width=r?h:h+f*n,c.height=i?v:v+d*n;break;case St.LEFT_BOTTOM:c.width=r?h:h-f*n,c.height=i?v:v+d*n;break}return c},Q8=function(e,t){var n=e.id,r=e.anchors,i=t.getNodeEdges(n);pt(i,function(o){if(o.sourceNodeId===n){var a=qi(r,function(s){return s.id===o.sourceAnchorId});a&&o.updateStartPoint({x:a.x,y:a.y})}else if(o.targetNodeId===n){var a=qi(r,function(l){return l.id===o.targetAnchorId});a&&o.updateEndPoint({x:a.x,y:a.y})}})},e6=function(e,t,n,r,i,o,a){a.eventCenter.emit(Ae.NODE_RESIZE,{preData:e,data:t,deltaX:n,deltaY:r,index:i,model:o})},LS=function(e){var t=e.x,n=e.y,r=e.deltaX,i=e.deltaY,o=e.index,a=e.nodeModel,s=e.graphModel,l=e.cancelCallback,u=a.r,c=a.rx,f=a.ry,d=a.width,h=a.height,v=a.PCTResizeInfo,p=a.minWidth,g=a.minHeight,y=a.maxWidth,m=a.maxHeight,M=a.rotate,T=a.x,L=a.y,N=p===y,E=g===m,k={width:u||c||d,height:u||f||h,deltaX:r,deltaY:i,PCTResizeInfo:v},Y=u||c&&f?1/2:1,ie=t,se=n,pe=J8(o,k,Y,N,E,M,ie,se,T,L);if(pe.width<p||pe.width>y||pe.height<g||pe.height>m){l==null||l();return}(M%(2*Math.PI)==0||v||ie===void 0||se===void 0)&&(pe.deltaX=N?0:pe.deltaX,pe.deltaY=E?0:pe.deltaY);var O=a.getData(),I=a.resize(pe);O.x===I.x&&O.y===I.y||(Q8(a,s),e6(O,I,r,i,o,a,s))};function t6(e,t,n,r,i,o,a,s){i===void 0&&(i=!1),o===void 0&&(o=!1);var l={x:n.x-(e.x-n.x),y:n.y-(e.y-n.y)},u=K8(l,t),c=xs(t,u,-r),f=xs(l,u,-r);if(i){var d=Math.abs(c.x-f.x),h=d-a;u.x>c.x?u.x=u.x+h/2:u.x=u.x-h/2}if(o){var v=Math.abs(c.y-f.y),p=v-s;u.y>c.y?u.y=u.y+p/2:u.y=u.y-p/2}if(i||o){var g=xs(f,u,r),y=g.x-l.x,m=g.y-l.y;u.x=u.x-y,u.y=u.y-m,f=xs(l,u,-r),c={x:u.x-(f.x-u.x),y:u.y-(f.y-u.y)}}var M=Math.abs(c.x-f.x),T=Math.abs(c.y-f.y);return i&&(M=a),o&&(T=s),{width:M,height:T,center:u}}var n6=100,r6={x:1,y:0};function i6(e,t,n,r,i){for(var o=function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:e.x*Math.pow(1-h,3)+3*t.x*h*Math.pow(1-h,2)+3*n.x*Math.pow(h,2)*(1-h)+r.x*Math.pow(h,3),y:e.y*Math.pow(1-h,3)+3*t.y*h*Math.pow(1-h,2)+3*n.y*Math.pow(h,2)*(1-h)+r.y*Math.pow(h,3)}},a=0,s=2,l=r.x,u=r.y,c=r;a<i&&s<50;){c=o(1-s/n6);var f=c.x,d=c.y;a=Ar(l,u,f,d),s++}return c}function o6(e,t){return e.x*t.y-e.y*t.x}function a6(e,t){var n=[e.x,e.y,e.z],r=[t.x,t.y,t.z];return r.reduce(function(i,o,a){return i+o*n[a]})}function s6(e,t){var n=o6(e,t),r=Math.acos(a6(E_(e),E_(t)));return n>=0?r:-r}function E_(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function l6(e){return s6(r6,e)}function u6(e){return e*(180/Math.PI)}var c6={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},IS=function(e){var t=ze(c6);return e&&(t=Na(t,e)),t},f6=IS,d6=1e3,h6=999,Jv=function(){return++d6},p6=function(){return--h6},Wt=function(){return Wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wt.apply(this,arguments)},Re=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},jf=function(){function e(t,n){var r;this.BaseType=It.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=cr.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=ut.DEFAULT,this.modelType=tt.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=n,this.properties=(r=t.properties)!==null&&r!==void 0?r:{},this.initEdgeData(t),this.setAttributes()}return e.prototype.initEdgeData=function(t){if(t.properties||(t.properties={}),!t.id){var n=this.graphModel.idGenerator,r=n&&n(t.type),i=this.createId();t.id=i||r||Gi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(t.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,_t(this,g8(t));var a=this.graphModel.overlapMode;a===Or.INCREASE&&(this.zIndex=t.zIndex||Jv()),this.setAnchors(),this.initPoints(),this.formatText(t)},e.prototype.setAttributes=function(){},e.prototype.createId=function(){return null},e.prototype.getEdgeStyle=function(){return Wt(Wt({},this.graphModel.theme.baseEdge),this.style)},e.prototype.getAdjustPointStyle=function(){return Wt({},this.graphModel.theme.edgeAdjust)},e.prototype.getTextStyle=function(){var t=this.graphModel.theme.edgeText;return ze(t)},e.prototype.getEdgeAnimationStyle=function(){var t=this.graphModel.theme.edgeAnimation;return ze(t)},e.prototype.getArrowStyle=function(){var t=this.getEdgeStyle(),n=this.getEdgeAnimationStyle(),r=this.graphModel.theme.arrow,i=this.isAnimation?n.stroke:t.stroke;return Wt(Wt(Wt({},t),{fill:i,stroke:i}),r)},e.prototype.getOutlineStyle=function(){var t=this.graphModel,n=t.theme.outline;return ze(n)},e.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(e.prototype,"sourceNode",{get:function(){var t,n;return(n=(t=this.graphModel)===null||t===void 0?void 0:t.nodesMap[this.sourceNodeId])===null||n===void 0?void 0:n.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetNode",{get:function(){var t,n;return(n=(t=this.graphModel)===null||t===void 0?void 0:t.nodesMap[this.targetNodeId])===null||n===void 0?void 0:n.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),e.prototype.getBeginAnchor=function(t,n,r){var i,o,a=Lh(t);if(r){if(i=qi(a,function(s){return s.id===r}),i)return i;console.warn("未在节点上找到指定的起点锚点".concat(r,"，已使用默认锚点作为起点"))}return a.forEach(function(s){var l=v_(s,n);(o===void 0||l<o)&&(o=l,i=s)}),i},e.prototype.getEndAnchor=function(t,n){var r=this,i,o,a=Lh(t);if(n){if(i=qi(a,function(s){return s.id===n}),i)return i;console.warn("未在节点上找到指定的终点锚点".concat(n,"，已使用默认锚点作为终点"))}return a.forEach(function(s){if(r.startPoint){var l=v_(s,r.startPoint);(o===void 0||l<o)&&(o=l,i=s)}}),i},e.prototype.getProperties=function(){return wr(this.properties)},e.prototype.getData=function(){var t=this.properties;Ma(t)&&(t=wr(t));var n={id:this.id,type:this.type,properties:t,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:_t({},this.startPoint),endPoint:_t({},this.endPoint)};this.graphModel.overlapMode===Or.INCREASE&&(n.zIndex=this.zIndex);var r=this.text,i=r.x,o=r.y,a=r.value;return a&&(n.text={x:i,y:o,value:a}),n},e.prototype.getHistoryData=function(){return this.getData()},e.prototype.setProperty=function(t,n){Zp(this.properties,t,vn(n)),this.setAttributes()},e.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},e.prototype.setProperties=function(t){this.properties=Wt(Wt({},wr(this.properties)),vn(t)),this.setAttributes()},e.prototype.changeEdgeId=function(t){var n=this.arrowConfig,r=n.markerEnd,i=n.markerStart;i&&i==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),r&&r==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t},e.prototype.setStyle=function(t,n){var r;this.style=Wt(Wt({},this.style),(r={},r[t]=vn(n),r))},e.prototype.setStyles=function(t){this.style=Wt(Wt({},this.style),vn(t))},e.prototype.updateStyles=function(t){this.style=Wt({},vn(t))},e.prototype.setTextMode=function(t){this.textMode=t},e.prototype.formatText=function(t){var n,r,i,o=this.graphModel.editConfigModel,a=o.edgeTextDraggable,s=o.edgeTextEdit,l=this.textPosition,u=l.x,c=l.y,f=t.text,d={value:"",x:u,y:c,draggable:a,editable:s};f&&(typeof f=="string"?d=Wt(Wt({},d),{value:f}):(d=Wt(Wt({},d),{x:(n=f.x)!==null&&n!==void 0?n:u,y:(r=f.y)!==null&&r!==void 0?r:c,value:(i=f.value)!==null&&i!==void 0?i:""}),jo(f.draggable)||(d.draggable=f.draggable),jo(f.editable)||(d.editable=f.editable))),this.text=d},e.prototype.resetTextPosition=function(){var t=this.textPosition,n=t.x,r=t.y;this.text.x=n,this.text.y=r},e.prototype.moveText=function(t,n){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+t,y:o+n}},e.prototype.setText=function(t){t&&_t(this.text,t)},e.prototype.updateText=function(t){this.text=Wt(Wt({},wr(this.text)),{value:t})},e.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!t)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var t=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!t)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:t.x,y:t.y}),this.targetAnchorId||(this.targetAnchorId=t.id)}},e.prototype.setSelected=function(t){t===void 0&&(t=!0),this.isSelected=t},e.prototype.setHovered=function(t){t===void 0&&(t=!0),this.isHovered=t},e.prototype.setHitable=function(t){t===void 0&&(t=!0),this.isHitable=t},e.prototype.setHittable=function(t){t===void 0&&(t=!0),this.isHittable=t},e.prototype.openEdgeAnimation=function(){this.isAnimation=!0},e.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},e.prototype.setElementState=function(t,n){this.state=t,this.additionStateData=n},e.prototype.updateStartPoint=function(t){this.startPoint=t},e.prototype.moveStartPoint=function(t,n){this.startPoint&&(this.startPoint.x+=t,this.startPoint.y+=n)},e.prototype.updateEndPoint=function(t){this.endPoint=t},e.prototype.moveEndPoint=function(t,n){this.endPoint&&(this.endPoint.x+=t,this.endPoint.y+=n)},e.prototype.setZIndex=function(t){t===void 0&&(t=0),this.zIndex=t},e.prototype.initPoints=function(){},e.prototype.updateAttributes=function(t){_t(this,t)},e.prototype.getAdjustStart=function(){return this.startPoint},e.prototype.getAdjustEnd=function(){return this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var n=t.startPoint,r=t.endPoint;this.updateStartPoint({x:n.x,y:n.y}),this.updateEndPoint({x:r.x,y:r.y})},e.BaseType=It.EDGE,Re([q],e.prototype,"type",void 0),Re([q],e.prototype,"sourceNodeId",void 0),Re([q],e.prototype,"targetNodeId",void 0),Re([q],e.prototype,"startPoint",void 0),Re([q],e.prototype,"endPoint",void 0),Re([q],e.prototype,"textMode",void 0),Re([q],e.prototype,"text",void 0),Re([q],e.prototype,"properties",void 0),Re([q],e.prototype,"points",void 0),Re([q],e.prototype,"pointsList",void 0),Re([q],e.prototype,"isSelected",void 0),Re([q],e.prototype,"isHovered",void 0),Re([q],e.prototype,"isHitable",void 0),Re([q],e.prototype,"isHittable",void 0),Re([q],e.prototype,"draggable",void 0),Re([q],e.prototype,"visible",void 0),Re([q],e.prototype,"isAnimation",void 0),Re([q],e.prototype,"isShowAdjustPoint",void 0),Re([q],e.prototype,"zIndex",void 0),Re([q],e.prototype,"state",void 0),Re([q],e.prototype,"style",void 0),Re([q],e.prototype,"arrowConfig",void 0),Re([Ct],e.prototype,"sourceNode",null),Re([Ct],e.prototype,"targetNode",null),Re([Ct],e.prototype,"textPosition",null),Re([K],e.prototype,"setProperty",null),Re([K],e.prototype,"deleteProperty",null),Re([K],e.prototype,"setProperties",null),Re([K],e.prototype,"changeEdgeId",null),Re([K],e.prototype,"setStyle",null),Re([K],e.prototype,"setStyles",null),Re([K],e.prototype,"updateStyles",null),Re([K],e.prototype,"setTextMode",null),Re([K],e.prototype,"formatText",null),Re([K],e.prototype,"resetTextPosition",null),Re([K],e.prototype,"moveText",null),Re([K],e.prototype,"setText",null),Re([K],e.prototype,"updateText",null),Re([K],e.prototype,"setAnchors",null),Re([K],e.prototype,"setSelected",null),Re([K],e.prototype,"setHovered",null),Re([K],e.prototype,"setHitable",null),Re([K],e.prototype,"setHittable",null),Re([K],e.prototype,"openEdgeAnimation",null),Re([K],e.prototype,"closeEdgeAnimation",null),Re([K],e.prototype,"setElementState",null),Re([K],e.prototype,"updateStartPoint",null),Re([K],e.prototype,"moveStartPoint",null),Re([K],e.prototype,"updateEndPoint",null),Re([K],e.prototype,"moveEndPoint",null),Re([K],e.prototype,"setZIndex",null),Re([K],e.prototype,"initPoints",null),Re([K],e.prototype,"updateAttributes",null),Re([K],e.prototype,"getAdjustStart",null),Re([K],e.prototype,"getAdjustEnd",null),Re([K],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(),v6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_o=function(){return _o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_o.apply(this,arguments)},er=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},bd=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},S_=function(e){v6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.BEZIER_EDGE,i.path="",i.initEdgeData(n),i.setAttributes(),i}return t.prototype.initEdgeData=function(n){this.offset=eo(n,"properties.offset",100),e.prototype.initEdgeData.call(this,n)},t.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.bezier,r=e.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return _o(_o(_o({},r),ze(n)),ze(o))},t.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var n=0,r=0;return this.pointsList.forEach(function(i){var o=i.x,a=i.y;n+=o,r+=a}),{x:n/this.pointsList.length,y:r/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},t.prototype.getData=function(){var n=e.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return _o(_o({},n),{pointsList:r})},t.prototype.getControls=function(){var n=this.startPoint,r=this.endPoint,i=h_({start:n,end:r,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return i},t.prototype.getPath=function(n){var r=bd(n,4),i=r[0],o=r[1],a=r[2],s=r[3];return"M ".concat(i.x," ").concat(i.y,`
    C `).concat(o.x," ").concat(o.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},t.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},t.prototype.updatePoints=function(){var n=this.getControls(),r=n.sNext,i=n.ePre;this.updatePath(r,i)},t.prototype.updatePath=function(n,r){n=ze(n),r=ze(r);var i={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!n||!r){var a=this.getControls();n=a.sNext,r=a.ePre}this.pointsList=[i,n,r,o],this.path=this.getPath(this.pointsList)},t.prototype.updateStartPoint=function(n){this.startPoint=Object.assign({},n),this.updatePoints()},t.prototype.updateEndPoint=function(n){this.endPoint=Object.assign({},n),this.updatePoints()},t.prototype.moveStartPoint=function(n,r){this.startPoint.x+=n,this.startPoint.y+=r;var i=bd(this.pointsList,3),o=i[1],a=i[2];o.x+=n,o.y+=r,this.updatePath(o,a)},t.prototype.moveEndPoint=function(n,r){this.endPoint.x+=n,this.endPoint.y+=r;var i=bd(this.pointsList,3),o=i[1],a=i[2];a.x+=n,a.y+=r,this.updatePath(o,a)},t.prototype.updateAdjustAnchor=function(n,r){var i;r==="sNext"?this.pointsList[1]=n:r==="ePre"&&(this.pointsList[2]=n),this.path=this.getPath(this.pointsList),!((i=this.text)===null||i===void 0)&&i.value&&this.setText(_t({},this.text,this.textPosition))},t.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},t.prototype.getAdjustEnd=function(){var n=this.pointsList;return n[n.length-1]||this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(n){var r=n.startPoint,i=n.endPoint,o=n.sourceNode,a=n.targetNode,s=h_({start:r,end:i,sourceNode:o,targetNode:a,offset:this.offset}),l=s.sNext,u=s.ePre;this.pointsList=[r,l,u,i],this.initPoints()},er([q],t.prototype,"offset",void 0),er([q],t.prototype,"path",void 0),er([K],t.prototype,"initPoints",null),er([K],t.prototype,"updatePoints",null),er([K],t.prototype,"updateStartPoint",null),er([K],t.prototype,"updateEndPoint",null),er([K],t.prototype,"moveStartPoint",null),er([K],t.prototype,"moveEndPoint",null),er([K],t.prototype,"updateAdjustAnchor",null),er([K],t.prototype,"getAdjustStart",null),er([K],t.prototype,"getAdjustEnd",null),er([K],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(jf),g6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ls.apply(this,arguments)},O_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},y6=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},A_=function(e){g6(t,e);function t(){var n=e.apply(this,y6([],O_(arguments),!1))||this;return n.modelType=tt.LINE_EDGE,n}return t.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.line,r=e.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Ls(Ls(Ls({},r),ze(n)),ze(o))},t.prototype.initEdgeData=function(n){e.prototype.initEdgeData.call(this,n),this.points=this.getPath([this.startPoint,this.endPoint])},t.prototype.getPath=function(n){var r=O_(n,2),i=r[0],o=r[1];return"".concat(i.x,",").concat(i.y," ").concat(o.x,",").concat(o.y)},t.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},t}(jf),m6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Is=function(){return Is=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Is.apply(this,arguments)},rn=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},C_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},_6=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},ml=function(e){m6(t,e);function t(){var n=e.apply(this,_6([],C_(arguments),!1))||this;return n.modelType=tt.POLYLINE_EDGE,n.draggingPointList=[],n}return t.prototype.initEdgeData=function(n){this.offset=eo(n,"properties.offset",30),n.pointsList&&(this.pointsList=n.pointsList),e.prototype.initEdgeData.call(this,n)},t.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.polyline,r=e.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Is(Is(Is({},r),ze(n)),ze(o))},t.prototype.getTextPosition=function(){var n,r=(n=this.text)===null||n===void 0?void 0:n.value;if(this.dbClickPosition&&!r){var i=this.dbClickPosition,o=i.x,a=i.y;return{x:o,y:a}}var s=Bo(this.points),l=C_(h8(s),2),u=l[0],c=l[1];return{x:(u.x+c.x)/2,y:(u.y+c.y)/2}},t.prototype.getAfterAnchor=function(n,r,i){var o,a;return i.forEach(function(s){var l;n===Rt.HORIZONTAL?l=Math.abs(r.y-s.y):n===Rt.VERTICAL&&(l=Math.abs(r.x-s.x)),(!a||a>l)&&(a=l,o=s)}),o},t.prototype.getCrossPoint=function(n,r,i){var o;return n===Rt.HORIZONTAL?o={x:i.x,y:r.y}:n===Rt.VERTICAL&&(o={x:r.x,y:i.y}),o},t.prototype.removeCrossPoints=function(n,r,i){var o=i.map(function(y){return y});if(n===1){var a=o[n],s=o[r],l=o[n-1],u=u_(l,a,this.sourceNode);if(u){var c=c_(a,s,this.sourceNode);if(c){var f=f_(a,s,this.sourceNode);f&&(o[n]=f,o.splice(n-1,1),n--,r--)}}else{var d=this.sourceNode.anchors;d.forEach(function(y){if(y.x===l.x&&y.x===a.x||y.y===l.y&&y.y===a.y){var m=Ar(y.x,y.y,a.x,a.y),M=Ar(l.x,l.y,a.x,a.y);m<M&&(o[n-1]=y)}})}}if(r===i.length-2){var h=o[n],v=o[r],p=o[r+1],g=u_(v,p,this.targetNode);if(g){var c=c_(h,v,this.targetNode);if(c){var f=f_(h,v,this.targetNode);f&&(o[r]=f,o.splice(r+1,1))}}else{var d=this.targetNode.anchors;d.forEach(function(m){if(m.x===p.x&&m.x===v.x||m.y===p.y&&m.y===v.y){var M=Ar(m.x,m.y,v.x,v.y),T=Ar(p.x,p.y,v.x,v.y);M<T&&(o[r+1]=m)}})}}return o},t.prototype.getDraggingPoints=function(n,r,i,o,a){var s=a.map(function(c){return c}),l=this.getAfterAnchor(n,i,o),u=this.getCrossPoint(n,i,l);return r==="start"?(s.unshift(u),s.unshift(l)):(s.push(u),s.push(l)),s},t.prototype.updateCrossPoints=function(n){var r=n.map(function(m){return m}),i=n[0],o=n[1],a=n[r.length-2],s=n[r.length-1],l=this,u=l.sourceNode,c=l.targetNode,f=u.modelType,d=c.modelType,h=uc(i,o),v=r[0];switch(f){case tt.RECT_NODE:if(u.radius!==0){var p=m_(i,u);p||(v=y_(i,h,u))}break;case tt.CIRCLE_NODE:v=Ih(i,h,u);break;case tt.ELLIPSE_NODE:v=__(i,h,u);break;case tt.DIAMOND_NODE:v=ru(i,h,u);break;case tt.POLYGON_NODE:v=ru(i,h,u);break}v&&(r[0]=v);var g=uc(a,s),y=r[r.length-1];switch(d){case tt.RECT_NODE:if(c.radius!==0){var p=m_(s,c);p||(y=y_(s,g,c))}break;case tt.CIRCLE_NODE:y=Ih(s,g,c);break;case tt.ELLIPSE_NODE:y=__(s,g,c);break;case tt.DIAMOND_NODE:y=ru(s,g,c);break;case tt.POLYGON_NODE:y=ru(s,g,c);break}return y&&(r[r.length-1]=y),r},t.prototype.updatePath=function(n){this.pointsList=n,this.points=this.getPath(this.pointsList)},t.prototype.getData=function(){var n=e.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Object.assign({},n,{pointsList:r})},t.prototype.getPath=function(n){return n.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},t.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},t.prototype.updatePoints=function(){var n=l_({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=n,this.points=n.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},t.prototype.updateStartPoint=function(n){this.startPoint=Object.assign({},n),this.updatePoints()},t.prototype.moveStartPoint=function(n,r){this.startPoint.x+=n,this.startPoint.y+=r,this.updatePoints()},t.prototype.updateEndPoint=function(n){this.endPoint=Object.assign({},n),this.updatePoints()},t.prototype.moveEndPoint=function(n,r){this.endPoint.x+=n,this.endPoint.y+=r,this.updatePoints()},t.prototype.updatePointsList=function(n,r){this.pointsList.forEach(function(a){a.x+=n,a.y+=r});var i=this.pointsList[0];this.startPoint=Object.assign({},i);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},t.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(n){return n})},t.prototype.dragAppendSimple=function(n,r){var i;this.isDragging=!0;var o=n.start,a=n.end,s=n.startIndex,l=n.endIndex,u=n.direction,c=this.pointsList,f=c;return u===Rt.HORIZONTAL?(c[s]={x:o.x,y:o.y+r.y},c[l]={x:a.x,y:a.y+r.y},f=this.pointsList.map(function(d){return d})):u===Rt.VERTICAL&&(c[s]={x:o.x+r.x,y:o.y},c[l]={x:a.x+r.x,y:a.y},f=this.pointsList.map(function(d){return d})),this.updatePointsAfterDrag(f),this.draggingPointList=f,!((i=this.text)===null||i===void 0)&&i.value&&this.setText(_t({},this.text,this.textPosition)),{start:_t({},c[s]),end:_t({},c[l]),startIndex:s,endIndex:l,direction:u}},t.prototype.dragAppend=function(n,r){var i;this.isDragging=!0;var o=n.start,a=n.end,s=n.startIndex,l=n.endIndex,u=n.direction,c=this.pointsList;if(u===Rt.HORIZONTAL){c[s]={x:o.x,y:o.y+r.y},c[l]={x:a.x,y:a.y+r.y};var f=this.pointsList.map(function(g){return g});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var d={x:o.x,y:o.y+r.y},h=yi(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",d,v,f)}}if(l===this.pointsList.length-1){var p={x:a.x,y:a.y+r.y},h=yi(p,this.targetNode);if(!h){var v=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}else if(u===Rt.VERTICAL){c[s]={x:o.x+r.x,y:o.y},c[l]={x:a.x+r.x,y:a.y};var f=this.pointsList.map(function(y){return y});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var d={x:o.x+r.x,y:o.y},h=yi(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",d,v,f)}}if(l===this.pointsList.length-1){var p={x:a.x+r.x,y:a.y},h=yi(p,this.targetNode);if(!h){var v=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}return!((i=this.text)===null||i===void 0)&&i.value&&this.setText(_t({},this.text,this.textPosition)),{start:_t({},c[s]),end:_t({},c[l]),startIndex:s,endIndex:l,direction:u}},t.prototype.dragAppendEnd=function(){if(this.draggingPointList){var n=OS(Bo(this.points));this.pointsList=n.map(function(o){return o}),this.draggingPointList=[];var r=n[0];this.startPoint=_t({},r);var i=n[n.length-1];this.endPoint=_t({},i)}this.isDragging=!1},t.prototype.updatePointsAfterDrag=function(n){var r=this.updateCrossPoints(n);this.points=r.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" ")},t.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},t.prototype.getAdjustEnd=function(){var n=this.pointsList;return n[n.length-1]||this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(n){var r=n.startPoint,i=n.endPoint,o=n.sourceNode,a=n.targetNode;this.pointsList=l_({x:r.x,y:r.y},{x:i.x,y:i.y},o,a,this.offset||0),this.initPoints()},rn([q],t.prototype,"offset",void 0),rn([q],t.prototype,"dbClickPosition",void 0),rn([K],t.prototype,"initPoints",null),rn([K],t.prototype,"updatePoints",null),rn([K],t.prototype,"updateStartPoint",null),rn([K],t.prototype,"moveStartPoint",null),rn([K],t.prototype,"updateEndPoint",null),rn([K],t.prototype,"moveEndPoint",null),rn([K],t.prototype,"updatePointsList",null),rn([K],t.prototype,"dragAppendStart",null),rn([K],t.prototype,"dragAppendSimple",null),rn([K],t.prototype,"dragAppend",null),rn([K],t.prototype,"dragAppendEnd",null),rn([K],t.prototype,"updatePointsAfterDrag",null),rn([K],t.prototype,"getAdjustStart",null),rn([K],t.prototype,"getAdjustEnd",null),rn([K],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(jf),Gt=function(){return Gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gt.apply(this,arguments)},je=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},T_=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},b6=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},oo=function(){function e(t,n){var r;this.BaseType=It.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=cr.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=ut.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=tt.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=n,this.properties=(r=t.properties)!==null&&r!==void 0?r:{},this.initNodeData(t),this.setAttributes()}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t;var n=this,r=n.x,i=r===void 0?0:r,o=n.y,a=o===void 0?0:o;this.transform=new cc(-i,-a).rotate(t).translate(i,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),e.prototype.initNodeData=function(t){if(t.properties||(t.properties={}),!t.id){var n=this.graphModel.idGenerator,r=n&&n(t.type),i=this.createId();t.id=i||r||Gi()}this.formatText(t),_t(this,C8(t));var o=this.graphModel.overlapMode;o===Or.INCREASE&&(this.zIndex=t.zIndex||Jv())},e.prototype.setAttributes=function(){},e.prototype.createId=function(){return null},e.prototype.setTextMode=function(t){this.textMode=t},e.prototype.formatText=function(t){var n,r,i,o=this.graphModel.editConfigModel,a=o.nodeTextDraggable,s=o.nodeTextEdit,l=t.x,u=t.y,c=t.text,f={value:"",x:l,y:u,draggable:a,editable:s};c&&(typeof c=="string"?f.value=c:(f=Gt(Gt({},f),{x:(n=c.x)!==null&&n!==void 0?n:l,y:(r=c.y)!==null&&r!==void 0?r:u,value:(i=c.value)!==null&&i!==void 0?i:""}),jo(c.draggable)||(f.draggable=c.draggable),jo(c.editable)||(f.editable=c.editable))),t.text=f},e.prototype.resize=function(t){var n=t.width,r=t.height,i=t.deltaX,o=t.deltaY,a=this.isAllowResizeNode(i,o,n,r);return a?(this.move(i/2,o/2),this.width=n,this.height=r,this.setProperties({width:n,height:r}),this.getData()):this.getData()},e.prototype.proportionalResize=function(){},e.prototype.getData=function(){var t=this.text,n=t.x,r=t.y,i=t.value,o=this.properties;Ma(o)&&(o=wr(o)),ir(o.width)&&(o.width=this.width),ir(o.height)&&(o.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===Or.INCREASE&&(a.zIndex=this.zIndex),i&&(a.text={x:n,y:r,value:i}),a},e.prototype.getHistoryData=function(){return this.getData()},e.prototype.getProperties=function(){return wr(this.properties)},e.prototype.getOuterGAttributes=function(){return{className:""}},e.prototype.getNodeStyle=function(){return Gt(Gt({},this.graphModel.theme.baseNode),this.style)},e.prototype.getTextStyle=function(){var t=this.graphModel.theme.nodeText,n=this.properties.textStyle,r=n===void 0?{}:n;return Gt(Gt({},ze(t)),ze(r))},e.prototype.getRotateControlStyle=function(){var t=this.graphModel.theme.rotateControl;return ze(t)},e.prototype.getResizeControlStyle=function(){var t=this.graphModel.theme.resizeControl;return ze(t)},e.prototype.getResizeOutlineStyle=function(){var t=this.graphModel.theme.resizeOutline;return ze(t)},e.prototype.getAnchorStyle=function(t){var n=this.graphModel.theme.anchor;return ze(n)},e.prototype.getAnchorLineStyle=function(t){var n=this.graphModel.theme.anchorLine;return ze(n)},e.prototype.getOutlineStyle=function(){var t=this.graphModel.theme.outline;return ze(t)},e.prototype.isAllowConnectedAsSource=function(t,n,r,i){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,this,t,n,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},e.prototype.getConnectedSourceRules=function(){return this.sourceRules},e.prototype.isAllowConnectedAsTarget=function(t,n,r,i){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,t,this,n,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},e.prototype.isAllowMoveNode=function(t,n){var r,i,o=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var l=T_(s),u=l.next();!u.done;u=l.next()){var c=u.value,f=c(this,t,n);if(!f)return!1;if(typeof f=="object"){var d=f;if(!d.x&&!d.y)return!1;o=o&&d.x,a=a&&d.y}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return{x:o,y:a}},e.prototype.getConnectedTargetRules=function(){return this.targetRules},e.prototype.getAnchorsByOffset=function(){var t=this,n=t.anchorsOffset,r=t.id,i=t.x,o=t.y;return n&&n.length>0?n.map(function(a,s){return a.length?(a=a,{id:"".concat(r,"_").concat(s),x:i+a[0],y:o+a[1]}):(a=a,Gt(Gt({},a),{x:i+a.x,y:o+a.y,id:a.id||"".concat(r,"_").concat(s)}))}):this.getDefaultAnchor()},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.getTargetAnchor=function(t){return S8(t,this)},e.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(e.prototype,"anchors",{get:function(){var t=this.getAnchorsByOffset(),n=this,r=n.x,i=n.y,o=n.rotate;return t.forEach(function(a){var s=a.x,l=a.y,u=b6(new Fl([s,l,1]).translate(-r,-i).rotate(o).translate(r,i)[0],2),c=u[0],f=u[1];a.x=c,a.y=f}),t},enumerable:!1,configurable:!0}),e.prototype.getAnchorInfo=function(t){if(!ir(t))for(var n=0;n<this.anchors.length;n++){var r=this.anchors[n];if(r.id===t)return r}},e.prototype.addNodeMoveRules=function(t){this.moveRules.includes(t)||this.moveRules.push(t)},e.prototype.isAllowMoveByXORY=function(t,n,r){var i,o;if(r)i=!0,o=!0;else{var a=this.isAllowMoveNode(t,n);typeof a=="boolean"?(i=a,o=a):(i=a.x,o=a.y)}return{isAllowMoveX:i,isAllowMoveY:o}},e.prototype.move=function(t,n,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(t,n,r),o=i.isAllowMoveX,a=i.isAllowMoveY;return o&&(this.x=this.x+t,this.text&&this.moveText(t,0)),a&&(this.y=this.y+n,this.text&&this.moveText(0,n)),(o||a)&&(this.rotate=this._rotate),o||a},e.prototype.getMoveDistance=function(t,n,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(t,n,r),o=i.isAllowMoveX,a=i.isAllowMoveY,s=0,l=0;return o&&t&&(this.x=this.x+t,this.text&&this.moveText(t,0),s=t),a&&n&&(this.y=this.y+n,this.text&&this.moveText(0,n),l=n),this.transform=new cc(-this.x,-this.y).rotate(this.rotate).translate(this.x,this.y).toString(),[s,l]},e.prototype.moveTo=function(t,n,r){r===void 0&&(r=!1);var i=t-this.x,o=n-this.y;return!r&&!this.isAllowMoveNode(i,o)?!1:(this.text&&this.moveText(i,o),this.x=t,this.y=n,!0)},e.prototype.moveText=function(t,n){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+t,y:o+n}},e.prototype.updateText=function(t){this.text=Gt(Gt({},wr(this.text)),{value:t})},e.prototype.addNodeResizeRules=function(t){this.resizeRules.includes(t)||this.resizeRules.push(t)},e.prototype.isAllowResizeNode=function(t,n,r,i){var o,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var l=T_(s),u=l.next();!u.done;u=l.next()){var c=u.value,f=c(this,t,n,r,i);if(!f)return!1}}catch(d){o={error:d}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0},e.prototype.setSelected=function(t){t===void 0&&(t=!0),this.isSelected=t},e.prototype.setHovered=function(t){t===void 0&&(t=!0),this.isHovered=t,this.setIsShowAnchor(t)},e.prototype.setIsShowAnchor=function(t){t===void 0&&(t=!0),this.isShowAnchor=t},e.prototype.setRotatable=function(t){t===void 0&&(t=!0),this.rotatable=t},e.prototype.setResizable=function(t){t===void 0&&(t=!0),this.resizable=t},e.prototype.setHitable=function(t){t===void 0&&(t=!0),this.isHitable=t},e.prototype.setHittable=function(t){t===void 0&&(t=!0),this.isHittable=t},e.prototype.setElementState=function(t,n){this.state=t,this.additionStateData=n},e.prototype.updateProperties=function(t,n){var r=wr(this.properties);this.properties=t,this.setAttributes(),this.graphModel.eventCenter.emit(Ae.NODE_PROPERTIES_CHANGE,{id:this.id,keys:n,preProperties:r,properties:t})},e.prototype.setProperty=function(t,n){var r=wr(this.properties),i=ze(r);cS(i,t,vn(n)),this.updateProperties(i,[t])},e.prototype.setProperties=function(t){var n=wr(this.properties),r=Gt(Gt({},n),vn(t)),i=[];UE(t,function(o,a){(rc(n,a)&&n[a]!==o||!rc(n,a))&&i.push(a)}),this.updateProperties(r,i)},e.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},e.prototype.setStyle=function(t,n){var r;this.style=Gt(Gt({},this.style),(r={},r[t]=vn(n),r))},e.prototype.setStyles=function(t){this.style=Gt(Gt({},this.style),vn(t))},e.prototype.updateStyles=function(t){this.style=Gt({},vn(t))},e.prototype.setZIndex=function(t){t===void 0&&(t=1),this.zIndex=t},e.prototype.updateAttributes=function(t){_t(this,t)},e.BaseType=It.NODE,je([q],e.prototype,"type",void 0),je([q],e.prototype,"x",void 0),je([q],e.prototype,"y",void 0),je([q],e.prototype,"textMode",void 0),je([q],e.prototype,"text",void 0),je([q],e.prototype,"properties",void 0),je([q],e.prototype,"_width",void 0),je([q],e.prototype,"_height",void 0),je([q],e.prototype,"anchorsOffset",void 0),je([q],e.prototype,"isSelected",void 0),je([q],e.prototype,"isHovered",void 0),je([q],e.prototype,"isShowAnchor",void 0),je([q],e.prototype,"isDragging",void 0),je([q],e.prototype,"isHitable",void 0),je([q],e.prototype,"isHittable",void 0),je([q],e.prototype,"draggable",void 0),je([q],e.prototype,"visible",void 0),je([q],e.prototype,"rotatable",void 0),je([q],e.prototype,"resizable",void 0),je([q],e.prototype,"zIndex",void 0),je([q],e.prototype,"state",void 0),je([q],e.prototype,"autoToFront",void 0),je([q],e.prototype,"style",void 0),je([q],e.prototype,"transform",void 0),je([q],e.prototype,"_rotate",void 0),je([Ct],e.prototype,"incoming",null),je([Ct],e.prototype,"outgoing",null),je([K],e.prototype,"setTextMode",null),je([K],e.prototype,"addNodeMoveRules",null),je([K],e.prototype,"move",null),je([K],e.prototype,"getMoveDistance",null),je([K],e.prototype,"moveTo",null),je([K],e.prototype,"moveText",null),je([K],e.prototype,"updateText",null),je([K],e.prototype,"addNodeResizeRules",null),je([K],e.prototype,"setSelected",null),je([K],e.prototype,"setHovered",null),je([K],e.prototype,"setIsShowAnchor",null),je([K],e.prototype,"setRotatable",null),je([K],e.prototype,"setResizable",null),je([K],e.prototype,"setHitable",null),je([K],e.prototype,"setHittable",null),je([K],e.prototype,"setElementState",null),je([K],e.prototype,"setProperty",null),je([K],e.prototype,"setProperties",null),je([K],e.prototype,"deleteProperty",null),je([K],e.prototype,"setStyle",null),je([K],e.prototype,"setStyles",null),je([K],e.prototype,"updateStyles",null),je([K],e.prototype,"setZIndex",null),je([K],e.prototype,"updateAttributes",null),e}(),x6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ks=function(){return ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ks.apply(this,arguments)},xd=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},_l=function(e){x6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.CIRCLE_NODE,i.r=50,i.initNodeData(n),i.setAttributes(),i}return Object.defineProperty(t.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties.r;n&&(this.r=n)},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this),r=this.graphModel.theme.circle,i=this.properties.style,o=i===void 0?{}:i;return ks(ks(ks({},n),ze(r)),ze(o))},t.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.r;return[{x:r,y:i-o,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+o,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},t.prototype.resize=function(n){var r=n.width,i=n.deltaX,o=n.deltaY;return this.move(i/2,o/2),this.r=r,this.setProperties({r}),this.getData()},xd([q],t.prototype,"r",void 0),xd([Ct],t.prototype,"width",null),xd([Ct],t.prototype,"height",null),t}(oo),w6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},js.apply(this,arguments)},ea=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},ou=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},zh=function(e){w6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.DIAMOND_NODE,i.rx=30,i.ry=50,i.initNodeData(n),i.setAttributes(),i}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties,r=n.rx,i=n.ry;r&&(this.rx=r),i&&(this.ry=i)},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this),r=this.graphModel.theme.diamond,i=this.properties.style,o=i===void 0?{}:i;return js(js(js({},n),ze(r)),ze(o))},Object.defineProperty(t.prototype,"points",{get:function(){var n=this,r=n.x,i=n.y,o=n.rx,a=n.ry;return[[r,i-a],[r+o,i],[r,i+a],[r-o,i]]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointsPosition",{get:function(){return Jn(this.points,function(n){var r=ou(n,2),i=r[0],o=r[1];return{x:i,y:o}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return pt(this.points,function(i){var o=ou(i,1),a=o[0];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return pt(this.points,function(i){var o=ou(i,2),a=o[1];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var n=this;return Jn(this.points,function(r,i){var o=ou(r,2),a=o[0],s=o[1];return{x:a,y:s,id:"".concat(n.id,"_").concat(i)}})},t.prototype.resize=function(n){var r=n.width,i=n.height,o=n.deltaX,a=n.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},ea([q],t.prototype,"rx",void 0),ea([q],t.prototype,"ry",void 0),ea([Ct],t.prototype,"points",null),ea([Ct],t.prototype,"pointsPosition",null),ea([Ct],t.prototype,"width",null),ea([Ct],t.prototype,"height",null),t}(oo),E6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bs.apply(this,arguments)},au=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Uh=function(e){E6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.ELLIPSE_NODE,i.rx=30,i.ry=45,i.initNodeData(n),i.setAttributes(),i}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties,r=n.rx,i=n.ry;r&&(this.rx=r),i&&(this.ry=i)},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this),r=this.graphModel.theme.ellipse,i=this.properties.style,o=i===void 0?{}:i;return Bs(Bs(Bs({},n),ze(r)),ze(o))},Object.defineProperty(t.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.rx,a=n.ry;return[{x:r,y:i-a,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},t.prototype.resize=function(n){var r=n.width,i=n.height,o=n.deltaX,a=n.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},au([q],t.prototype,"rx",void 0),au([q],t.prototype,"ry",void 0),au([Ct],t.prototype,"width",null),au([Ct],t.prototype,"height",null),t}(oo),S6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fs.apply(this,arguments)},su=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},lu=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},vc=function(e){S6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.POLYGON_NODE,i.points=[[50,0],[100,50],[50,100],[0,50]],i.initNodeData(n),i.setAttributes(),i}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties,r=n.points,i=n.width,o=n.height,a=r||this.points;this.points=_8(a,i,o)},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this),r=this.graphModel.theme.polygon,i=this.properties.style,o=i===void 0?{}:i;return Fs(Fs(Fs({},n),ze(r)),ze(o))},Object.defineProperty(t.prototype,"pointsPosition",{get:function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return this.points.map(function(s){return{x:s[0]+r-o/2,y:s[1]+i-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=lu(i,1),a=o[0];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=lu(i,2),a=o[1];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var n=this,r=this,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points;return l.map(function(u,c){var f=lu(u,2),d=f[0],h=f[1];return{x:i+d-a/2,y:o+h-s/2,id:"".concat(n.id,"_").concat(c)}})},t.prototype.resize=function(n){var r=this,i=n.width,o=n.height,a=n.deltaX,s=n.deltaY;this.move(a/2,s/2);var l=Jn(this.points,function(u){var c=lu(u,2),f=c[0],d=c[1];return[f*i/r.width,d*o/r.height]});return this.points=l,this.properties.points=l,this.getData()},su([q],t.prototype,"points",void 0),su([Ct],t.prototype,"pointsPosition",null),su([Ct],t.prototype,"width",null),su([Ct],t.prototype,"height",null),t}(oo),O6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$s=function(){return $s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$s.apply(this,arguments)},A6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Ia=function(e){O6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.RECT_NODE,i.radius=0,i.initNodeData(n),i.setAttributes(),i}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties,r=n.width,i=n.height,o=n.radius;ir(r)||(this.width=r),ir(i)||(this.height=i),ir(o)||(this.radius=o)},t.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this),r=this.graphModel.theme.rect,i=this.properties.style,o=i===void 0?{}:i;return $s($s($s({},n),ze(r)),ze(o))},A6([q],t.prototype,"radius",void 0),t}(oo),C6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hs.apply(this,arguments)},M_=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},T6=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},M6=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},P_=function(e){C6(t,e);function t(){var n=e.apply(this,M6([],T6(arguments),!1))||this;return n.modelType=tt.TEXT_NODE,n}return t.prototype.getTextStyle=function(){var n=e.prototype.getTextStyle.call(this),r=this.graphModel.theme.text,i=this.properties.textStyle;return Hs(Hs(Hs({},n),ze(r)),ze(i))},Object.defineProperty(t.prototype,"width",{get:function(){var n=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=x_({rows:n,fontSize:r,rowsLength:n.length}).width;return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var n=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=x_({rows:n,fontSize:r,rowsLength:n.length}).height;return i},enumerable:!1,configurable:!0}),M_([Ct],t.prototype,"width",null),M_([Ct],t.prototype,"height",null),t}(oo),P6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xh=function(e){P6(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.modelType=tt.HTML_NODE,i.setAttributes(),i}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var n=this.properties,r=n.width,i=n.height;r&&(this.width=r),i&&(this.height=i)},t.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},t}(oo),ft=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},N6={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},uu=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],R6=function(){function e(t){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=cr.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=cr.TEXT,this.edgeTextMode=cr.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",_t(this,this.computeConfig(t))}return e.prototype.updateEditConfig=function(t){var n=this.computeConfig(t);_t(this,n)},e.prototype.computeConfig=function(t){var n=t.isSilentMode,r=t.textDraggable,i=t.textMode,o=t.textEdit,a=t.adjustEdgeStartAndEnd,s={};if(n===!1&&_t(s,this.stagedConfig),n===!0&&n!==this.isSilentMode){var l=Eo(N6,uu);this.stagedConfig=Eo(this,uu),_t(s,l)}jo(o)||_t(s,{nodeTextEdit:o,edgeTextEdit:o}),jo(r)||_t(s,{nodeTextDraggable:r,edgeTextDraggable:r}),i&&_t(s,{nodeTextMode:i,edgeTextMode:i}),ic(a)&&_t(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var u=Eo(t,uu);return _t(s,u)},e.prototype.updateTextMode=function(t){this.textMode=t,this.edgeTextMode=t,this.nodeTextMode=t},e.prototype.getConfig=function(){return Eo(this,uu)},ft([q],e.prototype,"isSilentMode",void 0),ft([q],e.prototype,"stopZoomGraph",void 0),ft([q],e.prototype,"stopMoveGraph",void 0),ft([q],e.prototype,"stopScrollGraph",void 0),ft([q],e.prototype,"snapGrid",void 0),ft([q],e.prototype,"textMode",void 0),ft([q],e.prototype,"textEdit",void 0),ft([q],e.prototype,"textDraggable",void 0),ft([q],e.prototype,"nodeTextEdit",void 0),ft([q],e.prototype,"nodeTextDraggable",void 0),ft([q],e.prototype,"nodeTextMultiple",void 0),ft([q],e.prototype,"nodeTextVertical",void 0),ft([q],e.prototype,"nodeTextMode",void 0),ft([q],e.prototype,"edgeTextMode",void 0),ft([q],e.prototype,"edgeTextEdit",void 0),ft([q],e.prototype,"edgeTextDraggable",void 0),ft([q],e.prototype,"edgeTextMultiple",void 0),ft([q],e.prototype,"edgeTextVertical",void 0),ft([q],e.prototype,"hideAnchors",void 0),ft([q],e.prototype,"allowRotate",void 0),ft([q],e.prototype,"allowResize",void 0),ft([q],e.prototype,"hoverOutline",void 0),ft([q],e.prototype,"nodeSelectedOutline",void 0),ft([q],e.prototype,"adjustNodePosition",void 0),ft([q],e.prototype,"autoExpand",void 0),ft([q],e.prototype,"adjustEdge",void 0),ft([q],e.prototype,"adjustEdgeMiddle",void 0),ft([q],e.prototype,"adjustEdgeStartAndEnd",void 0),ft([q],e.prototype,"adjustEdgeStart",void 0),ft([q],e.prototype,"adjustEdgeEnd",void 0),ft([q],e.prototype,"edgeSelectedOutline",void 0),ft([K],e.prototype,"updateEditConfig",null),ft([K],e.prototype,"updateTextMode",null),e}(),D6="*",L6=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){var i=this;t==null||t.split(",").forEach(function(o){o=o.trim(),i._events[o]||(i._events[o]=[]),i._events[o].push({callback:n,once:!!r})})},e.prototype.once=function(t,n){var r=this;t==null||t.split(",").forEach(function(i){i=i.trim(),r.on(i,n,!0)})},e.prototype.emit=function(t,n){var r=this;t==null||t.split(",").forEach(function(i){var o=r._events[i]||[],a=r._events[D6]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],d=f.callback,h=f.once;h&&(l.splice(c,1),l.length===0&&delete r._events[i],u--,c--),d.apply(r,[n])}};s(o),s(a)})},e.prototype.off=function(t,n){var r=this;t||(this._events={}),t.split(",").forEach(function(i){if(!n)delete r._events[i];else{for(var o=r._events[i]||[],a=o.length,s=0;s<a;s++)o[s].callback===n&&(o.splice(s,1),a--,s--);o.length===0&&delete r._events[i]}})},e.prototype.getEvents=function(){return this._events},e.prototype.destroy=function(){this._events={}},e}(),I6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gh=function(){return Gh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gh.apply(this,arguments)},k6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},j6=function(e){I6(t,e);function t(n){var r=e.call(this)||this;r.stepScrollX=0,r.stepScrollY=0,r.onDragging=function(s){var l=s.deltaX,u=s.deltaY;r.setState({isDragging:!0});var c=r.props.graphModel,f=c.transformModel,d=c.editConfigModel;d.stopMoveGraph!==!0&&f.translate(l,u)},r.onDragEnd=function(){r.setState({isDragging:!1})},r.zoomHandler=function(s){var l=r.props,u=l.graphModel,c=u.editConfigModel,f=u.transformModel,d=u.gridSize,h=l.graphModel,v=s.deltaX,p=s.deltaY,g=c.stopScrollGraph,y=c.stopZoomGraph;if(!g&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),r.stepScrollX+=v,r.stepScrollY+=p,Math.abs(r.stepScrollX)>=d){var m=r.stepScrollX%d,M=r.stepScrollX-m;f.translate(-M*f.SCALE_X,0),r.stepScrollX=m}if(Math.abs(r.stepScrollY)>=d){var T=r.stepScrollY%d,L=r.stepScrollY-T;f.translate(0,-L*f.SCALE_Y),r.stepScrollY=T}return}if(!y){s.preventDefault();var N=h.getPointByClient({x:s.clientX,y:s.clientY}),E=N.canvasOverlayPosition,k=E.x,Y=E.y;f.zoom(s.deltaY<0,[k,Y])}},r.clickHandler=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){var u=r.props.graphModel,c=u.selectElements;c.size>0&&u.clearSelectElements(),u.eventCenter.emit(Ae.BLANK_CLICK,{e:s})}},r.handleContextMenu=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){s.preventDefault();var u=r.props.graphModel,c=u.getPointByClient({x:s.clientX,y:s.clientY});u.eventCenter.emit(Ae.BLANK_CONTEXTMENU,{e:s,position:c})}},r.mouseDownHandler=function(s){var l=r.props.graphModel,u=l.eventCenter,c=l.editConfigModel,f=l.transformModel.SCALE_X,d=l.gridSize,h=c.adjustEdge,v=c.adjustNodePosition,p=c.stopMoveGraph,g=s.target,y=!h&&!v;(g.getAttribute("name")==="canvas-overlay"||y)&&(p!==!0?(r.stepDrag.setStep(d*f),r.stepDrag.handleMouseDown(s)):u.emit(Ae.BLANK_MOUSEDOWN,{e:s}),r.clickHandler(s))};var i=n.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new yr({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),r.state={isDragging:!1},r}return t.prototype.render=function(){var n=this.props.graphModel.transformModel,r=n.getTransformStyle().transform,i=this.props,o=i.children,a=i.dnd,s=this.state.isDragging;return V("svg",Gh({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:V("g",{transform:r,children:o})}))},t=k6([On],t),t}(ot),kS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bl=function(){return bl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bl.apply(this,arguments)},B6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},F6=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},N_=function(e){kS(t,e);function t(){var n=e.call(this)||this;return n.onDragging=function(r){var i=r.event,o=n.props,a=o.graphModel,s=o.bezierModel,l=o.type,u=a.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,c=u.x,f=u.y;s.updateAdjustAnchor({x:c,y:f},l),a.eventCenter.emit(Ae.EDGE_ADJUST,{data:s.getData()})},n.onDragEnd=function(){var r=n.props.bezierModel;r.isDragging=!1},n.dragHandler=new yr({onDragging:n.onDragging,onDragEnd:n.onDragEnd}),n}return t.prototype.render=function(){var n=this,r=this.props.position,i=r.x,o=r.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return V(La,bl({className:"lf-bezier-adjust-anchor",x:i,y:o},s,{onMouseDown:function(l){n.dragHandler.handleMouseDown(l)}}))},t}(ot),$6=function(e){kS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getBezierAdjust=function(n,r){var i=n.path,o=n.id,a=Vv(i),s=F6(a,4),l=s[0],u=s[1],c=s[2],f=s[3],d=n.getEdgeStyle().adjustLine,h=[];return h.push(V(Da,bl({x1:l.x,y1:l.y,x2:u.x,y2:u.y},d))),h.push(V(N_,{position:u,bezierModel:n,graphModel:r,type:"sNext"},"".concat(o,"_ePre"))),h.push(V(Da,bl({x1:f.x,y1:f.y,x2:c.x,y2:c.y},d))),h.push(V(N_,{position:c,bezierModel:n,graphModel:r,type:"ePre"},"".concat(o,"_sNext"))),h},t.prototype.selectedBezierEdge=function(){for(var n=this.props.graphModel,r=n.edges,i=[],o=0;o<r.length;o++){var a=r[o];a.isSelected&&a.modelType===tt.BEZIER_EDGE&&a.draggable&&i.push(this.getBezierAdjust(a,n))}return i},t.prototype.render=function(){return V("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},t=B6([On],t),t}(ot),H6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},z6=function(e){H6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props.background;return V("div",{className:"lf-background",children:V("div",{style:jt(n)?n:{},className:"lf-background-area"})})},t=W6([On],t),t}(ot),U6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),X6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},gc=function(e){U6(t,e);function t(n){var r=e.call(this,n)||this;return r.id=Gi(),r.gridOptions=r.props.graphModel.grid,r}return t.prototype.renderDot=function(){var n=this.gridOptions,r=n.config,i=n.size,o=i===void 0?1:i,a=n.visible,s=r??{},l=s.color,u=s.thickness,c=u===void 0?2:u,f=Math.min(Math.max(2,c),o/4),d=a?1:0;return V("g",{fill:l,opacity:d,children:[V("circle",{cx:0,cy:0,r:f/2}),V("circle",{cx:0,cy:o,r:f/2}),V("circle",{cx:o,cy:0,r:f/2}),V("circle",{cx:o,cy:o,r:f/2})]})},t.prototype.renderMesh=function(){var n=this.gridOptions,r=n.config,i=n.size,o=i===void 0?1:i,a=n.visible,s=r??{},l=s.color,u=s.thickness,c=u===void 0?1:u,f=Math.min(Math.max(1,c),o/2),d="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),h=a?1:0;return V("path",{d,stroke:l,strokeWidth:f/2,opacity:h,fill:"transparent"})},t.prototype.render=function(){var n=this.props.graphModel.transformModel,r=this.gridOptions,i=r.type,o=r.size,a=o===void 0?1:o,s=n.SCALE_X,l=n.SKEW_Y,u=n.SKEW_X,c=n.SCALE_Y,f=n.TRANSLATE_X,d=n.TRANSLATE_Y,h=[s,l,u,c,f,d].join(","),v="matrix(".concat(h,")");return V("div",{className:"lf-grid",children:V("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[V("defs",{children:V("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:v,x:"0",y:"0",width:a,height:a,children:[i==="dot"&&this.renderDot(),i==="mesh"&&this.renderMesh()]})}),V("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},t=X6([On],t),t}(ot);(function(e){e.defaultProps={size:q5,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function t(n){var r=ze(e.defaultProps);return typeof n=="number"?_t(r,{size:n}):typeof n=="boolean"?_t(r,{visible:n}):_t(r,n)}e.getGridOptions=t})(gc||(gc={}));var G6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},K6=function(e){G6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props.graphModel.transformModel,r=n.getTransformStyle().transform,i=this.props.children;return V("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:V("g",{transform:r,children:i})})},t=Y6([On],t),t}(ot),V6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ji=function(){return ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ji.apply(this,arguments)},q6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Z6=function(e){V6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getNodesOutline=function(){var n=this.props.graphModel,r=n.nodes,i=n.editConfigModel,o=i.hoverOutline,a=i.nodeSelectedOutline,s=[];return r.forEach(function(l){if(l.isHovered||l.isSelected){var u=l.isHovered,c=l.isSelected,f=l.x,d=l.y,h=l.width,v=l.height;if(a&&c||o&&u){var p=l.getOutlineStyle(),g={};if(Object.keys(p).forEach(function(m){m!=="hover"&&(g[m]=p[m])}),u){var y=p.hover;g=ji(ji({},g),y)}s.push(V(ar,ji({transform:l.transform,className:"lf-outline-node",x:f,y:d,width:h+10,height:v+10},g)))}}}),s},t.prototype.getEdgeOutline=function(){for(var n=this.props.graphModel,r=n.edges,i=n.editConfigModel,o=i.edgeSelectedOutline,a=i.hoverOutline,s=[],l=0;l<r.length;l++){var u=r[l];(o&&u.isSelected||a&&u.isHovered)&&(u.modelType===tt.LINE_EDGE?s.push(this.getLineOutline(u)):u.modelType===tt.POLYLINE_EDGE?s.push(this.getPolylineOutline(u)):u.modelType===tt.BEZIER_EDGE&&s.push(this.getBezierOutline(u)))}return s},t.prototype.getLineOutline=function(n){var r=n.startPoint,i=n.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2,s=Math.abs(r.x-i.x)+10,l=Math.abs(r.y-i.y)+10,u=n.getOutlineStyle();return V(ar,ji({className:"lf-outline-edge",x:o,y:a,width:s,height:l},u))},t.prototype.getPolylineOutline=function(n){var r=n.points,i=Bo(r),o=pl(i,8),a=o.x,s=o.y,l=o.width,u=o.height,c=n.getOutlineStyle();return V(ar,ji({className:"lf-outline",x:a,y:s,width:l,height:u},c))},t.prototype.getBezierOutline=function(n){var r=n.path,i=Vv(r),o=pl(i,8),a=o.x,s=o.y,l=o.width,u=o.height,c=n.getOutlineStyle();return V(ar,ji({className:"lf-outline",x:a,y:s,width:l,height:u},c))},t.prototype.render=function(){return V("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},t=q6([On],t),t}(ot),J6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bi=function(){return Bi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bi.apply(this,arguments)},Q6=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},e7=function(e){J6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props.snaplineModel,r=n??{},i=r.position,o=r.isShowHorizontal,a=r.isShowVertical,s=n==null?void 0:n.getStyle(),l=i??{},u=l.x,c=u===void 0?0:u,f=l.y,d=f===void 0?0:f,h=Bi(Bi({x1:-1e5,y1:d,x2:1e5,y2:d},s),{stroke:o?s==null?void 0:s.stroke:"none"}),v=Bi(Bi({x1:c,y1:-1e5,x2:c,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return V("g",{className:"lf-snapline",children:[V(Da,Bi({},h)),V(Da,Bi({},v))]})},t=Q6([On],t),t}(ot),t7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n7=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},r7=function(e){t7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.componentDidMount=function(){this.triggerToolRender()},t.prototype.componentDidUpdate=function(){this.triggerToolRender()},t.prototype.getTools=function(){var n=this.props,r=n.tool,i=n.graphModel,o=i.textEditElement,a=r.getTools(),s=a.map(function(l){return Te(l,{textEditElement:o,graphModel:i,lf:r.instance})});return r.components=s,s},t.prototype.triggerToolRender=function(){var n=this.props,r=n.tool,i=n.graphModel,o=document.querySelector("#ToolOverlay_".concat(i.flowId)),a=r.getInstance();a.components.forEach(function(s){return s(a,o)}),a.components=[]},t.prototype.render=function(){var n=this.props.graphModel;return V("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(n.flowId),children:this.getTools()})},t=n7([On],t),t}(ot),Fi=function(){return Fi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fi.apply(this,arguments)},Ee=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i7=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},tr=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},o7=function(){function e(t){var n=this,r,i;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Or.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var o=t.container,a=t.partial,s=t.background,l=s===void 0?{}:s,u=t.grid,c=t.idGenerator,f=t.edgeGenerator,d=t.animation,h=t.customTrajectory;this.rootEl=o,this.partial=!!a,this.background=l,typeof u=="object"&&t.snapGrid&&(this.gridSize=u.size||1),this.theme=IS(t.style),this.grid=gc.getGridOptions(u??!1),this.edgeType=t.edgeType||"polyline",this.animation=Y5(d),this.overlapMode=t.overlapMode||Or.DEFAULT,this.width=(r=t.width)!==null&&r!==void 0?r:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=ir(t.width),this.height=(i=t.height)!==null&&i!==void 0?i:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=ir(t.height);var v=new ResizeObserver(Sf(function(p){var g,y;try{for(var m=i7(p),M=m.next();!M.done;M=m.next()){var T=M.value;T.target===n.rootEl&&(n.resize(),n.eventCenter.emit("graph:resize",{target:n.rootEl,contentRect:T.contentRect}))}}catch(L){g={error:L}}finally{try{M&&!M.done&&(y=m.return)&&y.call(m)}finally{if(g)throw g.error}}},16));v.observe(this.rootEl),this.waitCleanEffects.push(function(){v.disconnect()}),this.eventCenter=new L6,this.editConfigModel=new R6(t),this.transformModel=new l7(this.eventCenter,t),this.flowId=Gi(),this.idGenerator=c,this.edgeGenerator=y8(this,f),this.customTrajectory=h}return Object.defineProperty(e.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(t,n,r){return t[n.id]={index:r,model:n},t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(t,n,r){return t[n.id]={index:r,model:n},t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modelsMap",{get:function(){return tr(tr([],Kt(this.nodes),!1),Kt(this.edges),!1).reduce(function(t,n){return t[n.id]=n,t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortElements",{get:function(){for(var t=tr(tr([],Kt(this.nodes),!1),Kt(this.edges),!1).sort(function(s,l){return s.zIndex-l.zIndex}),n=[],r=[-200,-200],i=[this.width+r_,this.height+r_],o=0;o<t.length;o++){var a=t[o];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,r,i,!1,!1))&&n.push(a)}return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textEditElement",{get:function(){var t=this.nodes.find(function(r){return r.state===ut.TEXT_EDIT}),n=this.edges.find(function(r){return r.state===ut.TEXT_EDIT});return t||n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectElements",{get:function(){var t=new Map;return this.nodes.forEach(function(n){n.isSelected&&t.set(n.id,n)}),this.edges.forEach(function(n){n.isSelected&&t.set(n.id,n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectNodes",{get:function(){var t=[];return this.nodes.forEach(function(n){n.isSelected&&t.push(n)}),t},enumerable:!1,configurable:!0}),e.prototype.getAreaElement=function(t,n,r,i,o){var a=this;r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1);var s=[];return pt(tr(tr([],Kt(this.nodes),!1),Kt(this.edges),!1),function(l){var u=a.isElementInArea(l,t,n,r,i);(!o||l.visible)&&u&&s.push(l)}),s},e.prototype.getModel=function(t){return this.modelMap.get(t)},e.prototype.getNodeModelById=function(t){var n;return this.fakeNode&&t===this.fakeNode.id?this.fakeNode:(n=this.nodesMap[t])===null||n===void 0?void 0:n.model},e.prototype.getPointByClient=function(t){var n=t.x,r=t.y,i=this.rootEl.getBoundingClientRect(),o={x:n-i.left,y:r-i.top},a=Kt(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),s=a[0],l=a[1],u={x:s,y:l};return{domOverlayPosition:o,canvasOverlayPosition:u}},e.prototype.isElementInArea=function(t,n,r,i,o){var a;if(i===void 0&&(i=!0),o===void 0&&(o=!0),t.BaseType===It.NODE){t=t;for(var s=Un(t),l=s.minX,u=s.minY,c=s.maxX,f=s.maxY,d=[{x:l,y:u},{x:c,y:u},{x:c,y:f},{x:l,y:f}],h=o,v=0;v<d.length;v++){var p=d[v],g=p.x,y=p.y;if(a=Kt(this.transformModel.CanvasPointToHtmlPoint([g,y]),2),g=a[0],y=a[1],md([g,y],n,r)!==o){h=!o;break}}return h}if(t.BaseType===It.EDGE){t=t;var m=t.startPoint,M=t.endPoint,T=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),L=this.transformModel.CanvasPointToHtmlPoint([M.x,M.y]),N=md(T,n,r),E=md(L,n,r);return i?N&&E:N||E}return!1},e.prototype.graphDataToModel=function(t){var n=this;if(!t){this.clearData();return}if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),t.nodes?this.nodes=Jn(t.nodes,function(i){var o=n.getModelAfterSnapToGrid(i);return n.elementsModelMap.set(o.id,o),n.nodeModelMap.set(o.id,o),o}):this.nodes=[],t.edges){var r=this.edgeType;this.edges=Jn(t.edges,function(i){var o,a=n.getModel((o=i.type)!==null&&o!==void 0?o:r);if(!a)throw new Error("找不到".concat(i.type,"对应的边。"));var s=new a(i,n);return n.edgeModelMap.set(s.id,s),n.elementsModelMap.set(s.id,s),s})}else this.edges=[]},e.prototype.modelToGraphData=function(){var t=[];this.edges.forEach(function(r){var i=r.getData();i&&!r.virtual&&t.push(i)});var n=[];return this.nodes.forEach(function(r){var i=r.getData();i&&!r.virtual&&n.push(i)}),{nodes:n,edges:t}},e.prototype.modelToHistoryData=function(){for(var t=!1,n=[],r=0;r<this.nodes.length;r++){var i=this.nodes[r];if(i.isDragging){t=!0;break}else n.push(i.getHistoryData())}if(t)return!1;for(var o=!1,a=[],s=0;s<this.edges.length;s++){var l=this.edges[s];if(l.isDragging){o=!0;break}else a.push(l.getHistoryData())}return o?!1:{nodes:n,edges:a}},e.prototype.getEdgeModelById=function(t){var n;return(n=this.edgesMap[t])===null||n===void 0?void 0:n.model},e.prototype.getElement=function(t){return this.modelsMap[t]},e.prototype.getNodeEdges=function(t){for(var n=[],r=0;r<this.edges.length;r++){var i=this.edges[r],o=i.sourceNodeId===t,a=i.targetNodeId===t;(o||a)&&n.push(i)}return n},e.prototype.getSelectElements=function(t){t===void 0&&(t=!0);var n=this.selectElements,r={nodes:[],edges:[]};return n.forEach(function(i){if(i.BaseType===It.NODE&&r.nodes.push(i.getData()),i.BaseType===It.EDGE){var o=i.getData(),a=n.get(o.sourceNodeId)&&n.get(o.targetNodeId);(t||a)&&r.edges.push(o)}}),r},e.prototype.updateAttributes=function(t,n){var r=this.getElement(t);r==null||r.updateAttributes(n)},e.prototype.changeNodeId=function(t,n){return n||(n=Gi()),this.nodesMap[n]?(console.warn("当前流程图已存在节点".concat(n,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach(function(r){r.sourceNodeId===t&&(r.sourceNodeId=n),r.targetNodeId===t&&(r.targetNodeId=n)}),this.nodesMap[t].model.id=n,this.nodesMap[n]=this.nodesMap[t],n):(console.warn("当前流程图找不到节点".concat(t,", 修改失败")),"")},e.prototype.changeEdgeId=function(t,n){return n||(n=Gi()),this.edgesMap[n]?(console.warn("当前流程图已存在边: ".concat(n,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach(function(r){r.id===t&&r.changeEdgeId(n)}),n):(console.warn("当前流程图找不到边: ".concat(n,", 修改失败")),"")},e.prototype.getTextModel=function(t){var n=this.editConfigModel,r=n.textMode,i=n.nodeTextMode,o=n.edgeTextMode;if(t.BaseType===It.NODE)return t.textMode||i||r||cr.TEXT;if(t.BaseType===It.EDGE)return t.textMode||o||r||cr.TEXT},e.prototype.setTextMode=function(t,n){this.editConfigModel.updateEditConfig({textMode:t})},e.prototype.setFakeNode=function(t){this.fakeNode=t},e.prototype.removeFakeNode=function(){this.fakeNode=null},e.prototype.setModel=function(t,n){return this.modelMap.set(t,n)},e.prototype.toFront=function(t){var n,r,i,o=((n=this.nodesMap[t])===null||n===void 0?void 0:n.model)||((r=this.edgesMap[t])===null||r===void 0?void 0:r.model);o&&(this.overlapMode===Or.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex(),o.setZIndex(V5),this.topElement=o),this.overlapMode===Or.INCREASE&&this.setElementZIndex(t,"top"))},e.prototype.setElementZIndex=function(t,n){var r,i,o=((r=this.nodesMap[t])===null||r===void 0?void 0:r.model)||((i=this.edgesMap[t])===null||i===void 0?void 0:i.model);if(o){var a=void 0;typeof n=="number"?a=n:(n==="top"&&(a=Jv()),n==="bottom"&&(a=p6())),o.setZIndex(a)}},e.prototype.deleteNode=function(t){var n=this.nodesMap[t].model,r=n.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(Ae.NODE_DELETE,{data:r,model:n})},e.prototype.addNode=function(t,n,r){n===void 0&&(n=Ae.NODE_ADD);var i=vn(t),o=i.id;o&&this.nodesMap[o]&&delete i.id;var a=this.getModelAfterSnapToGrid(i);this.nodes.push(a);var s=a.getData(),l={data:s};return r&&(l.e=r),this.eventCenter.emit(n,l),a},e.prototype.getModelAfterSnapToGrid=function(t){var n=this.getModel(t.type),r=this.editConfigModel.snapGrid;if(!n)throw new Error("找不到".concat(t.type,"对应的节点，请确认是否已注册此类型节点。"));var i=t.x,o=t.y;i&&o&&(t.x=Ra(i,this.gridSize,r),t.y=Ra(o,this.gridSize,r),typeof t.text=="object"&&t.text!==null&&(t.text.x+=t.x-i,t.text.y+=t.y-o));var a=new n(t,this);return this.nodeModelMap.set(a.id,a),this.elementsModelMap.set(a.id,a),a},e.prototype.cloneNode=function(t){var n=this.getNodeModelById(t),r=n==null?void 0:n.getData();if(r){r.x+=30,r.y+=30,r.id="",typeof r.text=="object"&&r.text!==null&&(r.text.x+=30,r.text.y+=30);var i=this.addNode(r);return i.setSelected(!0),n==null||n.setSelected(!1),i.getData()}},e.prototype.moveNode=function(t,n,r,i){var o;i===void 0&&(i=!1);var a=this.nodesMap[t];if(!a){console.warn("不存在id为".concat(t,"的节点"));return}var s=a.model;o=Kt(s.getMoveDistance(n,r,i),2),n=o[0],r=o[1],this.moveEdge(t,n,r)},e.prototype.moveNode2Coordinate=function(t,n,r,i){i===void 0&&(i=!1);var o=this.nodesMap[t];if(!o){console.warn("不存在id为".concat(t,"的节点"));return}var a=o.model,s=a.x,l=a.y,u=n-s,c=r-l;this.moveNode(t,u,c,i)},e.prototype.editText=function(t){this.setElementStateById(t,ut.TEXT_EDIT)},e.prototype.addEdge=function(t){var n=vn(t),r=n.type;r||(r=this.edgeType),n.id&&this.edgesMap[n.id]&&delete n.id;var i=this.getModel(r);if(!i)throw new Error("找不到".concat(r,"对应的边，请确认是否已注册此类型边。"));var o=new i(Fi(Fi({},n),{type:r}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var a=o.getData();return this.edges.push(o),this.eventCenter.emit(Ae.EDGE_ADD,{data:a}),o},e.prototype.moveEdge=function(t,n,r){for(var i=0;i<this.edges.length;i++){var o=this.edges[i],a=o.textPosition,s=a.x,l=a.y,u=this.edges[i].sourceNodeId===t,c=this.edges[i].targetNodeId===t;u&&o.moveStartPoint(n,r),c&&o.moveEndPoint(n,r),(u||c)&&this.handleEdgeTextMove(o,s,l)}},e.prototype.handleEdgeTextMove=function(t,n,r){var i;if(t.customTextPosition){t.resetTextPosition();return}if(t.modelType===tt.POLYLINE_EDGE&&(!((i=t.text)===null||i===void 0)&&i.value)){var o=t.text,a=CS(o,t.points);t.moveText(a.x-o.x,a.y-o.y)}var s=t.textPosition,l=s.x,u=s.y;t.moveText(l-n,u-r)},e.prototype.deleteEdgeBySourceAndTarget=function(t,n){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===t&&this.edges[r].targetNodeId===n){var i=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(Ae.EDGE_DELETE,{data:i})}},e.prototype.deleteEdgeById=function(t){var n=this.edgesMap[t];if(n){var r=this.edgesMap[t].index,i=this.edgesMap[t].model.getData();this.edges.splice(r,1),this.eventCenter.emit(Ae.EDGE_DELETE,{data:i})}},e.prototype.deleteEdgeBySource=function(t){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===t){var r=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(Ae.EDGE_DELETE,{data:r})}},e.prototype.deleteEdgeByTarget=function(t){for(var n=0;n<this.edges.length;n++)if(this.edges[n].targetNodeId===t){var r=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(Ae.EDGE_DELETE,{data:r})}},e.prototype.setElementStateById=function(t,n,r){this.nodes.forEach(function(i){i.id===t?i.setElementState(n,r):i.setElementState(ut.DEFAULT)}),this.edges.forEach(function(i){i.id===t?i.setElementState(n,r):i.setElementState(ut.DEFAULT)})},e.prototype.updateText=function(t,n){var r=qi(tr(tr([],Kt(this.nodes),!1),Kt(this.edges),!1),function(i){return i.id===t});r==null||r.updateText(n)},e.prototype.selectNodeById=function(t,n){var r;n===void 0&&(n=!1),n||this.clearSelectElements();var i=(r=this.nodesMap[t])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},e.prototype.selectEdgeById=function(t,n){var r;n===void 0&&(n=!1),n||this.clearSelectElements();var i=(r=this.edgesMap[t])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},e.prototype.selectElementById=function(t,n){n===void 0&&(n=!1),n||this.clearSelectElements();var r=this.getElement(t);r==null||r.setSelected(!0)},e.prototype.deselectElementById=function(t){var n=this.getElement(t);n&&n.setSelected(!1)},e.prototype.clearSelectElements=function(){var t;this.selectElements.forEach(function(n){n==null||n.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Or.DEFAULT&&((t=this.topElement)===null||t===void 0||t.setZIndex())},e.prototype.moveNodes=function(t,n,r,i){var o,a,s,l=this;i===void 0&&(i=!1);for(var u=t.reduce(function(M,T){var L,N=(L=l.nodesMap[T])===null||L===void 0?void 0:L.model;return N&&(M[T]=N.getMoveDistance(n,r,i)),M},{}),c=0;c<this.edges.length;c++){var f=this.edges[c],d=f.textPosition,h=d.x,v=d.y,p=u[f.sourceNodeId],g=u[f.targetNodeId],y=void 0,m=void 0;p&&g&&f.modelType===tt.POLYLINE_EDGE?(o=Kt(p,2),y=o[0],m=o[1],f.updatePointsList(y,m)):(p&&(a=Kt(p,2),y=a[0],m=a[1],f.moveStartPoint(y,m)),g&&(s=Kt(g,2),y=s[0],m=s[1],f.moveEndPoint(y,m))),(p||g)&&this.handleEdgeTextMove(f,h,v)}},e.prototype.addNodeMoveRules=function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)},e.prototype.addNodeResizeRules=function(t){this.nodeResizeRules.includes(t)||this.nodeResizeRules.push(t)},e.prototype.setDefaultEdgeType=function(t){this.edgeType=t},e.prototype.changeNodeType=function(t,n){var r=this.getNodeModelById(t);if(!r){console.warn("找不到id为".concat(t,"的节点"));return}var i=r.getData();i.type=n;var o=this.getModel(n);if(!o)throw new Error("找不到".concat(n,"对应的节点，请确认是否已注册此类型节点。"));var a=new o(i,this);this.nodes.splice(this.nodesMap[t].index,1,a);var s=this.getNodeEdges(t);s.forEach(function(l){if(l.sourceNodeId===t){var u=b_(a,l.startPoint,a.width,a.height);l.updateStartPoint(u)}if(l.targetNodeId===t){var u=b_(a,l.endPoint,a.width,a.height);l.updateEndPoint(u)}})},e.prototype.changeEdgeType=function(t,n){var r=this.getEdgeModelById(t);if(!r){console.warn("找不到id为".concat(t,"的边"));return}if(r.type!==n){var i=r.getData();i.type=n;var o=this.getModel(n);if(!o)throw new Error("找不到".concat(n,"对应的节点，请确认是否已注册此类型节点。"));delete i.pointsList;var a=new o(i,this);this.edges.splice(this.edgesMap[t].index,1,a)}},e.prototype.getNodeIncomingEdge=function(t){var n=[];return this.edges.forEach(function(r){r.targetNodeId===t&&n.push(r)}),n},e.prototype.getNodeOutgoingEdge=function(t){var n=[];return this.edges.forEach(function(r){r.sourceNodeId===t&&n.push(r)}),n},e.prototype.getAnchorIncomingEdge=function(t){var n=[];return this.edges.forEach(function(r){r.targetAnchorId===t&&n.push(r)}),n},e.prototype.getAnchorOutgoingEdge=function(t){var n=[];return this.edges.forEach(function(r){r.sourceAnchorId===t&&n.push(r)}),n},e.prototype.getNodeIncomingNode=function(t){var n=this,r=[];return this.edges.forEach(function(i){var o;i.targetNodeId===t&&r.push((o=n.nodesMap[i.sourceNodeId])===null||o===void 0?void 0:o.model)}),r},e.prototype.getNodeOutgoingNode=function(t){var n=this,r=[];return this.edges.forEach(function(i){i.sourceNodeId===t&&r.push(n.nodesMap[i.targetNodeId].model)}),r},e.prototype.setTheme=function(t){this.theme=f6(Fi(Fi({},this.theme),t))},e.prototype.updateGridOptions=function(t){Na(this.grid,t)},e.prototype.updateGridSize=function(t){this.gridSize=t},e.prototype.updateBackgroundOptions=function(t){ic(t)||ic(this.background)?this.background=t:this.background=Fi(Fi({},this.background),t)},e.prototype.resize=function(t,n){this.width=t??this.rootEl.getBoundingClientRect().width,this.isContainerWidth=ir(t),this.height=n??this.rootEl.getBoundingClientRect().height,this.isContainerHeight=ir(n),(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},e.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},e.prototype.getVirtualRectSize=function(){var t=this.nodes,n=[],r=[];t.forEach(function(d){var h=d.x,v=d.y,p=d.width,g=d.height,y=d.getNodeStyle().strokeWidth,m=y===void 0?0:y,M=h+p/2+m,T=h-p/2-m,L=v+g/2+m,N=v-g/2-m;n=n.concat([M,T].filter(function(E){return!Number.isNaN(E)})),r=r.concat([L,N].filter(function(E){return!Number.isNaN(E)}))});var i=Math.min.apply(Math,tr([],Kt(n),!1)),o=Math.max.apply(Math,tr([],Kt(n),!1)),a=Math.min.apply(Math,tr([],Kt(r),!1)),s=Math.max.apply(Math,tr([],Kt(r),!1)),l=o-i||0,u=s-a||0,c=i+l/2,f=a+u/2;return{width:l,height:u,x:c,y:f}},e.prototype.translateCenter=function(){var t=this,n=t.nodes,r=t.width,i=t.height,o=t.rootEl,a=t.transformModel;if(n.length){var s=r||o.clientWidth,l=i||o.clientHeight,u=this.getVirtualRectSize(),c=u.x,f=u.y;a.focusOn(c,f,s,l)}},e.prototype.fitView=function(t,n){t===void 0&&(t=20),n===void 0&&(n=20);var r=this,i=r.nodes,o=r.width,a=r.height,s=r.rootEl,l=r.transformModel;if(i.length){var u=o||s.clientWidth,c=a||s.clientHeight,f=this.getVirtualRectSize(),d=f.width,h=f.height,v=f.x,p=f.y,g=(d+n)/u,y=(h+t)/c,m=1/Math.max(g,y),M=[u/2,c/2];l.zoom(m,M),l.focusOn(v,p,u,c)}},e.prototype.openEdgeAnimation=function(t){var n=this.getEdgeModelById(t);n==null||n.openEdgeAnimation()},e.prototype.closeEdgeAnimation=function(t){var n=this.getEdgeModelById(t);n==null||n.closeEdgeAnimation()},e.prototype.getPartial=function(){return this.partial},e.prototype.setPartial=function(t){this.partial=t},e.prototype.destroy=function(){try{this.waitCleanEffects.forEach(function(t){t()})}catch(t){console.warn("error on destroy GraphModel",t)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},Ee([q],e.prototype,"width",void 0),Ee([q],e.prototype,"height",void 0),Ee([q],e.prototype,"theme",void 0),Ee([q],e.prototype,"grid",void 0),Ee([q],e.prototype,"edgeType",void 0),Ee([q],e.prototype,"nodes",void 0),Ee([q],e.prototype,"edges",void 0),Ee([q],e.prototype,"fakeNode",void 0),Ee([q],e.prototype,"overlapMode",void 0),Ee([q],e.prototype,"background",void 0),Ee([q],e.prototype,"gridSize",void 0),Ee([q],e.prototype,"transformModel",void 0),Ee([q],e.prototype,"editConfigModel",void 0),Ee([q],e.prototype,"partial",void 0),Ee([Ct],e.prototype,"nodesMap",null),Ee([Ct],e.prototype,"edgesMap",null),Ee([Ct],e.prototype,"modelsMap",null),Ee([Ct],e.prototype,"sortElements",null),Ee([Ct],e.prototype,"textEditElement",null),Ee([Ct],e.prototype,"selectElements",null),Ee([Ct],e.prototype,"selectNodes",null),Ee([K],e.prototype,"setTextMode",null),Ee([K],e.prototype,"setFakeNode",null),Ee([K],e.prototype,"removeFakeNode",null),Ee([K],e.prototype,"setModel",null),Ee([K],e.prototype,"toFront",null),Ee([K],e.prototype,"setElementZIndex",null),Ee([K],e.prototype,"deleteNode",null),Ee([K],e.prototype,"addNode",null),Ee([K],e.prototype,"cloneNode",null),Ee([K],e.prototype,"moveNode",null),Ee([K],e.prototype,"moveNode2Coordinate",null),Ee([K],e.prototype,"editText",null),Ee([K],e.prototype,"addEdge",null),Ee([K],e.prototype,"moveEdge",null),Ee([K],e.prototype,"deleteEdgeBySourceAndTarget",null),Ee([K],e.prototype,"deleteEdgeById",null),Ee([K],e.prototype,"deleteEdgeBySource",null),Ee([K],e.prototype,"deleteEdgeByTarget",null),Ee([K],e.prototype,"setElementStateById",null),Ee([K],e.prototype,"updateText",null),Ee([K],e.prototype,"selectNodeById",null),Ee([K],e.prototype,"selectEdgeById",null),Ee([K],e.prototype,"selectElementById",null),Ee([K],e.prototype,"deselectElementById",null),Ee([K],e.prototype,"clearSelectElements",null),Ee([K],e.prototype,"moveNodes",null),Ee([K],e.prototype,"setDefaultEdgeType",null),Ee([K],e.prototype,"changeNodeType",null),Ee([K],e.prototype,"changeEdgeType",null),Ee([K],e.prototype,"getNodeIncomingEdge",null),Ee([K],e.prototype,"getNodeOutgoingEdge",null),Ee([K],e.prototype,"getAnchorIncomingEdge",null),Ee([K],e.prototype,"getAnchorOutgoingEdge",null),Ee([K],e.prototype,"getNodeIncomingNode",null),Ee([K],e.prototype,"getNodeOutgoingNode",null),Ee([K],e.prototype,"setTheme",null),Ee([K],e.prototype,"resize",null),Ee([K],e.prototype,"clearData",null),Ee([K],e.prototype,"translateCenter",null),Ee([K],e.prototype,"fitView",null),Ee([K],e.prototype,"openEdgeAnimation",null),Ee([K],e.prototype,"closeEdgeAnimation",null),Ee([K],e.prototype,"setPartial",null),e}(),bo=function(){return bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bo.apply(this,arguments)},fs=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a7=function(){function e(t){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=t}return e.prototype.getStyle=function(){return bo({},this.graphModel.theme.snapline)},e.prototype.getCenterSnapLine=function(t,n){for(var r=t.x,i=t.y,o=!1,a=!1,s=0;s<n.length;s++){var l=n[s];if(l.id!==t.id&&(r===l.x&&(o=!0),i===l.y&&(a=!0),o&&a))break}return{isShowVertical:o,isShowHorizontal:a,position:{x:r,y:i}}},e.prototype.getHorizontalSnapline=function(t,n){var r=!1,i=0,o=t.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=Un(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=Un(l))}}for(var u=0;u<n.length;u++){var c=n[u];if(c.id!==t.id){var f=Un(c);if(f.minY===(a==null?void 0:a.minY)||f.maxY===(a==null?void 0:a.minY)){r=!0,i=a.minY;break}if(f.minY===(a==null?void 0:a.maxY)||f.maxY===(a==null?void 0:a.maxY)){r=!0,i=a.maxY;break}}}return{isShowHorizontal:r,isShowVertical:this.isShowVertical,position:bo(bo({},this.position),{y:i})}},e.prototype.getVerticalSnapline=function(t,n){var r=!1,i=0,o=t.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=Un(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=Un(l))}}for(var u=0;u<n.length;u++){var c=n[u];if(c.id!==t.id){var f=Un(c);if(f.minX===(a==null?void 0:a.minX)||f.maxX===(a==null?void 0:a.minX)){r=!0,i=a.minX;break}if(f.minX===(a==null?void 0:a.maxX)||f.maxX===(a==null?void 0:a.maxX)){r=!0,i=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:r,position:bo(bo({},this.position),{x:i})}},e.prototype.getSnapLinePosition=function(t,n){var r=this.getCenterSnapLine(t,n),i=r.isShowHorizontal,o=r.isShowVertical;if(!i){var a=this.getHorizontalSnapline(t,n);a.isShowHorizontal&&(r.isShowHorizontal=a.isShowHorizontal,r.position.y=a.position.y)}if(!o){var s=this.getVerticalSnapline(t,n);s.isShowVertical&&(r.isShowVertical=s.isShowVertical,r.position.x=s.position.x)}return r},e.prototype.setSnaplineInfo=function(t){var n=t.isShowHorizontal,r=t.isShowVertical,i=t.position;this.position=i,this.isShowHorizontal=n,this.isShowVertical=r},e.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},e.prototype.setNodeSnapLine=function(t){var n=this.graphModel.nodes,r=this.getSnapLinePosition(t,n);this.setSnaplineInfo(r)},fs([q],e.prototype,"isShowHorizontal",void 0),fs([q],e.prototype,"isShowVertical",void 0),fs([q],e.prototype,"position",void 0),fs([K],e.prototype,"clearSnapline",null),fs([K],e.prototype,"setNodeSnapLine",null),e}(),_r=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},ta=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},s7={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},l7=function(){function e(t,n){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=t;var r=n.stopMoveGraph,i=r===void 0?!1:r;this.updateTranslateLimits(i)}return e.prototype.setZoomMiniSize=function(t){this.MINI_SCALE_SIZE=t},e.prototype.setZoomMaxSize=function(t){this.MAX_SCALE_SIZE=t},e.prototype.HtmlPointToCanvasPoint=function(t){var n=ta(t,2),r=n[0],i=n[1];return[(r-this.TRANSLATE_X)/this.SCALE_X,(i-this.TRANSLATE_Y)/this.SCALE_Y]},e.prototype.CanvasPointToHtmlPoint=function(t){var n=ta(t,2),r=n[0],i=n[1];return[r*this.SCALE_X+this.TRANSLATE_X,i*this.SCALE_Y+this.TRANSLATE_Y]},e.prototype.moveCanvasPointByHtml=function(t,n,r){var i=ta(t,2),o=i[0],a=i[1];return[o+n/this.SCALE_X,a+r/this.SCALE_Y]},e.prototype.fixDeltaXY=function(t,n){return[t/this.SCALE_X,n/this.SCALE_Y]},e.prototype.getTransformStyle=function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}},e.prototype.zoom=function(t,n){t===void 0&&(t=!1);var r=this.SCALE_X,i=this.SCALE_Y;return typeof t=="number"?(r=t,i=t):t?(r+=this.ZOOM_SIZE,i+=this.ZOOM_SIZE):(r-=this.ZOOM_SIZE,i-=this.ZOOM_SIZE),r<this.MINI_SCALE_SIZE||r>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(n&&(this.TRANSLATE_X-=(r-this.SCALE_X)*n[0],this.TRANSLATE_Y-=(i-this.SCALE_Y)*n[1]),this.SCALE_X=r,this.SCALE_Y=i,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},e.prototype.emitGraphTransform=function(t){this.eventCenter.emit(Ae.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},e.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},e.prototype.translate=function(t,n){this.TRANSLATE_X+t<=this.translateLimitMaxX&&this.TRANSLATE_X+t>=this.translateLimitMinX&&(this.TRANSLATE_X+=t),this.TRANSLATE_Y+n<=this.translateLimitMaxY&&this.TRANSLATE_Y+n>=this.translateLimitMinY&&(this.TRANSLATE_Y+=n),this.emitGraphTransform("translate")},e.prototype.focusOn=function(t,n,r,i){var o=ta(this.CanvasPointToHtmlPoint([t,n]),2),a=o[0],s=o[1],l=ta([r/2-a,i/2-s],2),u=l[0],c=l[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=c,this.emitGraphTransform("focusOn")},e.prototype.updateTranslateLimits=function(t){var n;n=ta(Array.isArray(t)&&t.length===4?t:s7[t.toString()],4),this.translateLimitMinX=n[0],this.translateLimitMinY=n[1],this.translateLimitMaxX=n[2],this.translateLimitMaxY=n[3]},_r([q],e.prototype,"SCALE_X",void 0),_r([q],e.prototype,"SKEW_Y",void 0),_r([q],e.prototype,"SKEW_X",void 0),_r([q],e.prototype,"SCALE_Y",void 0),_r([q],e.prototype,"TRANSLATE_X",void 0),_r([q],e.prototype,"TRANSLATE_Y",void 0),_r([q],e.prototype,"ZOOM_SIZE",void 0),_r([K],e.prototype,"zoom",null),_r([K],e.prototype,"resetZoom",null),_r([K],e.prototype,"translate",null),_r([K],e.prototype,"focusOn",null),e}(),u7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),c7=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},f7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},d7=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},h7=function(e){u7(t,e);function t(){var n=e.apply(this,d7([],f7(arguments),!1))||this;return n.handleResize=function(){var r=n.props,i=r.graphModel,o=r.options,a=i.width,s=i.height,l=i.isContainerWidth,u=i.isContainerHeight,c=a,f=s,d=!1;l&&(c=void 0,d=!0),u&&(f=void 0,d=!0),d&&i.resize(c,f),o.width=a,o.height=s},n.throttleResize=pS(n.handleResize,200),n}return t.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},t.prototype.componentDidUpdate=function(){var n=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(Ae.GRAPH_UPDATED,{data:n})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},t.prototype.getComponent=function(n,r,i){i===void 0&&(i="canvas-overlay");var o=this.props.getView,a=o(n.type);return a?V(a,{model:n,graphModel:r,overlay:i},n.id):null},t.prototype.render=function(){var n=this,r=this.props,i=r.graphModel,o=r.tool,a=r.options,s=r.dnd,l=r.snaplineModel,u={};a.width&&(u.width="".concat(i.width,"px")),a.height&&(u.height="".concat(i.height,"px"));var c=i.fakeNode,f=i.editConfigModel,d=i.background,h=f.adjustEdge;return V("div",{className:"lf-graph","flow-id":i.flowId,style:u,children:[V(j6,{graphModel:i,dnd:s,children:[V("g",{className:"lf-base",children:Jn(i.sortElements,function(v){return n.getComponent(v,i)})}),c?this.getComponent(c,i):""]}),V(K6,{graphModel:i,children:[V(Z6,{graphModel:i}),h?V($6,{graphModel:i}):"",a.snapline!==!1?V(e7,{snaplineModel:l}):""]}),V(r7,{graphModel:i,tool:o}),d&&V(z6,{background:d}),V(gc,{graphModel:i})]})},t=c7([On],t),t}(ot),p7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ur=function(){return Ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ur.apply(this,arguments)},v7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},g7=function(e){p7(t,e);function t(){var n=e.call(this)||this;return n.onDragStart=function(r){var i=r.event,o=n.props,a=o.anchorData,s=o.nodeModel,l=o.graphModel;l.selectNodeById(s.id),s.autoToFront&&l.toFront(s.id),l.eventCenter.emit(Ae.ANCHOR_DRAGSTART,{data:a,e:i,nodeModel:s}),n.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},n.onDragging=function(r){var i=r.event,o=n.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=a.transformModel,c=a.eventCenter,f=a.width,d=a.height,h=a.editConfigModel,v=h.autoExpand,p=h.stopMoveGraph;if(i){var g=i.clientX,y=i.clientY,m=a.getPointByClient({x:g,y}),M=m.domOverlayPosition,T=M.x,L=M.y,N=m.canvasOverlayPosition,E=N.x,k=N.y;n.t&&pc(n.t);var Y=[],ie=10;T<10?Y=[ie,0]:T+10>f?Y=[-10,0]:L<10?Y=[0,ie]:L+10>d&&(Y=[0,-10]),n.setState({endX:E,endY:k,dragging:!0}),n.moveAnchorEnd(E,k),Y.length>0&&!p&&v&&(n.t=NS(function(){var se=v7(Y,2),pe=se[0],O=se[1];u.translate(pe,O);var I=n.state,j=I.endX,te=I.endY;n.setState({endX:j-pe,endY:te-O}),n.moveAnchorEnd(j-pe,te-O)})),c.emit(Ae.ANCHOR_DRAG,{data:l,e:i,nodeModel:s})}},n.onDragEnd=function(r){var i=r.event;n.t&&pc(n.t);var o=n.checkEnd(i);n.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),n.sourceRuleResults.clear(),n.targetRuleResults.clear();var a=n.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData;s.eventCenter.emit(Ae.ANCHOR_DRAGEND,{data:u,e:i,nodeModel:l,edgeModel:o??void 0})},n.checkEnd=function(r){var i,o=n.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=l.x,c=l.y,f=l.id,d=n.state,h=d.endX,v=d.endY,p=d.dragging,g=dc({x:h,y:v},a);if(n.preTargetNode&&n.preTargetNode.state!==ut.DEFAULT&&n.preTargetNode.setElementState(ut.DEFAULT),!!p&&g&&g.node){var y=g.node,m=g.anchor.id,M="".concat(s.id,"_").concat(y.id,"_").concat(m,"_").concat(f),T=n.sourceRuleResults.get(M)||{},L=T.isAllPass,N=T.msg,E=n.targetRuleResults.get(M)||{},k=E.isAllPass,Y=E.msg;if(L&&k){y.setElementState(ut.DEFAULT);var ie=a.getNodeModelById(g.node.id),se=(i=a.edgeGenerator)===null||i===void 0?void 0:i.call(a,s.getData(),ie==null?void 0:ie.getData()),pe=a.addEdge(Ur(Ur({},se),{sourceNodeId:s.id,sourceAnchorId:f,startPoint:{x:u,y:c},targetNodeId:g.node.id,targetAnchorId:g.anchor.id,endPoint:{x:g.anchor.x,y:g.anchor.y}})),O=n.props.anchorData;return a.eventCenter.emit(Ae.ANCHOR_DROP,{data:O,e:r,nodeModel:s,edgeModel:pe}),pe}var I=y.getData();return a.eventCenter.emit(Ae.CONNECTION_NOT_ALLOWED,{data:I,msg:Y||N||"不允许添加连线"}),null}},n.sourceRuleResults=new Map,n.targetRuleResults=new Map,n.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},n.dragHandler=new yr({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd}),n}return t.prototype.getAnchorShape=function(){var n=this.props,r=n.anchorData,i=n.style,o=n.node,a=o.getAnchorShape(r);if(a)return a;var s=r.x,l=r.y,u=Ur(Ur({},i),i==null?void 0:i.hover);return V("g",{children:[V(La,Ur({className:"lf-node-anchor-hover"},u,{x:s,y:l})),V(La,Ur({className:"lf-node-anchor"},i,{x:s,y:l}))]})},Object.defineProperty(t.prototype,"customTrajectory",{get:function(){var n=this.props.graphModel.customTrajectory;return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relateEdges",{get:function(){var n=this.props,r=n.graphModel,i=r.getAnchorIncomingEdge,o=r.getAnchorOutgoingEdge,a=n.anchorData.id;return{incomingEdgeList:i(a),outgoingEdgeList:o(a)}},enumerable:!1,configurable:!0}),t.prototype.moveAnchorEnd=function(n,r){var i,o,a=this.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData,c=dc({x:n,y:r},s);if(c){var f=c.node,d=c.anchor.id;if(this.preTargetNode&&this.preTargetNode!==c.node&&this.preTargetNode.setElementState(ut.DEFAULT),u.id===d)return;this.preTargetNode=f;var h="".concat(l.id,"_").concat(f.id,"_").concat(d,"_").concat(u.id);if(!this.targetRuleResults.has(h)){var v=c.anchor,p=l.isAllowConnectedAsSource(f,u,v),g=f.isAllowConnectedAsTarget(l,u,v);this.sourceRuleResults.set(h,hc(p)),this.targetRuleResults.set(h,hc(g))}var y=((i=this.sourceRuleResults.get(h))!==null&&i!==void 0?i:{}).isAllPass,m=((o=this.targetRuleResults.get(h))!==null&&o!==void 0?o:{}).isAllPass;y&&m?f.setElementState(ut.ALLOW_CONNECT):f.setElementState(ut.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==ut.DEFAULT&&this.preTargetNode.setElementState(ut.DEFAULT)},t.prototype.isShowLine=function(){var n=this.state,r=n.startX,i=n.startY,o=n.endX,a=n.endY,s=Ar(r,i,o,a);return s>10},t.prototype.render=function(){var n=this,r=this.state,i=r.startX,o=r.startY,a=r.endX,s=r.endY,l=this.props,u=l.anchorData,c=l.edgeStyle,f=l.nodeModel,d=l.graphModel,h=u.edgeAddable;return V("g",{className:"lf-anchor",children:[V("g",{onClick:function(v){v.stopPropagation(),d.eventCenter.emit(Ae.ANCHOR_CLICK,{data:u,e:v,nodeModel:f})},onMouseDown:function(v){d.eventCenter.emit(Ae.ANCHOR_MOUSEDOWN,{data:u,e:v,nodeModel:f}),h!==!1&&n.dragHandler.handleMouseDown(v)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(Ur({sourcePoint:{x:i,y:o},targetPoint:{x:a,y:s}},c)):V(Da,Ur({x1:i,y1:o,x2:a,y2:s},c,{"pointer-events":"none"})))]})},t}(ot),y7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yh=function(){return Yh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Yh.apply(this,arguments)},m7=function(e){y7(t,e);function t(n){var r=e.call(this,n)||this;return r.style={},r.onDragging=function(i){var o,a=i.event,s=r.props,l=s.graphModel,u=s.nodeModel,c=s.eventCenter,f=l.selectNodes,d=u.x,h=u.y,v=a.clientX,p=a.clientY,g=l.getPointByClient({x:v,y:p}).canvasOverlayPosition,y=g.x,m=g.y,M=new ln(y-d,m-h),T=((o=r.normal)===null||o===void 0?void 0:o.angle(M))-r.defaultAngle,L=new cc(-d,-h).rotate(T).translate(d,h).toString();u.transform=L,u.rotate=T;var N=Jn(f,function(k){return k.id});N.indexOf(u.id)===-1&&(N=[u.id]);var E=lS(N,function(k,Y){var ie=l.getNodeModelById(Y);return k[Y]=ie==null?void 0:ie.getMoveDistance(0,0,!1),k},{});N.forEach(function(k){var Y=l.getNodeEdges(k);Y.forEach(function(ie){if(E[ie.sourceNodeId]){var se=l.getNodeModelById(ie.sourceNodeId),pe=se.anchors.find(function(O){return O.id===ie.sourceAnchorId});ie.updateStartPoint(pe)}if(E[ie.targetNodeId]){var se=l.getNodeModelById(ie.targetNodeId),pe=se.anchors.find(function(j){return j.id===ie.targetAnchorId});ie.updateEndPoint(pe)}})}),c.emit(Ae.NODE_ROTATE,{e:a,model:u,data:u.getData()})},r.style=n.style,r.stepperDrag=new yr({onDragging:r.onDragging}),r}return t.prototype.render=function(){var n=this,r=this.props.nodeModel,i=r.x,o=r.y,a=r.width,s=r.height,l=i+a/2+20,u=o-s/2-20;return this.normal=new ln(1,0),this.defaultAngle=this.normal.angle(new ln(l-i,u-o)),r.defaultAngle=this.defaultAngle,V("g",{className:"lf-rotate-control",children:V("g",{onMouseDown:function(c){n.stepperDrag.handleMouseDown(c)},children:V(La,Yh({},this.style,{cx:l,cy:u}))})})},t}(ot);function Bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var R_;function _7(){return R_||(R_=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(wd)),wd.exports}var b7=_7();const Kh=Bf(b7);var x7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vh=function(){return Vh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Vh.apply(this,arguments)},w7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},jS=function(e){x7(t,e);function t(n){var r=e.call(this)||this;r.mouseDownHandler=function(o){var a=r.props,s=a.draggable,l=a.model,u=a.graphModel,c=u.editConfigModel.nodeTextDraggable;(s??c)&&(o.stopPropagation(),r.stepperDrag.model=l,r.stepperDrag.handleMouseDown(o))},r.onDragging=function(o){var a=o.deltaX,s=o.deltaY,l=r.props,u=l.model,c=l.graphModel.transformModel;if(a||s){var f=w7(c.fixDeltaXY(a,s),2),d=f[0],h=f[1];u.moveText(d,h)}},r.dbClickHandler=function(){var o=r.props,a=o.editable,s=o.graphModel.eventCenter,l=o.model;a&&l.setElementState(ut.TEXT_EDIT),s.emit(Ae.TEXT_DBCLICK,{data:l.text,model:l})};var i=n.draggable;return r.stepperDrag=new yr({onDragging:r.onDragging,step:1,eventType:"TEXT",isStopPropagation:i}),r}return t.prototype.getShape=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=r.text,s=a.value,l=a.x,u=a.y,c=a.editable,f=a.draggable,d={x:l,y:u,className:"",value:s},h=r.getTextStyle(),v=o.nodeTextDraggable||f;return V(RS,Vh({},d,h,{className:Kh({"lf-element-text":c,"lf-text-draggable":!c&&v,"lf-text-disabled":!c&&!v}),model:r}))},t.prototype.render=function(){var n=this.props.model.text;if(n)return V("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},t}(ot),E7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),br=function(){return br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},br.apply(this,arguments)},cu=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},S7=function(e){E7(t,e);function t(n){var r=e.call(this,n)||this;return r.setHoverOn=function(){r.setState({isHovered:!0})},r.setHoverOff=function(){r.setState({isHovered:!1})},r.state={isHovered:!1},r}return t.prototype.getBackground=function(){var n=this.state.isHovered,r=this.props.model,i=r.text,o=r.getTextStyle(),a=o.background||{};if(n&&o.hover&&o.hover.background&&(a=br(br({},a),o.hover.background)),i!=null&&i.value&&(a==null?void 0:a.fill)!=="transparent"){var s=o.fontSize,l=o.textWidth,u=o.lineHeight,c=o.overflowMode,f=a.wrapPadding,d=i==null?void 0:i.value.split(/[\r\n]/g),h=d.length,v=i.x,p=i.y,g={};if(c==="autoWrap"&&l){var y=PS({rows:d,style:{fontSize:"".concat(s,"px"),width:"".concat(l,"px"),lineHeight:u,padding:f},rowsLength:h,className:"lf-get-text-height"});g=br(br({},a),{x:v,y:p,width:l,height:y})}else{var m=m8({rows:d,rowsLength:h,fontSize:s}),M=m.width,T=m.height;if(c==="ellipsis"&&(M=l,T=s+2),typeof a.wrapPadding=="string"){var L=a.wrapPadding.split(",").filter(function(Je){return Je.trim()}).map(function(Je){return parseFloat(Je.trim())});if(L.length>0&&L.length<=4){if(L.length===1){var N=cu(L,1),E=N[0];L=[E,E,E,E]}else if(L.length===2){var k=cu(L,2),Y=k[0],ie=k[1];L=[Y,ie,Y,ie]}else if(L.length===3){var se=cu(L,3),pe=se[0],ie=se[1],O=se[2];L=[pe,ie,O,ie]}var I=cu(L,4),j=I[0],te=I[1],fe=I[2],ve=I[3];M+=te+ve,T+=j+fe,v=v+(te-ve)/2,p=p+(fe-j)/2}}g=br(br({},a),{x:v-1,y:p-1,width:M,height:T})}return V(ar,br({},g))}return null},t.prototype.getShape=function(){var n=this.props.model,r=n.text,i=r.x,o=r.y,a=r.value;if(!a)return null;var s=n.getTextStyle(),l=br({x:i,y:o,value:a,model:n,className:"lf-element-text"},s);return V("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),V(RS,br({},l))]})},t}(jS),O7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yc=function(){return yc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yc.apply(this,arguments)},A7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},fu=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ao=function(e){O7(t,e);function t(n){var r=e.call(this)||this;r.onDragStart=function(l){var u=l.event,c=r.props,f=c.model,d=c.graphModel;if(u){var h=d.getPointByClient({x:u.clientX,y:u.clientY}).canvasOverlayPosition,v=h.x,p=h.y;r.moveOffset={dx:f.x-v,dy:f.y-p}}},r.onDragging=function(l){var u,c,f,d,h=l.event,v=r.props,p=v.model,g=v.graphModel,y=g.editConfigModel,m=y.stopMoveGraph,M=y.autoExpand,T=y.snapGrid,L=g.transformModel,N=g.selectNodes,E=g.width,k=g.height,Y=g.gridSize;p.isDragging=!0;var ie=h,se=ie.clientX,pe=ie.clientY,O=g.getPointByClient({x:se,y:pe}).canvasOverlayPosition,I=O.x,j=O.y,te=fu(L.CanvasPointToHtmlPoint([I,j]),2),fe=te[0],ve=te[1];if(I=I+((c=(u=r.moveOffset)===null||u===void 0?void 0:u.dx)!==null&&c!==void 0?c:0),j=j+((d=(f=r.moveOffset)===null||f===void 0?void 0:f.dy)!==null&&d!==void 0?d:0),I=Ra(I,Y,T),j=Ra(j,Y,T),!E||!k){g.moveNode2Coordinate(p.id,I,j);return}var Je=fe<0||ve<0||fe>E||ve>k;if(!(M&&!m&&Je)){var et=fu(L.CanvasPointToHtmlPoint([I-p.width/2,j-p.height/2]),2),xe=et[0],Me=et[1],He=fu(L.CanvasPointToHtmlPoint([I+p.width/2,j+p.height/2]),2),Pe=He[0],Xe=He[1],B=Math.max(Y,20),D=[];xe<0?D=[B,0]:Pe>g.width?D=[-B,0]:Me<0?D=[0,B]:Xe>g.height&&(D=[0,-B]),r.t&&pc(r.t);var F=N.map(function(U){return U.id});F.indexOf(p.id)===-1&&(F=[p.id]),D.length>0&&!m&&M?r.t=NS(function(){var U=fu(D,2),Q=U[0],de=U[1];L.translate(Q??0,de??0);var A=-(Q??0)/L.SCALE_X,R=-(de??0)/L.SCALE_X;g.moveNodes(F,A,R)}):g.moveNodes(F,I-p.x,j-p.y)}},r.onDragEnd=function(){r.t&&pc(r.t);var l=r.props.model;l.isDragging=!1},r.onMouseOut=function(l){K5()&&r.setHoverOff(l)},r.handleMouseUp=function(){var l=r.props.model;r.mouseUpDrag=l.isDragging},r.handleClick=function(l){var u=r.mouseUpDrag===!1;if(r.startTime){var c=r.props,f=c.model,d=c.graphModel;if(u){var h=f.getData(),v=d.getPointByClient({x:l.clientX,y:l.clientY}),p={data:h,e:l,position:v,isSelected:!1,isMultiple:!1},g=l.button===2,y=l.detail===2;if(!g){var m=d.editConfigModel,M=TS(l,m);p.isMultiple=M,f.isSelected&&!y&&M?(p.isSelected=!1,f.setSelected(!1)):(d.selectNodeById(f.id,M),p.isSelected=!0,m.isSilentMode||r.toFront()),y?(m.nodeTextEdit&&f.text.editable&&m.textMode===cr.TEXT&&(f.setSelected(!1),d.setElementStateById(f.id,ut.TEXT_EDIT)),d.eventCenter.emit(Ae.NODE_DBCLICK,p)):(d.eventCenter.emit(Ae.ELEMENT_CLICK,p),d.eventCenter.emit(Ae.NODE_CLICK,p))}}}},r.handleContextMenu=function(l){l.preventDefault();var u=r.props,c=u.model,f=u.graphModel,d=f.editConfigModel,h=c.getData(),v=f.getPointByClient({x:l.clientX,y:l.clientY});f.setElementStateById(c.id,ut.SHOW_MENU,v.domOverlayPosition),c.isSelected||f.selectNodeById(c.id),f.eventCenter.emit(Ae.NODE_CONTEXTMENU,{data:h,e:l,position:v}),d.isSilentMode||r.toFront()},r.handleMouseDown=function(l){var u=r.props,c=u.model,f=u.graphModel;r.startTime=new Date().getTime();var d=f.editConfigModel;d.adjustNodePosition&&c.draggable&&r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.handleFocus=function(){var l=r.props,u=l.model,c=l.graphModel;c.eventCenter.emit(Ae.NODE_FOCUS,{data:u.getData()})},r.handleBlur=function(){var l=r.props,u=l.model,c=l.graphModel;c.eventCenter.emit(Ae.NODE_BLUR,{data:u.getData()})},r.setHoverOn=function(l){var u=r.props,c=u.model,f=u.graphModel;if(!c.isHovered){var d=c.getData();c.setHovered(!0),f.eventCenter.emit(Ae.NODE_MOUSEENTER,{data:d,e:l})}},r.setHoverOff=function(l){var u=r.props,c=u.model,f=u.graphModel,d=c.getData();c.isHovered&&(c.setHovered(!1),f.eventCenter.emit(Ae.NODE_MOUSELEAVE,{data:d,e:l}))};var i=n.graphModel,o=i.gridSize,a=i.eventCenter,s=n.model;return r.stepDrag=new yr({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),r.modelDisposer=Dx(function(){return r.props},function(l){l&&l.model&&r.stepDrag.setModel(l.model)}),r}return t.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getAnchorShape=function(n){return null},t.prototype.getAnchors=function(){var n=this,r=this.props,i=r.model,o=r.graphModel,a=i.isSelected,s=i.isHitable,l=i.isDragging,u=i.isShowAnchor;return s&&(a||u)&&!l?Jn(i.anchors,function(c,f){var d=i.getAnchorLineStyle(c),h=i.getAnchorStyle(c);return V(g7,{anchorData:c,node:n,style:h,edgeStyle:d,anchorIndex:f,nodeModel:i,graphModel:o,setHoverOff:n.setHoverOff})}):[]},t.prototype.getRotateControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowRotate,l=r.isSelected,u=r.isHitable,c=r.rotatable,f=r.isHovered,d=s&&c,h=r.getRotateControlStyle();if(!a&&u&&(l||f)&&d)return V(m7,{graphModel:i,nodeModel:r,eventCenter:i.eventCenter,style:h})},t.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowResize,l=r.isSelected,u=r.isHitable,c=r.resizable,f=r.isHovered,d=s&&c,h=r.getResizeControlStyle();return!a&&u&&(l||f)&&d?V(Y8,{style:h,model:r,graphModel:i}):null},t.prototype.getText=function(){var n,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.nodeTextMode!==cr.TEXT||i.state===ut.TEXT_EDIT)return null;if(i.text){var s=!1;return a.nodeTextDraggable&&i.text.draggable&&(s=!0),V(jS,{editable:a.nodeTextEdit&&((n=i.text.editable)!==null&&n!==void 0?n:!0),model:i,graphModel:o,draggable:s})}return null},t.prototype.getStateClassName=function(){var n=this.props.model,r=n.state,i=n.isDragging,o=n.isSelected,a="lf-node";switch(r){case ut.ALLOW_CONNECT:a+=" lf-node-allow";break;case ut.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return i&&(a+=" lf-dragging"),o&&(a+=" lf-node-selected"),a},t.prototype.toFront=function(){var n=this.props,r=n.model,i=n.graphModel;r.autoToFront&&i.toFront(r.id)},t.prototype.render=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.hideAnchors,s=o.adjustNodePosition,l=o.allowRotate,u=o.allowResize,c=i.gridSize,f=i.transformModel.SCALE_X,d=r.isHitable,h=r.draggable,v=r.transform,p=r.getOuterGAttributes(),g=p.className,y=g===void 0?"":g,m=A7(p,["className"]),M=V("g",{className:"lf-node-content",children:[V("g",{transform:v,children:[this.getShape(),this.getText(),l&&this.getRotateControl(),u&&this.getResizeControl()]}),!a&&this.getAnchors()]}),T;return d?(s&&h&&this.stepDrag.setStep(c*f),T=V("g",yc({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},m,{children:M}))):T=V("g",yc({className:"".concat(this.getStateClassName()," ").concat(y)},m,{children:M})),T},t.isObserved=!1,t}(ot),C7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qh=function(){return qh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qh.apply(this,arguments)},Fo=function(e){C7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return V(ar,qh({},r,{x:n.x,y:n.y,width:n.width,height:n.height,radius:n.radius}))},t}(ao),T7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zh=function(){return Zh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Zh.apply(this,arguments)},xl=function(e){T7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.r,a=n.getNodeStyle();return V(La,Zh({},a,{x:r,y:i,r:o}))},t}(ao),M7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mc=function(){return mc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mc.apply(this,arguments)},_c=function(e){M7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=n.getNodeStyle(),c={transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")};return V("g",mc({},c,{children:V(Zv,mc({},u,{points:l,x:i,y:o}))}))},t}(ao),P7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jh=function(){return Jh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Jh.apply(this,arguments)},Qh=function(e){P7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return V("g",{children:V(Zv,Jh({},r,{points:n.points,x:n.x,y:n.y}))})},t}(ao),N7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ep=function(){return ep=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ep.apply(this,arguments)},tp=function(e){N7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return V($8,ep({},r,{x:n.x,y:n.y,rx:n.rx,ry:n.ry}))},t}(ao),R7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ws.apply(this,arguments)},D_=function(e){R7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getBackground=function(){var n=this.props.model,r=n.getTextStyle(),i=n.width,o=n.height,a=n.x,s=n.y,l=Ws(Ws({},r.background),{x:a,y:s,width:i,height:o});return V(ar,Ws({},l))},t.prototype.getResizeControl=function(){return null},t.prototype.getShape=function(){return V("g",{children:this.getBackground()})},t}(ao),D7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),np=function(){return np=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},np.apply(this,arguments)},L7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},I7=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},rp=function(e){D7(t,e);function t(){var n=e.apply(this,I7([],L7(arguments),!1))||this;return n.ref=of(),n}return Object.defineProperty(t.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),t.prototype.setHtml=function(n){n.appendChild(document.createElement("div"))},t.prototype.confirmUpdate=function(n){this.setHtml(n)},t.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},t.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},t.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.height,a=n.width,s=n.getNodeStyle();return this.currentProperties=JSON.stringify(n.properties),V("foreignObject",np({},s,{x:r-a/2,y:i-o/2,width:a,height:o,ref:this.ref}))},t}(ao),k7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xr=function(){return xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xr.apply(this,arguments)},j7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},B7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Yr;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Yr||(Yr={}));var L_=function(e){k7(t,e);function t(n){var r=e.call(this)||this;r.handleMouseDown=function(l){r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.onDragStart=function(){var l=r.props,u=l.x,c=l.y,f=l.edgeModel,d=f.startPoint,h=f.endPoint,v=f.pointsList;r.oldEdge={startPoint:d,endPoint:h,pointsList:v},r.setState({endX:u,endY:c,dragging:!0})},r.onDragging=function(l){var u=l.deltaX,c=l.deltaY,f=r.state,d=f.endX,h=f.endY,v=r.props,p=v.graphModel,g=v.type,y=p.transformModel,m=p.editConfigModel,M=B7(y.moveCanvasPointByHtml([d,h],u,c),2),T=M[0],L=M[1];r.setState({endX:T,endY:L,dragging:!0});var N=r.props.edgeModel,E=dc({x:d,y:h},p);if(E&&E.node&&r.isAllowAdjust(E).pass){var k=N.startPoint,Y=N.endPoint,ie=N.sourceNode,se=N.targetNode,pe=g===Yr.SOURCE?{startPoint:{x:E.anchor.x,y:E.anchor.y},endPoint:{x:Y.x,y:Y.y},sourceNode:E.node,targetNode:se}:{startPoint:{x:k.x,y:k.y},endPoint:{x:E.anchor.x,y:E.anchor.y},sourceNode:ie,targetNode:E.node};N.updateAfterAdjustStartAndEnd(pe)}else g===Yr.SOURCE?N.updateStartPoint({x:T,y:L}):N.updateEndPoint({x:T,y:L});N.text.value&&m.adjustEdge&&N.setText(Object.assign({},N.text,N.textPosition))},r.onDragEnd=function(l){var u,c,f,d=l.event;try{r.setState({dragging:!1});var h=r.props,v=h.graphModel,p=h.edgeModel,g=h.type,y=r.state,m=y.endX,M=y.endY,T=y.dragging,L=dc({x:m,y:M},v);if(!T)return;var N=!1,E=void 0;if(L&&L.node){var k=r.isAllowAdjust(L),Y=k.pass,ie=k.msg,se=k.newTargetNode;if(Y){var pe=p.getData(),O=pe.text,I=pe.sourceAnchorId,j=I===void 0?"":I,te=pe.targetAnchorId,fe=te===void 0?"":te,ve=j7(pe,["text","sourceAnchorId","targetAnchorId"]);if(E=xr(xr({sourceAnchorId:j,targetAnchorId:fe},ve),{text:(O==null?void 0:O.value)||""}),g===Yr.SOURCE){var Je=v.getNodeModelById(L.node.id),et=v.getNodeModelById(p.targetNodeId),xe=(u=v.edgeGenerator)===null||u===void 0?void 0:u.call(v,Je==null?void 0:Je.getData(),et==null?void 0:et.getData(),E);E=xr(xr({},xe),{sourceNodeId:L.node.id,sourceAnchorId:L.anchor.id,startPoint:{x:L.anchor.x,y:L.anchor.y},targetNodeId:p.targetNodeId,endPoint:xr({},p.endPoint)}),p.sourceNodeId===L.node.id&&p.sourceAnchorId===L.anchor.id&&(N=!0)}else if(g===Yr.TARGET){var Je=v.getNodeModelById(p.sourceNodeId),et=v.getNodeModelById(L.node.id),xe=(c=v.edgeGenerator)===null||c===void 0?void 0:c.call(v,Je==null?void 0:Je.getData(),et==null?void 0:et.getData(),E);E=xr(xr({},xe),{sourceNodeId:p.sourceNodeId,startPoint:xr({},p.startPoint),targetNodeId:L.node.id,targetAnchorId:L.anchor.id,endPoint:{x:L.anchor.x,y:L.anchor.y}}),p.targetNodeId===L.node.id&&p.targetAnchorId===L.anchor.id&&(N=!0)}}else{N=!0;var Me=se.getData();v.eventCenter.emit(Ae.CONNECTION_NOT_ALLOWED,{data:Me,msg:ie})}}else N=!0;if(N)r.recoveryEdge();else{var He=p.getData();v.deleteEdgeById(p.id);var Pe=v.addEdge(xr({},E));v.eventCenter.emit(Ae.EDGE_EXCHANGE_NODE,{data:{newEdge:Pe.getData(),oldEdge:He}})}(f=r.preTargetNode)===null||f===void 0||f.setElementState(ut.DEFAULT)}finally{var v=r.props.graphModel;v.eventCenter.emit(Ae.ADJUST_POINT_DRAGEND,{e:d,data:r.stepDragData})}},r.recoveryEdge=function(){var l=r.props.edgeModel,u=r.oldEdge,c=u.startPoint,f=u.endPoint,d=u.pointsList;l.updateStartPoint(c),l.updateEndPoint(f),l.modelType!==tt.LINE_EDGE&&(l.pointsList=d??[],l.initPoints())},r.getAdjustPointStyle=function(){var l=r.props.graphModel.theme,u=l.edgeAdjust;return u},r.state={dragging:!1,endX:0,endY:0},r.targetRuleResults=new Map,r.sourceRuleResults=new Map;var i=n.type,o=n.edgeModel,a=n.graphModel,s=a.eventCenter;return r.stepDragData={type:i,edgeData:o.getData()},r.stepDrag=new yr({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:r.stepDragData}),r}return t.prototype.isAllowAdjust=function(n){var r=this.props,i=r.edgeModel,o=i.id,a=i.sourceNode,s=i.targetNode,l=i.sourceAnchorId,u=i.targetAnchorId,c=r.type,f,d,h,v;if(c===Yr.SOURCE?(f=n.node,d=s,h=n.anchor,v=s.getAnchorInfo(u)):(f=a,d=n.node,v=n.anchor,h=a.getAnchorInfo(l)),this.preTargetNode&&this.preTargetNode!==n.node&&this.preTargetNode.setElementState(ut.DEFAULT),this.preTargetNode=n.node,v.id===h.id)return{pass:!1,msg:"",newTargetNode:d};var p="".concat(f.id,"_").concat(d.id,"_").concat(h.id,"_").concat(v.id);if(!this.targetRuleResults.has(p)){var g=f.isAllowConnectedAsSource(d,h,v,o),y=d.isAllowConnectedAsTarget(f,h,v,o);this.sourceRuleResults.set(p,hc(g)),this.targetRuleResults.set(p,hc(y))}var m=this.sourceRuleResults.get(p),M=m.isAllPass,T=m.msg,L=this.targetRuleResults.get(p),N=L.isAllPass,E=L.msg,k=M&&N?ut.ALLOW_CONNECT:ut.NOT_ALLOW_CONNECT;return c===Yr.SOURCE?f.setElementState(k):d.setElementState(k),{pass:M&&N,msg:E||T,newTargetNode:d}},t.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.getAdjustPointShape,a=n.edgeModel,s=this.state.dragging;return V("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":o(r,i,a)})},t}(ot),F7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ip=function(){return ip=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ip.apply(this,arguments)};(function(e){F7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getArrowAttributes=function(){var n=this.props,r=n.arrowInfo,i=n.style,o=r.start,a=r.end,s={start:o,end:a,offset:i.offset,verticalLength:i.verticalLength,type:"end"},l=hl(s),u=l.leftX,c=l.leftY,f=l.rightX,d=l.rightY;return ip({d:"M".concat(u," ").concat(c," L").concat(a.x," ").concat(a.y," L").concat(f," ").concat(d," z")},i)},t.prototype.getShape=function(){var n=this.getArrowAttributes(),r=n.d,i=n.strokeWidth,o=n.stroke,a=n.fill;return V(gl,{d:r,fill:a,strokeWidth:i,stroke:o})},t.prototype.render=function(){return V("g",{className:"lf-arrow",children:this.getShape()})},t})(ot);var $7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zs.apply(this,arguments)},H7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Ff=function(e){$7(t,e);function t(){var n=e.call(this)||this;return n.textRef=of(),n.handleHover=function(r,i){var o=n.props,a=o.model,s=o.graphModel.eventCenter;a.setHovered(r);var l=r?Ae.EDGE_MOUSEENTER:Ae.EDGE_MOUSELEAVE,u=a.getData();s.emit(l,{data:u,e:i})},n.setHoverOn=function(r){var i=n.props.model.isHovered;i||(n.textRef&&n.textRef.current&&n.textRef.current.setHoverOn(),n.handleHover(!0,r))},n.setHoverOff=function(r){var i=n.props.model.isHovered;i&&(n.textRef&&n.textRef.current&&n.textRef.current.setHoverOff(),n.handleHover(!1,r))},n.handleContextMenu=function(r){r.preventDefault(),n.contextMenuTime=new Date().getTime(),n.clickTimer&&clearTimeout(n.clickTimer);var i=n.props,o=i.model,a=i.graphModel,s=a.editConfigModel,l=a.getPointByClient({x:r.clientX,y:r.clientY});a.setElementStateById(o.id,ut.SHOW_MENU,l.domOverlayPosition),s.isSilentMode||n.toFront(),o.isSelected||a.selectEdgeById(o.id);var u=o==null?void 0:o.getData();a.eventCenter.emit(Ae.EDGE_CONTEXTMENU,{data:u,e:r,position:l})},n.handleMouseDown=function(r){r.stopPropagation(),n.startTime=new Date().getTime()},n.handleMouseUp=function(){var r=n.props.model;n.mouseUpDrag=r.isDragging},n.handleClick=function(r){if(n.startTime&&!n.mouseUpDrag){var i=r.button===2;if(!i){var o=r.detail===2,a=n.props,s=a.model,l=a.graphModel,u=s==null?void 0:s.getData(),c=l.getPointByClient({x:r.clientX,y:r.clientY});if(o){var f=l.editConfigModel,d=l.textEditElement,h=s.id,v=s.text,p=s.modelType;if(d&&d.id===h&&l.setElementStateById(h,ut.DEFAULT),f.edgeTextEdit&&v.editable&&(s.setSelected(!1),l.setElementStateById(h,ut.TEXT_EDIT)),p===tt.POLYLINE_EDGE){var g=s,y=l.getPointByClient({x:r.x,y:r.y}).canvasOverlayPosition,m=y.x,M=y.y;g.dbClickPosition=CS({x:m,y:M},g.points)}l.eventCenter.emit(Ae.EDGE_DBCLICK,{data:u,e:r,position:c})}else l.eventCenter.emit(Ae.ELEMENT_CLICK,{data:u,e:r,position:c}),l.eventCenter.emit(Ae.EDGE_CLICK,{data:u,e:r,position:c});var T=l.editConfigModel;l.selectEdgeById(s.id,TS(r,T)),T.isSilentMode||n.toFront()}}},n.handleFocus=function(){var r=n.props,i=r.model,o=r.graphModel;o.eventCenter.emit(Ae.EDGE_FOCUS,{data:i.getData()})},n.handleBlur=function(){var r=n.props,i=r.model,o=r.graphModel;o.eventCenter.emit(Ae.EDGE_BLUR,{data:i.getData()})},n}return t.prototype.getShape=function(){return V("g",{children:this.getEdge()})},t.prototype.getTextStyle=function(){},t.prototype.getText=function(){var n,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.edgeTextMode!==cr.TEXT||i.state===ut.TEXT_EDIT)return null;if(i.text){var s=!1;return a.edgeTextDraggable&&i.text.draggable&&(s=!0),V(S7,{ref:this.textRef,editable:a.edgeTextEdit&&((n=i.text.editable)!==null&&n!==void 0?n:!0),model:i,graphModel:o,draggable:s})}return null},t.prototype.getArrowInfo=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o=n.isSelected,a=this.state.hover;return{start:r,end:i,hover:a,isSelected:o}},t.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint;return[r,i]},t.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},t.prototype.getArrow=function(){var n=this.props.model,r=n.id,i=n.getArrowStyle(),o=i.refY,a=o===void 0?0:o,s=i.refX,l=s===void 0?2:s,u=H7(this.getLastTwoPoints(),2),c=u[0],f=u[1],d="auto";return c!==null&&f!==null&&(d=u6(l6({x:f.x-c.x,y:f.y-c.y}))),V("g",{children:V("defs",{children:[V("marker",{id:"marker-start-".concat(r),refX:-l,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),V("marker",{id:"marker-end-".concat(r),refX:l,refY:a,overflow:"visible",orient:d,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},t.prototype.getStartArrow=function(){return V("path",{})},t.prototype.getEndArrow=function(){var n=this.props.model,r=n.getArrowStyle(),i=r.stroke,o=r.strokeWidth,a=r.offset,s=r.verticalLength;return V("path",{stroke:i,fill:i,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},t.prototype.getAdjustPointShape=function(n,r,i){var o=i.getAdjustPointStyle();return V(La,zs({className:"lf-edge-adjust-point"},o,{x:n,y:r}))},t.prototype.getAdjustPoints=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.adjustEdgeStartAndEnd,s=o.adjustEdgeStart,l=o.adjustEdgeEnd,u=r.getAdjustStart(),c=r.getAdjustEnd();return V("g",{children:[a&&s&&V(L_,zs({type:Yr.SOURCE},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i})),a&&l&&V(L_,zs({type:Yr.TARGET},c,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i}))]})},t.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},t.prototype.getAppendWidth=function(){return V("g",{})},t.prototype.getAppend=function(){return V("g",{className:"lf-edge-append",children:this.getAppendWidth()})},t.prototype.getEdge=function(){return null},t.prototype.toFront=function(){var n=this.props,r=n.graphModel,i=n.model;r.toFront(i.id)},t.prototype.render=function(){var n=this.props.model,r=n.isSelected,i=n.isHitable,o=n.isShowAdjustPoint;return V("g",{children:[V("g",{className:["lf-edge",!i&&"pointer-none",r&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&r?this.getAdjustPoints():""]})},t.isObserved=!1,t}(ot),W7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),op=function(){return op=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},op.apply(this,arguments)},z7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},I_=function(e){W7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,r=n.getEdgeStyle(),i=n,o=i.path,a=i.isAnimation,s=i.arrowConfig,l=n.getEdgeAnimationStyle(),u=l.strokeDasharray,c=l.stroke,f=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return V(gl,op({d:o},r,s,a?{strokeDasharray:u,stroke:c,style:{strokeDashoffset:f,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},t.prototype.getAppendWidth=function(){var n=this.props.model.path;return V(gl,{d:n,strokeWidth:10,stroke:"transparent",fill:"none"})},t.prototype.getArrowInfo=function(){var n=this.props.model,r=this.state.hover,i=n.isSelected,o=n.getArrowStyle().offset,a=n.pointsList.map(function(f){return{x:f.x,y:f.y}}),s=z7(p_(a,o),2),l=s[0],u=s[1],c={start:l,end:u,hover:r,isSelected:i};return c},t.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.getArrowStyle().offset,i=n.pointsList.map(function(o){return{x:o.x,y:o.y}});return p_(i,r)},t}(Ff),U7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ap=function(){return ap=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ap.apply(this,arguments)},k_=function(e){U7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o=n.isAnimation,a=n.arrowConfig,s=n.getEdgeStyle(),l=n.getEdgeAnimationStyle(),u=l.strokeDasharray,c=l.stroke,f=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return V(Da,ap({},s,{x1:r.x,y1:r.y,x2:i.x,y2:i.y},a,o?{strokeDasharray:u,stroke:c,style:{strokeDashoffset:f,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},t.prototype.getAppendWidth=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o={start:r,end:i},a=v8(o),s=a.d,l=a.strokeWidth,u=a.fill,c=a.strokeDasharray,f=a.stroke;return V(gl,{d:s,fill:u,strokeWidth:l,stroke:f,strokeDasharray:c})},t}(Ff),X7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(){return xo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xo.apply(this,arguments)},G7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},wl=function(e){X7(t,e);function t(){var n=e.call(this)||this;return n.onDragStart=function(){var r=n.props.model;r.dragAppendStart(),n.isShowAdjustPointTemp=r.isShowAdjustPoint,r.isShowAdjustPoint=!1},n.onDragging=function(r){var i=r.deltaX,o=r.deltaY,a=n.props,s=a.model,l=a.graphModel;n.isDragging=!0;var u=l.transformModel,c=l.editConfigModel,f=G7(u.fixDeltaXY(i,o),2),d=f[0],h=f[1],v=s,p=c.adjustEdgeMiddle;p?n.appendInfo=v.dragAppendSimple(n.appendInfo,{x:d,y:h}):n.appendInfo=v.dragAppend(n.appendInfo,{x:d,y:h})},n.onDragEnd=function(){var r,i=n.props,o=i.model,a=i.graphModel.eventCenter,s=o;s.dragAppendEnd(),n.isDragging=!1,s.isShowAdjustPoint=(r=n.isShowAdjustPointTemp)!==null&&r!==void 0?r:!1,n.appendInfo=void 0,a.emit(Ae.EDGE_ADJUST,{data:s.getData()})},n.beforeDragStart=function(r,i){i.draggable&&n.drag.handleMouseDown(r),n.appendInfo=i},n.drag=new yr({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,isStopPropagation:!1}),n}return t.prototype.getEdge=function(){var n=this.props.model,r=n.points,i=n.isAnimation,o=n.arrowConfig,a=n.getEdgeStyle(),s=n.getEdgeAnimationStyle(),l=s.strokeDasharray,u=s.stroke,c=s.strokeDashoffset,f=s.animationName,d=s.animationDuration,h=s.animationIterationCount,v=s.animationTimingFunction,p=s.animationDirection;return V(z8,xo({points:r},a,o,i?{strokeDasharray:l,stroke:u,style:{strokeDashoffset:c,animationName:f,animationDuration:d,animationIterationCount:h,animationTimingFunction:v,animationDirection:p}}:{}))},t.prototype.getArrowInfo=function(){var n=this.props.model,r=n.points,i=n.isSelected,o=this.state.hover,a=Bo(r),s=a[0],l=a[0];return a.length>=2&&(s=a[a.length-2],l=a[a.length-1]),{start:s,end:l,hover:o,isSelected:i}},t.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.points,i=Bo(r),o=i[0],a=i[0];return i.length>=2&&(o=i[i.length-2],a=i[i.length-1]),[o,a]},t.prototype.getAppendAttributes=function(n){var r=n.start,i=n.end,o;if(r.x===i.x&&r.y===i.y)o="";else{var a={start:r,end:i,offset:10,verticalLength:5},s=hl(xo(xo({},a),{type:"start"})),l=hl(xo(xo({},a),{type:"end"}));o="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(l.rightX," ").concat(l.rightY,`
      L`).concat(l.leftX," ").concat(l.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},t.prototype.getAppendShape=function(n){var r=this.getAppendAttributes(n),i=r.d,o=r.strokeWidth,a=r.fill,s=r.strokeDasharray,l=r.stroke;return V(gl,{d:i,fill:a,strokeWidth:o,stroke:l,strokeDasharray:s})},t.prototype.getAppendWidth=function(){for(var n=this,r=this.props,i=r.model,o=r.graphModel,a=i.pointsList,s=i.draggable,l=[],u=a.length,c=function(h){var v="lf-polyline-append",p={start:{x:a[h].x,y:a[h].y},end:{x:a[h+1].x,y:a[h+1].y},startIndex:h,endIndex:h+1,direction:Rt.HORIZONTAL,draggable:!0},g=V("g",{className:v,children:f.getAppendShape(p)}),y=o.editConfigModel,m=y.adjustEdge,M=y.adjustEdgeMiddle;if(m&&s){var T=p.startIndex,L=p.endIndex,N=M&&(T===0||L===u-1);p.draggable=!N,p.start.x===p.end.x?(p.draggable&&(v+="-ew-resize"),p.direction=Rt.VERTICAL):p.start.y===p.end.y&&(p.draggable&&(v+="-ns-resize"),p.direction=Rt.HORIZONTAL),g=V("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(E){return n.beforeDragStart(E,p)},children:V("g",{className:v,children:f.getAppendShape(p)})})}l.push(g)},f=this,d=0;d<u-1;d++)c(d);return V("g",{children:l})},t}(Ff),fa=function(){return fa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fa.apply(this,arguments)},Y7=function(){function e(t){var n=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){n.nodeConfig=null,window.document.removeEventListener("mouseup",n.stopDrag)},this.dragEnter=function(i){!n.nodeConfig||n.fakeNode||(n.fakeNode=n.lf.createFakeNode(fa(fa({},n.nodeConfig),n.clientToLocalPoint({x:i.clientX,y:i.clientY}))))},this.onDragOver=function(i){if(i.preventDefault(),n.fakeNode){var o=n.clientToLocalPoint({x:i.clientX,y:i.clientY}),a=o.x,s=o.y;n.fakeNode.moveTo(a,s);var l=n.fakeNode.getData();n.lf.setNodeSnapLine(l),n.lf.graphModel.eventCenter.emit(Ae.NODE_DND_DRAG,{data:l,e:i})}return!1},this.onDragLeave=function(){n.fakeNode&&(n.lf.removeNodeSnapLine(),n.lf.graphModel.removeFakeNode(),n.fakeNode=null)},this.onDrop=function(i){!n.lf.graphModel||!i||!n.nodeConfig||(n.lf.addNode(fa(fa({},n.nodeConfig),n.clientToLocalPoint({x:i.clientX,y:i.clientY})),Ae.NODE_DND_ADD,i),i.preventDefault(),i.stopPropagation(),n.nodeConfig=null,n.lf.removeNodeSnapLine(),n.lf.graphModel.removeFakeNode(),n.fakeNode=null)};var r=t.lf;this.lf=r}return e.prototype.clientToLocalPoint=function(t){var n=t.x,r=t.y,i=eo(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:n,y:r}),a=o.canvasOverlayPosition,s=a.x,l=a.y,u=this.lf.graphModel.editConfigModel.snapGrid;return{x:Ra(s,i,u),y:Ra(l,i,u)}},e.prototype.startDrag=function(t){var n=this.lf.graphModel.editConfigModel;n!=null&&n.isSilentMode||(this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag))},e.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},e}();function K7(e,t){e.on("node:mousemove",function(n){var r=n.data;t.setNodeSnapLine(r)}),e.on("node:mouseup",function(){t.clearSnapline()})}var V7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),di=function(){return di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},di.apply(this,arguments)},q7=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Z7=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},J7=function(e){V7(t,e);function t(n){var r=e.call(this,n)||this;return r.ref=of(),r.__prevText={type:"",text:"",id:""},r.keyupHandler=function(i){var o=r.props.graphModel.textEditElement;i.key==="Enter"&&i.altKey&&(o==null||o.setElementState(ut.DEFAULT))},r.inputHandler=function(i){var o=i.target.innerText,a=r.props.graphModel.textEditElement;a&&(r.__prevText={type:a.type,text:o.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},r.keydownHandler=function(i){i.stopPropagation()},r.state={style:{left:0,top:0}},r}return t.getDerivedStateFromProps=function(n){var r,i=n.textEditElement,o=n.graphModel,a=o.transformModel,s=o.theme,l=s.inputText,u;if(i){if(!(!((r=i.text)===null||r===void 0)&&r.value)&&i.BaseType===It.EDGE){var c=i.text,f=i.textPosition,d=f.x,h=f.y;c.x=d,c.y=h,i.setText(c)}var v={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===It.EDGE){var p=s.edgeText,g=p.overflowMode,y=p.lineHeight,m=p.wrapPadding,M=p.textWidth;M&&g==="autoWrap"&&(u=di(di({},v),{width:M,minWidth:M,lineHeight:y,padding:m}))}else if(i.BaseType===It.NODE){var T=s.nodeText,g=T.overflowMode,y=T.lineHeight,m=T.wrapPadding,M=T.textWidth,L=i.width,N=i.modelType,E=i.textWidth,k=E||M||L;(N!==tt.TEXT_NODE&&g==="autoWrap"||N===tt.TEXT_NODE&&M)&&(u=di(di({},v),{width:k,minWidth:k,lineHeight:y,padding:m}))}var Y=i.text,ie=Y.x,se=Y.y,pe=Z7(a.CanvasPointToHtmlPoint([ie,se]),2),O=pe[0],I=pe[1];return{style:di(di({left:O,top:I},u),l)}}return null},t.prototype.componentDidUpdate=function(){var n=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var r=this.__prevText,i=r.text,o=r.id;n.updateText(o,i),n.eventCenter.emit(Ae.TEXT_UPDATE,{data:di({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},t.prototype.placeCaretAtEnd=function(n){if(window.getSelection!==void 0&&document.createRange!==void 0){var r=document.createRange();r.selectNodeContents(n),r.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(r)}},t.prototype.render=function(){var n,r=this.props.graphModel.textEditElement,i=this.state.style;return r?V("div",{contentEditable:!0,className:"lf-text-input",style:i,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(n=r.text)===null||n===void 0?void 0:n.value},r.id):null},t.toolName="text-edit-tool",t=q7([On],t),t}(ot),Q7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eW=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Ed=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},tW=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},nW=function(e){Q7(t,e);function t(n){var r=e.call(this,n)||this;r.handleMouseDown=function(s){r.stepDrag.handleMouseDown(s)},r.handleWheelEvent=function(s){var l,u;s.preventDefault();var c=s.deltaX,f=s.deltaY,d=s.clientX,h=s.clientY,v=s.ctrlKey,p=new WheelEvent("wheel",{deltaX:c,deltaY:f,clientX:d,clientY:h,ctrlKey:v});(u=(l=r.props.lf.container)===null||l===void 0?void 0:l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||u===void 0||u.dispatchEvent(p)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,c=r.props,f=c.graphModel,d=c.lf,h=d.getTransform(),v=h.SCALE_X,p=h.SCALE_Y,g=f.getSelectElements(!0);f.moveNodes(g.nodes.map(function(y){return y.id}),l/v,u/p)},r.handleContextMenu=function(s){s.preventDefault();var l=r.props,u=l.graphModel,c=l.graphModel,f=c.eventCenter,d=c.selectElements,h=u.getPointByClient({x:s.clientX,y:s.clientY}),v={nodes:[],edges:[]},p=tW([],Ed(d.values()),!1);p.forEach(function(g){g.BaseType===It.NODE&&v.nodes.push(g.getData()),g.BaseType===It.EDGE&&v.edges.push(g.getData())}),f.emit(Ae.SELECTION_CONTEXTMENU,{data:v,e:s,position:h})};var i=n.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new yr({onDragging:r.onDragging,step:o,eventType:"SELECTION",eventCenter:a}),r}return t.prototype.render=function(){var n,r,i=this.props.graphModel,o=i.selectElements,a=i.transformModel,s=this.props.lf.getTransform(),l=s.SCALE_X,u=s.SCALE_Y;if(!(o.size<=1)){var c=Number.MAX_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;o.forEach(function(p){var g;p.BaseType===It.NODE&&(g=J5(p)),p.BaseType===It.EDGE&&(g=n8(p)),g!==void 0&&(c=Math.min(c,g.x),f=Math.min(f,g.y),d=Math.max(d,g.x1),h=Math.max(h,g.y1))}),n=Ed(a.CanvasPointToHtmlPoint([c,f]),2),c=n[0],f=n[1],r=Ed(a.CanvasPointToHtmlPoint([d,h]),2),d=r[0],h=r[1];var v={left:"".concat(c-20*l/2,"px"),top:"".concat(f-20*u/2,"px"),width:"".concat(d-c+20*l,"px"),height:"".concat(h-f+20*u,"px"),"border-width":"".concat(2*l,"px")};return V("div",{className:"lf-multiple-select",style:v,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},t.toolName="multiple-select-tool",t=eW([On],t),t}(ot),Sd=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},rW=[J7,nW],iW=function(){function e(t){var n=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=t,pt(rW,function(o){n.isDisabled(o.toolName)||n.registerTool(o.toolName,o)});var r=t.graphModel,i=r.eventCenter;i.on("".concat(Ae.GRAPH_TRANSFORM,",").concat(Ae.NODE_CLICK,",").concat(Ae.BLANK_CLICK," "),function(){var o,a=r.textEditElement,s=r.editConfigModel,l=s.edgeTextEdit,u=s.nodeTextEdit;(l||u)&&a&&((o=r.textEditElement)===null||o===void 0||o.setElementState(ut.DEFAULT))})}return e.prototype.isDisabled=function(t){var n;return((n=this.instance.options.disabledTools)===null||n===void 0?void 0:n.indexOf(t))!==-1},e.prototype.registerTool=function(t,n){this.toolMap.set(t,n)},e.prototype.disableTool=function(t){var n=this.toolMap.get(t);if(n)return this.disabledToolMap.set(t,n),this.toolMap.delete(t),!0;throw new Error("禁用失败，不存在名为 ".concat(n," 的工具"))},e.prototype.enableTool=function(t){var n=this.disabledToolMap.get(t);if(n)return this.toolMap.set(t,n),this.disabledToolMap.delete(t),!0;throw new Error("不存在名为 ".concat(n," 的工具"))},e.prototype.getTools=function(){return Array.from(this.toolMap.values())},e.prototype.getInstance=function(){return this.instance},e.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},Sd([q],e.prototype,"toolMap",void 0),Sd([K],e.prototype,"disableTool",null),Sd([K],e.prototype,"enableTool",null),e}();function oW(e){throw new Error("[mobx-utils] "+e)}function bc(e,t){t===void 0&&(t="Illegal state"),e||oW(t)}var BS=function(e){return e&&e!==Object.prototype&&Object.getOwnPropertyNames(e).concat(BS(Object.getPrototypeOf(e))||[])},aW=function(e){var t=BS(e),n=t.filter(function(r,i){return t.indexOf(r)===i});return n},sW=function(e){return aW(e).filter(function(t){return t!=="constructor"&&!~t.indexOf("__")})},FS="pending",xc="fulfilled",Qv="rejected";function lW(e){switch(this.state){case FS:return e.pending&&e.pending(this.value);case Qv:return e.rejected&&e.rejected(this.value);case xc:return e.fulfilled?e.fulfilled(this.value):this.value}}function j_(e,t){if(bc(arguments.length<=2,"fromPromise expects up to two arguments"),bc(typeof e=="function"||typeof e=="object"&&e&&typeof e.then=="function","Please pass a promise or function to fromPromise"),e.isPromiseBasedObservable===!0)return e;typeof e=="function"&&(e=new Promise(e));var n=e;e.then(K("observableFromPromise-resolve",function(i){n.value=i,n.state=xc}),K("observableFromPromise-reject",function(i){n.value=i,n.state=Qv})),n.isPromiseBasedObservable=!0,n.case=lW;var r=t&&t.state===xc?t.value:void 0;return hh(n,{value:r,state:FS},{},{deep:!1}),n}(function(e){e.reject=K("fromPromise.reject",function(n){var r=e(Promise.reject(n));return r.state=Qv,r.value=n,r});function t(n){n===void 0&&(n=void 0);var r=e(Promise.resolve(n));return r.state=xc,r.value=n,r}e.resolve=K("fromPromise.resolve",t)})(j_||(j_={}));var du=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};(function(){function e(t,n){var r=this;NP(function(){r.current=n,r.subscription=t.subscribe(r)})}return e.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.next=function(t){this.current=t},e.prototype.complete=function(){this.dispose()},e.prototype.error=function(t){this.current=t,this.dispose()},du([q.ref],e.prototype,"current",void 0),du([K.bound],e.prototype,"next",null),du([K.bound],e.prototype,"complete",null),du([K.bound],e.prototype,"error",null),e})();var wc=function(){return wc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wc.apply(this,arguments)},ds=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},uW=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function e(t){var n=this;this.model=t,this.localValues=q.map({}),this.localComputedValues=q.map({}),this.isPropertyDirty=function(r){return n.localValues.has(r)},bc(jr(t),"createViewModel expects an observable object"),sW(t).forEach(function(r){if(!(r===$e||r==="__mobxDidRunLazyInitializers")){if(bc(uW.indexOf(r)===-1,"The propertyname "+r+" is reserved and cannot be used with viewModels"),Sy(t,r)){var i=cf(t,r).derivation;n.localComputedValues.set(r,Ct(i.bind(n)))}var o=Object.getOwnPropertyDescriptor(t,r),a=o?{enumerable:o.enumerable}:{};Object.defineProperty(n,r,wc(wc({},a),{configurable:!0,get:function(){return Sy(t,r)?n.localComputedValues.get(r).get():n.isPropertyDirty(r)?n.localValues.get(r):n.model[r]},set:K(function(s){s!==n.model[r]?n.localValues.set(r,s):n.localValues.delete(r)})}))}})}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),e.prototype.submit=function(){var t=this;Pa(this.localValues).forEach(function(n){var r=t.localValues.get(n),i=t.model[n];ni(i)?i.replace(r):In(i)?(i.clear(),i.merge(r)):BP(r)||(t.model[n]=r)}),this.localValues.clear()},e.prototype.reset=function(){this.localValues.clear()},e.prototype.resetProperty=function(t){this.localValues.delete(t)},ds([Ct],e.prototype,"isDirty",null),ds([Ct],e.prototype,"changedValues",null),ds([K.bound],e.prototype,"submit",null),ds([K.bound],e.prototype,"reset",null),ds([K.bound],e.prototype,"resetProperty",null),e})();function Od(e){if(!e)return"ROOT";for(var t=[];e.parent;)t.push(e.path),e=e.parent;return t.reverse().join("/")}function Ad(e){return jr(e)||ni(e)||In(e)}function cW(e,t){var n=new WeakMap;function r(s){var l=n.get(s.object);i(s,l),t(s,Od(l),e)}function i(s,l){switch(s.type){case"add":o(s.newValue,l,s.name);break;case"update":a(s.oldValue),o(s.newValue,l,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(f,d){return o(f,l,""+(s.index+d))});for(var u=s.index+s.addedCount;u<s.object.length;u++)if(Ad(s.object[u])){var c=n.get(s.object[u]);c&&(c.path=""+u)}break}}function o(s,l,u){if(Ad(s)){var c=n.get(s);if(c){if(c.parent!==l||c.path!==u)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+Od(l)+"/"+u+"',")+(" but it already exists at '"+Od(c.parent)+"/"+c.path+"'"))}else{var f={parent:l,path:u,dispose:$x(s,r)};n.set(s,f),HP(s).forEach(function(d){var h=d[0],v=d[1];return o(v,f,h)})}}}function a(s){if(Ad(s)){var l=n.get(s);if(!l)return;n.delete(s),l.dispose(),$P(s).forEach(a)}}return o(e,void 0,""),function(){a(e)}}var fW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(e){fW(t,e);function t(n,r,i){var o=i===void 0?{}:i,a=o.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=o.keyToName,u=l===void 0?function(d){return""+d}:l,c=e.call(this)||this;c._keyToName=u,c._groupBy=r,c._ogmInfoKey=Symbol("ogmInfo"+s),c._base=n;for(var f=0;f<n.length;f++)c._addItem(n[f]);return c._disposeBaseObserver=$x(c._base,function(d){if(d.type==="splice")Sr(function(){for(var h=0,v=d.removed;h<v.length;h++){var p=v[h];c._removeItem(p)}for(var g=0,y=d.added;g<y.length;g++){var m=y[g];c._addItem(m)}});else if(d.type==="update")Sr(function(){c._removeItem(d.oldValue),c._addItem(d.newValue)});else throw new Error("illegal state")}),c}return t.prototype.clear=function(){throw new Error("not supported")},t.prototype.delete=function(n){throw new Error("not supported")},t.prototype.set=function(n,r){throw new Error("not supported")},t.prototype.dispose=function(){this._disposeBaseObserver();for(var n=0;n<this._base.length;n++){var r=this._base[n],i=r[this._ogmInfoKey];i.reaction(),delete r[this._ogmInfoKey]}},t.prototype._getGroupArr=function(n){var r=e.prototype.get.call(this,n);return r===void 0&&(r=q([],{name:"GroupArray["+this._keyToName(n)+"]",deep:!1}),e.prototype.set.call(this,n,r)),r},t.prototype._removeFromGroupArr=function(n,r){var i=e.prototype.get.call(this,n);i.length===1?e.prototype.delete.call(this,n):(r===i.length-1||(i[r]=i[i.length-1],i[r][this._ogmInfoKey].groupArrIndex=r),i.length--)},t.prototype._addItem=function(n){var r=this,i=this._groupBy(n),o=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:o.length,reaction:Dx(function(){return r._groupBy(n)},function(s,l){var u=n[r._ogmInfoKey];r._removeFromGroupArr(u.groupByValue,u.groupArrIndex);var c=r._getGroupArr(s),f=c.length;c.push(n),u.groupByValue=s,u.groupArrIndex=f})};Object.defineProperty(n,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),o.push(n)},t.prototype._removeItem=function(n){var r=n[this._ogmInfoKey];this._removeFromGroupArr(r.groupByValue,r.groupArrIndex),r.reaction(),delete n[this._ogmInfoKey]},t})(Jp);Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;var sp=function(){return sp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sp.apply(this,arguments)},dW=function(){function e(t){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=t}return e.prototype.add=function(t){Oh(Zn(this.undos),t)||(this.undos.push(t),Oh(this.curData,t)||(this.redos=[]),this.eventCenter.emit(Ae.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},e.prototype.undoAble=function(){return this.undos.length>1},e.prototype.undo=function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var n=this.undos.pop();return this.curData=ze(n),n}},e.prototype.redoAble=function(){return this.redos.length>0},e.prototype.redo=function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=ze(t),t}},e.prototype.watch=function(t){var n=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=cW(t,Sf(function(){var r=t.modelToHistoryData();r&&n.add(sp({},r))},this.waitTime))},e.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},e}(),Cd={exports:{}},B_;function hW(){return B_||(B_=1,function(e){(function(t,n,r){if(!t)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function c(E,k,Y){if(E.addEventListener){E.addEventListener(k,Y,!1);return}E.attachEvent("on"+k,Y)}function f(E){if(E.type=="keypress"){var k=String.fromCharCode(E.which);return E.shiftKey||(k=k.toLowerCase()),k}return i[E.which]?i[E.which]:o[E.which]?o[E.which]:String.fromCharCode(E.which).toLowerCase()}function d(E,k){return E.sort().join(",")===k.sort().join(",")}function h(E){var k=[];return E.shiftKey&&k.push("shift"),E.altKey&&k.push("alt"),E.ctrlKey&&k.push("ctrl"),E.metaKey&&k.push("meta"),k}function v(E){if(E.preventDefault){E.preventDefault();return}E.returnValue=!1}function p(E){if(E.stopPropagation){E.stopPropagation();return}E.cancelBubble=!0}function g(E){return E=="shift"||E=="ctrl"||E=="alt"||E=="meta"}function y(){if(!l){l={};for(var E in i)E>95&&E<112||i.hasOwnProperty(E)&&(l[i[E]]=E)}return l}function m(E,k,Y){return Y||(Y=y()[E]?"keydown":"keypress"),Y=="keypress"&&k.length&&(Y="keydown"),Y}function M(E){return E==="+"?["+"]:(E=E.replace(/\+{2}/g,"+plus"),E.split("+"))}function T(E,k){var Y,ie,se,pe=[];for(Y=M(E),se=0;se<Y.length;++se)ie=Y[se],s[ie]&&(ie=s[ie]),k&&k!="keypress"&&a[ie]&&(ie=a[ie],pe.push("shift")),g(ie)&&pe.push(ie);return k=m(ie,pe,k),{key:ie,modifiers:pe,action:k}}function L(E,k){return E===null||E===n?!1:E===k?!0:L(E.parentNode,k)}function N(E){var k=this;if(E=E||n,!(k instanceof N))return new N(E);k.target=E,k._callbacks={},k._directMap={};var Y={},ie,se=!1,pe=!1,O=!1;function I(xe){xe=xe||{};var Me=!1,He;for(He in Y){if(xe[He]){Me=!0;continue}Y[He]=0}Me||(O=!1)}function j(xe,Me,He,Pe,Xe,B){var D,F,U=[],Q=He.type;if(!k._callbacks[xe])return[];for(Q=="keyup"&&g(xe)&&(Me=[xe]),D=0;D<k._callbacks[xe].length;++D)if(F=k._callbacks[xe][D],!(!Pe&&F.seq&&Y[F.seq]!=F.level)&&Q==F.action&&(Q=="keypress"&&!He.metaKey&&!He.ctrlKey||d(Me,F.modifiers))){var de=!Pe&&F.combo==Xe,A=Pe&&F.seq==Pe&&F.level==B;(de||A)&&k._callbacks[xe].splice(D,1),U.push(F)}return U}function te(xe,Me,He,Pe){k.stopCallback(Me,Me.target||Me.srcElement,He,Pe)||xe(Me,He)===!1&&(v(Me),p(Me))}k._handleKey=function(xe,Me,He){var Pe=j(xe,Me,He),Xe,B={},D=0,F=!1;for(Xe=0;Xe<Pe.length;++Xe)Pe[Xe].seq&&(D=Math.max(D,Pe[Xe].level));for(Xe=0;Xe<Pe.length;++Xe){if(Pe[Xe].seq){if(Pe[Xe].level!=D)continue;F=!0,B[Pe[Xe].seq]=1,te(Pe[Xe].callback,He,Pe[Xe].combo,Pe[Xe].seq);continue}F||te(Pe[Xe].callback,He,Pe[Xe].combo)}var U=He.type=="keypress"&&pe;He.type==O&&!g(xe)&&!U&&I(B),pe=F&&He.type=="keydown"};function fe(xe){typeof xe.which!="number"&&(xe.which=xe.keyCode);var Me=f(xe);if(Me){if(xe.type=="keyup"&&se===Me){se=!1;return}k.handleKey(Me,h(xe),xe)}}function ve(){clearTimeout(ie),ie=setTimeout(I,1e3)}function Je(xe,Me,He,Pe){Y[xe]=0;function Xe(Q){return function(){O=Q,++Y[xe],ve()}}function B(Q){te(He,Q,xe),Pe!=="keyup"&&(se=f(Q)),setTimeout(I,10)}for(var D=0;D<Me.length;++D){var F=D+1===Me.length,U=F?B:Xe(Pe||T(Me[D+1]).action);et(Me[D],U,Pe,xe,D)}}function et(xe,Me,He,Pe,Xe){k._directMap[xe+":"+He]=Me,xe=xe.replace(/\s+/g," ");var B=xe.split(" "),D;if(B.length>1){Je(xe,B,Me,He);return}D=T(xe,He),k._callbacks[D.key]=k._callbacks[D.key]||[],j(D.key,D.modifiers,{type:D.action},Pe,xe,Xe),k._callbacks[D.key][Pe?"unshift":"push"]({callback:Me,modifiers:D.modifiers,action:D.action,seq:Pe,level:Xe,combo:xe})}k._bindMultiple=function(xe,Me,He){for(var Pe=0;Pe<xe.length;++Pe)et(xe[Pe],Me,He)},c(E,"keypress",fe),c(E,"keydown",fe),c(E,"keyup",fe)}N.prototype.bind=function(E,k,Y){var ie=this;return E=E instanceof Array?E:[E],ie._bindMultiple.call(ie,E,k,Y),ie},N.prototype.unbind=function(E,k){var Y=this;return Y.bind.call(Y,E,function(){},k)},N.prototype.trigger=function(E,k){var Y=this;return Y._directMap[E+":"+k]&&Y._directMap[E+":"+k]({},E),Y},N.prototype.reset=function(){var E=this;return E._callbacks={},E._directMap={},E},N.prototype.stopCallback=function(E,k){var Y=this;if((" "+k.className+" ").indexOf(" mousetrap ")>-1||L(k,Y.target))return!1;if("composedPath"in E&&typeof E.composedPath=="function"){var ie=E.composedPath()[0];ie!==E.target&&(k=ie)}return k.tagName=="INPUT"||k.tagName=="SELECT"||k.tagName=="TEXTAREA"||k.isContentEditable},N.prototype.handleKey=function(){var E=this;return E._handleKey.apply(E,arguments)},N.addKeycodes=function(E){for(var k in E)E.hasOwnProperty(k)&&(i[k]=E[k]);l=null},N.init=function(){var E=N(n);for(var k in E)k.charAt(0)!=="_"&&(N[k]=function(Y){return function(){return E[Y].apply(E,arguments)}}(k))},N.init(),t.Mousetrap=N,e.exports&&(e.exports=N)})(typeof window<"u"?window:null,typeof window<"u"?document:null)}(Cd)),Cd.exports}var pW=hW();const vW=Bf(pW);var Hr=null;function F_(e,t){return e.x+=t,e.y+=t,Iv(e.text)||(e.text.x+=t,e.text.y+=t),e}function $_(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),Iv(e.text)||(e.text.x+=t,e.text.y+=t),e}var na=40,hu=40;function gW(e,t){var n=e.keyboard,r=n.options.keyboard;n.on(["cmd + c","ctrl + c"],function(){if(hu=na,!(r!=null&&r.enabled)||t.textEditElement)return!0;var i=e.options.guards,o=t.getSelectElements(!1),a=i&&i.beforeClone?i.beforeClone(o):!0;return!a||o.nodes.length===0&&o.edges.length===0?(Hr=null,!0):(Hr=o,Hr.nodes.forEach(function(s){return F_(s,na)}),Hr.edges.forEach(function(s){return $_(s,na)}),!1)}),n.on(["cmd + v","ctrl + v"],function(){if(!(r!=null&&r.enabled)||t.textEditElement)return!0;if(Hr&&(Hr.nodes||Hr.edges)){e.clearSelectElements();var i=e.addElements(Hr,hu);if(!i)return!0;i.nodes.forEach(function(o){return e.selectElementById(o.id,!0)}),i.edges.forEach(function(o){return e.selectElementById(o.id,!0)}),Hr.nodes.forEach(function(o){return F_(o,na)}),Hr.edges.forEach(function(o){return $_(o,na)}),hu=hu+na}return!1}),n.on(["cmd + z","ctrl + z"],function(){return!(r!=null&&r.enabled)||t.textEditElement?!0:(e.undo(),!1)}),n.on(["cmd + y","ctrl + y"],function(){return!(r!=null&&r.enabled)||t.textEditElement?!0:(e.redo(),!1)}),n.on(["backspace"],function(){if(!(r!=null&&r.enabled)||t.textEditElement)return!0;var i=t.getSelectElements(!0);return e.clearSelectElements(),i.edges.forEach(function(o){return o.id&&e.deleteEdge(o.id)}),i.nodes.forEach(function(o){return o.id&&e.deleteNode(o.id)}),!1})}var yW=function(){function e(t){t.keyboard||(t.keyboard={enabled:!1}),this.options=t;var n=t.lf;this.target=n.container,this.mousetrap=new vW(this.target),t.keyboard.enabled&&!n.options.isSilentMode&&this.enable(!0)}return e.prototype.initShortcuts=function(){var t=this,n,r=((n=this.options.keyboard)!==null&&n!==void 0?n:{}).shortcuts;if(r)if(Ke(r))r.forEach(function(s){var l=s.keys,u=s.callback,c=s.action;return t.on(l,u,c)});else{var i=r.keys,o=r.callback,a=r.action;this.on(i,o,a)}},e.prototype.on=function(t,n,r){this.mousetrap.bind(this.getKeys(t),n,r)},Object.defineProperty(e.prototype,"disabled",{get:function(){var t,n;return((n=(t=this.options)===null||t===void 0?void 0:t.keyboard)===null||n===void 0?void 0:n.enabled)!==!0},enumerable:!1,configurable:!0}),e.prototype.off=function(t,n){this.mousetrap.unbind(this.getKeys(t),n)},e.prototype.enable=function(t){(this.disabled||t)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},e.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},e.prototype.destroy=function(){this.mousetrap.reset()},e.prototype.getKeys=function(t){var n=this;return(Array.isArray(t)?t:[t]).map(function(r){return n.formatKey(r)})},e.prototype.formatKey=function(t){return t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},e}(),$i=function(){return $i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$i.apply(this,arguments)},pu=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Td=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Md=Symbol("plugin registered by Logicflow.use"),lp=function(){function e(t){var n=this,r;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(u,c){return n.viewMap.set(u,c)},this.getView=function(u){return n.viewMap.get(u)};var i=fl.get(t),o=i.container,a=i.width,s=i.height;this.options=i,this.container=this.initContainer(o,a,s),this.graphModel=new o7($i($i({},i),{container:this.container})),this.plugins=(r=i.plugins)!==null&&r!==void 0?r:[];var l=this.graphModel.eventCenter;this.tool=new iW(this),this.dnd=new Y7({lf:this}),this.history=new dW(l),this.keyboard=new yW({lf:this,keyboard:i.keyboard}),i.snapline!==!1&&(this.snaplineModel=new a7(this.graphModel),K7(l,this.snaplineModel)),i.isSilentMode||(gW(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(i.disabledPlugins)}return e.prototype.initContainer=function(t,n,r){var i=document.createElement("div");return i.style.position="relative",i.style.width=n?"".concat(n,"px"):"100%",i.style.height=r?"".concat(r,"px"):"100%",t.innerHTML="",t.appendChild(i),i},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return e.toStringTag},enumerable:!1,configurable:!0}),e.prototype.register=function(t,n,r){if(r===void 0&&(r=!0),typeof t!="string"){this.registerElement(t);return}var i={BaseEdge:Ff,BaseEdgeModel:jf,BaseNode:ao,BaseNodeModel:oo,RectNode:Fo,RectNodeModel:Ia,CircleNode:xl,CircleNodeModel:_l,PolygonNode:_c,PolygonNodeModel:vc,TextNode:D_,TextNodeModel:P_,LineEdge:k_,LineEdgeModel:A_,DiamondNode:Qh,DiamondNodeModel:zh,PolylineEdge:wl,PolylineEdgeModel:ml,BezierEdge:I_,BezierEdgeModel:S_,EllipseNode:tp,EllipseNodeModel:Uh,HtmlNode:rp,HtmlNodeModel:Xh,h:Te,type:t};if(this.viewMap.forEach(function(u){var c=u.extendKey;c&&(i[c]=u)}),this.graphModel.modelMap.forEach(function(u){var c=u.extendKey;c&&(i[c]=u)}),n){var o=n(i),a=o.view,s=o.model,l=a;r&&!l.isObserved&&(l.isObserved=!0,l=On(l)),this.setView(t,l),this.graphModel.setModel(t,s)}},e.prototype.registerElement=function(t){var n=t.view;t.isObserverView!==!1&&!n.isObserved&&(n.isObserved=!0,n=On(n)),this.setView(t.type,n),this.graphModel.setModel(t.type,t.model)},e.prototype.batchRegister=function(t){var n=this;t===void 0&&(t=[]),pt(t,function(r){n.registerElement(r)})},e.prototype.defaultRegister=function(){var t=[{type:"rect",view:Fo,model:Ia},{type:"circle",view:xl,model:_l},{type:"polygon",view:_c,model:vc},{type:"text",view:D_,model:P_},{type:"ellipse",view:tp,model:Uh},{type:"diamond",view:Qh,model:zh},{type:"html",view:rp,model:Xh},{type:"line",view:k_,model:A_},{type:"polyline",view:wl,model:ml},{type:"bezier",view:I_,model:S_}];this.batchRegister(t)},e.prototype.addNode=function(t,n,r){return n===void 0&&(n=Ae.NODE_ADD),this.graphModel.addNode(t,n,r)},e.prototype.deleteNode=function(t){var n=this.graphModel.getNodeModelById(t);if(!n)return!1;var r=n.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteNode(t),o},e.prototype.cloneNode=function(t){var n=this.graphModel.getNodeModelById(t),r=n==null?void 0:n.getData();if(r){var i=this.options.guards,o=i!=null&&i.beforeClone?i.beforeClone(r):!0;if(o)return this.graphModel.cloneNode(t)}},e.prototype.changeNodeId=function(t,n){return this.graphModel.changeNodeId(t,n)},e.prototype.changeNodeType=function(t,n){this.graphModel.changeNodeType(t,n)},e.prototype.getNodeModelById=function(t){return this.graphModel.getNodeModelById(t)},e.prototype.getNodeDataById=function(t){var n=this.getNodeModelById(t);return n==null?void 0:n.getData()},e.prototype.getNodeIncomingEdge=function(t){return this.graphModel.getNodeIncomingEdge(t)},e.prototype.getNodeOutgoingEdge=function(t){return this.graphModel.getNodeOutgoingEdge(t)},e.prototype.getNodeIncomingNode=function(t){return this.graphModel.getNodeIncomingNode(t)},e.prototype.getNodeOutgoingNode=function(t){return this.graphModel.getNodeOutgoingNode(t)},e.prototype.createFakeNode=function(t){var n=this.graphModel.modelMap.get(t.type);if(!n)return console.warn("不存在为".concat(t.type,"类型的节点")),null;var r=new n($i($i({},t),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(r),r},e.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},e.prototype.setNodeSnapLine=function(t){var n;(n=this.snaplineModel)===null||n===void 0||n.setNodeSnapLine(t)},e.prototype.removeNodeSnapLine=function(){var t;(t=this.snaplineModel)===null||t===void 0||t.clearSnapline()},e.prototype.setDefaultEdgeType=function(t){this.graphModel.setDefaultEdgeType(t)},e.prototype.addEdge=function(t){return this.graphModel.addEdge(t)},e.prototype.getEdgeDataById=function(t){var n=this.getEdgeModelById(t);return n==null?void 0:n.getData()},e.prototype.getEdgeModelById=function(t){return this.graphModel.getEdgeModelById(t)},e.prototype.getEdgeModels=function(t){var n=t.sourceNodeId,r=t.targetNodeId,i=[],o=this.graphModel.edges;return n&&r?pt(o,function(a){a.sourceNodeId===n&&a.targetNodeId===r&&i.push(a)}):n?pt(o,function(a){a.sourceNodeId===n&&i.push(a)}):r&&pt(o,function(a){a.targetNodeId===r&&i.push(a)}),i},e.prototype.changeEdgeId=function(t,n){return this.graphModel.changeEdgeId(t,n)},e.prototype.changeEdgeType=function(t,n){this.graphModel.changeEdgeType(t,n)},e.prototype.deleteEdge=function(t){var n=this.graphModel.getEdgeModelById(t);if(!n)return!1;var r=n.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteEdgeById(t),o},e.prototype.deleteEdgeByNodeId=function(t){var n=t.sourceNodeId,r=t.targetNodeId;n&&r?this.graphModel.deleteEdgeBySourceAndTarget(n,r):n?this.graphModel.deleteEdgeBySource(n):r&&this.graphModel.deleteEdgeByTarget(r)},e.prototype.getNodeEdges=function(t){return this.graphModel.getNodeEdges(t)},e.prototype.addElements=function(t,n){var r=this,i=t.nodes,o=t.edges;n===void 0&&(n=40),console.log("distance",n);var a={},s={nodes:[],edges:[]};return pt(i,function(l){var u=l.id,c=r.addNode(l);u&&(a[u]=c.id),s.nodes.push(c)}),pt(o,function(l){var u=l.sourceNodeId,c=l.targetNodeId;a[u]&&(u=a[u]),a[c]&&(c=a[c]);var f=r.graphModel.addEdge($i($i({},l),{sourceNodeId:u,targetNodeId:c}));s.edges.push(f)}),s},e.prototype.selectElementById=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),this.graphModel.selectElementById(t,n),!n&&r&&this.graphModel.toFront(t)},e.prototype.deselectElementById=function(t){this.graphModel.deselectElementById(t)},e.prototype.getSelectElements=function(t){return t===void 0&&(t=!0),this.graphModel.getSelectElements(t)},e.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},e.prototype.getModelById=function(t){return this.graphModel.getElement(t)},e.prototype.getDataById=function(t){var n;return(n=this.graphModel.getElement(t))===null||n===void 0?void 0:n.getData()},e.prototype.deleteElement=function(t){var n,r,i,o=this.getModelById(t);if(!o)return!1;var a=(n={},n[It.NODE]=this.deleteNode,n[It.EDGE]=this.deleteEdge,n);return(i=(r=a[o.BaseType])===null||r===void 0?void 0:r.call(this,t))!==null&&i!==void 0?i:!1},e.prototype.setElementZIndex=function(t,n){return this.graphModel.setElementZIndex(t,n)},e.prototype.getAreaElement=function(t,n,r,i,o){return r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1),this.graphModel.getAreaElement(t,n,r,i,o).map(function(a){return a.getData()})},e.prototype.setProperties=function(t,n){var r;(r=this.graphModel.getElement(t))===null||r===void 0||r.setProperties(vn(n))},e.prototype.getProperties=function(t){var n;return(n=this.graphModel.getElement(t))===null||n===void 0?void 0:n.getProperties()},e.prototype.deleteProperty=function(t,n){var r;(r=this.graphModel.getElement(t))===null||r===void 0||r.deleteProperty(n)},e.prototype.updateAttributes=function(t,n){this.graphModel.updateAttributes(t,n)},e.prototype.editText=function(t){this.graphModel.editText(t)},e.prototype.updateText=function(t,n){this.graphModel.updateText(t,n)},e.prototype.updateEditConfig=function(t){var n=this.graphModel,r=n.editConfigModel,i=n.transformModel,o=r.snapGrid;if(r.updateEditConfig(t),(t==null?void 0:t.stopMoveGraph)!==void 0&&i.updateTranslateLimits(t.stopMoveGraph),t!=null&&t.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0),!ir(t==null?void 0:t.snapGrid)&&t.snapGrid!==o){var a=this.graphModel.grid.size,s=a===void 0?1:a;this.graphModel.updateGridSize(t.snapGrid?s:1)}},e.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},e.prototype.setTheme=function(t){this.graphModel.setTheme(t)},e.prototype.focusByElement=function(t){var n=void 0,r=this.getNodeModelById(t);if(r){var i=r.getData(),o=i.x,a=i.y;n={x:o,y:a}}var s=this.getEdgeModelById(t);if(s){var l=s.textPosition,o=l.x,a=l.y;n={x:o,y:a}}n&&this.focusByCoordinate(n)},e.prototype.focusByCoordinate=function(t){var n=this.graphModel,r=n.transformModel,i=n.width,o=n.height,a=t.x,s=t.y;r.focusOn(a,s,i,o)},e.prototype.focusOn=function(t){if(typeof t=="string")this.focusByElement(t);else if("x"in t&&"y"in t)this.focusByCoordinate(t);else{var n=t.id,r=t.coordinate;n&&this.focusByElement(n),r&&this.focusByCoordinate(r)}},e.prototype.resize=function(t,n){this.graphModel.resize(t,n),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},e.prototype.toFront=function(t){this.graphModel.toFront(t)},e.prototype.getPointByClient=function(t,n){if(typeof t=="object")return this.graphModel.getPointByClient(t);if(typeof n=="number")return this.graphModel.getPointByClient({x:t,y:n})},e.prototype.getGraphData=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,Td([r],pu(t),!1)):r},e.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},e.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},e.prototype.renderRawData=function(t){this.graphModel.graphDataToModel(vn(t)),this.options.history!==!1&&this.history.watch(this.graphModel),Zy(V(h7,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Ae.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},e.prototype.render=function(t){var n=ze(t);this.adapterIn&&(n=this.adapterIn(n)),this.renderRawData(n)},e.prototype.undo=function(){if(this.history.undoAble()){var t=vn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},e.prototype.redo=function(){if(this.history.redoAble()){var t=vn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},e.prototype.zoom=function(t,n){var r=this.graphModel.transformModel;return r.zoom(t,n)},e.prototype.resetZoom=function(){var t=this.graphModel.transformModel;t.resetZoom()},e.prototype.setZoomMiniSize=function(t){var n=this.graphModel.transformModel;n.setZoomMiniSize(t)},e.prototype.setZoomMaxSize=function(t){var n=this.graphModel.transformModel;n.setZoomMaxSize(t)},e.prototype.getTransform=function(){var t=this.graphModel.transformModel,n=t.SCALE_X,r=t.SCALE_Y,i=t.TRANSLATE_X,o=t.TRANSLATE_Y;return{SCALE_X:n,SCALE_Y:r,TRANSLATE_X:i,TRANSLATE_Y:o}},e.prototype.translate=function(t,n){var r=this.graphModel.transformModel;r.translate(t,n)},e.prototype.resetTranslate=function(){var t=this.graphModel.transformModel,n=t.TRANSLATE_X,r=t.TRANSLATE_Y;this.translate(-n,-r)},e.prototype.translateCenter=function(){this.graphModel.translateCenter()},e.prototype.fitView=function(t,n){n===void 0&&(n=t),this.graphModel.fitView(t,n)},e.prototype.openEdgeAnimation=function(t){this.graphModel.openEdgeAnimation(t)},e.prototype.closeEdgeAnimation=function(t){this.graphModel.closeEdgeAnimation(t)},e.prototype.on=function(t,n){this.graphModel.eventCenter.on(t,n)},e.prototype.off=function(t,n){this.graphModel.eventCenter.off(t,n)},e.prototype.once=function(t,n){this.graphModel.eventCenter.once(t,n)},e.prototype.emit=function(t,n){this.graphModel.eventCenter.emit(t,n)},e.use=function(t,n){var r,i=t.pluginName;if(!i)throw new Error("请给插件指定 pluginName!");this.extensions.set(i,(r={},r[Md]=Md,r.extension=t,r.props=n,r))},e.prototype.installPlugins=function(t){var n=this;t===void 0&&(t=[]);var r=Array.from(e.extensions,function(o){var a=pu(o,2),s=a[1];return s}),i=Td(Td([],pu(this.plugins),!1),pu(r),!1);pt(i,function(o){var a,s;Md in o?(a=o.extension,s=o.props):a=o;var l=a==null?void 0:a.pluginName;BE(t,l)===-1&&n.installPlugin(a,s)})},e.prototype.installPlugin=function(t,n){var r,i;if("pluginName"in t&&"install"in t){var o=t.pluginName,a=t.install,s=t.render;o&&(a&&a.call(t,this,e),s&&this.components.push(s.bind(t)),this.extension[o]=t);return}var l=t,u=l.pluginName,c=new l({lf:this,LogicFlow:e,props:n,options:(i=(r=this.options.pluginsOptions)===null||r===void 0?void 0:r[u])!==null&&i!==void 0?i:{}});c.render&&this.components.push(c.render.bind(c)),this.extension[u]=c},e.prototype.destroy=function(){var t;this.clearData(),Zy(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy();for(var n in this.extension){var r=this.extension[n];"destroy"in r&&((t=r.destroy)===null||t===void 0||t.call(r))}},e.extensions=new Map,e}();(function(e){e.toStringTag="LF.".concat(e.name)})(lp||(lp={}));const mW=lp;function On(e){return ev(e)}var H_={width:40,height:40},W_={width:40,height:40},z_={width:40,height:40},U_={width:100,height:80},X_={width:100,height:80},_W=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(t){var n=Math.random()*16|0,r=t==="x"?n:n&3|8;return r.toString(16)})},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),bW=(globalThis==null?void 0:globalThis._ids)||new _W;function Za(){return bW.next()}var $S=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(e){$S(t,e);function t(n,r){return n.id||(n.id="Event_".concat(Za())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),e.call(this,n,r)||this}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),r={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(r),n},t.extendKey="StartEventModel",t})(_l);(function(e){$S(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(xl);var HS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ec=function(){return Ec=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ec.apply(this,arguments)};(function(e){HS(t,e);function t(n,r){return n.id||(n.id="Event_".concat(Za())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),e.call(this,n,r)||this}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),r={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(r),n},t.extendKey="EndEventModel",t})(_l);(function(e){HS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle(),i=n,o=i.x,a=i.y,s=i.r,l=e.prototype.getShape.call(this);return Te("g",{},l,Te("circle",Ec(Ec({},r),{cx:o,cy:a,r:s-5})))},t.extendKey="EndEventView",t})(xl);var WS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(e){WS(t,e);function t(n,r){return n.id||(n.id="Flow_".concat(Za())),e.call(this,n,r)||this}return t.extendKey="SequenceFlowModel",t})(ml);(function(e){WS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(wl);var zS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Us=function(){return Us=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Us.apply(this,arguments)};(function(e){zS(t,e);function t(n,r){var i=this;return n.id||(n.id="Gateway_".concat(Za())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),i=e.call(this,n,r)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return t.extendKey="ExclusiveGatewayModel",t})(vc);(function(e){zS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,r=n,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=n.getNodeStyle();return Te("g",{transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")},Te("polygon",Us(Us({},u),{x:i,y:o,points:l})),Te("path",Us({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},u)))},t.extendKey="ExclusiveGatewayNode",t})(_c);var US=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),up=function(){return up=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},up.apply(this,arguments)};(function(e){US(t,e);function t(n,r){return n.id||(n.id="Activity_".concat(Za())),e.call(this,n,r)||this}return t.extendKey="ServiceTaskModel",t})(Ia);(function(e){US(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getNodeStyle();return Te("svg",{x:r-o/2+5,y:i-a/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Te("path",{fill:s.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.radius,l=n.getNodeStyle();return Te("g",{},[Te("rect",up({x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a},l)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(Fo);var XS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sc=function(){return Sc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Sc.apply(this,arguments)};(function(e){XS(t,e);function t(n,r){return n.id||(n.id="Activity_".concat(Za())),e.call(this,n,r)||this}return t.extendKey="UserTaskModel",t})(Ia);(function(e){XS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getNodeStyle();return Te("svg",{x:r-o/2+5,y:i-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Te("path",{fill:s.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.radius,l=n.getNodeStyle();return Te("g",{},[Te("rect",Sc(Sc({},l),{x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(Fo);var xW=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(t){var n=Math.random()*16|0,r=t==="x"?n:n&3|8;return r.toString(16)})},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),wW=(globalThis==null?void 0:globalThis._ids)||new xW;function G_(){return wW.next()}function GS(e){return Object.prototype.toString.call(e)}function EW(e){return"  ".repeat(e)}function Oc(e){var t=e;return GS(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var r=n;n.charAt(0)==="-"&&(r=n.substring(1)),t[r]=Oc(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,r){t[r]=Oc(n)})),t}function SW(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Oc(e)).replace(/"/g,"'")}return t}var po=`	
`;function Nu(e,t,n){var r=EW(n);if(e!==0&&e!==!1&&!e)return po+r+"<".concat(t," />");var i="";if(t==="#text")return po+r+e;if(t==="#cdata-section")return po+r+"<![CDATA["+e+"]]>";if(t==="#comment")return po+r+"<!--"+e+"-->";if("".concat(t).charAt(0)==="-")return" "+t.substring(1)+'="'+SW(e)+'"';if(Array.isArray(e))e.forEach(function(l){i+=Nu(l,t,n+1)});else if(GS(e)==="[object Object]"){var o=Object.keys(e),a="",s="";i+=(n===0?"":po+r)+"<"+t,o.forEach(function(l){l.charAt(0)==="-"?a+=Nu(e[l],l,n+1):s+=Nu(e[l],l,n+1)}),i+=a+(s!==""?">".concat(s).concat(po+r,"</").concat(t,">"):" />")}else i+=po+r+"<".concat(t,">").concat(e.toString(),"</").concat(t,">");return i}function OW(e){var t="";for(var n in e)t+=Nu(e[n],n,0);return t}var Mn=function(){};Mn.ObjTree=function(){return this};Mn.ObjTree.VERSION="0.23";Mn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Mn.ObjTree.prototype.attr_prefix="-";Mn.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,r=n.parseFromString(e,"application/xml");if(!r)return;t=r.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};Mn.ObjTree.prototype.parseHTTP=function(e,t,n){var r={};for(var i in t)r[i]=t[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(c){var f;c&&c.responseXML&&c.responseXML.documentElement&&(f=o.parseDOM(c.responseXML.documentElement)),a(f,c),s&&s(c)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=e;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(e,r);u&&(l=u.transport)}if(n)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};Mn.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var r={};r[e.nodeName]=n,n=r}return n}};Mn.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,r={};if(e.attributes&&e.attributes.length){n={};for(var i=0;i<e.attributes.length;i++){var o=e.attributes[i].nodeName;if(typeof o=="string"){var a=e.attributes[i].nodeValue;try{a=JSON.parse(e.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=e.attributes[i].nodeValue}a&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}if(e.childNodes&&e.childNodes.length){var s=!0;n&&(s=!1);for(var i=0;i<e.childNodes.length&&s;i++){var l=e.childNodes[i].nodeType;l==3||l==4||l==8||(s=!1)}if(s){n||(n="");for(var i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue}else{n||(n={});for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(e.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}}else n===null&&(n={});return n}};Mn.ObjTree.prototype.addNode=function(e,t,n,r){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=r):n==1?e[t]=r:n==2?e[t]=[e[t],r]:e[t][e[t].length]=r};Mn.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};Mn.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],r=[];for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];i.charAt(0)!=this.attr_prefix?typeof o>"u"||o==null?n[n.length]="<"+i+" />":typeof o=="object"&&o.constructor==Array?n[n.length]=this.array_to_xml(i,o):typeof o=="object"?n[n.length]=this.hash_to_xml(i,o):n[n.length]=this.scalar_to_xml(i,o):r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=r.join(""),s=n.join("");return typeof e>"u"||e==null||(n.length>0?s.match(/\n/)?s="<"+e+a+`>
`+s+"</"+e+`>
`:s="<"+e+a+">"+s+"</"+e+`>
`:s="<"+e+a+` />
`),s};Mn.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];typeof i>"u"||i==null?n[n.length]="<"+e+" />":typeof i=="object"&&i.constructor==Array?n[n.length]=this.array_to_xml(e,i):typeof i=="object"?n[n.length]=this.hash_to_xml(e,i):n[n.length]=this.scalar_to_xml(e,i)}return n.join("")};Mn.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};Mn.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var AW=function(e){return new Mn.ObjTree().parseXML(e)},CW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cp=function(){return cp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cp.apply(this,arguments)},$f=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ti;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(ti||(ti={}));var YS=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Y_=["properties","startPoint","endPoint","pointsList"];function K_(e){var t=e?Y_.concat(e):Y_;return function(n){function r(i){var o={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(a){return r(a)}):(Object.entries(i).forEach(function(a){var s=$f(a,2),l=s[0],u=s[1];typeof u!="object"?l.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(l)?o[l]=u:o["-".concat(l)]=u:t.includes(l)?o["-".concat(l)]=r(u):o[l]=r(u)}),o)}return r(n)}}function Ac(e){var t={};return Object.entries(e).forEach(function(n){var r=$f(n,2),i=r[0],o=r[1];i.indexOf("-")===0?t[i.substring(1)]=Oc(o):typeof o=="string"?t[i]=o:Object.prototype.toString.call(o)==="[object Object]"?t[i]=Ac(o):Array.isArray(o)?t[i]=o.map(function(a){return Ac(a)}):t[i]=o}),t}function TW(e,t,n){var r=new Map;t.nodes.forEach(function(o){var a,s={"-id":o.id};if(!((a=o.text)===null||a===void 0)&&a.value&&(s["-name"]=o.text.value),o.properties){var l=K_(n)(o.properties);Object.assign(s,l)}r.set(o.id,s),e[o.type]?Array.isArray(e[o.type])?e[o.type].push(s):e[o.type]=[e[o.type],s]:e[o.type]=s});var i=t.edges.map(function(o){var a,s,l=r.get(o.targetNodeId);l["bpmn:incoming"]?Array.isArray(l["bpmn:incoming"])?l["bpmn:incoming"].push(o.id):l["bpmn:incoming"]=[l["bpmn:incoming"],o.id]:l["bpmn:incoming"]=o.id;var u={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((a=o.text)===null||a===void 0)&&a.value&&(u["-name"]=(s=o.text)===null||s===void 0?void 0:s.value),o.properties){var c=K_(n)(o.properties);Object.assign(u,c)}return u});t.edges.forEach(function(o){var a=r.get(o.sourceNodeId);a["bpmn:outgoing"]?Array.isArray(a["bpmn:outgoing"])?a["bpmn:outgoing"].push(o.id):a["bpmn:outgoing"]=[a["bpmn:outgoing"],o.id]:a["bpmn:outgoing"]=o.id}),e[ti.FLOW]=i}function MW(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var r,i=n.id,o=n.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=n.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),a}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var r,i=n.id,o=100,a=80,s=n.x,l=n.y,u=so.shapeConfigMap.get(n.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var c={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=n.text)===null||r===void 0)&&r.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c})}function PW(e){var t=[],n=[],r=e["bpmn:definitions"];if(r){var i=r["bpmn:process"];Object.keys(i).forEach(function(o){if(o.indexOf("bpmn:")===0){var a=i[o];if(o===ti.FLOW){var s=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=RW(a,s)}else{var l=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(NW(a,l,o))}}})}return{nodes:t,edges:n}}function NW(e,t,n){var r=[];if(Array.isArray(e))e.forEach(function(a){var s;Array.isArray(t)?s=t.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=t;var l=V_(s,n,a);r.push(l)});else{var i=void 0;Array.isArray(t)?i=t.find(function(a){return a["-bpmnElement"]===e["-id"]}):i=t;var o=V_(i,n,e);r.push(o)}return r}function V_(e,t,n){var r=Number(e["dc:Bounds"]["-x"]),i=Number(e["dc:Bounds"]["-y"]),o=n["-name"],a=so.shapeConfigMap.get(t);a&&(r+=a.width/2,i+=a.height/2);var s;Object.entries(n).forEach(function(f){var d=$f(f,2),h=d[0],v=d[1];YS.indexOf(h)===-1&&(s||(s={}),s[h]=v)}),s&&(s=Ac(s));var l;if(o&&(l={x:r,y:i,value:o},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=e["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(u["-x"])+Number(u["-width"])/2,l.y=Number(u["-y"])+Number(u["-height"])/2}var c={id:e["-bpmnElement"],type:t,x:r,y:i,properties:s};return l&&(c.text=l),c}function RW(e,t){var n=[];if(Array.isArray(e))e.forEach(function(i){var o;Array.isArray(t)?o=t.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=t,n.push(q_(o,i))});else{var r=void 0;Array.isArray(t)?r=t.find(function(i){return i["-bpmnElement"]===e["-id"]}):r=t,n.push(q_(r,e))}return n}function q_(e,t){var n,r=t["-name"]?"".concat(t["-name"]):"";if(r){var i=e["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(l){o<l.length&&(o=l.length)}),n={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a;Object.entries(t).forEach(function(l){var u=$f(l,2),c=u[0],f=u[1];YS.indexOf(c)===-1&&(a||(a={}),a[c]=f)}),a&&(a=Ac(a));var s={id:t["-id"],type:ti.FLOW,pointsList:e["di:waypoint"].map(function(l){return{x:Number(l["-x"]),y:Number(l["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:a};return n&&(s.text=n),s}var so=function(){function e(t){var n=t.lf,r=this;this.adapterOut=function(i,o){var a=cp({},r.processAttributes);TW(a,i,o);var s={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};MW(s,i);var l=r.definitionAttributes;l["bpmn:process"]=a,l["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":s};var u={"bpmn:definitions":l};return u},this.adapterIn=function(i){if(i)return PW(i)},n.adapterIn=function(i){return r.adapterIn(i)},n.adapterOut=function(i,o){return r.adapterOut(i,o)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(G_())},this.definitionAttributes={"-id":"Definitions_".concat(G_()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();so.shapeConfigMap.set(ti.START,{width:H_.width,height:H_.height});so.shapeConfigMap.set(ti.END,{width:W_.width,height:W_.height});so.shapeConfigMap.set(ti.GATEWAY,{width:z_.width,height:z_.height});so.shapeConfigMap.set(ti.SYSTEM,{width:U_.width,height:U_.height});so.shapeConfigMap.set(ti.USER,{width:X_.width,height:X_.height});(function(e){CW(t,e);function t(n){var r=e.call(this,n)||this;r.adapterXmlIn=function(o){var a=AW(o);return r.adapterIn(a)},r.adapterXmlOut=function(o,a){var s=r.adapterOut(o,a);return OW(s)};var i=n.lf;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r}return t.pluginName="bpmnXmlAdapter",t})(so);var DW=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var r=Math.random()*16|0,i=n==="x"?r:r&3|8;return i.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),LW=(globalThis==null?void 0:globalThis._ids)||new DW;function IW(){return LW.next()}Te("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),Te("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),Te("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});Te("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});Te("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var kW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wo=function(){return wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wo.apply(this,arguments)},jW=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},BW=yr,FW=function(e){kW(t,e);function t(n){var r=e.call(this)||this;return r.updatePosition=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y;r.nodeModel.x=l+o/2,r.nodeModel.y=u+a/2,r.nodeModel.moveText(o/2,a/2)},r.getResize=function(i){var o=i.index,a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,c=i.PCTResizeInfo,f=i.pct,d=f===void 0?1:f,h=i.freezeWidth,v=h===void 0?!1:h,p=i.freezeHeight,g=p===void 0?!1:p,y={width:l,height:u,deltaX:a,deltaY:s};if(c){var m=4,M=0,T=0;switch(o){case 0:T=(a*-1-s)/m;break;case 1:T=(a-s)/m;break;case 2:T=(a+s)/m;break;case 3:T=(a*-1+s)/m;break}T!==0&&(M=Math.round(T/c.ResizeBasis.basisHeight*1e5)/1e3),c.ResizePCT.widthPCT=Math.max(Math.min(c.ResizePCT.widthPCT+M,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit),c.ResizePCT.heightPCT=Math.max(Math.min(c.ResizePCT.heightPCT+M,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit);var L=Math.round(c.ResizePCT.widthPCT*c.ResizeBasis.basisWidth/100),N=Math.round(c.ResizePCT.heightPCT*c.ResizeBasis.basisHeight/100);switch(o){case 0:a=l-L,s=u-N;break;case 1:a=L-l,s=u-N;break;case 2:a=L-l,s=N-u;break;case 3:a=l-L,s=N-u;break}return y.width=L,y.height=N,y.deltaX=a/d,y.deltaY=s/d,y}switch(o){case 0:y.width=v?l:l-a*d,y.height=g?u:u-s*d;break;case 1:y.width=v?l:l+a*d,y.height=g?u:u-s*d;break;case 2:y.width=v?l:l+a*d,y.height=g?u:u+s*d;break;case 3:y.width=v?l:l-a*d,y.height=g?u:u+s*d;break}return y},r.updateEdgePointByAnchors=function(){var i=r.nodeModel,o=i.id,a=i.anchors,s=r.getNodeEdges(o);s.sourceEdges.forEach(function(l){var u=a.find(function(c){return c.id===l.sourceAnchorId});u&&l.updateStartPoint({x:u.x,y:u.y})}),s.targetEdges.forEach(function(l){var u=a.find(function(c){return c.id===l.targetAnchorId});u&&l.updateEndPoint({x:u.x,y:u.y})})},r.updateRect=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y,c=s.width,f=s.height,d=s.radius,h=s.PCTResizeInfo,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,M=r.index,T=p===y,L=g===m,N=r.getResize({index:M,deltaX:o,deltaY:a,width:c,height:f,PCTResizeInfo:h,pct:1,freezeWidth:T,freezeHeight:L});if(N.width<p||N.width>y||N.height<g||N.height>m){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:T?0:N.deltaX,deltaY:L?0:N.deltaY}),r.nodeModel.width=N.width,r.nodeModel.height=N.height,r.nodeModel.setProperties({nodeSize:{width:N.width,height:N.height}});var E={x:l,y:u,width:c,height:f,radius:d},k={x:r.nodeModel.x,y:r.nodeModel.y,width:r.nodeModel.width,height:r.nodeModel.height,radius:d};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:E,afterNode:k})},r.updateEllipse=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,c=s.x,f=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,M=p===y,T=g===m,L=l,N=u,E=r.getResize({index:h,deltaX:o,deltaY:a,width:L,height:N,PCTResizeInfo:d,pct:1/2,freezeWidth:M,freezeHeight:T});if(E.width<p/2||E.width>y/2||E.height<g/2||E.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:M?0:E.deltaX,deltaY:T?0:E.deltaY}),r.nodeModel.rx=E.width,r.nodeModel.ry=E.height,r.nodeModel.setProperties({nodeSize:{rx:E.width,ry:E.height}});var k={x:c,y:f},Y={rx:E.width,ry:E.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:wo(wo({},k),{rx:l,ry:u}),afterNode:Y})},r.updateDiamond=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,c=s.x,f=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,M=p===y,T=g===m,L=l,N=u,E=r.getResize({index:h,deltaX:o,deltaY:a,width:L,height:N,PCTResizeInfo:d,pct:1/2,freezeWidth:M,freezeHeight:T});if(E.width<p/2||E.width>y/2||E.height<g/2||E.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:M?0:E.deltaX,deltaY:T?0:E.deltaY}),r.nodeModel.rx=E.width,r.nodeModel.ry=E.height,r.nodeModel.setProperties({nodeSize:{rx:E.width,ry:E.height}});var k={x:c,y:f,rx:l,ry:u},Y={rx:E.width,ry:E.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:k,afterNode:Y})},r.eventEmit=function(i){var o=i.deltaX,a=i.deltaY,s=i.beforeNode,l=i.afterNode,u=r.nodeModel,c=u.id,f=u.modelType,d=u.type,h=wo({id:c,modelType:f,type:d},s),v=wo({id:c,modelType:f,type:d},l);r.graphModel.eventCenter.emit("node:resize",{preData:h,data:v,deltaX:o,deltaY:a,index:r.index,model:r.nodeModel})},r.onDragging=function(i){var o,a=i.deltaX,s=i.deltaY,l=r.graphModel.transformModel,u=r.nodeModel.modelType;o=jW(l.fixDeltaXY(a,s),2),a=o[0],s=o[1],u===tt.RECT_NODE||u===tt.HTML_NODE?r.updateRect({deltaX:a,deltaY:s}):u===tt.ELLIPSE_NODE?r.updateEllipse({deltaX:a,deltaY:s}):u===tt.DIAMOND_NODE&&r.updateDiamond({deltaX:a,deltaY:s})},r.onDragEnd=function(){var i=r.graphModel.gridSize,o=i===void 0?1:i,a=o*Math.round(r.nodeModel.x/o),s=o*Math.round(r.nodeModel.y/o);r.nodeModel.moveTo(a,s),r.updateEdgePointByAnchors()},r.index=n.index,r.nodeModel=n.model,r.graphModel=n.graphModel,r.dragHandler=new BW({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:1}),r}return t.prototype.getNodeEdges=function(n){for(var r=this.graphModel,i=r.edges,o=[],a=[],s=0;s<i.length;s++){var l=i[s];l.sourceNodeId===n?o.push(l):i[s].targetNodeId===n&&a.push(l)}return{sourceEdges:o,targetEdges:a}},t.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.index,a=n.model,s=a.getControlPointStyle();return V("g",{className:"lf-resize-control-".concat(o),children:V(ar,wo({className:"lf-node-control",x:r,y:i},s,{onMouseDown:this.dragHandler.handleMouseDown}))})},t}(ot),$W=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cc=function(){return Cc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Cc.apply(this,arguments)},Hf=function(e){$W(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=r.x,a=r.y,s=r.width,l=r.height,u={minX:o-s/2,minY:a-l/2,maxX:o+s/2,maxY:a+l/2},c=u.minX,f=u.minY,d=u.maxX,h=u.maxY,v=[{x:c,y:f},{x:d,y:f},{x:d,y:h},{x:c,y:h}];return v.map(function(p,g){return V(FW,Cc({index:g},p,{model:r,graphModel:i}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getResizeOutlineStyle();return V(ar,Cc({},s,{x:r,y:i,width:o,height:a}))},t.prototype.render=function(){return V("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},t}(ot),KS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HW=function(e){KS(t,e);function t(n,r){var i=e.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},t}(Uh),WW=function(e){KS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return V(Hf,{model:r,graphModel:i})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,r=n.model,i=n.graphModel.editConfigModel.isSilentMode;return V("g",{children:[this.getResizeShape(),r.isSelected&&!i?this.getControlGroup():""]})},t}(tp),VS={view:WW,model:HW},qS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fp=function(){return fp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fp.apply(this,arguments)},zW=function(e){qS(t,e);function t(n,r){var i=e.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},t}(zh),UW=function(e){qS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return V(Hf,{model:r,graphModel:i})},t.prototype.getResizeShape=function(){var n=this.props.model,r=n.points,i=n.getNodeStyle();return V("g",{children:V(Zv,fp({},i,{points:r}))})},t.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return V("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},t}(Qh),ZS={view:UW,model:zW},JS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XW=function(e){JS(t,e);function t(n,r){var i=e.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},t}(Xh),GW=function(e){JS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return V(Hf,{model:r,graphModel:i})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return V("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},t}(rp),QS={view:GW,model:XW},eO=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tO=function(e){eO(t,e);function t(n,r){var i=e.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},t}(Ia),nO=function(e){eO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return V(Hf,{model:r,graphModel:i})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return V("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},t}(Fo),Wf={view:nO,model:tO},rO=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tc=function(){return Tc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tc.apply(this,arguments)},vo=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},go=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Z_=500,J_=300,YW=-1e4;(function(e){rO(t,e);function t(){var n=e.apply(this,go([],vo(arguments),!1))||this;return n.isGroup=!0,n.isFolded=!1,n.unfoldedWidth=Z_,n.unfoldedHeight=J_,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var r=this;e.prototype.initNodeData.call(this,n);var i=[];Ke(n.children)&&(i=n.children),this.children=new Set(i),this.width=Z_,this.height=J_,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=YW,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout(function(){r.isFolded&&r.foldGroup(r.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var r=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=go(go([],vo(this.incoming.edges),!1),vo(this.outgoing.edges),!1);this.children.forEach(function(o){var a=r.graphModel.getElement(o);if(a){var s=a.isFolded;if(a.isGroup&&!a.isFolded&&a.foldGroup(n),a.isGroup&&!n){var l=r.childrenLastFoldStatus[o];l!==void 0&&l!==a.isFolded&&a.foldGroup(l)}r.childrenLastFoldStatus[o]=!!s,a.visible=!n;var u=a.incoming.edges,c=a.outgoing.edges;i=go(go(go([],vo(i),!1),vo(u),!1),vo(c),!1)}}),this.foldEdge(n,i)}},t.prototype.getAnchorStyle=function(n){var r=e.prototype.getAnchorStyle.call(this,n);return r.stroke="transparent",r.fill="transparent",r.hover.fill="transparent",r.hover.stroke="transparent",r},t.prototype.foldEdge=function(n,r){var i=this;r.forEach(function(o,a){var s=o.id,l=o.sourceNodeId,u=o.targetNodeId,c=o.startPoint,f=o.endPoint,d=o.type,h=o.text,v=o.getProperties(),p={id:"".concat(s,"__").concat(a),sourceNodeId:l,targetNodeId:u,startPoint:c,endPoint:f,type:d,properties:v,text:h==null?void 0:h.value};o.virtual&&i.graphModel.deleteEdgeById(o.id);var g=i.graphModel.group.getNodeGroup(u);g||(g=i.graphModel.getNodeModelById(u));var y=i.graphModel.group.getNodeGroup(l);y||(y=i.graphModel.getNodeModelById(l)),n&&o.visible!==!1&&(i.children.has(l)||i.id===l?(p.startPoint=void 0,p.sourceNodeId=i.id):(p.endPoint=void 0,p.targetNodeId=i.id),(g.id!==i.id||y.id!==i.id)&&i.createVirtualEdge(p),o.visible=!1),!n&&o.visible===!1&&(g&&g.isGroup&&g.isFolded?(p.targetNodeId=g.id,p.endPoint=void 0,i.createVirtualEdge(p)):y&&y.isGroup&&y.isFolded?(p.sourceNodeId=y.id,p.startPoint=void 0,i.createVirtualEdge(p)):o.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var r=this.graphModel.addEdge(n);r.virtual=!0,r.text.editable=!1,r.isFoldedEdge=!0},t.prototype.isInRange=function(n){var r=n.minX,i=n.minY,o=n.maxX,a=n.maxY;return r>=this.x-this.width/2&&o<=this.x+this.width/2&&i>=this.y-this.height/2&&a<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var r=n.minX,i=n.minY,o=n.maxX,a=n.maxY;return{x:r>=this.x-this.width/2&&o<=this.x+this.width/2,y:i>=this.y-this.height/2&&a<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,r=e.prototype.getData.call(this);r.children=[],this.children.forEach(function(o){var a=n.graphModel.getNodeModelById(o);a&&!a.virtual&&r.children.push(o)});var i=r.properties;return i==null||delete i.groupAddable,i==null||delete i.isFolded,r},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=go([],vo(this.children),!1),n.isGroup=!0;var r=n.properties;return r==null||delete r.groupAddable,r!=null&&r.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHeight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return console.info("_nodeData",n),!0},t.prototype.toBack=function(){this.zIndex--},t})(tO);(function(e){rO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,r=n.resizable,i=n.properties;return r&&!i.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,r=n.width,i=n.height,o=n.x,a=n.y,s=n.radius,l=n.properties,u=n.getAddableOutlineStyle;if(!l.groupAddable)return null;var c=this.props.model.getNodeStyle().strokeWidth,f=c===void 0?0:c,d=u(),h=r+f+8,v=i+f+8;return Te("rect",Tc(Tc({},d),{width:h,height:v,x:o-h/2,y:a-v/2,rx:s,ry:s}))},t.prototype.getFoldIcon=function(){var n=this.props.model,r=n.x-n.width/2+5,i=n.y-n.height/2+5;if(!n.foldable)return null;var o=Te("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," M").concat(r+7,",").concat(i+2," ").concat(r+7,",").concat(i+10):"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," ")});return Te("g",{},[Te("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),o])},t.prototype.getResizeShape=function(){return Te("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(nO);var Q_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xs=function(){return Xs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xs.apply(this,arguments)};function KW(e){var t=function(r){Q_(i,r);function i(o,a){o.id||(o.id="Flow_".concat(IW()));var s=Xs(Xs(Xs({},{}),o.properties),{isDefaultFlow:!1});return o.properties=s,r.call(this,o,a)||this}return i.extendKey="SequenceFlowModel",i}(ml),n=function(r){Q_(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getStartArrow=function(){var o=this.props.model,a=o.properties.isDefaultFlow;return a?Te("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):Te("path",{d:""})},i.extendKey="SequenceFlowEdge",i}(wl);return{type:"bpmn:sequenceFlow",view:n,model:t}}KW();var e0={width:40,height:40},t0={width:40,height:40},n0={width:100,height:80},Mc={width:100,height:80},r0={width:100,height:80},i0={width:100,height:80},o0={width:100,height:80},a0={width:100,height:80},s0={width:100,height:80},l0={width:100,height:80},Pn=function(){};Pn.ObjTree=function(){return this};Pn.ObjTree.VERSION="0.23";Pn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Pn.ObjTree.prototype.attr_prefix="-";Pn.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,r=n.parseFromString(e,"application/xml");if(!r)return;t=r.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var i=this.parseDOM(t);return i}};Pn.ObjTree.prototype.parseHTTP=function(e,t,n){var r={};for(var i in t)r[i]=t[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(c){var f;c&&c.responseXML&&c.responseXML.documentElement&&(f=o.parseDOM(c.responseXML.documentElement)),a(f,c),s&&s(c)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=e;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(e,r);u&&(l=u.transport)}if(n)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};Pn.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var r={};r[e.nodeName]=n,n=r}return n}};Pn.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,r={};if(e.attributes&&e.attributes.length){n={};for(var i=0;i<e.attributes.length;i++){var o=e.attributes[i].nodeName;if(typeof o=="string"){var a=e.attributes[i].nodeValue;try{a=JSON.parse(e.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=e.attributes[i].nodeValue}a!=null&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}if(e.childNodes&&e.childNodes.length){var s=!0;n&&(s=!1);for(var i=0;i<e.childNodes.length&&s;i++){var l=e.childNodes[i].nodeType;l===3||l===4||l===8||(s=!1)}if(s){n||(n="");for(var i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue}else{n||(n={});for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(e.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}}else n===null&&(n={});return n}};Pn.ObjTree.prototype.addNode=function(e,t,n,r){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=r):n===1?e[t]=r:n===2?e[t]=[e[t],r]:e[t][e[t].length]=r};Pn.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};Pn.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],r=[];for(var i in t)if(rc(t,i)){var o=t[i];i.charAt(0)!==this.attr_prefix?typeof o>"u"||o==null?n[n.length]="<".concat(i," />"):typeof o=="object"&&o.constructor===Array?n[n.length]=this.array_to_xml(i,o):typeof o=="object"?n[n.length]=this.hash_to_xml(i,o):n[n.length]=this.scalar_to_xml(i,o):r[r.length]=" ".concat(i.substring(1),'="').concat(this.xml_escape(o),'"')}var a=r.join(""),s=n.join("");return typeof e>"u"||e==null||(n.length>0?s.match(/\n/)?s="<".concat(e).concat(a,`>
`).concat(s,"</").concat(e,`>
`):s="<".concat(e).concat(a,">").concat(s,"</").concat(e,`>
`):s="<".concat(e).concat(a,` />
`)),s};Pn.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];typeof i>"u"||i==null?n[n.length]="<".concat(e," />"):typeof i=="object"&&i.constructor===Array?n[n.length]=this.array_to_xml(e,i):typeof i=="object"?n[n.length]=this.hash_to_xml(e,i):n[n.length]=this.scalar_to_xml(e,i)}return n.join("")};Pn.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<".concat(e,">").concat(this.xml_escape(t),"</").concat(e,`>
`)};Pn.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var VW=function(e){return new Pn.ObjTree().parseXML(e)};function iO(e){return Object.prototype.toString.call(e)}function u0(e){return"  ".repeat(e)}function Pc(e){return iO(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var r=n;return n.charAt(0)==="-"&&(r=n.substring(1)),t[r]=Pc(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Pc(t)}):e}function qW(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Pc(e)).replace(/"/g,"'")}return t}var c0=`	
`;function Ru(e,t,n){var r=u0(n),i="",o=c0+r;if(t==="-json")return"";if(t==="#text")return o+e;if(t==="#cdata-section")return"".concat(o,"<![CDATA[").concat(e,"]]>");if(t==="#comment")return"".concat(o,"<!--").concat(e,"-->");if("".concat(t).charAt(0)==="-")return" ".concat(t.substring(1),'="').concat(qW(e),'"');if(Array.isArray(e))i+=e.map(function(u){return Ru(u,t,n+1)}).join("");else if(iO(e)==="[object Object]"){var a=Object.keys(e),s="",l=e["-json"]?c0+u0(n+1)+e["-json"]:"";i+="".concat(n===0?"":o,"<").concat(t),a.forEach(function(u){u.charAt(0)==="-"?s+=Ru(e[u],u,n+1):l+=Ru(e[u],u,n+1)}),i+=s+(l!==""?">".concat(l).concat(o,"</").concat(t,">"):" />")}else i+="".concat(o,"<").concat(t,">").concat(e.toString(),"</").concat(t,">");return i}function ZW(e){var t="";for(var n in e)t+=Ru(e[n],n,0);return t}var JW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dp=function(){return dp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dp.apply(this,arguments)},f0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},eg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Er=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},An;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(An||(An={}));var oO=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],QW=["properties","startPoint","endPoint","pointsList"],Nc={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},aO=function(e,t){var n=Object.keys(t||{});return n.forEach(function(r){if(e[r]){var i=t[r],o=i.in,a=i.out;o&&(e[r].in=o),a&&(e[r].out=a)}else e[r]=t[r]}),e},rr={"bpmn:startEvent":{out:function(e){var t,n,r=e.properties;return((n=(t=rr[r.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,r=e.properties;return((n=(t=rr[r.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,r=e.properties;return((n=(t=rr[r.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,r=e.properties;return((n=(t=rr[r.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,r=t.condition;return r?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,r=t.timerValue,i=t.definitionId,o=function(){return"<bpmn:".concat(n,' xsi:type="bpmn:tFormalExpression">').concat(r,"</bpmn:").concat(n,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(i,'"').concat(n&&r?">".concat(o(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(e,t){var n,r,i,o,a=e,s=t["-id"],l="",u="";try{for(var c=eg(Object.keys(t)),f=c.next();!f.done;f=c.next()){var d=f.value;d.includes("bpmn:")&&(i=dn(d.split(":"),2),l=i[1],u=(o=t[d])===null||o===void 0?void 0:o["#text"])}}catch(h){n={error:h}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(e,t){var n,r="",i="";return t["#cdata-section"]?(i="cdata",r=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(i="normal",r=t["#text"]),{"-condition":r,"-expressionType":i}}}};function e9(e){var t=e??{},n=t.retainedAttrsFields,r=t.excludeFields,i=t.transformer,o=new Set(Er(Er([],dn(QW),!1),dn(n||[]),!1)),a={in:new Set(Er(Er([],dn(Nc.in),!1),dn((r==null?void 0:r.in)||[]),!1)),out:new Set(Er(Er([],dn(Nc.out),!1),dn((r==null?void 0:r.out)||[]),!1))};return rr=aO(rr,i),function(s){var l=s.nodes,u=s.edges;function c(f,d){var h,v;if((f==null?void 0:f.flag)!==1){var p;if((p=rr[f.type])&&p.out){var g=p.out(f),y=Object.keys(g);y.length>0&&y.forEach(function(Y){f[Y]=g[Y]})}f!=null&&f.children&&(f.children=f.children.map(function(Y){var ie=l.find(function(se){return se.id===Y})||u.find(function(se){return se.id===Y});return ie||{}}));var m={};if(typeof f=="string")return f;if(Array.isArray(f))return f.map(function(Y){return c(Y,"")}).filter(function(Y){return Y!=null});try{for(var M=eg(Object.entries(f)),T=M.next();!T.done;T=M.next()){var L=dn(T.value,2),N=L[0],E=L[1];if((E==null?void 0:E.flag)===1)return;var k=[d,N].filter(function(Y){return Y}).join(".");a.out.has(k)||(typeof E!="object"?N.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(N)?m[N]=E:m["-".concat(N)]=E:o.has(k)?m["-".concat(N)]=c(E,k):m[N]=c(E,k))}}catch(Y){h={error:Y}}finally{try{T&&!T.done&&(v=M.return)&&v.call(M)}finally{if(h)throw h.error}}return m}}return c(s,"")}}function Rc(e){var t,n,r={};try{for(var i=eg(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=dn(o.value,2),s=a[0],l=a[1];s.indexOf("-")===0?r[s.substring(1)]=Pc(l):typeof l=="string"?r[s]=l:Object.prototype.toString.call(l)==="[object Object]"?r[s]=Rc(l):Array.isArray(l)?r[s]=l.map(function(u){return Rc(u)}):r[s]=l}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function t9(e,t,n){var r,i=new Map,o=e9(n)(t);o.nodes.forEach(function(s){var l=s["-id"],u=s["-type"],c=s.text,f=s.children,d=f0(s,["-id","-type","text","children"]),h={"-id":l};c!=null&&c["-value"]&&(h["-name"]=c["-value"]),d["-json"]&&(h["-json"]=d["-json"]),d["-properties"]&&Object.assign(h,d["-properties"]),f&&(h.children=f),e[u]||(e[u]=[]),e[u].push(h),i.set(l,h)});var a=o.edges.map(function(s){var l=s["-id"],u=s["-sourceNodeId"],c=s["-targetNodeId"],f=s.text,d=f0(s,["-id","-sourceNodeId","-targetNodeId","text"]),h=i.get(c);h["bpmn:incoming"]||(h["bpmn:incoming"]=[]),h["bpmn:incoming"].push(l);var v={"-id":l,"-sourceRef":u,"-targetRef":c};return f!=null&&f["-value"]&&(v["-name"]=f["-value"]),d["-json"]&&(v["-json"]=d["-json"]),d["-properties"]&&Object.assign(v,d["-properties"]),v});return t.edges.forEach(function(s){var l=s.sourceNodeId,u=s.id,c=i.get(l);c["bpmn:outgoing"]||(c["bpmn:outgoing"]=[]),c["bpmn:outgoing"].push(u)}),(r=e["bpmn:subProcess"])===null||r===void 0||r.forEach(function(s){var l={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},u=[];s.children.forEach(function(p){var g,y=i.get(p["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(M){y[M]&&y[M].forEach(function(T){l[M].add(T)})});var m=(g=e[p["-type"]])===null||g===void 0?void 0:g.findIndex(function(M){return M["-id"]===p["-id"]});m>=0&&e[p["-type"]].splice(m,1),i.delete(p["-id"]),s[p["-type"]]||(s[p["-type"]]=[]),s[p["-type"]].push(y)});var c=l["bpmn:incoming"],f=l["bpmn:outgoing"];f.forEach(function(p){c.has(p)&&u.push(p)});for(var d=function(p){var g=a.findIndex(function(y){return y["-id"]===u[p]});g>=0?(s["bpmn:sequenceFlow"]||(s["bpmn:sequenceFlow"]=[]),s["bpmn:sequenceFlow"].push(a[g]),a.splice(g,1)):p++,h=p},h,v=0;v<u.length;)d(v),v=h;delete s.children}),e[An.FLOW]=a,e}function n9(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var r,i=n.id,o=n.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=n.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),a}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var r,i=n.id,o=100,a=80,s=n.x,l=n.y,u=Fn.shapeConfigMap.get(n.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var c={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=n.text)===null||r===void 0)&&r.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c})}var r9=["bpmn:incoming","bpmn:outgoing"];function i9(e,t){var n=[],r=[],i=new Map,o=t??{},a=o.transformer,s=o.excludeFields,l={in:new Set(Er(Er([],dn(Nc.in),!1),dn((s==null?void 0:s.in)||[]),!1)),out:new Set(Er(Er([],dn(Nc.out),!1),dn((s==null?void 0:s.out)||[]),!1))};rr=aO(rr,a);var u=e["bpmn:definitions"];if(u){var c=u["bpmn:process"];(function(d,h){h.forEach(function(v){try{Object.keys(d).forEach(function(p){try{v(p)}catch(g){console.error(g)}})}catch(p){console.error(p)}})})(c,[function(d){function h(p){p["-children"]||(p["-children"]=[]),Object.keys(p).forEach(function(g){var y;g.indexOf("bpmn:")===0&&!r9.includes(g)&&(c[g]||(c[g]=[]),!Array.isArray(c[g])&&(c[g]=[c[g]]),Array.isArray(p[g])?(y=c[g]).push.apply(y,Er([],dn(p[g]),!1)):c[g].push(p[g]),Array.isArray(p[g])?p[g].forEach(function(m){!g.includes("Flow")&&p["-children"].push(m["-id"])}):!g.includes("Flow")&&p["-children"].push(p[g]["-id"]),delete p[g])})}if(d==="bpmn:subProcess"){var v=c[d];Array.isArray(v)?v.forEach(function(p){d==="bpmn:subProcess"&&h(p)}):h(v)}},function(d){var h=function(p){Object.keys(p).forEach(function(g){var y,m;if(g.includes("bpmn:")){var M={};rr[g]&&rr[g].in?(M=(m=(y=rr[g]).in)===null||m===void 0?void 0:m.call(y,g,b.cloneDeep(p[g])),delete p[g]):v(p[g]);var T=void 0;(T=Reflect.ownKeys(M)).length>0&&T.forEach(function(L){Reflect.set(p,L,M[L])})}})};function v(p){i.set(p["-id"],p),Array.isArray(p)?p.forEach(function(g){v(g)}):typeof p=="object"&&h(p)}v(c[d])},function(d){if(d.indexOf("bpmn:")===0){var h=c[d];if(d==="bpmn:sequenceFlow"){var v=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];r=a9(h,v)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(d==="bpmn:boundaryEvent"){var g=c[d],y=function(m){var M=m["-attachedToRef"],T=i.get(M);T["-boundaryEvents"]||(T["-boundaryEvents"]=[]),T["-boundaryEvents"].push(m["-id"])};Array.isArray(g)?g.forEach(function(m){y(m)}):y(g)}n=n.concat(o9(h,p,d))}}}])}var f=function(d,h,v){Object.keys(d).forEach(function(p){var g=v?"".concat(v,".").concat(p):p;h.has(g)?delete d[p]:typeof d[p]=="object"&&f(d[p],h,g)})};return n.forEach(function(d){var h,v;if(!((h=t==null?void 0:t.mapping)===null||h===void 0)&&h.in){var p=(v=t==null?void 0:t.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}f(d,l.in,"")}),r.forEach(function(d){var h,v;if(!((h=t==null?void 0:t.mapping)===null||h===void 0)&&h.in){var p=(v=t==null?void 0:t.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}f(d,l.in,"")}),{nodes:n,edges:r}}function o9(e,t,n){var r=[];if(Array.isArray(e))e.forEach(function(a){var s;Array.isArray(t)?s=t.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=t;var l=d0(s,n,a);r.push(l)});else{var i=void 0;Array.isArray(t)?i=t.find(function(a){return a["-bpmnElement"]===e["-id"]}):i=t;var o=d0(i,n,e);r.push(o)}return r}function d0(e,t,n){var r=Number(e["dc:Bounds"]["-x"]),i=Number(e["dc:Bounds"]["-y"]),o=n["-children"],a=n["-name"],s=Fn.shapeConfigMap.get(t);s&&(r+=s.width/2,i+=s.height/2);var l={};Object.entries(n).forEach(function(d){var h=dn(d,2),v=h[0],p=h[1];oO.includes(v)||(l[v]=p)}),l=Rc(l);var u;if(a&&(u={x:r,y:i,value:a},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var c=e["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(c["-x"])+Number(c["-width"])/2,u.y=Number(c["-y"])+Number(c["-height"])/2}var f={id:e["-bpmnElement"],type:t,x:r,y:i,properties:l};return o&&(f.children=o),u&&(f.text=u),f}function a9(e,t){var n=[];if(Array.isArray(e))e.forEach(function(i){var o;Array.isArray(t)?o=t.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=t,n.push(h0(o,i))});else{var r=void 0;Array.isArray(t)?r=t.find(function(i){return i["-bpmnElement"]===e["-id"]}):r=t,n.push(h0(r,e))}return n}function h0(e,t){var n,r=t["-name"]?"".concat(t["-name"]):"";if(r){var i=e["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(u){o<u.length&&(o=u.length)}),n={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a={};Object.entries(t).forEach(function(u){var c=dn(u,2),f=c[0],d=c[1];oO.includes(f)||(a[f]=d)}),a=Rc(a);var s=e["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),l={id:t["-id"],type:An.FLOW,pointsList:s,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:a};return n&&(l.text=n),l}var Fn=function(){function e(t){var n=t.lf,r=this;this.adapterOut=function(i,o){var a,s,l=dp({},r.processAttributes);t9(l,i,o);var u={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};n9(u,i);var c=r.definitionAttributes;c["bpmn:process"]=l,c["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":u};var f={"bpmn:definitions":c};if(!((a=o==null?void 0:o.mapping)===null||a===void 0)&&a.out){var d=(s=o==null?void 0:o.mapping)===null||s===void 0?void 0:s.out,h=function(v){Array.isArray(v)&&v.forEach(function(p){return h(p)}),typeof v=="object"&&Object.keys(v).forEach(function(p){var g;(g=d[p])?(v[g]=b.cloneDeep(v[p]),delete v[p],h(v[g])):h(v[p])})};h(f)}return f},this.adapterIn=function(i,o){if(i)return i9(i,o)},n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Fn.shapeConfigMap.set(An.START,{width:e0.width,height:e0.height});Fn.shapeConfigMap.set(An.END,{width:t0.width,height:t0.height});Fn.shapeConfigMap.set(An.INTERMEDIATE_CATCH,{width:Mc.width,height:Mc.height});Fn.shapeConfigMap.set(An.INTERMEDIATE_THROW,{width:Mc.width,height:Mc.height});Fn.shapeConfigMap.set(An.BOUNDARY,{width:n0.width,height:n0.height});Fn.shapeConfigMap.set(An.PARALLEL_GATEWAY,{width:r0.width,height:r0.height});Fn.shapeConfigMap.set(An.INCLUSIVE_GATEWAY,{width:i0.width,height:i0.height});Fn.shapeConfigMap.set(An.EXCLUSIVE_GATEWAY,{width:o0.width,height:o0.height});Fn.shapeConfigMap.set(An.SYSTEM,{width:a0.width,height:a0.height});Fn.shapeConfigMap.set(An.USER,{width:s0.width,height:s0.height});Fn.shapeConfigMap.set(An.SUBPROCESS,{width:l0.width,height:l0.height});(function(e){JW(t,e);function t(n){var r=e.call(this,n)||this;r.adapterXmlIn=function(a){var s=VW(a);return r.adapterIn(s,r.props)},r.adapterXmlOut=function(a){var s=r.adapterOut(a,r.props);return ZW(s)};var i=n.lf,o=n.props;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r.props=o,r}return t.pluginName="BPMNAdapter",t})(Fn);function s9(e,t,n){var r=t.x,i=t.y,o=e.x,a=e.y,s=o-r,l=a-i,u=s*Math.cos(n)-l*Math.sin(n),c=s*Math.sin(n)+l*Math.cos(n),f=u+r,d=c+i;return{x:f,y:d}}var l9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dc=function(){return Dc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dc.apply(this,arguments)},u9=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},c9=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};(function(e){l9(t,e);function t(){var n=e.apply(this,c9([],u9(arguments),!1))||this;return n.childrenPositionMap=new Map,n.onNodeRotate=function(r){var i=r.model,o=n.props,a=o.model,s=o.graphModel,l=a.transformWithContainer,u=a.isRestrict,c=n.childrenPositionMap;if(!(!l||u)&&i.id===a.id){var f={x:a.x,y:a.y};pt(Array.from(a.children),function(d){var h=s.getNodeModelById(d);if(h){var v={x:h.x,y:h.y};c.has(h.id)?v=c.get(h.id):c.set(h.id,v);var p=i.rotate*(180/Math.PI);p<0&&(p+=360);var g=p*(Math.PI/180),y=s9(v,f,g);h.moveTo(y.x,y.y),h.rotate=i.rotate}})}},n.onNodeResize=function(r){var i=r.deltaX,o=r.deltaY,a=r.index,s=r.model,l=r.preData,u=n.props,c=u.model,f=u.graphModel,d=c.transformWithContainer,h=c.isRestrict;if(!(!d||h)&&s.id===c.id){var v=l.properties,p=v||{},g=p.width,y=p.height;pt(Array.from(c.children),function(m){var M=f.getNodeModelById(m);if(M){var T=M.width/g*i,L=M.height/y*o;LS({deltaX:T,deltaY:L,index:a,nodeModel:M,graphModel:f,cancelCallback:function(){}})}})}},n.onNodeMouseMove=function(){},n.graphRendered=function(){var r=n.props.model;r.isCollapsed&&r.toggleCollapse(!0)},n}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this);var n=this.props.graphModel.eventCenter;n.on("node:rotate",this.onNodeRotate),n.on("node:resize",this.onNodeResize),n.on("node:mousemove",this.onNodeMouseMove),n.on("graph:rendered",this.graphRendered)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this);var n=this.props.graphModel.eventCenter;n.off("node:rotate",this.onNodeRotate),n.off("node:resize",this.onNodeResize),n.off("node:mousemove",this.onNodeMouseMove),n.off("graph:rendered",this.graphRendered)},t.prototype.getNodesInGroup=function(n,r){var i=this,o=[];return n.isGroup&&pt(Array.from(n.children),function(a){o.push(a);var s=r.getNodeModelById(a);s!=null&&s.isGroup&&(o=o.concat(i.getNodesInGroup(s,r)))}),o},t.prototype.getResizeControl=function(){var n=this.props.model,r=n.resizable,i=n.isCollapsed,o=r&&!i;return o?e.prototype.getResizeControl.call(this):null},t.prototype.getAppendAreaShape=function(){var n=this.props.model,r=n.width,i=n.height,o=n.x,a=n.y,s=n.radius,l=n.groupAddable;if(!l)return null;var u=n.getNodeStyle().strokeWidth,c=u===void 0?0:u,f=n.getAddableOutlineStyle(),d=r+c+8,h=i+c+8;return Te("rect",Dc(Dc({},f),{width:d,height:h,x:o-d/2,y:a-h/2,rx:s,ry:s}))},t.prototype.getCollapseIcon=function(n,r){return"M ".concat(n+3,",").concat(r+6," ").concat(n+11,",").concat(r+6," M").concat(n+7,",").concat(r+2," ").concat(n+7,",").concat(r+10)},t.prototype.getExpandIcon=function(n,r){return"M ".concat(n+3,",").concat(r+6," ").concat(n+11,",").concat(r+6," ")},t.prototype.getOperateIcon=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=r-o/2+10,l=i-a/2+10;if(!n.collapsible)return null;var u=n!=null&&n.isCollapsed?this.getCollapseIcon(s,l):this.getExpandIcon(s,l),c=Te("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:u});return Te("g",{},[Te("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:s,y:l,onClick:function(){n.toggleCollapse(!n.isCollapsed)}}),c])},t.prototype.getShape=function(){return Te("g",{},[this.getAppendAreaShape(),e.prototype.getShape.call(this),this.getOperateIcon()])},t})(Fo);var f9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lc=function(){return Lc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Lc.apply(this,arguments)},Pd=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},ra=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},hs=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},d9=400,h9=230,p9=80,v9=60,g9=-1e4;(function(e){f9(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.isGroup=!0,i.isRestrict=!1,i.autoResize=!1,i.collapsible=!0,i.isCollapsed=!1,i.groupAddable=!1,i.transformWithContainer=!1,i.childrenLastCollapseStateDict=new Map,i.childrenLastCollapseStateDict=new Map,i.initNodeData(n),i.setAttributes(),i}return t.prototype.initNodeData=function(n){var r;e.prototype.initNodeData.call(this,n);var i=(r=n.properties)!==null&&r!==void 0?r:{},o=i.children,a=i.width,s=i.height,l=i.collapsedWidth,u=i.collapsedHeight,c=i.collapsible,f=i.isCollapsed,d=i.zIndex,h=i.isRestrict,v=i.autoResize,p=i.autoToFront,g=i.transformWithContainer;this.children=o?new Set(o):new Set,this.zIndex=d??g9,this.isCollapsed=f??!1;var y=a??d9,m=s??h9;this.width=y,this.height=m,this.expandWidth=y,this.expandHeight=m,this.collapsedWidth=l??p9,this.collapsedHeight=u??v9,this.isRestrict=h??!1,this.transformWithContainer=g??!1,this.autoResize=v??!1,this.collapsible=c??!0,this.autoToFront=p??!1,this.text.editable=!1,this.text.draggable=!1},t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this)},t.prototype.getData=function(){var n=this,r=e.prototype.getData.call(this),i=[];return pt(Array.from(this.children),function(o){var a=n.graphModel.getNodeModelById(o);a&&!a.virtual&&i.push(o)}),r.children=i,r.properties&&(r.properties.children=i,r.properties.isCollapsed=this.isCollapsed),r},t.prototype.getNodesInGroup=function(n){var r=[];return n.isGroup&&pt(Array.from(n.children),function(i){r.push(i)}),r},t.prototype.getMoveDistance=function(n,r,i){i===void 0&&(i=!1);var o=ra(e.prototype.getMoveDistance.call(this,n,r,i),2),a=o[0],s=o[1],l=this.getNodesInGroup(this);return this.graphModel.moveNodes(l,n,r,i),[a,s]},t.prototype.getHistoryData=function(){var n=e.prototype.getHistoryData.call(this);n.children=Array.from(this.children),n.isGroup=!0;var r=this,i=r.x,o=r.y,a=r.collapsedWidth,s=r.collapsedHeight,l=r.expandWidth,u=r.expandHeight,c=r.isCollapsed;return c&&(n.x=i+l/2-a/2,n.y=o+u/2-s/2,n.text&&(n.text.x=n.text.x+l/2-a/2,n.text.y=n.text.y+u/2-s/2)),n},t.prototype.toggleCollapse=function(n){var r=this,i=!!n;this.isCollapsed=i,i?this.collapse():this.expand();var o=hs(hs([],ra(this.incoming.edges),!1),ra(this.outgoing.edges),!1),a=Array.from(this.children);pt(a,function(s){var l,u,c=r.graphModel.elementsModelMap.get(s);if(c){var f=c.isCollapsed;if(c.isGroup){var d=c;if(d.isCollapsed||d.toggleCollapse(n),!n){var h=(l=r.childrenLastCollapseStateDict)===null||l===void 0?void 0:l.get(s);h!==void 0&&h!==c.isCollapsed&&d.toggleCollapse(h)}}if((u=r.childrenLastCollapseStateDict)===null||u===void 0||u.set(s,!!f),c.visible=!n,c.BaseType===It.NODE){var v=c.incoming.edges,p=c.outgoing.edges;o=hs(hs(hs([],ra(o),!1),ra(v),!1),ra(p),!1)}}}),this.collapseEdge(i,o)},t.prototype.collapse=function(){var n=this,r=n.x,i=n.y,o=n.text,a=n.width,s=n.height,l=n.collapsedWidth,u=n.collapsedHeight;this.x=r-a/2+l/2,this.y=i-s/2+u/2,this.text.x=o.x-a/2+l/2,this.text.y=o.y-s/2+u/2,this.expandWidth=a,this.expandHeight=s,this.width=l,this.height=u},t.prototype.expand=function(){var n=this,r=n.x,i=n.y,o=n.text,a=n.expandWidth,s=n.expandHeight,l=n.collapsedWidth,u=n.collapsedHeight;this.width=a,this.height=s,this.x=r+this.width/2-l/2,this.y=i+this.height/2-u/2,this.text.x=o.x+this.width/2-l/2,this.text.y=o.y+this.height/2-u/2},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var r=this.graphModel.addEdge(n);r.virtual=!0,r.text.editable=!1,r.isCollapsedEdge=!0},t.prototype.collapseEdge=function(n,r){var i=this,o=this.graphModel;pt(r,function(a,s){var l,u=a.getData(),c=u.targetNodeId,f=u.sourceNodeId,d=Lc(Lc({},u),{id:"".concat(u.id,"__").concat(s),text:(l=u.text)===null||l===void 0?void 0:l.value});a.virtual&&o.deleteEdgeById(a.id);var h=o.dynamicGroup.getGroupByNodeId(c);h||(h=o.getNodeModelById(c));var v=o.dynamicGroup.getGroupByNodeId(f);v||(v=o.getNodeModelById(f)),n&&a.visible&&(i.children.has(f)||i.id===f?(d.startPoint=void 0,d.sourceNodeId=i.id):(d.endPoint=void 0,d.targetNodeId=i.id),(h.id!==i.id||v.id!==i.id)&&i.createVirtualEdge(d),a.visible=!1),!n&&!a.visible&&(h&&h.isGroup&&h.isCollapsed?(d.targetNodeId=h.id,d.endPoint=void 0,i.createVirtualEdge(d)):v&&v.isGroup&&v.isCollapsed?(d.sourceNodeId=v.id,d.startPoint=void 0,i.createVirtualEdge(d)):a.visible=!0)})},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.setAllowAppendChild=function(n){this.groupAddable=n},t.prototype.addChild=function(n){this.children.add(n);var r=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:r,childId:n})},t.prototype.removeChild=function(n){this.children.delete(n);var r=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:r})},t.prototype.toBack=function(){this.zIndex--},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.getAnchorStyle=function(){var n=e.prototype.getAnchorStyle.call(this);return n.stroke="transparent",n.fill="transparent",n.hover&&(n.hover.fill="transparent",n.hover.stroke="transparent"),n},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},Pd([q],t.prototype,"isCollapsed",void 0),Pd([q],t.prototype,"groupAddable",void 0),Pd([q],t.prototype,"transformWithContainer",void 0),t})(Ia);var p0;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(p0||(p0={}));var y9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gs=function(){return Gs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gs.apply(this,arguments)},m9=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},_9=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},b9=function(e){y9(t,e);function t(n){var r=e.call(this,n)||this;r.textRef=of(),r.setHoverOn=function(){var l=r.props.element;l.isDragging||r.state.isHovered||(r.setState({isHovered:!0}),l.setHovered(!0))},r.setHoverOff=function(){var l=r.props.element;r.state.isHovered&&(r.setState({isHovered:!1}),l.setHovered(!1))},r.handleMouseDown=function(l){var u,c=r.props,f=c.label,d=c.graphModel,h=d.editConfigModel.nodeTextDraggable;((u=f.draggable)!==null&&u!==void 0?u:h)&&!r.state.isDragging&&!r.state.isEditing&&r.stepDrag.handleMouseDown(l)},r.handleMouseUp=function(l){r.state.isDragging&&r.stepDrag.handleMouseUp(l)},r.handleDragging=function(l){var u=l.deltaX,c=l.deltaY;r.state.isDragging||r.setState({isDragging:!0});var f=r.props,d=f.label,h=f.graphModel,v=h.transformModel,p=_9(v.fixDeltaXY(u,c),2),g=p[0],y=p[1];r.setElementModelLabelInfo({x:d.x+g,y:d.y+y}),h.eventCenter.emit("label:drag",{data:d.getData(),model:d})},r.handleDragEnd=function(){r.setState({isDragging:!1})},r.handleClick=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel;f.setSelected(!r.state.isSelected),r.setState({isSelected:!r.state.isSelected}),r.setElementModelLabelInfo({isSelected:!0}),d.eventCenter.emit("label:click",{data:c.getData(),e:l,model:f})},r.handleDbClick=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel;if(d.eventCenter.emit("label:dblclick",{data:c.getData(),e:l,model:f}),!c.editable){f.setSelected(!0);return}if(f.setSelected(),f.setElementState(ut.TEXT_EDIT),r.setState({isEditing:!0}),r.textRef.current){r.textRef.current.contentEditable="true",r.textRef.current.focus();var h=document.createRange(),v=window.getSelection();h.selectNodeContents(r.textRef.current),h.collapse(!1),v==null||v.removeAllRanges(),v==null||v.addRange(h)}},r.handleBlur=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel.eventCenter;d.emit("label:blur",{e:l,model:f,data:c.getData(),element:r.textRef.current}),r.setState({isDragging:!1,isHovered:!1,isSelected:!1})},r.handleInput=function(l){var u=r.props,c=u.label,f=u.graphModel;f.eventCenter.emit("label:input",{e:l,data:c.getData()})},r.reCalcLabelSize=function(){};var i=n.label,o=n.graphModel,a=o.gridSize,s=o.eventCenter;return r.stepDrag=new yr({onDragging:r.handleDragging,onDragEnd:r.handleDragEnd,step:a,eventType:"LABEL",model:i,eventCenter:s}),r.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},r}return t.prototype.setElementModelLabelInfo=function(n){var r=this.props,i=r.label,o=r.element,a=r.graphModel,s=o.properties._label,l=s,u=Pv(l,function(d){return d.id===i.id}),c=l[u];l[u]=Gs(Gs({},c),n);var f=a.getElement(o.id);f==null||f.setProperty("_label",l)},t.prototype.componentDidMount=function(){var n=this,r=this.props,i=r.label,o=r.element,a=r.graphModel;a.eventCenter.on("blank:click,node:click,edge:click,label:click",function(s){var l,u,c,f,d=s.data;if(((d==null?void 0:d.type)!=="label"||d.type==="label"&&d.id!==i.id||n.state.isSelected)&&n.setState({isSelected:!1}),((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&n.state.isEditing){n.setState({isEditing:!1});var h=(u=(l=n.textRef.current)===null||l===void 0?void 0:l.innerText)!==null&&u!==void 0?u:"",v=(f=(c=n.textRef.current)===null||c===void 0?void 0:c.innerHTML)!==null&&f!==void 0?f:"";n.setElementModelLabelInfo({value:h,content:v,isSelected:!1}),o.setElementState(ut.DEFAULT)}((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&n.textRef.current&&(n.textRef.current.contentEditable="false")})},t.prototype.componentDidUpdate=function(){},t.prototype.componentWillUnmount=function(){var n=this.props.graphModel;n.eventCenter.off("blank:click,node:click,edge:click")},t.prototype.render=function(){var n,r=this.props,i=r.label,o=r.element,a=r.graphModel,s=this.state,l=s.isDragging,u=s.isHovered,c=s.isSelected,f=s.isEditing,d=a.transformModel,h=d.getTransformStyle().transform,v=i.id,p=i.x,g=i.y,y=i.zIndex,m=i.vertical,M=i.style,T=i.rotate,L=i.content,N=i.labelWidth,E=i.textOverflowMode,k=N??(o.BaseType==="node"?o.width-20:80),Y={left:"".concat(p-k/2,"px"),top:"".concat(g-10,"px"),width:"".concat(k,"px"),height:"20px",zIndex:y??1,transform:T?"".concat(h," rotate(").concat(T,"deg)"):"".concat(h," rotate(").concat(m?-.25:0,"turn)")};return V("div",{id:"element-container-".concat(v),className:Kh("lf-label-editor-container"),style:Y,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:V("div",{ref:this.textRef,id:"editor-container-".concat(v),className:Kh("lf-label-editor",(n={"lf-label-editor-dragging":l,"lf-label-editor-editing":f,"lf-label-editor-hover":!f&&(u||c)},n["lf-label-editor-".concat(E)]=!f,n)),onInput:this.handleInput,style:Gs({maxWidth:"".concat(k,"px"),boxSizing:"border-box",display:"inline-block",background:f||o.BaseType==="edge"?"#fff":"transparent"},M),dangerouslySetInnerHTML:{__html:L}})})},t=m9([On],t),t}(ot),nr=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},x9=Gi,w9=function(){function e(t,n,r){var i;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=n,this.graphModel=r,this.id=(i=t.id)!==null&&i!==void 0?i:x9(),this.initLabelData(t)}return e.prototype.initLabelData=function(t){_t(this,t)},e.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:wr(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},nr([q],e.prototype,"x",void 0),nr([q],e.prototype,"y",void 0),nr([q],e.prototype,"content",void 0),nr([q],e.prototype,"value",void 0),nr([q],e.prototype,"rotate",void 0),nr([q],e.prototype,"style",void 0),nr([q],e.prototype,"zIndex",void 0),nr([q],e.prototype,"vertical",void 0),nr([q],e.prototype,"editable",void 0),nr([q],e.prototype,"draggable",void 0),nr([q],e.prototype,"labelWidth",void 0),nr([q],e.prototype,"textOverflowMode",void 0),e}(),Du={exports:{}},Nd=Du.exports,v0;function E9(){return v0||(v0=1,function(e){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(t){if("Element"in t){var n="classList",r="prototype",i=t.Element[r],o=Object,a=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[r].indexOf||function(v){for(var p=0,g=this.length;p<g;p++)if(p in this&&this[p]===v)return p;return-1},l=function(v,p){this.name=v,this.code=DOMException[v],this.message=p},u=function(v,p){if(p==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(p))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(v,p)},c=function(v){for(var p=a.call(v.getAttribute("class")||""),g=p?p.split(/\s+/):[],y=0,m=g.length;y<m;y++)this.push(g[y]);this._updateClassName=function(){v.setAttribute("class",this.toString())}},f=c[r]=[],d=function(){return new c(this)};if(l[r]=Error[r],f.item=function(v){return this[v]||null},f.contains=function(v){return v+="",u(this,v)!==-1},f.add=function(){var v=arguments,p=0,g=v.length,y,m=!1;do y=v[p]+"",u(this,y)===-1&&(this.push(y),m=!0);while(++p<g);m&&this._updateClassName()},f.remove=function(){var v=arguments,p=0,g=v.length,y,m=!1,M;do for(y=v[p]+"",M=u(this,y);M!==-1;)this.splice(M,1),m=!0,M=u(this,y);while(++p<g);m&&this._updateClassName()},f.toggle=function(v,p){v+="";var g=this.contains(v),y=g?p!==!0&&"remove":p!==!1&&"add";return y&&this[y](v),p===!0||p===!1?p:!g},f.toString=function(){return this.join(" ")},o.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(i,n,h)}catch(v){v.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,n,h))}}else o[r].__defineGetter__&&i.__defineGetter__(n,d)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{new Blob;return}catch{}var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(i){var o=function(E){return Object.prototype.toString.call(E).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},s=function(k,Y,ie){this.data=k,this.size=k.length,this.type=Y,this.encoding=ie},l=a.prototype,u=s.prototype,c=i.FileReaderSync,f=function(E){this.code=this[this.name=E]},d="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=d.length,v=i.URL||i.webkitURL||i,p=v.createObjectURL,g=v.revokeObjectURL,y=v,m=i.btoa,M=i.atob,T=i.ArrayBuffer,L=i.Uint8Array,N=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=u.fake=!0;h--;)f.prototype[d[h]]=h+1;return v.createObjectURL||(y=i.URL=function(E){var k=document.createElementNS("http://www.w3.org/1999/xhtml","a"),Y;return k.href=E,"origin"in k||(k.protocol.toLowerCase()==="data:"?k.origin=null:(Y=E.match(N),k.origin=Y&&Y[1])),k}),y.createObjectURL=function(E){var k=E.type,Y;if(k===null&&(k="application/octet-stream"),E instanceof s)return Y="data:"+k,E.encoding==="base64"?Y+";base64,"+E.data:E.encoding==="URI"?Y+","+decodeURIComponent(E.data):m?Y+";base64,"+m(E.data):Y+","+encodeURIComponent(E.data);if(p)return p.call(v,E)},y.revokeObjectURL=function(E){E.substring(0,5)!=="data:"&&g&&g.call(v,E)},l.append=function(E){var k=this.data;if(L&&(E instanceof T||E instanceof L)){for(var Y="",ie=new L(E),se=0,pe=ie.length;se<pe;se++)Y+=String.fromCharCode(ie[se]);k.push(Y)}else if(o(E)==="Blob"||o(E)==="File")if(c){var O=new c;k.push(O.readAsBinaryString(E))}else throw new f("NOT_READABLE_ERR");else E instanceof s?E.encoding==="base64"&&M?k.push(M(E.data)):E.encoding==="URI"?k.push(decodeURIComponent(E.data)):E.encoding==="raw"&&k.push(E.data):(typeof E!="string"&&(E+=""),k.push(unescape(encodeURIComponent(E))))},l.getBlob=function(E){return arguments.length||(E=null),new s(this.data.join(""),E,"raw")},l.toString=function(){return"[object BlobBuilder]"},u.slice=function(E,k,Y){var ie=arguments.length;return ie<3&&(Y=null),new s(this.data.slice(E,ie>1?k:this.data.length),Y,this.encoding)},u.toString=function(){return"[object Blob]"},u.close=function(){this.size=0,delete this.data},a}(t);t.Blob=function(i,o){var a=o&&o.type||"",s=new n;if(i)for(var l=0,u=i.length;l<u;l++)Uint8Array&&i[l]instanceof Uint8Array?s.append(i[l].buffer):s.append(i[l]);var c=s.getBlob(a);return!c.slice&&c.webkitSlice&&(c.slice=c.webkitSlice),c};var r=Object.getPrototypeOf||function(i){return i.__proto__};t.Blob.prototype=r(new t.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||Nd.content||Nd),function(t,n){var r=typeof process<"u"&&process&&process.versions&&process.versions.electron;r?t.MediumEditor=n:e.exports=n}(Nd,function(){function t(n,r){return this.init(n,r)}return t.extensions={},function(n){function r(l,u){var c,f=Array.prototype.slice.call(arguments,2);u=u||{};for(var d=0;d<f.length;d++){var h=f[d];if(h)for(c in h)h.hasOwnProperty(c)&&typeof h[c]<"u"&&(l||u.hasOwnProperty(c)===!1)&&(u[c]=h[c])}return u}var i=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),i=o.contains(a)}catch{}var s={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:n.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(l){return!!(s.isMac&&l.metaKey||!s.isMac&&l.ctrlKey)},isKey:function(l,u){var c=s.getKeyCode(l);return Array.isArray(u)===!1?c===u:u.indexOf(c)!==-1},getKeyCode:function(l){var u=l.which;return u===null&&(u=l.charCode!==null?l.charCode:l.keyCode),u},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var u=[!0].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},defaults:function(){var u=[!1].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},createLink:function(l,u,c,f){var d=l.createElement("a");return s.moveTextRangeIntoElement(u[0],u[u.length-1],d),d.setAttribute("href",c),f&&(f==="_blank"&&d.setAttribute("rel","noopener noreferrer"),d.setAttribute("target",f)),d},findOrCreateMatchingTextNodes:function(l,u,c){for(var f=l.createTreeWalker(u,NodeFilter.SHOW_ALL,null,!1),d=[],h=0,v=!1,p=null,g=null;(p=f.nextNode())!==null;)if(!(p.nodeType>3))if(p.nodeType===3){if(!v&&c.start<h+p.nodeValue.length&&(v=!0,g=s.splitStartNodeIfNeeded(p,c.start,h)),v&&s.splitEndNodeIfNeeded(p,g,c.end,h),v&&h===c.end)break;if(v&&h>c.end+1)throw new Error("PerformLinking overshot the target!");v&&d.push(g||p),h+=p.nodeValue.length,g!==null&&(h+=g.nodeValue.length,f.nextNode()),g=null}else p.tagName.toLowerCase()==="img"&&(!v&&c.start<=h&&(v=!0),v&&d.push(p));return d},splitStartNodeIfNeeded:function(l,u,c){return u!==c?l.splitText(u-c):null},splitEndNodeIfNeeded:function(l,u,c,f){var d,h;d=f+l.nodeValue.length+(u?u.nodeValue.length:0)-1,h=c-f-(u?l.nodeValue.length:0),d>=c&&f!==d&&h!==0&&(u||l).splitText(h)},splitByBlockElements:function(l){if(l.nodeType!==3&&l.nodeType!==1)return[];var u=[],c=t.util.blockContainerElementNames.join(",");if(l.nodeType===3||l.querySelectorAll(c).length===0)return[l];for(var f=0;f<l.childNodes.length;f++){var d=l.childNodes[f];if(d.nodeType===3)u.push(d);else if(d.nodeType===1){var h=d.querySelectorAll(c);h.length===0?u.push(d):u=u.concat(t.util.splitByBlockElements(d))}}return u},findAdjacentTextNodeWithContent:function(u,c,f){var d=!1,h,v=f.createNodeIterator(u,NodeFilter.SHOW_TEXT,null,!1);for(h=v.nextNode();h;){if(h===c)d=!0;else if(d&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=v.nextNode()}return h},findPreviousSibling:function(l){if(!l||s.isMediumEditorElement(l))return!1;for(var u=l.previousSibling;!u&&!s.isMediumEditorElement(l.parentNode);)l=l.parentNode,u=l.previousSibling;return u},isDescendant:function(u,c,f){if(!u||!c)return!1;if(u===c)return!!f;if(u.nodeType!==1)return!1;if(i||c.nodeType!==3)return u.contains(c);for(var d=c.parentNode;d!==null;){if(d===u)return!0;d=d.parentNode}return!1},isElement:function(u){return!!(u&&u.nodeType===1)},throttle:function(l,u){var c=50,f,d,h,v=null,p=0,g=function(){p=Date.now(),v=null,h=l.apply(f,d),v||(f=d=null)};return!u&&u!==0&&(u=c),function(){var y=Date.now(),m=u-(y-p);return f=this,d=arguments,m<=0||m>u?(v&&(clearTimeout(v),v=null),p=y,h=l.apply(f,d),v||(f=d=null)):v||(v=setTimeout(g,m)),h}},traverseUp:function(l,u){if(!l)return!1;do{if(l.nodeType===1){if(u(l))return l;if(s.isMediumEditorElement(l))return!1}l=l.parentNode}while(l);return!1},htmlEntities:function(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(l,u){var c,f,d,h,v,p,g,y=!1,m=["insertHTML",!1,u];if(!t.util.isEdge&&l.queryCommandSupported("insertHTML"))try{return l.execCommand.apply(l,m)}catch{}if(c=l.getSelection(),c.rangeCount){if(f=c.getRangeAt(0),g=f.commonAncestorContainer,s.isMediumEditorElement(g)&&!g.firstChild)f.selectNode(g.appendChild(l.createTextNode("")));else if(g.nodeType===3&&f.startOffset===0&&f.endOffset===g.nodeValue.length||g.nodeType!==3&&g.innerHTML===f.toString()){for(;!s.isMediumEditorElement(g)&&g.parentNode&&g.parentNode.childNodes.length===1&&!s.isMediumEditorElement(g.parentNode);)g=g.parentNode;f.selectNode(g)}for(f.deleteContents(),d=l.createElement("div"),d.innerHTML=u,h=l.createDocumentFragment();d.firstChild;)v=d.firstChild,p=h.appendChild(v);f.insertNode(h),p&&(f=f.cloneRange(),f.setStartAfter(p),f.collapse(!0),t.selection.selectRange(l,f)),y=!0}return l.execCommand.callListeners&&l.execCommand.callListeners(m,y),y},execFormatBlock:function(l,u){var c=s.getTopBlockContainer(t.selection.getSelectionStart(l)),f;if(u==="blockquote"){if(c&&(f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return s.isBlockContainer(d)})))return l.execCommand("outdent",!1,null);if(s.isIE)return l.execCommand("indent",!1,u)}if(c&&u===c.nodeName.toLowerCase()&&(u="p"),s.isIE&&(u="<"+u+">"),c&&c.nodeName.toLowerCase()==="blockquote"){if(s.isIE&&u==="<p>")return l.execCommand("outdent",!1,u);if((s.isFF||s.isEdge)&&u==="p")return f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return!s.isBlockContainer(d)})&&l.execCommand("formatBlock",!1,u),l.execCommand("outdent",!1,u)}return l.execCommand("formatBlock",!1,u)},setTargetBlank:function(l,u){var c,f=u||!1;if(l.nodeName.toLowerCase()==="a")l.target="_blank",l.rel="noopener noreferrer";else for(l=l.getElementsByTagName("a"),c=0;c<l.length;c+=1)(f===!1||f===l[c].attributes.href.value)&&(l[c].target="_blank",l[c].rel="noopener noreferrer")},removeTargetBlank:function(l,u){var c;if(l.nodeName.toLowerCase()==="a")l.removeAttribute("target"),l.removeAttribute("rel");else for(l=l.getElementsByTagName("a"),c=0;c<l.length;c+=1)u===l[c].attributes.href.value&&(l[c].removeAttribute("target"),l[c].removeAttribute("rel"))},addClassToAnchors:function(l,u){var c=u.split(" "),f,d;if(l.nodeName.toLowerCase()==="a")for(d=0;d<c.length;d+=1)l.classList.add(c[d]);else{var h=l.getElementsByTagName("a");if(h.length===0){var v=s.getClosestTag(l,"a");l=v?[v]:[]}else l=h;for(f=0;f<l.length;f+=1)for(d=0;d<c.length;d+=1)l[f].classList.add(c[d])}},isListItem:function(l){if(!l)return!1;if(l.nodeName.toLowerCase()==="li")return!0;for(var u=l.parentNode,c=u.nodeName.toLowerCase();c==="li"||!s.isBlockContainer(u)&&c!=="div";){if(c==="li")return!0;if(u=u.parentNode,u)c=u.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(l,u){if(u.nodeName.toLowerCase()==="li"){var c=u.parentElement;c.parentElement.nodeName.toLowerCase()==="p"&&(s.unwrap(c.parentElement,l),t.selection.moveCursor(l,u.firstChild,u.firstChild.textContent.length))}},splitOffDOMTree:function(l,u,c){for(var f=u,d=null,h=!c;f!==l;){var v=f.parentNode,p=v.cloneNode(!1),g=h?f:v.firstChild,y;for(d&&(h?p.appendChild(d):y=d),d=p;g;){var m=g.nextSibling;g===f?(g.hasChildNodes()?g=g.cloneNode(!1):g.parentNode.removeChild(g),g.textContent&&d.appendChild(g),g=h?m:null):(g.parentNode.removeChild(g),(g.hasChildNodes()||g.textContent)&&d.appendChild(g),g=m)}y&&d.appendChild(y),f=v}return d},moveTextRangeIntoElement:function(l,u,c){if(!l||!u)return!1;var f=s.findCommonRoot(l,u);if(!f)return!1;if(u===l){var d=l.parentNode,h=l.nextSibling;return d.removeChild(l),c.appendChild(l),h?d.insertBefore(c,h):d.appendChild(c),c.hasChildNodes()}for(var v=[],p,g,y,m=0;m<f.childNodes.length;m++)if(y=f.childNodes[m],!p)s.isDescendant(y,l,!0)&&(p=y);else if(s.isDescendant(y,u,!0)){g=y;break}else v.push(y);var M=g.nextSibling,T=f.ownerDocument.createDocumentFragment();return p===l?(p.parentNode.removeChild(p),T.appendChild(p)):T.appendChild(s.splitOffDOMTree(p,l)),v.forEach(function(L){L.parentNode.removeChild(L),T.appendChild(L)}),g===u?(g.parentNode.removeChild(g),T.appendChild(g)):T.appendChild(s.splitOffDOMTree(g,u,!0)),c.appendChild(T),g.parentNode===f?f.insertBefore(c,g):M?f.insertBefore(c,M):f.appendChild(c),c.hasChildNodes()},depthOfNode:function(l){for(var u=0,c=l;c.parentNode!==null;)c=c.parentNode,u++;return u},findCommonRoot:function(l,u){for(var c=s.depthOfNode(l),f=s.depthOfNode(u),d=l,h=u;c!==f;)c>f?(d=d.parentNode,c-=1):(h=h.parentNode,f-=1);for(;d!==h;)d=d.parentNode,h=h.parentNode;return d},isElementAtBeginningOfBlock:function(l){for(var u,c;!s.isBlockContainer(l)&&!s.isMediumEditorElement(l);){for(c=l;c=c.previousSibling;)if(u=c.nodeType===3?c.nodeValue:c.textContent,u.length>0)return!1;l=l.parentNode}return!0},isMediumEditorElement:function(l){return l&&l.getAttribute&&!!l.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(l){return s.traverseUp(l,function(u){return s.isMediumEditorElement(u)})},isBlockContainer:function(l){return l&&l.nodeType!==3&&s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(l){return s.traverseUp(l,function(u){return s.isBlockContainer(u)||s.isMediumEditorElement(u)})},getTopBlockContainer:function(l){var u=s.isBlockContainer(l)?l:!1;return s.traverseUp(l,function(c){return s.isBlockContainer(c)&&(u=c),!u&&s.isMediumEditorElement(c)?(u=c,!0):!1}),u},getFirstSelectableLeafNode:function(l){for(;l&&l.firstChild;)l=l.firstChild;if(l=s.traverseUp(l,function(c){return s.emptyElementNames.indexOf(c.nodeName.toLowerCase())===-1}),l.nodeName.toLowerCase()==="table"){var u=l.querySelector("th, td");u&&(l=u)}return l},getFirstTextNode:function(l){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(l)},_getFirstTextNode:function(l){if(l.nodeType===3)return l;for(var u=0;u<l.childNodes.length;u++){var c=s._getFirstTextNode(l.childNodes[u]);if(c!==null)return c}return null},ensureUrlHasProtocol:function(l){return l.indexOf("://")===-1?"http://"+l:l},warn:function(){n.console!==void 0&&typeof n.console.warn=="function"&&n.console.warn.apply(n.console,arguments)},deprecated:function(l,u,c){var f=l+" is deprecated, please use "+u+" instead.";c&&(f+=" Will be removed in "+c),s.warn(f)},deprecatedMethod:function(l,u,c,f){s.deprecated(l,u,f),typeof this[u]=="function"&&this[u].apply(this,c)},cleanupAttrs:function(l,u){u.forEach(function(c){l.removeAttribute(c)})},cleanupTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&l.parentNode.removeChild(l)},unwrapTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&t.util.unwrap(l,document)},getClosestTag:function(l,u){return s.traverseUp(l,function(c){return c.nodeName.toLowerCase()===u.toLowerCase()})},unwrap:function(l,u){for(var c=u.createDocumentFragment(),f=Array.prototype.slice.call(l.childNodes),d=0;d<f.length;d++)c.appendChild(f[d]);c.childNodes.length?l.parentNode.replaceChild(c,l):l.parentNode.removeChild(l)},guid:function(){function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}};t.util=s}(window),function(){var n=function(r){t.util.extend(this,r)};n.extend=function(r){var i=this,o;r&&r.hasOwnProperty("constructor")?o=r.constructor:o=function(){return i.apply(this,arguments)},t.util.extend(o,i);var a=function(){this.constructor=o};return a.prototype=i.prototype,o.prototype=new a,r&&t.util.extend(o.prototype,r),o},n.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(r){return this.base.options[r]}},["execAction","on","off","subscribe","trigger"].forEach(function(r){n.prototype[r]=function(){return this.base[r].apply(this.base,arguments)}}),t.Extension=n}(),function(){function n(i){return t.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var r={findMatchingSelectionParent:function(i,o){var a=o.getSelection(),s,l;return a.rangeCount===0?!1:(s=a.getRangeAt(0),l=s.commonAncestorContainer,t.util.traverseUp(l,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(o){return t.util.isMediumEditorElement(o)},i)},exportSelection:function(i,o){if(!i)return null;var a=null,s=o.getSelection();if(s.rangeCount>0){var l=s.getRangeAt(0),u=l.cloneRange(),c;u.selectNodeContents(i),u.setEnd(l.startContainer,l.startOffset),c=u.toString().length,a={start:c,end:c+l.toString().length},this.doesRangeStartWithImages(l,o)&&(a.startsWithImage=!0);var f=this.getTrailingImageCount(i,a,l.endContainer,l.endOffset);if(f&&(a.trailingImageCount=f),c!==0){var d=this.getIndexRelativeToAdjacentEmptyBlocks(o,i,l.startContainer,l.startOffset);d!==-1&&(a.emptyBlocksIndex=d)}}return a},importSelection:function(i,o,a,s){if(!(!i||!o)){var l=a.createRange();l.setStart(o,0),l.collapse(!0);var u=o,c=[],f=0,d=!1,h=!1,v=0,p=!1,g,y=!1,m=null;for((s||i.startsWithImage||typeof i.emptyBlocksIndex<"u")&&(y=!0);!p&&u;){if(u.nodeType>3){u=c.pop();continue}if(u.nodeType===3&&!h)g=f+u.length,!d&&i.start>=f&&i.start<=g&&(y||i.start<g?(l.setStart(u,i.start-f),d=!0):m=u),d&&i.end>=f&&i.end<=g&&(i.trailingImageCount?h=!0:(l.setEnd(u,i.end-f),p=!0)),f=g;else{if(i.trailingImageCount&&h&&(u.nodeName.toLowerCase()==="img"&&v++,v===i.trailingImageCount)){for(var M=0;u.parentNode.childNodes[M]!==u;)M++;l.setEnd(u.parentNode,M+1),p=!0}if(!p&&u.nodeType===1)for(var T=u.childNodes.length-1;T>=0;)c.push(u.childNodes[T]),T-=1}p||(u=c.pop())}!d&&m&&(l.setStart(m,m.length),l.setEnd(m,m.length)),typeof i.emptyBlocksIndex<"u"&&(l=this.importSelectionMoveCursorPastBlocks(a,o,i.emptyBlocksIndex,l)),s&&(l=this.importSelectionMoveCursorPastAnchor(i,l)),this.selectRange(a,l)}},importSelectionMoveCursorPastAnchor:function(i,o){var a=function(f){return f.nodeName.toLowerCase()==="a"};if(i.start===i.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&t.util.traverseUp(o.startContainer,a)){for(var s=o.startContainer,l=o.startContainer.parentNode;l!==null&&l.nodeName.toLowerCase()!=="a";)l.childNodes[l.childNodes.length-1]!==s?l=null:(s=l,l=l.parentNode);if(l!==null&&l.nodeName.toLowerCase()==="a"){for(var u=null,c=0;u===null&&c<l.parentNode.childNodes.length;c++)l.parentNode.childNodes[c]===l&&(u=c);o.setStart(l.parentNode,u+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(i,o,a,s){var l=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),u=s.startContainer,c,f,d=0;for(a=a||1,u.nodeType===3&&t.util.isBlockContainer(u.previousSibling)?c=u.previousSibling:c=t.util.getClosestBlockContainer(u);l.nextNode();)if(!f)c===l.currentNode&&(f=l.currentNode);else if(f=l.currentNode,d++,d===a||f.textContent.length>0)break;return f||(f=c),s.setStart(t.util.getFirstSelectableLeafNode(f),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,o,a,s){if(a.textContent.length>0&&s>0)return-1;var l=a;if(l.nodeType!==3&&(l=a.childNodes[s]),l){if(!t.util.isElementAtBeginningOfBlock(l))return-1;var u=t.util.findPreviousSibling(l);if(u){if(u.nodeValue)return-1}else return-1}for(var c=t.util.getClosestBlockContainer(a),f=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),d=0;f.nextNode();){var h=f.currentNode.textContent==="";if((h||d>0)&&(d+=1),f.currentNode===c)return d;h||(d=0)}return d},doesRangeStartWithImages:function(i,o){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var a=i.startContainer.querySelector("img");if(!a)return!1;for(var s=o.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);s.nextNode();){var l=s.currentNode;if(l===a)break;if(l.nodeValue)return!1}return!0},getTrailingImageCount:function(i,o,a,s){if(s===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var l=a.childNodes[s-1];l.hasChildNodes();)l=l.lastChild;for(var u=i,c=[],f=0,d=!1,h=!1,v=!1,p,g=0;!v&&u;){if(u.nodeType>3){u=c.pop();continue}if(u.nodeType===3&&!h)g=0,p=f+u.length,!d&&o.start>=f&&o.start<=p&&(d=!0),d&&o.end>=f&&o.end<=p&&(h=!0),f=p;else if(u.nodeName.toLowerCase()==="img"&&g++,u===l)v=!0;else if(u.nodeType===1)for(var y=u.childNodes.length-1;y>=0;)c.push(u.childNodes[y]),y-=1;v||(u=c.pop())}return g},selectionContainsContent:function(i){var o=i.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(i){var o,a=this.findMatchingSelectionParent(function(s){var l=s&&s.getAttribute("contenteditable");return l==="true"&&(o=!0),s.nodeName!=="#text"&&l==="false"},i);return!o&&a},getSelectionHtml:function(o){var a,s="",l=o.getSelection(),u,c;if(l.rangeCount){for(c=o.createElement("div"),a=0,u=l.rangeCount;a<u;a+=1)c.appendChild(l.getRangeAt(a).cloneContents());s=c.innerHTML}return s},getCaretOffsets:function(o,a){var s,l;return a||(a=window.getSelection().getRangeAt(0)),s=a.cloneRange(),l=a.cloneRange(),s.selectNodeContents(o),s.setEnd(a.endContainer,a.endOffset),l.selectNodeContents(o),l.setStart(a.endContainer,a.endOffset),{left:s.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(i){var o=i.startContainer;return o===i.endContainer&&o.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var o=i.getSelection(),a,s,l;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(s=[],l=a.commonAncestorContainer;l.parentNode&&l.parentNode.childNodes.length===1;)s.push(l.parentNode),l=l.parentNode;return s}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(u){return typeof o.containsNode=="function"?o.containsNode(u,!0):!0})},selectNode:function(i,o){var a=o.createRange();a.selectNodeContents(i),this.selectRange(o,a)},select:function(i,o,a,s,l){var u=i.createRange();return u.setStart(o,a),s?u.setEnd(s,l):u.collapse(!0),this.selectRange(i,u),u},clearSelection:function(i,o){o?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,o,a){this.select(i,o,a)},getSelectionRange:function(i){var o=i.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(i,o){var a=i.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(i){var o=i.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};t.selection=r}(),function(){function n(i,o){return i?i.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var s=a.getInteractionElements();return s?(Array.isArray(s)||(s=[s]),s.some(function(l){return t.util.isDescendant(l,o,!0)})):!1}):!1}var r=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};r.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(i,o,a,s){var l=this.base.options.contentWindow,u=this.base.options.ownerDocument;i=t.util.isElement(i)||[l,u].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(c){c.addEventListener(o,a,s),this.events.push([c,o,a,s])}).bind(this))},detachDOMEvent:function(i,o,a,s){var l,u,c=this.base.options.contentWindow,f=this.base.options.ownerDocument;i&&(i=t.util.isElement(i)||[c,f].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(d){l=this.indexOfListener(d,o,a,s),l!==-1&&(u=this.events.splice(l,1)[0],u[0].removeEventListener(u[1],u[2],u[3]))}).bind(this)))},indexOfListener:function(i,o,a,s){var l,u,c;for(l=0,u=this.events.length;l<u;l=l+1)if(c=this.events[l],c[0]===i&&c[1]===o&&c[2]===a&&c[3]===s)return l;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var o=this.events.filter(function(u){return u&&u[0].getAttribute&&u[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),a=0,s=o.length;a<s;a++){var l=o[a];this.detachDOMEvent(l[0],l[1],l[2],l[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(i,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,o){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(o)},detachCustomEvent:function(i,o){var a=this.indexOfCustomListener(i,o);a!==-1&&this.customEvents[i].splice(a,1)},indexOfCustomListener:function(i,o){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,o,a){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(s){s(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=(function(i){this.handleDocumentExecCommand(i)}).bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var o=i.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&i.execCommand.listeners.splice(o,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var o=function(s,l){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(u){u({command:s[0],value:s[2],args:s,result:l})})},a=function(){var s=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return s;var l=Array.prototype.slice.call(arguments);return o(l,s),s};a.orig=i.execCommand,a.listeners=[],a.callListeners=o,i.execCommand=a}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,i,o.bind(this))},this),this.eventsCache.push({name:i,handler:o})},cleanupElement:function(i){var o=i.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[o])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,o){var a=this.base.getFocusedElement(),s;a&&o.type==="click"&&this.lastMousedownTarget&&(t.util.isDescendant(a,this.lastMousedownTarget,!0)||n(this.base.extensions,this.lastMousedownTarget))&&(s=a),s||this.base.elements.some(function(u){return!s&&t.util.isDescendant(u,i,!0)&&(s=u),!!s},this);var l=!t.util.isDescendant(a,i,!0)&&!n(this.base.extensions,i);s!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),s&&(s.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,s))),l&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(i,o){if(this.contentCache){var a=i.getAttribute("medium-editor-index"),s=i.innerHTML;s!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,i),this.contentCache[a]=s}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var o=i.currentTarget.activeElement,a;this.base.elements.some(function(s){return t.util.isDescendant(s,o,!0)?(a=s,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var o={target:i.target,currentTarget:i.currentTarget};setTimeout((function(){this.updateInput(o.currentTarget,o)}).bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),t.util.isKey(i,t.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(t.util.isKey(i,t.util.keyCode.ENTER)||i.ctrlKey&&t.util.isKey(i,t.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(t.util.isKey(i,t.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(t.util.isKey(i,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},t.Events=r}(),function(){var n=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(r){n.isBuiltInButton(r)?t.Extension.call(this,this.defaults[r]):t.Extension.call(this,r)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var r=this.document.createElement("button"),i=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return r.classList.add("medium-editor-action"),r.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(s){r.classList.add(s)}),r.setAttribute("data-action",this.getAction()),o&&(r.setAttribute("title",o),r.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(s){r.setAttribute(s,this.attrs[s])},this),a==="fontawesome"&&this.contentFA&&(i=this.contentFA),r.innerHTML=i,r},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var r=null;return this.useQueryState&&(r=this.base.queryCommandState(this.getAction())),r},isAlreadyApplied:function(r){var i=!1,o=this.getTagNames(),a,s;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(r.nodeName.toLowerCase())!==-1),!i&&this.style&&(a=this.style.value.split("|"),s=this.window.getComputedStyle(r,null).getPropertyValue(this.style.prop),a.forEach(function(l){this.knownState||(i=s.indexOf(l)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});n.isBuiltInButton=function(r){return typeof r=="string"&&t.extensions.button.prototype.defaults.hasOwnProperty(r)},t.extensions.button=n}(),function(){t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var n=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.hideToolbarDefaultActions()},setToolbarPosition:function(){var r=this.base.getExtensionByName("toolbar");r&&r.setToolbarPosition()}});t.extensions.form=n}(),function(){var n=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=t.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||t.util.getClosestTag(t.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(r){t.util.isKey(r,t.util.keyCode.K)&&t.util.isMetaCtrlKey(r)&&!r.shiftKey&&this.handleClick(r)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var r=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return r.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),r.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),r.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(r){var i=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(r=r||{value:""},typeof r=="string"&&(r={value:r}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=r.value,i.focus(),o&&(o.checked=r.target==="_blank"),a){var s=r.buttonClass?r.buttonClass.split(" "):[];a.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var r=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",r&&r.checked&&(o.target="_blank"),i&&i.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var r=this.getFormOpts();this.completeFormSave(r)},completeFormSave:function(r){this.base.restoreSelection(),this.execAction(this.action,r),this.base.checkSelection()},ensureEncodedUri:function(r){return r===decodeURI(r)?encodeURI(r):r},ensureEncodedUriComponent:function(r){return r===decodeURIComponent(r)?encodeURIComponent(r):r},ensureEncodedParam:function(r){var i=r.split("="),o=i[0],a=i[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(r){return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(r){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=i.test(r),a="",s=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,l=r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),u=l[1],c=l[2],f=l[3];if(s.test(r))return"tel:"+r;if(!o){var d=u.split("/")[0];(d.match(/.+(\.|:).+/)||d==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(u)+(c===void 0?"":"?"+this.ensureEncodedQuery(c))+(f===void 0?"":"#"+f)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(r){var i=r.querySelector(".medium-editor-toolbar-close"),o=r.querySelector(".medium-editor-toolbar-save"),a=r.querySelector(".medium-editor-toolbar-input");this.on(r,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var r=this.document,i=r.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(r){if(r.keyCode===t.util.keyCode.ENTER){r.preventDefault(),this.doFormSave();return}r.keyCode===t.util.keyCode.ESCAPE&&(r.preventDefault(),this.doFormCancel())},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});t.extensions.anchor=n}(),function(){var n=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var r=this.document.createElement("div");return r.id="medium-editor-anchor-preview-"+this.getEditorId(),r.className="medium-editor-anchor-preview",r.innerHTML=this.getTemplate(),this.on(r,"click",this.handleClick.bind(this)),r},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(r){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||r.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=r.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=r.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=r,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(r){r=r||this.activeAnchor;var i=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=r.getBoundingClientRect(),s=this.diffLeft,l=this.diffTop,u=this.getEditorOption("elementsContainer"),c=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,f={},d,h,v,p,g;d=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(s=y.diffLeft,l=y.diffTop),h=s-d,c?(p=u.getBoundingClientRect(),["top","left"].forEach(function(m){f[m]=a[m]-p[m]}),f.width=a.width,f.height=a.height,a=f,i=p.width,g=u.scrollTop):g=this.window.pageYOffset,v=a.left+a.width/2,g+=o+a.top+a.height-l-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(g)+"px",this.anchorPreview.style.right="initial",v<d?(this.anchorPreview.style.left=h+d+"px",this.anchorPreview.style.right="initial"):i-v<d?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+v+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(r){var i=this.base.getExtensionByName("anchor"),o=this.activeAnchor;i&&o&&(r.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay((function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};i.showForm(a),o=null}}).bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(r){var i=t.util.getClosestTag(r.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay((function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}).bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(r){(!r.relatedTarget||!/anchor-preview/.test(r.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var r=new Date().getTime()-this.lastOver;r>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=n}(),function(){var n,r,i,o,a;n=[" ","	",`
`,"\r"," "," "," "," "," ","\u2028","\u2029"],r="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+r+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+r+"))",o=new RegExp("^("+r+")$","i"),a=new RegExp(i,"gi");function s(u){return!t.util.getClosestTag(u,"a")}var l=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var u=0,c=0;c<this.window._mediumEditors.length;c++){var f=this.window._mediumEditors[c];f!==null&&f.getExtensionByName("autoLink")!==void 0&&u++}return u===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(u,c){this.performLinking(c)},onKeypress:function(u){this.disableEventHandling||t.util.isKey(u,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout((function(){try{var c=this.base.exportSelection();this.performLinking(u.target)&&this.base.importSelection(c,!0)}catch(f){window.console&&window.console.error("Failed to perform linking",f),this.disableEventHandling=!0}}).bind(this),0))},performLinking:function(u){var c=t.util.splitByBlockElements(u),f=!1;c.length===0&&(c=[u]);for(var d=0;d<c.length;d++)f=this.removeObsoleteAutoLinkSpans(c[d])||f,f=this.performLinkingWithinElement(c[d])||f;return this.base.events.updateInput(u,{target:u,currentTarget:u}),f},removeObsoleteAutoLinkSpans:function(u){if(!u||u.nodeType===3)return!1;for(var c=u.querySelectorAll('span[data-auto-link="true"]'),f=!1,d=0;d<c.length;d++){var h=c[d].textContent;if(h.indexOf("://")===-1&&(h=t.util.ensureUrlHasProtocol(h)),c[d].getAttribute("data-href")!==h&&s(c[d])){f=!0;var v=h.replace(/\s+$/,"");if(c[d].getAttribute("data-href")===v){var p=h.length-v.length,g=t.util.splitOffDOMTree(c[d],this.splitTextBeforeEnd(c[d],p));c[d].parentNode.insertBefore(g,c[d].nextSibling)}else t.util.unwrap(c[d],this.document)}}return f},splitTextBeforeEnd:function(u,c){for(var f=this.document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null,!1),d=!0;d;)d=f.lastChild()!==null;for(var h,v,p;c>0&&p!==null;)h=f.currentNode,v=h.nodeValue,v.length>c?(p=h.splitText(v.length-c),c=0):(p=f.previousNode(),c-=v.length);return p},performLinkingWithinElement:function(u){for(var c=this.findLinkableText(u),f=!1,d=0;d<c.length;d++){var h=t.util.findOrCreateMatchingTextNodes(this.document,u,c[d]);this.shouldNotLink(h)||this.createAutoLink(h,c[d].href)}return f},shouldNotLink:function(u){for(var c=!1,f=0;f<u.length&&c===!1;f++)c=!!t.util.traverseUp(u[f],function(d){return d.nodeName.toLowerCase()==="a"||d.getAttribute&&d.getAttribute("data-auto-link")==="true"});return c},findLinkableText:function(u){for(var c=u.textContent,f=null,d=[];(f=a.exec(c))!==null;){var h=!0,v=f.index+f[0].length;h=(f.index===0||n.indexOf(c[f.index-1])!==-1)&&(v===c.length||n.indexOf(c[v])!==-1),h=h&&(f[0].indexOf("/")!==-1||o.test(f[0].split(".").pop().split("?").shift())),h&&d.push({href:f[0],start:f.index,end:v})}return d},createAutoLink:function(u,c){c=t.util.ensureUrlHasProtocol(c);var f=t.util.createLink(this.document,u,c,this.getEditorOption("targetBlank")?"_blank":null),d=this.document.createElement("span");for(d.setAttribute("data-auto-link","true"),d.setAttribute("data-href",c),f.insertBefore(d,f.firstChild);f.childNodes.length>1;)d.appendChild(f.childNodes[1])}});t.extensions.autoLink=l}(),function(){var n="medium-editor-dragover";function r(o){var a=t.util.getContainerEditorElement(o),s=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+n));s.forEach(function(l){l.classList.remove(n)})}var i=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;r(a),o.type==="dragover"&&a.classList.add(n)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s){this.isAllowedFile(s)&&s.type.match("image")&&this.insertImageFile(s)},this),r(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",(function(s){var l=this.document.createElement("img");l.src=s.target.result,t.util.insertHTMLCommand(this.document,l.outerHTML)}).bind(this))}}});t.extensions.fileDragging=i}(),function(){var n=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(r){var i=r.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(r)},this)},handleKeydown:function(r){var i=t.util.getKeyCode(r);if(this.keys[i]){var o=t.util.isMetaCtrlKey(r),a=!!r.shiftKey,s=!!r.altKey;this.keys[i].forEach(function(l){l.meta===o&&l.shift===a&&(l.alt===s||l.alt===void 0)&&(r.preventDefault(),r.stopPropagation(),typeof l.command=="function"?l.command.apply(this):l.command!==!1&&this.execAction(l.command))},this)}}});t.extensions.keyboardCommands=n}(),function(){var n=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(r){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("select"),a=r.createElement("a"),s=r.createElement("a"),l;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var u=0;u<this.fonts.length;u++)l=r.createElement("option"),l.innerHTML=this.fonts[u],l.value=this.fonts[u],o.appendChild(l);return o.className="medium-editor-toolbar-select",i.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("face")&&r.removeAttribute("face")})},handleFontChange:function(){var r=this.getSelect().value;r===""?this.clearFontName():this.execAction("fontName",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});t.extensions.fontName=n}(),function(){var n=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(r){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("input"),a=r.createElement("a"),s=r.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",i.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("size")&&r.removeAttribute("size")})},handleSliderChange:function(){var r=this.getInput().value;r==="4"?this.clearFontSize():this.execAction("fontSize",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=n}(),function(){var n="%ME_PASTEBIN%",r=null,i=null,o=function(u){u.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function s(u,c,f){var d=u.clipboardData||c.clipboardData||f.dataTransfer,h={};if(!d)return h;if(d.getData){var v=d.getData("Text");v&&v.length>0&&(h["text/plain"]=v)}if(d.types)for(var p=0;p<d.types.length;p++){var g=d.types[p];h[g]=d.getData(g)}return h}var l=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(u){this.on(u,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(u,c){this.on(c,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(u,c){if(!u.defaultPrevented){var f=s(u,this.window,this.document),d=f["text/html"],h=f["text/plain"];this.window.clipboardData&&u.clipboardData===void 0&&!d&&(d=h),(d||h)&&(u.preventDefault(),this.doPaste(d,h,c))}},doPaste:function(u,c,f){var d,h="",v;if(this.cleanPastedHTML&&u)return this.cleanPaste(u);if(c){if(this.getEditorOption("disableReturn")||f&&f.getAttribute("data-disable-return"))h=t.util.htmlEntities(c);else if(d=c.split(/[\r\n]+/g),d.length>1)for(v=0;v<d.length;v+=1)d[v]!==""&&(h+="<p>"+t.util.htmlEntities(d[v])+"</p>");else h=t.util.htmlEntities(d[0]);t.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(u){if(u.defaultPrevented){this.removePasteBin();return}var c=s(u,this.window,this.document),f=c["text/html"],d=c["text/plain"],h=i;if(!this.cleanPastedHTML||f){u.preventDefault(),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout((function(){this.cleanPastedHTML&&(f=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}).bind(this),0)},handleKeydown:function(u,c){t.util.isKey(u,t.util.keyCode.V)&&t.util.isMetaCtrlKey(u)&&(u.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(c))},createPasteBin:function(u){var c,f=t.selection.getSelectionRange(this.document),d=this.window.pageYOffset;i=u,f&&(c=f.getClientRects(),c.length?d+=c[0].top:f.startContainer.getBoundingClientRect!==void 0?d+=f.startContainer.getBoundingClientRect().top:d+=f.getBoundingClientRect().top),r=f;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+d+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=n,this.document.body.appendChild(h),this.on(h,"focus",o),this.on(h,"focusin",o),this.on(h,"focusout",o),h.focus(),t.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){r!==null&&(t.selection.selectRange(this.document,r),r=null),i!==null&&(i=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",o),this.off(u,"focusin",o),this.off(u,"focusout",o),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var u=this.getPasteBin();if(!u||u.firstChild&&u.firstChild.id==="mcepastebin")return!1;var c=u.innerHTML;return!c||c===n?!1:c},cleanPaste:function(u){var c,f,d,h,v=/<p|<br|<div/.test(u),p=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(c=0;c<p.length;c+=1)u=u.replace(p[c][0],p[c][1]);if(!v)return this.pasteHTML(u);for(d=this.document.createElement("div"),d.innerHTML="<p>"+u.split("<br><br>").join("</p><p>")+"</p>",f=d.querySelectorAll("a,p,div,br"),c=0;c<f.length;c+=1)switch(h=f[c],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(d.innerHTML)},pasteHTML:function(u,c){c=t.util.defaults({},c,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var f,d,h,v,p=this.document.createDocumentFragment();for(p.appendChild(this.document.createElement("body")),v=p.querySelector("body"),v.innerHTML=u,this.cleanupSpans(v),f=v.querySelectorAll("*"),h=0;h<f.length;h+=1)d=f[h],d.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(d),t.util.cleanupAttrs(d,c.cleanAttrs),t.util.cleanupTags(d,c.cleanTags),t.util.unwrapTags(d,c.unwrapTags);t.util.insertHTMLCommand(this.document,v.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(u){return u&&(u.nodeName.toLowerCase()==="p"||u.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(u){/^\s*$/.test(u.textContent)&&u.parentNode&&u.parentNode.removeChild(u)},filterLineBreak:function(u){this.isCommonBlock(u.previousElementSibling)?this.removeWithParent(u):this.isCommonBlock(u.parentNode)&&(u.parentNode.firstChild===u||u.parentNode.lastChild===u)?this.removeWithParent(u):u.parentNode&&u.parentNode.childElementCount===1&&u.parentNode.textContent===""&&this.removeWithParent(u)},removeWithParent:function(u){u&&u.parentNode&&(u.parentNode.parentNode&&u.parentNode.childElementCount===1?u.parentNode.parentNode.removeChild(u.parentNode):u.parentNode.removeChild(u))},cleanupSpans:function(u){var c,f,d,h=u.querySelectorAll(".replace-with"),v=function(p){return p&&p.nodeName!=="#text"&&p.getAttribute("contenteditable")==="false"};for(c=0;c<h.length;c+=1)f=h[c],d=this.document.createElement(f.classList.contains("bold")?"b":"i"),f.classList.contains("bold")&&f.classList.contains("italic")?d.innerHTML="<i>"+f.innerHTML+"</i>":d.innerHTML=f.innerHTML,f.parentNode.replaceChild(d,f);for(h=u.querySelectorAll("span"),c=0;c<h.length;c+=1){if(f=h[c],t.util.traverseUp(f,v))return!1;t.util.unwrap(f,this.document)}}});t.extensions.paste=l}(),function(){var n=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(r,i){this.initElement(i)},initElement:function(r){r.getAttribute("data-placeholder")||r.setAttribute("data-placeholder",this.text),this.updatePlaceholder(r)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(r,i){this.cleanupElement(i)},cleanupElement:function(r){r.getAttribute("data-placeholder")===this.text&&r.removeAttribute("data-placeholder")},showPlaceholder:function(r){r&&(t.util.isFF&&r.childNodes.length===0?(r.classList.add("medium-editor-placeholder-relative"),r.classList.remove("medium-editor-placeholder")):(r.classList.add("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(r){r&&(r.classList.remove("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(r,i){if(r.querySelector("img, blockquote, ul, ol, table")||r.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(r);i||this.showPlaceholder(r)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(r,i){var o=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,o)},handleFocus:function(r,i){this.hidePlaceholder(i)},handleBlur:function(r,i){this.updatePlaceholder(i)}});t.extensions.placeholder=n}(),function(){var n=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(r,i){return this.base.extensions.forEach(function(o){if(o!==this)return r.apply(i||this,arguments)},this)},createToolbar:function(){var r=this.document.createElement("div");return r.id="medium-editor-toolbar-"+this.getEditorId(),r.className="medium-editor-toolbar",this.static?r.className+=" static-toolbar":this.relativeContainer?r.className+=" medium-editor-relative-toolbar":r.className+=" medium-editor-stalker-toolbar",r.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&r.appendChild(i.getForm())}),this.attachEventHandlers(),r},createToolbarButtons:function(){var r=this.document.createElement("ul"),i,o,a,s,l,u;return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach(function(c){typeof c=="string"?(l=c,u=null):(l=c.name,u=c),s=this.base.addBuiltInExtension(l,u),s&&typeof s.getButton=="function"&&(o=s.getButton(this.base),i=this.document.createElement("li"),t.util.isElement(o)?i.appendChild(o):i.innerHTML=o,r.appendChild(i))},this),a=r.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle((function(){this.base.isActive&&this.positionToolbarIfShown()}).bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(r){if(r&&r.target&&t.util.isDescendant(this.getToolbarElement(),r.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout((function(){this.checkState()}).bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout((function(){this.hideToolbar()}).bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay((function(){this.showToolbar()}).bind(this))},hideExtensionForms:function(){this.forEachExtension(function(r){r.hasForm&&r.isDisplayed()&&r.hideForm()})},multipleBlockElementsSelected:function(){var r=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=t.selection.getSelectionHtml(this.document).replace(r,""),a=o.match(i);return!!a&&a.length>1},modifySelection:function(){var r=this.window.getSelection(),i=r.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var o=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),i.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;i=t.selection.select(this.document,o,a,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var r=t.selection.getSelectionElement(this.window);if(!r||this.getEditorElements().indexOf(r)===-1||r.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!t.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(r){typeof r.isActive=="function"&&typeof r.setInactive=="function"&&r.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var r=[],i=null,o=t.selection.getSelectionRange(this.document),a,s=function(l){typeof l.checkState=="function"?l.checkState(a):typeof l.isActive=="function"&&typeof l.isAlreadyApplied=="function"&&typeof l.setActive=="function"&&!l.isActive()&&l.isAlreadyApplied(a)&&l.setActive()};if(o&&(this.forEachExtension(function(l){if(typeof l.queryCommandState=="function"&&(i=l.queryCommandState(),i!==null)){i&&typeof l.setActive=="function"&&l.setActive();return}r.push(l)}),a=t.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(l){return t.util.isDescendant(l,a,!0)})))for(;a&&(r.forEach(s),!t.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var r=this.base.getFocusedElement(),i=this.window.getSelection();if(!r)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(r):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(r){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),s=r.getBoundingClientRect(),l=s.top+i,u=s.left+s.width/2,c=a.offsetHeight,f=a.offsetWidth,d=f/2,h;switch(this.sticky?i>l+r.offsetHeight-c-this.stickyTopOffset?(a.style.top=l+r.offsetHeight-c+"px",a.classList.remove("medium-editor-sticky-toolbar")):i>l-c-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=l-c+"px"):a.style.top=l-c+"px",this.align){case"left":h=s.left;break;case"right":h=s.right-f;break;case"center":h=u-d;break}h<0?h=0:h+f>o&&(h=o-Math.ceil(f)-1),a.style.left=h+"px"},positionToolbar:function(r){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=r.getRangeAt(0),o=i.getBoundingClientRect();(!o||o.height===0&&o.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?o=i.startContainer.querySelector("img").getBoundingClientRect():o=i.startContainer.getBoundingClientRect());var a=this.window.innerWidth,s=this.getToolbarElement(),l=s.offsetHeight,u=s.offsetWidth,c=u/2,f=50,d=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),v=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,p={},g={},y,m;v?(m=h.getBoundingClientRect(),["top","left"].forEach(function(M){g[M]=o[M]-m[M]}),g.width=o.width,g.height=o.height,o=g,a=m.width,p.top=h.scrollTop):p.top=this.window.pageYOffset,y=o.left+o.width/2,p.top+=o.top-l,o.top<f?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),p.top+=f+o.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),p.top+=this.diffTop),y<c?(p.left=d+c,p.right="initial"):a-y<c?(p.left="auto",p.right=0):(p.left=d+y,p.right="initial"),["top","left","right"].forEach(function(M){s.style[M]=p[M]+(isNaN(p[M])?"":"px")})}});t.extensions.toolbar=n}(),function(){var n=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(r){var i="medium-editor-dragover";r.preventDefault(),r.dataTransfer.dropEffect="copy",r.type==="dragover"?r.target.classList.add(i):r.type==="dragleave"&&r.target.classList.remove(i)},handleDrop:function(r){var i="medium-editor-dragover",o;r.preventDefault(),r.stopPropagation(),r.dataTransfer.files&&(o=Array.prototype.slice.call(r.dataTransfer.files,0),o.some((function(a){if(a.type.match("image")){var s,l;s=new FileReader,s.readAsDataURL(a),l="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+l+'" />'),s.onload=(function(){var u=this.document.getElementById(l);u&&(u.removeAttribute("id"),u.removeAttribute("class"),u.src=s.result)}).bind(this)}}).bind(this))),r.target.classList.remove(i)}});t.extensions.imageDragging=n}(),function(){function n(O){var I=t.selection.getSelectionStart(this.options.ownerDocument),j=I.textContent,te=t.selection.getCaretOffsets(I);(j[te.left-1]===void 0||j[te.left-1].trim()===""||j[te.left]!==void 0&&j[te.left].trim()==="")&&O.preventDefault()}function r(O,I){if(this.options.disableReturn||I.getAttribute("data-disable-return"))O.preventDefault();else if(this.options.disableDoubleReturn||I.getAttribute("data-disable-double-return")){var j=t.selection.getSelectionStart(this.options.ownerDocument);(j&&j.textContent.trim()===""&&j.nodeName.toLowerCase()!=="li"||j.previousElementSibling&&j.previousElementSibling.nodeName.toLowerCase()!=="br"&&j.previousElementSibling.textContent.trim()==="")&&O.preventDefault()}}function i(O){var I=t.selection.getSelectionStart(this.options.ownerDocument),j=I&&I.nodeName.toLowerCase();j==="pre"&&(O.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(I)&&(O.preventDefault(),O.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(O){var I,j=t.selection.getSelectionStart(this.options.ownerDocument),te=j.nodeName.toLowerCase(),fe=/^(\s+|<br\/?>)?$/i,ve=/h\d/i;t.util.isKey(O,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&j.previousElementSibling&&ve.test(te)&&t.selection.getCaretOffsets(j).left===0?t.util.isKey(O,t.util.keyCode.BACKSPACE)&&fe.test(j.previousElementSibling.innerHTML)?(j.previousElementSibling.parentNode.removeChild(j.previousElementSibling),O.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(O,t.util.keyCode.ENTER)&&(I=this.options.ownerDocument.createElement("p"),I.innerHTML="<br>",j.previousElementSibling.parentNode.insertBefore(I,j),O.preventDefault()):t.util.isKey(O,t.util.keyCode.DELETE)&&j.nextElementSibling&&j.previousElementSibling&&!ve.test(te)&&fe.test(j.innerHTML)&&ve.test(j.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,j.nextElementSibling),j.previousElementSibling.parentNode.removeChild(j),O.preventDefault()):t.util.isKey(O,t.util.keyCode.BACKSPACE)&&te==="li"&&fe.test(j.innerHTML)&&!j.previousElementSibling&&!j.parentElement.previousElementSibling&&j.nextElementSibling&&j.nextElementSibling.nodeName.toLowerCase()==="li"?(I=this.options.ownerDocument.createElement("p"),I.innerHTML="<br>",j.parentElement.parentElement.insertBefore(I,j.parentElement),t.selection.moveCursor(this.options.ownerDocument,I),j.parentElement.removeChild(j),O.preventDefault()):t.util.isKey(O,t.util.keyCode.BACKSPACE)&&t.util.getClosestTag(j,"blockquote")!==!1&&t.selection.getCaretOffsets(j).left===0?(O.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(O,t.util.keyCode.ENTER)&&t.util.getClosestTag(j,"blockquote")!==!1&&t.selection.getCaretOffsets(j).right===0?(I=this.options.ownerDocument.createElement("p"),I.innerHTML="<br>",j.parentElement.insertBefore(I,j.nextSibling),t.selection.moveCursor(this.options.ownerDocument,I),O.preventDefault()):t.util.isKey(O,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(j.parentElement)&&!j.previousElementSibling&&j.nextElementSibling&&fe.test(j.innerHTML)&&(O.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,j.nextSibling),j.parentElement.removeChild(j))}function a(O){var I=t.selection.getSelectionStart(this.options.ownerDocument),j;I&&(t.util.isMediumEditorElement(I)&&I.children.length===0&&!t.util.isBlockContainer(I)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),t.util.isKey(O,t.util.keyCode.ENTER)&&!t.util.isListItem(I)&&!t.util.isBlockContainer(I)&&(j=I.nodeName.toLowerCase(),j==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!O.shiftKey&&!O.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(O,I){var j=I.parentNode.querySelector('textarea[medium-editor-textarea-id="'+I.getAttribute("medium-editor-textarea-id")+'"]');j&&(j.value=I.innerHTML.trim())}function l(O){O._mediumEditors||(O._mediumEditors=[null]),this.id||(this.id=O._mediumEditors.length),O._mediumEditors[this.id]=this}function u(O){!O._mediumEditors||!O._mediumEditors[this.id]||(O._mediumEditors[this.id]=null)}function c(O,I,j){var te=[];if(O||(O=[]),typeof O=="string"&&(O=I.querySelectorAll(O)),t.util.isElement(O)&&(O=[O]),j)for(var fe=0;fe<O.length;fe++){var ve=O[fe];t.util.isElement(ve)&&!ve.getAttribute("data-medium-editor-element")&&!ve.getAttribute("medium-editor-textarea-id")&&te.push(ve)}else te=Array.prototype.slice.apply(O);return te}function f(O){var I=O.parentNode.querySelector('textarea[medium-editor-textarea-id="'+O.getAttribute("medium-editor-textarea-id")+'"]');I&&(I.classList.remove("medium-editor-hidden"),I.removeAttribute("medium-editor-textarea-id")),O.parentNode&&O.parentNode.removeChild(O)}function d(O,I){return Object.keys(I).forEach(function(j){O[j]===void 0&&(O[j]=I[j])}),O}function h(O,I,j){var te={window:j.options.contentWindow,document:j.options.ownerDocument,base:j};return O=d(O,te),typeof O.init=="function"&&O.init(),O.name||(O.name=I),O}function v(){return this.elements.every(function(O){return!!O.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function p(){return v.call(this)?this.options.anchorPreview!==!1:!1}function g(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function m(){return this.options.imageDragging!==!1}function M(){return this.options.keyboardCommands!==!1}function T(){return!this.options.extensions.imageDragging}function L(O){for(var I=this.options.ownerDocument.createElement("div"),j=Date.now(),te="medium-editor-"+j,fe=O.attributes;this.options.ownerDocument.getElementById(te);)j++,te="medium-editor-"+j;I.className=O.className,I.id=te,I.innerHTML=O.value,O.setAttribute("medium-editor-textarea-id",te);for(var ve=0,Je=fe.length;ve<Je;ve++)I.hasAttribute(fe[ve].nodeName)||I.setAttribute(fe[ve].nodeName,fe[ve].value);return O.form&&this.on(O.form,"reset",(function(et){et.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(te))}).bind(this)),O.classList.add("medium-editor-hidden"),O.parentNode.insertBefore(I,O),I}function N(O,I){if(!O.getAttribute("data-medium-editor-element")){O.nodeName.toLowerCase()==="textarea"&&(O=L.call(this,O),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!O.getAttribute("data-disable-editing")&&(O.setAttribute("contentEditable",!0),O.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(O.getAttribute("data-disable-return")||O.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!O.getAttribute("data-disable-return")&&this.on(O,"keyup",a.bind(this));var j=t.util.guid();O.setAttribute("data-medium-editor-element",!0),O.classList.add("medium-editor-element"),O.setAttribute("role","textbox"),O.setAttribute("aria-multiline",!0),O.setAttribute("data-medium-editor-editor-index",I),O.setAttribute("medium-editor-index",j),pe[j]=O.innerHTML,this.events.attachAllEventsToElement(O)}return O}function E(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",n.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function k(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(fe){fe!=="toolbar"&&this.options.extensions[fe]&&this.extensions.push(h(this.options.extensions[fe],fe,this))},this),T.call(this)){var O=this.options.fileDragging;O||(O={},m.call(this)||(O.allowedTypes=[])),this.addBuiltInExtension("fileDragging",O)}var I={paste:!0,"anchor-preview":p.call(this),autoLink:y.call(this),keyboardCommands:M.call(this),placeholder:g.call(this)};Object.keys(I).forEach(function(fe){I[fe]&&this.addBuiltInExtension(fe)},this);var j=this.options.extensions.toolbar;if(!j&&v.call(this)){var te=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});j=new t.extensions.toolbar(te)}j&&this.extensions.push(h(j,"toolbar",this))}function Y(O,I){var j=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return I&&j.forEach(function(te){I.hasOwnProperty(te[0])&&I[te[0]]!==void 0&&t.util.deprecated(te[0],te[1],"v6.0.0")}),t.util.defaults({},I,O)}function ie(O,I){var j=/^append-(.+)$/gi,te=/justify([A-Za-z]*)$/g,fe,ve;if(fe=j.exec(O),fe)return t.util.execFormatBlock(this.options.ownerDocument,fe[1]);if(O==="fontSize")return I.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),ve=I.value||I.size,this.options.ownerDocument.execCommand("fontSize",!1,ve);if(O==="fontName")return I.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),ve=I.value||I.name,this.options.ownerDocument.execCommand("fontName",!1,ve);if(O==="createLink")return this.createLink(I);if(O==="image"){var Je=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,Je)}if(O==="html"){var et=this.options.contentWindow.getSelection().toString().trim();return t.util.insertHTMLCommand(this.options.ownerDocument,et)}if(te.exec(O)){var xe=this.options.ownerDocument.execCommand(O,!1,null),Me=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return Me&&se.call(this,t.util.getTopBlockContainer(Me)),xe}return ve=I&&I.value,this.options.ownerDocument.execCommand(O,!1,ve)}function se(O){if(O){var I,j=Array.prototype.slice.call(O.childNodes).filter(function(te){var fe=te.nodeName.toLowerCase()==="div";return fe&&!I&&(I=te.style.textAlign),fe});j.length&&(this.saveSelection(),j.forEach(function(te){if(te.style.textAlign===I){var fe=te.lastChild;if(fe){t.util.unwrap(te,this.options.ownerDocument);var ve=this.options.ownerDocument.createElement("BR");fe.parentNode.insertBefore(ve,fe.nextSibling)}}},this),O.style.textAlign=I,this.restoreSelection())}}var pe={};t.prototype={init:function(O,I){return this.options=Y.call(this,this.defaults,I),this.origElements=O,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,k.call(this),E.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(O){typeof O.destroy=="function"&&O.destroy()},this),this.events.destroy(),this.elements.forEach(function(O){this.options.spellcheck&&(O.innerHTML=O.innerHTML),O.removeAttribute("contentEditable"),O.removeAttribute("spellcheck"),O.removeAttribute("data-medium-editor-element"),O.classList.remove("medium-editor-element"),O.removeAttribute("role"),O.removeAttribute("aria-multiline"),O.removeAttribute("medium-editor-index"),O.removeAttribute("data-medium-editor-editor-index"),O.getAttribute("medium-editor-textarea-id")&&f(O)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(O,I,j,te){return this.events.attachDOMEvent(O,I,j,te),this},off:function(O,I,j,te){return this.events.detachDOMEvent(O,I,j,te),this},subscribe:function(O,I){return this.events.attachCustomEvent(O,I),this},unsubscribe:function(O,I){return this.events.detachCustomEvent(O,I),this},trigger:function(O,I,j){return this.events.triggerCustomEvent(O,I,j),this},delay:function(O){var I=this;return setTimeout(function(){I.isActive&&O()},this.options.delay)},serialize:function(){var O,I,j={},te=this.elements.length;for(O=0;O<te;O+=1)I=this.elements[O].id!==""?this.elements[O].id:"element-"+O,j[I]={value:this.elements[O].innerHTML.trim()};return j},getExtensionByName:function(O){var I;return this.extensions&&this.extensions.length&&this.extensions.some(function(j){return j.name===O?(I=j,!0):!1}),I},addBuiltInExtension:function(O,I){var j=this.getExtensionByName(O),te;if(j)return j;switch(O){case"anchor":te=t.util.extend({},this.options.anchor,I),j=new t.extensions.anchor(te);break;case"anchor-preview":j=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":j=new t.extensions.autoLink;break;case"fileDragging":j=new t.extensions.fileDragging(I);break;case"fontname":j=new t.extensions.fontName(this.options.fontName);break;case"fontsize":j=new t.extensions.fontSize(I);break;case"keyboardCommands":j=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":j=new t.extensions.paste(this.options.paste);break;case"placeholder":j=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(O)&&(I?(te=t.util.defaults({},I,t.extensions.button.prototype.defaults[O]),j=new t.extensions.button(te)):j=new t.extensions.button(O))}return j&&this.extensions.push(h(j,O,this)),j},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var O=this.getExtensionByName("toolbar");return O&&O.checkState(),this},queryCommandState:function(O){var I=/^full-(.+)$/gi,j,te=null;j=I.exec(O),j&&(O=j[1]);try{te=this.options.ownerDocument.queryCommandState(O)}catch{te=null}return te},execAction:function(O,I){var j=/^full-(.+)$/gi,te,fe;return te=j.exec(O),te?(this.saveSelection(),this.selectAllContents(),fe=ie.call(this,te[1],I),this.restoreSelection()):fe=ie.call(this,O,I),(O==="insertunorderedlist"||O==="insertorderedlist")&&t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),fe},getSelectedParentElement:function(O){return O===void 0&&(O=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(O)},selectAllContents:function(){var O=t.selection.getSelectionElement(this.options.contentWindow);if(O){for(;O.children.length===1;)O=O.children[0];this.selectElement(O)}},selectElement:function(O){t.selection.selectNode(O,this.options.ownerDocument);var I=t.selection.getSelectionElement(this.options.contentWindow);I&&this.events.focusElement(I)},getFocusedElement:function(){var O;return this.elements.some(function(I){return!O&&I.getAttribute("data-medium-focused")&&(O=I),!!O},this),O},exportSelection:function(){var O=t.selection.getSelectionElement(this.options.contentWindow),I=this.elements.indexOf(O),j=null;return I>=0&&(j=t.selection.exportSelection(O,this.options.ownerDocument)),j!==null&&I!==0&&(j.editableElementIndex=I),j},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(O,I){if(O){var j=this.elements[O.editableElementIndex||0];t.selection.importSelection(O,j,this.options.ownerDocument,I)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(O){var I=t.selection.getSelectionElement(this.options.contentWindow),j={},te;if(this.elements.indexOf(I)!==-1){try{if(this.events.disableCustomEvent("editableInput"),O.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),te=O.url||O.value,te&&te.trim().length>0){var fe=this.options.contentWindow.getSelection();if(fe){var ve=fe.getRangeAt(0),Je=ve.commonAncestorContainer,et,xe,Me,He;if(ve.endContainer.nodeType===3&&ve.startContainer.nodeType!==3&&ve.startOffset===0&&ve.startContainer.firstChild===ve.endContainer&&(Je=ve.endContainer),xe=t.util.getClosestBlockContainer(ve.startContainer),Me=t.util.getClosestBlockContainer(ve.endContainer),Je.nodeType!==3&&Je.textContent.length!==0&&xe===Me){var Pe=xe||I,Xe=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),et=this.exportSelection(),Xe.appendChild(Pe.cloneNode(!0)),I===Pe?t.selection.select(this.options.ownerDocument,Pe.firstChild,0,Pe.lastChild,Pe.lastChild.nodeType===3?Pe.lastChild.nodeValue.length:Pe.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,Pe,0,Pe,Pe.childNodes.length);var B=this.exportSelection();He=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,Xe,{start:et.start-B.start,end:et.end-B.start,editableElementIndex:et.editableElementIndex}),He.length===0&&(Xe=this.options.ownerDocument.createDocumentFragment(),Xe.appendChild(Je.cloneNode(!0)),He=[Xe.firstChild.firstChild,Xe.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,He,te.trim());var D=(Xe.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,Xe.firstChild.innerHTML.replace(/^\s+/,"")),et.start-=D,et.end-=D,this.importSelection(et)}else this.options.ownerDocument.execCommand("createLink",!1,te);this.options.targetBlank||O.target==="_blank"?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),te):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),te),O.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),O.buttonClass)}}if(this.options.targetBlank||O.target==="_blank"||O.buttonClass){j=this.options.ownerDocument.createEvent("HTMLEvents"),j.initEvent("input",!0,!0,this.options.contentWindow);for(var F=0,U=this.elements.length;F<U;F+=1)this.elements[F].dispatchEvent(j)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",j,I)}},cleanPaste:function(O){this.getExtensionByName("paste").cleanPaste(O)},pasteHTML:function(O,I){this.getExtensionByName("paste").pasteHTML(O,I)},setContent:function(O,I){if(I=I||0,this.elements[I]){var j=this.elements[I];j.innerHTML=O,this.checkContentChanged(j)}},getContent:function(O){return O=O||0,this.elements[O]?this.elements[O].innerHTML.trim():null},checkContentChanged:function(O){O=O||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(O,{target:O,currentTarget:O})},resetContent:function(O){if(O){var I=this.elements.indexOf(O);I!==-1&&this.setContent(pe[O.getAttribute("medium-editor-index")],I);return}this.elements.forEach(function(j,te){this.setContent(pe[j.getAttribute("medium-editor-index")],te)},this)},addElements:function(O){var I=c(O,this.options.ownerDocument,!0);if(I.length===0)return!1;I.forEach(function(j){j=N.call(this,j,this.id),this.elements.push(j),this.trigger("addElement",{target:j,currentTarget:j},j)},this)},removeElements:function(O){var I=c(O,this.options.ownerDocument),j=I.map(function(te){return te.getAttribute("medium-editor-textarea-id")&&te.parentNode?te.parentNode.querySelector('div[medium-editor-textarea-id="'+te.getAttribute("medium-editor-textarea-id")+'"]'):te});this.elements=this.elements.filter(function(te){return j.indexOf(te)!==-1?(this.events.cleanupElement(te),te.getAttribute("medium-editor-textarea-id")&&f(te),this.trigger("removeElement",{target:te,currentTarget:te},te),!1):!0},this)}},t.getEditorFromElement=function(O){var I=O.getAttribute("data-medium-editor-editor-index"),j=O&&O.ownerDocument&&(O.ownerDocument.defaultView||O.ownerDocument.parentWindow);return j&&j._mediumEditors&&j._mediumEditors[I]?j._mediumEditors[I]:null}}(),function(){t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),t.parseVersionString=function(n){var r=n.split("-"),i=r[0].split("."),o=r.length>1?r[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:o,toString:function(){return[i[0],i[1],i[2]].join(".")+(o?"-"+o:"")}}},t.version=t.parseVersionString.call(this,"5.23.3"),t}())}(Du)),Du.exports}var S9=E9();const Ic=Bf(S9);/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var tg=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ng=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vu=function(){function e(t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(n&&r.length===n));i=!0);}catch(u){o=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(e){return this.indexOf(e)===0};String.prototype.padStart=String.prototype.padStart||function(e,t){for(var n=this;n.length<e;)n=t+n;return n};var O9={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function g0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=t>0?e.toFixed(t).replace(/0+$/,"").replace(/\.$/,""):e.toString();return n||"0"}var A9=function(){function e(t,n,r,i){tg(this,e);var o=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),c=vu(u,4),f=c[0],d=c[1],h=c[2],v=c[3];v===void 0&&(v=1),f/=360,d/=100,h/=100,o.hsla=[f,d,h,v]}else if(l.startsWith("rgb")){var p=l.match(/([\-\d\.e]+)/g).map(Number),g=vu(p,4),y=g[0],m=g[1],M=g[2],T=g[3];T===void 0&&(T=1),o.rgba=[y,m,M,T]}else l.startsWith("#")?o.rgba=e.hexToRgb(l):o.rgba=e.nameToRgb(l)||e.hexToRgb(l)}if(t!==void 0)if(Array.isArray(t))this.rgba=t;else if(r===void 0){var s=t&&""+t;s&&a(s.toLowerCase())}else this.rgba=[t,n,r,i===void 0?1:i]}return ng(e,[{key:"printRGB",value:function(n){var r=n?this.rgba:this.rgba.slice(0,3),i=r.map(function(o,a){return g0(o,a===3?3:0)});return n?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(n){var r=[360,100,100,1],i=["","%","%",""],o=n?this.hsla:this.hsla.slice(0,3),a=o.map(function(s,l){return g0(s*r[l],l===3?3:1)+i[l]});return n?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(n){var r=this.hex;return n?r:r.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=e.hslToRgb(this._hsla)},set:function(n){n.length===3&&(n[3]=1),this._rgba=n,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=e.rgbToHsl(this._rgba)},set:function(n){n.length===3&&(n[3]=1),this._hsla=n,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var n=this.rgba,r=n.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+r.map(function(i){return i.padStart(2,"0")}).join("")},set:function(n){this.rgba=e.hexToRgb(n)}}],[{key:"hexToRgb",value:function(n){var r=(n.startsWith("#")?n.slice(1):n).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!r.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+n);var i=r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(n){var r=n.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=O9[r];return i===void 0?i:e.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(n){var r=vu(n,4),i=r[0],o=r[1],a=r[2],s=r[3];i/=255,o/=255,a/=255;var l=Math.max(i,o,a),u=Math.min(i,o,a),c=void 0,f=void 0,d=(l+u)/2;if(l===u)c=f=0;else{var h=l-u;switch(f=d>.5?h/(2-l-u):h/(l+u),l){case i:c=(o-a)/h+(o<a?6:0);break;case o:c=(a-i)/h+2;break;case a:c=(i-o)/h+4;break}c/=6}return[c,f,d,s]}},{key:"hslToRgb",value:function(n){var r=vu(n,4),i=r[0],o=r[1],a=r[2],s=r[3],l=void 0,u=void 0,c=void 0;if(o===0)l=u=c=a;else{var f=function(g,y,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?g+(y-g)*6*m:m<.5?y:m<.6666666666666666?g+(y-g)*(.6666666666666666-m)*6:g},d=a<.5?a*(1+o):a+o-a*o,h=2*a-d;l=f(h,d,i+1/3),u=f(h,d,i),c=f(h,d,i-1/3)}var v=[l*255,u*255,c*255].map(Math.round);return v[3]=s,v}}]),e}(),C9=function(){function e(){tg(this,e),this._events=[]}return ng(e,[{key:"add",value:function(n,r,i){n.addEventListener(r,i,!1),this._events.push({target:n,type:r,handler:i})}},{key:"remove",value:function(n,r,i){this._events=this._events.filter(function(o){var a=!0;return n&&n!==o.target&&(a=!1),r&&r!==o.type&&(a=!1),i&&i!==o.handler&&(a=!1),a&&e._doRemove(o.target,o.type,o.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(n){return e._doRemove(n.target,n.type,n.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(n,r,i){n.removeEventListener(r,i,!1)}}]),e}();function T9(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function Rd(e,t,n){var r=!1;function i(l,u,c){return Math.max(u,Math.min(l,c))}function o(l,u,c){if(c&&(r=!0),!!r){l.preventDefault();var f=t.getBoundingClientRect(),d=f.width,h=f.height,v=u.clientX,p=u.clientY,g=i(v-f.left,0,d),y=i(p-f.top,0,h);n(g/d,y/h)}}function a(l,u){var c=l.buttons===void 0?l.which:l.buttons;c===1?o(l,l,u):r=!1}function s(l,u){l.touches.length===1?o(l,l.touches[0],u):r=!1}e.add(t,"mousedown",function(l){a(l,!0)}),e.add(t,"touchstart",function(l){s(l,!0)}),e.add(window,"mousemove",a),e.add(t,"touchmove",s),e.add(window,"mouseup",function(l){r=!1}),e.add(t,"touchend",function(l){r=!1}),e.add(t,"touchcancel",function(l){r=!1})}var M9=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,P9=360,sO="keydown",gu="mousedown",Dd="focusin";function Wr(e,t){return(t||document).querySelector(e)}function N9(e){e.preventDefault(),e.stopPropagation()}function Ld(e,t,n,r,i){e.add(t,sO,function(o){n.indexOf(o.key)>=0&&r(o)})}var lO=function(){function e(t){tg(this,e),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new C9,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}return ng(e,[{key:"setOptions",value:function(n){var r=this;if(!n)return;var i=this.settings;function o(u,c,f){for(var d in u)c[d]=u[d]}if(n instanceof HTMLElement)i.parent=n;else{i.parent&&n.parent&&i.parent!==n.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(n,i),n.onChange&&(this.onChange=n.onChange),n.onDone&&(this.onDone=n.onDone),n.onOpen&&(this.onOpen=n.onOpen),n.onClose&&(this.onClose=n.onClose);var a=n.color||n.colour;a&&this._setColor(a)}var s=i.parent;if(s&&i.popup&&!this._popupInited){var l=function(c){return r.openHandler(c)};this._events.add(s,"click",l),Ld(this._events,s,[" ","Spacebar","Enter"],l),this._popupInited=!0}else n.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(n){if(this.show()){n&&n.preventDefault(),this.settings.parent.style.pointerEvents="none";var r=n&&n.type===sO?this._domEdit:this.domElement;setTimeout(function(){return r.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(n){var r=n&&n.type,i=!1;if(!n)i=!0;else if(r===gu||r===Dd){var o=(this.__containedEvent||0)+100;n.timeStamp>o&&(i=!0)}else N9(n),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",r!==gu&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(n,r){this.closeHandler(),this.setOptions(n),r&&this.openHandler()}},{key:"setColor",value:function(n,r){this._setColor(n,{silent:r})}},{key:"_setColor",value:function(n,r){if(typeof n=="string"&&(n=n.trim()),!!n){r=r||{};var i=void 0;try{i=new A9(n)}catch(a){if(r.failSilently)return;throw a}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,r)}}},{key:"setColour",value:function(n,r){this.setColor(n,r)}},{key:"show",value:function(){var n=this.settings.parent;if(!n)return!1;if(this.domElement){var r=this._toggleDOM(!0);return this._setPosition(),r}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=T9(i);return this.domElement=o,this._domH=Wr(".picker_hue",o),this._domSL=Wr(".picker_sl",o),this._domA=Wr(".picker_alpha",o),this._domEdit=Wr(".picker_editor input",o),this._domSample=Wr(".picker_sample",o),this._domOkay=Wr(".picker_done button",o),this._domCancel=Wr(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var n=this,r=this,i=this.domElement,o=this._events;function a(u,c,f){o.add(u,c,f)}a(i,"click",function(u){return u.preventDefault()}),Rd(o,this._domH,function(u,c){return r._setHSLA(u)}),Rd(o,this._domSL,function(u,c){return r._setHSLA(null,u,1-c)}),this.settings.alpha&&Rd(o,this._domA,function(u,c){return r._setHSLA(null,null,null,1-c)});var s=this._domEdit;a(s,"input",function(u){r._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(s,"focus",function(u){var c=this;c.selectionStart===c.selectionEnd&&c.select()}),this._ifPopup(function(){var u=function(d){return n.closeHandler(d)};a(window,gu,u),a(window,Dd,u),Ld(o,i,["Esc","Escape"],u);var c=function(d){n.__containedEvent=d.timeStamp};a(i,gu,c),a(i,Dd,c),a(n._domCancel,"click",u)});var l=function(c){n._ifPopup(function(){return n.closeHandler(c)}),n.onDone&&n.onDone(n.colour)};a(this._domOkay,"click",l),Ld(o,i,["Enter"],l)}},{key:"_setPosition",value:function(){var n=this.settings.parent,r=this.domElement;n!==r.parentNode&&n.appendChild(r),this._ifPopup(function(i){getComputedStyle(n).position==="static"&&(n.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===o?r.classList.add(a):r.classList.remove(a)}),r.classList.add(o)})}},{key:"_setHSLA",value:function(n,r,i,o,a){a=a||{};var s=this.colour,l=s.hsla;[n,r,i,o].forEach(function(u,c){(u||u===0)&&(l[c]=u)}),s.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(s)}},{key:"_updateUI",value:function(n){if(!this.domElement)return;n=n||{};var r=this.colour,i=r.hsla,o="hsl("+i[0]*P9+", 100%, 50%)",a=r.hslString,s=r.hslaString,l=this._domH,u=this._domSL,c=this._domA,f=Wr(".picker_selector",l),d=Wr(".picker_selector",u),h=Wr(".picker_selector",c);function v(N,E,k){E.style.left=k*100+"%"}function p(N,E,k){E.style.top=k*100+"%"}v(l,f,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,v(u,d,i[1]),p(u,d,1-i[2]),u.style.color=a,p(c,h,1-i[3]);var g=a,y=g.replace("hsl","hsla").replace(")",", 0)"),m="linear-gradient("+[g,y]+")";if(this._domA.style.background=m+", "+M9,!n.fromEditor){var M=this.settings.editorFormat,T=this.settings.alpha,L=void 0;switch(M){case"rgb":L=r.printRGB(T);break;case"hsl":L=r.printHSL(T);break;default:L=r.printHex(T)}this._domEdit.value=L}this._domSample.style.color=s}},{key:"_ifPopup",value:function(n,r){this.settings.parent&&this.settings.popup?n&&n(this.settings.popup):r&&r()}},{key:"_toggleDOM",value:function(n){var r=this.domElement;if(!r)return!1;var i=n?"":"none",o=r.style.display!==i;return o&&(r.style.display=i),o}}]),e}();{var Id=document.createElement("style");Id.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(Id),lO.StyleElement=Id}var kd={exports:{}},y0;function uO(){return y0||(y0=1,function(e,t){(function(n,r){e.exports=n()})(function(){var n="object",r="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function u(B,D){var F=typeof B[D];return F==r||!!(F==n&&B[D])||F=="unknown"}function c(B,D){return!!(typeof B[D]==n&&B[D])}function f(B,D){return typeof B[D]!=i}function d(B){return function(D,F){for(var U=F.length;U--;)if(!B(D,F[U]))return!1;return!0}}var h=d(u),v=d(c),p=d(f);function g(B){return B&&h(B,l)&&p(B,s)}function y(B){return c(B,"body")?B.body:B.getElementsByTagName("body")[0]}var m=[].forEach?function(B,D){B.forEach(D)}:function(B,D){for(var F=0,U=B.length;F<U;++F)D(B[F],F)},M={},T=typeof window!=i&&typeof document!=i,L={isHostMethod:u,isHostObject:c,isHostProperty:f,areHostMethods:h,areHostObjects:v,areHostProperties:p,isTextRange:g,getBody:y,forEach:m},N={version:"1.3.2",initialized:!1,isBrowser:T,supported:!0,util:L,features:{},modules:M,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function E(B){typeof console!=i&&u(console,"log")&&console.log(B)}function k(B,D){T&&D?alert(B):E(B)}function Y(B){N.initialized=!0,N.supported=!1,k("Rangy is not supported in this environment. Reason: "+B,N.config.alertOnFail)}N.fail=Y;function ie(B){k("Rangy warning: "+B,N.config.alertOnWarn)}N.warn=ie;var se;({}).hasOwnProperty?(L.extend=se=function(B,D,F){var U,Q;for(var de in D)de==="__proto__"||de==="constructor"||de==="prototype"||D.hasOwnProperty(de)&&(U=B[de],Q=D[de],F&&U!==null&&typeof U=="object"&&Q!==null&&typeof Q=="object"&&se(U,Q,!0),B[de]=Q);return D.hasOwnProperty("toString")&&(B.toString=D.toString),B},L.createOptions=function(B,D){var F={};return se(F,D),B&&se(F,B),F}):Y("hasOwnProperty not supported"),T||Y("Rangy can only run in a browser"),function(){var B;if(T){var D=document.createElement("div");D.appendChild(document.createElement("span"));var F=[].slice;try{F.call(D.childNodes,0)[0].nodeType==1&&(B=function(U){return F.call(U,0)})}catch{}}B||(B=function(U){for(var Q=[],de=0,A=U.length;de<A;++de)Q[de]=U[de];return Q}),L.toArray=B}();var pe;T&&(u(document,"addEventListener")?pe=function(B,D,F){B.addEventListener(D,F,!1)}:u(document,"attachEvent")?pe=function(B,D,F){B.attachEvent("on"+D,F)}:Y("Document does not have required addEventListener or attachEvent method"),L.addListener=pe);var O=[];function I(B){return B.message||B.description||String(B)}function j(){if(!(!T||N.initialized)){var B,D=!1,F=!1;u(document,"createRange")&&(B=document.createRange(),h(B,a)&&p(B,o)&&(D=!0));var U=y(document);if(!U||U.nodeName.toLowerCase()!="body"){Y("No body element found");return}if(U&&u(U,"createTextRange")&&(B=U.createTextRange(),g(B)&&(F=!0)),!D&&!F){Y("Neither Range nor TextRange are available");return}N.initialized=!0,N.features={implementsDomRange:D,implementsTextRange:F};var Q,de;for(var A in M)(Q=M[A])instanceof et&&Q.init(Q,N);for(var R=0,$=O.length;R<$;++R)try{O[R](N)}catch(ee){de="Rangy init listener threw an exception. Continuing. Detail: "+I(ee),E(de)}}}function te(B,D,F){F&&(B+=" in module "+F.name),N.warn("DEPRECATED: "+B+" is deprecated. Please use "+D+" instead.")}function fe(B,D,F,U){B[D]=function(){return te(D,F,U),B[F].apply(B,L.toArray(arguments))}}L.deprecationNotice=te,L.createAliasForDeprecatedMethod=fe,N.init=j,N.addInitListener=function(B){N.initialized?B(N):O.push(B)};var ve=[];N.addShimListener=function(B){ve.push(B)};function Je(B){B=B||window,j();for(var D=0,F=ve.length;D<F;++D)ve[D](B)}T&&(N.shim=N.createMissingNativeApi=Je,fe(N,"createMissingNativeApi","shim"));function et(B,D,F){this.name=B,this.dependencies=D,this.initialized=!1,this.supported=!1,this.initializer=F}et.prototype={init:function(){for(var B=this.dependencies||[],D=0,F=B.length,U,Q;D<F;++D){if(Q=B[D],U=M[Q],!U||!(U instanceof et))throw new Error("required module '"+Q+"' not found");if(U.init(),!U.supported)throw new Error("required module '"+Q+"' not supported")}this.initializer(this)},fail:function(B){throw this.initialized=!0,this.supported=!1,new Error(B)},warn:function(B){N.warn("Module "+this.name+": "+B)},deprecationNotice:function(B,D){N.warn("DEPRECATED: "+B+" in module "+this.name+" is deprecated. Please use "+D+" instead")},createError:function(B){return new Error("Error in Rangy "+this.name+" module: "+B)}};function xe(B,D,F){var U=new et(B,D,function(Q){if(!Q.initialized){Q.initialized=!0;try{F(N,Q),Q.supported=!0}catch(A){var de="Module '"+B+"' failed to load: "+I(A);E(de),A.stack&&E(A.stack)}}});return M[B]=U,U}N.createModule=function(B){var D,F;arguments.length==2?(D=arguments[1],F=[]):(D=arguments[2],F=arguments[1]);var U=xe(B,F,D);N.initialized&&N.supported&&U.init()},N.createCoreModule=function(B,D,F){xe(B,D,F)};function Me(){}N.RangePrototype=Me,N.rangePrototype=new Me;function He(){}N.selectionPrototype=new He,N.createCoreModule("DomUtil",[],function(B,D){var F="undefined",U=B.util,Q=U.getBody;U.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||D.fail("document missing a Node creation method"),U.isHostMethod(document,"getElementsByTagName")||D.fail("document missing getElementsByTagName method");var de=document.createElement("div");U.areHostMethods(de,["insertBefore","appendChild","cloneNode"])||D.fail("Incomplete Element implementation"),U.isHostProperty(de,"innerHTML")||D.fail("Element is missing innerHTML property");var A=document.createTextNode("test");U.areHostMethods(A,["splitText","deleteData","insertData","appendData","cloneNode"])||D.fail("Incomplete Text Node implementation");var R=function(Z,ye){for(var Ye=Z.length;Ye--;)if(Z[Ye]===ye)return!0;return!1};function $(Z){var ye;return typeof Z.namespaceURI==F||(ye=Z.namespaceURI)===null||ye=="http://www.w3.org/1999/xhtml"}function ee(Z){var ye=Z.parentNode;return ye.nodeType==1?ye:null}function J(Z){for(var ye=0;Z=Z.previousSibling;)++ye;return ye}function re(Z){switch(Z.nodeType){case 7:case 10:return 0;case 3:case 8:return Z.length;default:return Z.childNodes.length}}function le(Z,ye){var Ye=[],De;for(De=Z;De;De=De.parentNode)Ye.push(De);for(De=ye;De;De=De.parentNode)if(R(Ye,De))return De;return null}function _(Z,ye,Ye){for(var De=Ye?ye:ye.parentNode;De;){if(De===Z)return!0;De=De.parentNode}return!1}function S(Z,ye){return _(Z,ye,!0)}function C(Z,ye,Ye){for(var De,Dt=Ye?Z:Z.parentNode;Dt;){if(De=Dt.parentNode,De===ye)return Dt;Dt=De}return null}function H(Z){var ye=Z.nodeType;return ye==3||ye==4||ye==8}function P(Z){if(!Z)return!1;var ye=Z.nodeType;return ye==3||ye==8}function X(Z,ye){var Ye=ye.nextSibling,De=ye.parentNode;return Ye?De.insertBefore(Z,Ye):De.appendChild(Z),Z}function G(Z,ye,Ye){var De=Z.cloneNode(!1);if(De.deleteData(0,ye),Z.deleteData(ye,Z.length-ye),X(De,Z),Ye)for(var Dt=0,gt;gt=Ye[Dt++];)gt.node==Z&&gt.offset>ye?(gt.node=De,gt.offset-=ye):gt.node==Z.parentNode&&gt.offset>J(Z)&&++gt.offset;return De}function ne(Z){if(Z.nodeType==9)return Z;if(typeof Z.ownerDocument!=F)return Z.ownerDocument;if(typeof Z.document!=F)return Z.document;if(Z.parentNode)return ne(Z.parentNode);throw D.createError("getDocument: no document found for node")}function me(Z){var ye=ne(Z);if(typeof ye.defaultView!=F)return ye.defaultView;if(typeof ye.parentWindow!=F)return ye.parentWindow;throw D.createError("Cannot get a window object for node")}function ce(Z){if(typeof Z.contentDocument!=F)return Z.contentDocument;if(typeof Z.contentWindow!=F)return Z.contentWindow.document;throw D.createError("getIframeDocument: No Document object found for iframe element")}function he(Z){if(typeof Z.contentWindow!=F)return Z.contentWindow;if(typeof Z.contentDocument!=F)return Z.contentDocument.defaultView;throw D.createError("getIframeWindow: No Window object found for iframe element")}function ke(Z){return Z&&U.isHostMethod(Z,"setTimeout")&&U.isHostObject(Z,"document")}function Be(Z,ye,Ye){var De;if(Z?U.isHostProperty(Z,"nodeType")?De=Z.nodeType==1&&Z.tagName.toLowerCase()=="iframe"?ce(Z):ne(Z):ke(Z)&&(De=Z.document):De=document,!De)throw ye.createError(Ye+"(): Parameter must be a Window object or DOM node");return De}function Fe(Z){for(var ye;ye=Z.parentNode;)Z=ye;return Z}function Bt(Z,ye,Ye,De){var Dt,gt,mr,Hn,_n;if(Z==Ye)return ye===De?0:ye<De?-1:1;if(Dt=C(Ye,Z,!0))return ye<=J(Dt)?-1:1;if(Dt=C(Z,Ye,!0))return J(Dt)<De?-1:1;if(gt=le(Z,Ye),!gt)throw new Error("comparePoints error: nodes have no common ancestor");if(mr=Z===gt?gt:C(Z,gt,!0),Hn=Ye===gt?gt:C(Ye,gt,!0),mr===Hn)throw D.createError("comparePoints got to case 4 and childA and childB are the same!");for(_n=gt.firstChild;_n;){if(_n===mr)return-1;if(_n===Hn)return 1;_n=_n.nextSibling}}var _e=!1;function be(Z){var ye;try{return ye=Z.parentNode,!1}catch{return!0}}(function(){var Z=document.createElement("b");Z.innerHTML="1";var ye=Z.firstChild;Z.innerHTML="<br />",_e=be(ye),B.features.crashyTextNodes=_e})();function Ge(Z){if(!Z)return"[No node]";if(_e&&be(Z))return"[Broken node]";if(H(Z))return'"'+Z.data+'"';if(Z.nodeType==1){var ye=Z.id?' id="'+Z.id+'"':"";return"<"+Z.nodeName+ye+">[index:"+J(Z)+",length:"+Z.childNodes.length+"]["+(Z.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return Z.nodeName}function ht(Z){for(var ye=ne(Z).createDocumentFragment(),Ye;Ye=Z.firstChild;)ye.appendChild(Ye);return ye}var Ut;typeof window.getComputedStyle!=F?Ut=function(Z,ye){return me(Z).getComputedStyle(Z,null)[ye]}:typeof document.documentElement.currentStyle!=F?Ut=function(Z,ye){return Z.currentStyle?Z.currentStyle[ye]:""}:D.fail("No means of obtaining computed style properties found");function $n(Z,ye,Ye){var De=Q(Z),Dt=Z.createElement("div");Dt.contentEditable=""+!!Ye,ye&&(Dt.innerHTML=ye);var gt=De.firstChild;return gt?De.insertBefore(Dt,gt):De.appendChild(Dt),Dt}function mn(Z){return Z.parentNode.removeChild(Z)}function tn(Z){this.root=Z,this._next=Z}tn.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var Z=this._current=this._next,ye,Ye;if(this._current)if(ye=Z.firstChild,ye)this._next=ye;else{for(Ye=null;Z!==this.root&&!(Ye=Z.nextSibling);)Z=Z.parentNode;this._next=Ye}return this._current},detach:function(){this._current=this._next=this.root=null}};function nn(Z){return new tn(Z)}function cn(Z,ye){this.node=Z,this.offset=ye}cn.prototype={equals:function(Z){return!!Z&&this.node===Z.node&&this.offset==Z.offset},inspect:function(){return"[DomPosition("+Ge(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function Nn(Z){this.code=this[Z],this.codeName=Z,this.message="DOMException: "+this.codeName}Nn.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},Nn.prototype.toString=function(){return this.message},B.dom={arrayContains:R,isHtmlNamespace:$,parentElement:ee,getNodeIndex:J,getNodeLength:re,getCommonAncestor:le,isAncestorOf:_,isOrIsAncestorOf:S,getClosestAncestorIn:C,isCharacterDataNode:H,isTextOrCommentNode:P,insertAfter:X,splitDataNode:G,getDocument:ne,getWindow:me,getIframeWindow:he,getIframeDocument:ce,getBody:Q,isWindow:ke,getContentDocument:Be,getRootContainer:Fe,comparePoints:Bt,isBrokenNode:be,inspectNode:Ge,getComputedStyleProperty:Ut,createTestElement:$n,removeNode:mn,fragmentFromNodeChildren:ht,createIterator:nn,DomPosition:cn},B.DOMException=Nn}),N.createCoreModule("DomRange",["DomUtil"],function(B,D){var F=B.dom,U=B.util,Q=F.DomPosition,de=B.DOMException,A=F.isCharacterDataNode,R=F.getNodeIndex,$=F.isOrIsAncestorOf,ee=F.getDocument,J=F.comparePoints,re=F.splitDataNode,le=F.getClosestAncestorIn,_=F.getNodeLength,S=F.arrayContains,C=F.getRootContainer,H=B.features.crashyTextNodes,P=F.removeNode;function X(w,W){return w.nodeType!=3&&($(w,W.startContainer)||$(w,W.endContainer))}function G(w){return w.document||ee(w.startContainer)}function ne(w){return C(w.startContainer)}function me(w){return new Q(w.parentNode,R(w))}function ce(w){return new Q(w.parentNode,R(w)+1)}function he(w,W,oe){var ge=w.nodeType==11?w.firstChild:w;return A(W)?oe==W.length?F.insertAfter(w,W):W.parentNode.insertBefore(w,oe==0?W:re(W,oe)):oe>=W.childNodes.length?W.appendChild(w):W.insertBefore(w,W.childNodes[oe]),ge}function ke(w,W,oe){if(xt(w),xt(W),G(W)!=G(w))throw new de("WRONG_DOCUMENT_ERR");var ge=J(w.startContainer,w.startOffset,W.endContainer,W.endOffset),Ne=J(w.endContainer,w.endOffset,W.startContainer,W.startOffset);return oe?ge<=0&&Ne>=0:ge<0&&Ne>0}function Be(w){for(var W,oe,ge=G(w.range).createDocumentFragment(),Ne;oe=w.next();){if(W=w.isPartiallySelectedSubtree(),oe=oe.cloneNode(!W),W&&(Ne=w.getSubtreeIterator(),oe.appendChild(Be(Ne)),Ne.detach()),oe.nodeType==10)throw new de("HIERARCHY_REQUEST_ERR");ge.appendChild(oe)}return ge}function Fe(w,W,oe){var ge,Ne;oe=oe||{stop:!1};for(var st,ue;st=w.next();)if(w.isPartiallySelectedSubtree()){if(W(st)===!1){oe.stop=!0;return}else if(ue=w.getSubtreeIterator(),Fe(ue,W,oe),ue.detach(),oe.stop)return}else for(ge=F.createIterator(st);Ne=ge.next();)if(W(Ne)===!1){oe.stop=!0;return}}function Bt(w){for(var W;w.next();)w.isPartiallySelectedSubtree()?(W=w.getSubtreeIterator(),Bt(W),W.detach()):w.remove()}function _e(w){for(var W,oe=G(w.range).createDocumentFragment(),ge;W=w.next();){if(w.isPartiallySelectedSubtree()?(W=W.cloneNode(!1),ge=w.getSubtreeIterator(),W.appendChild(_e(ge)),ge.detach()):w.remove(),W.nodeType==10)throw new de("HIERARCHY_REQUEST_ERR");oe.appendChild(W)}return oe}function be(w,W,oe){var ge=!!(W&&W.length),Ne,st=!!oe;ge&&(Ne=new RegExp("^("+W.join("|")+")$"));var ue=[];return Fe(new ht(w,!1),function(Ce){if(!(ge&&!Ne.test(Ce.nodeType))&&!(st&&!oe(Ce))){var Ie=w.startContainer;if(!(Ce==Ie&&A(Ie)&&w.startOffset==Ie.length)){var it=w.endContainer;Ce==it&&A(it)&&w.endOffset==0||ue.push(Ce)}}}),ue}function Ge(w){var W=typeof w.getName>"u"?"Range":w.getName();return"["+W+"("+F.inspectNode(w.startContainer)+":"+w.startOffset+", "+F.inspectNode(w.endContainer)+":"+w.endOffset+")]"}function ht(w,W){if(this.range=w,this.clonePartiallySelectedTextNodes=W,!w.collapsed){this.sc=w.startContainer,this.so=w.startOffset,this.ec=w.endContainer,this.eo=w.endOffset;var oe=w.commonAncestorContainer;this.sc===this.ec&&A(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===oe&&!A(this.sc)?this.sc.childNodes[this.so]:le(this.sc,oe,!0),this._last=this.ec===oe&&!A(this.ec)?this.ec.childNodes[this.eo-1]:le(this.ec,oe,!0))}}ht.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var w=this._current=this._next;return w&&(this._next=w!==this._last?w.nextSibling:null,A(w)&&this.clonePartiallySelectedTextNodes&&(w===this.ec&&(w=w.cloneNode(!0)).deleteData(this.eo,w.length-this.eo),this._current===this.sc&&(w=w.cloneNode(!0)).deleteData(0,this.so))),w},remove:function(){var w=this._current,W,oe;A(w)&&(w===this.sc||w===this.ec)?(W=w===this.sc?this.so:0,oe=w===this.ec?this.eo:w.length,W!=oe&&w.deleteData(W,oe-W)):w.parentNode&&P(w)},isPartiallySelectedSubtree:function(){var w=this._current;return X(w,this.range)},getSubtreeIterator:function(){var w;if(this.isSingleCharacterDataNode)w=this.range.cloneRange(),w.collapse(!1);else{w=new Xt(G(this.range));var W=this._current,oe=W,ge=0,Ne=W,st=_(W);$(W,this.sc)&&(oe=this.sc,ge=this.so),$(W,this.ec)&&(Ne=this.ec,st=this.eo),ct(w,oe,ge,Ne,st)}return new ht(w,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Ut=[1,3,4,5,7,8,10],$n=[2,9,11],mn=[5,6,10,12],tn=[1,3,4,5,7,8,10,11],nn=[1,3,4,5,7,8];function cn(w){return function(W,oe){for(var ge,Ne=oe?W:W.parentNode;Ne;){if(ge=Ne.nodeType,S(w,ge))return Ne;Ne=Ne.parentNode}return null}}var Nn=cn([9,11]),Z=cn(mn),ye=cn([6,10,12]),Ye=cn([1]);function De(w,W){if(ye(w,W))throw new de("INVALID_NODE_TYPE_ERR")}function Dt(w,W){if(!S(W,w.nodeType))throw new de("INVALID_NODE_TYPE_ERR")}function gt(w,W){if(W<0||W>(A(w)?w.length:w.childNodes.length))throw new de("INDEX_SIZE_ERR")}function mr(w,W){if(Nn(w,!0)!==Nn(W,!0))throw new de("WRONG_DOCUMENT_ERR")}function Hn(w){if(Z(w,!0))throw new de("NO_MODIFICATION_ALLOWED_ERR")}function _n(w,W){if(!w)throw new de(W)}function Ja(w,W){return W<=(A(w)?w.length:w.childNodes.length)}function lo(w){return!!w.startContainer&&!!w.endContainer&&!(H&&(F.isBrokenNode(w.startContainer)||F.isBrokenNode(w.endContainer)))&&C(w.startContainer)==C(w.endContainer)&&Ja(w.startContainer,w.startOffset)&&Ja(w.endContainer,w.endOffset)}function xt(w){if(!lo(w))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+w.inspect()+")")}var Qa=document.createElement("style"),li=!1;try{Qa.innerHTML="<b>x</b>",li=Qa.firstChild.nodeType==3}catch{}B.features.htmlParsingConforms=li;var es=li?function(w){var W=this.startContainer,oe=ee(W);if(!W)throw new de("INVALID_STATE_ERR");var ge=null;return W.nodeType==1?ge=W:A(W)&&(ge=F.parentElement(W)),ge===null||ge.nodeName=="HTML"&&F.isHtmlNamespace(ee(ge).documentElement)&&F.isHtmlNamespace(ge)?ge=oe.createElement("body"):ge=ge.cloneNode(!1),ge.innerHTML=w,F.fragmentFromNodeChildren(ge)}:function(w){var W=G(this),oe=W.createElement("body");return oe.innerHTML=w,F.fragmentFromNodeChildren(oe)};function Go(w,W){xt(w);var oe=w.startContainer,ge=w.startOffset,Ne=w.endContainer,st=w.endOffset,ue=oe===Ne;A(Ne)&&st>0&&st<Ne.length&&re(Ne,st,W),A(oe)&&ge>0&&ge<oe.length&&(oe=re(oe,ge,W),ue?(st-=ge,Ne=oe):Ne==oe.parentNode&&st>=R(oe)&&st++,ge=0),w.setStartAndEnd(oe,ge,Ne,st)}function qe(w){xt(w);var W=w.commonAncestorContainer.parentNode.cloneNode(!1);return W.appendChild(w.cloneContents()),W.innerHTML}var Yo=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Ko=0,uo=1,$l=2,Ni=3,co=0,ts=1,ns=2,Vo=3;U.extend(B.rangePrototype,{compareBoundaryPoints:function(w,W){xt(this),mr(this.startContainer,W.startContainer);var oe,ge,Ne,st,ue=w==Ni||w==Ko?"start":"end",Ce=w==uo||w==Ko?"start":"end";return oe=this[ue+"Container"],ge=this[ue+"Offset"],Ne=W[Ce+"Container"],st=W[Ce+"Offset"],J(oe,ge,Ne,st)},insertNode:function(w){if(xt(this),Dt(w,tn),Hn(this.startContainer),$(w,this.startContainer))throw new de("HIERARCHY_REQUEST_ERR");var W=he(w,this.startContainer,this.startOffset);this.setStartBefore(W)},cloneContents:function(){xt(this);var w,W;if(this.collapsed)return G(this).createDocumentFragment();if(this.startContainer===this.endContainer&&A(this.startContainer))return w=this.startContainer.cloneNode(!0),w.data=w.data.slice(this.startOffset,this.endOffset),W=G(this).createDocumentFragment(),W.appendChild(w),W;var oe=new ht(this,!0);return w=Be(oe),oe.detach(),w},canSurroundContents:function(){xt(this),Hn(this.startContainer),Hn(this.endContainer);var w=new ht(this,!0),W=w._first&&X(w._first,this)||w._last&&X(w._last,this);return w.detach(),!W},surroundContents:function(w){if(Dt(w,nn),!this.canSurroundContents())throw new de("INVALID_STATE_ERR");var W=this.extractContents();if(w.hasChildNodes())for(;w.lastChild;)w.removeChild(w.lastChild);he(w,this.startContainer,this.startOffset),w.appendChild(W),this.selectNode(w)},cloneRange:function(){xt(this);for(var w=new Xt(G(this)),W=Yo.length,oe;W--;)oe=Yo[W],w[oe]=this[oe];return w},toString:function(){xt(this);var w=this.startContainer;if(w===this.endContainer&&A(w))return w.nodeType==3||w.nodeType==4?w.data.slice(this.startOffset,this.endOffset):"";var W=[],oe=new ht(this,!0);return Fe(oe,function(ge){(ge.nodeType==3||ge.nodeType==4)&&W.push(ge.data)}),oe.detach(),W.join("")},compareNode:function(w){xt(this);var W=w.parentNode,oe=R(w);if(!W)throw new de("NOT_FOUND_ERR");var ge=this.comparePoint(W,oe),Ne=this.comparePoint(W,oe+1);return ge<0?Ne>0?ns:co:Ne>0?ts:Vo},comparePoint:function(w,W){return xt(this),_n(w,"HIERARCHY_REQUEST_ERR"),mr(w,this.startContainer),J(w,W,this.startContainer,this.startOffset)<0?-1:J(w,W,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:es,toHtml:function(){return qe(this)},intersectsNode:function(w,W){if(xt(this),C(w)!=ne(this))return!1;var oe=w.parentNode,ge=R(w);if(!oe)return!0;var Ne=J(oe,ge,this.endContainer,this.endOffset),st=J(oe,ge+1,this.startContainer,this.startOffset);return W?Ne<=0&&st>=0:Ne<0&&st>0},isPointInRange:function(w,W){return xt(this),_n(w,"HIERARCHY_REQUEST_ERR"),mr(w,this.startContainer),J(w,W,this.startContainer,this.startOffset)>=0&&J(w,W,this.endContainer,this.endOffset)<=0},intersectsRange:function(w){return ke(this,w,!1)},intersectsOrTouchesRange:function(w){return ke(this,w,!0)},intersection:function(w){if(this.intersectsRange(w)){var W=J(this.startContainer,this.startOffset,w.startContainer,w.startOffset),oe=J(this.endContainer,this.endOffset,w.endContainer,w.endOffset),ge=this.cloneRange();return W==-1&&ge.setStart(w.startContainer,w.startOffset),oe==1&&ge.setEnd(w.endContainer,w.endOffset),ge}return null},union:function(w){if(this.intersectsOrTouchesRange(w)){var W=this.cloneRange();return J(w.startContainer,w.startOffset,this.startContainer,this.startOffset)==-1&&W.setStart(w.startContainer,w.startOffset),J(w.endContainer,w.endOffset,this.endContainer,this.endOffset)==1&&W.setEnd(w.endContainer,w.endOffset),W}else throw new de("Ranges do not intersect")},containsNode:function(w,W){return W?this.intersectsNode(w,!1):this.compareNode(w)==Vo},containsNodeContents:function(w){return this.comparePoint(w,0)>=0&&this.comparePoint(w,_(w))<=0},containsRange:function(w){var W=this.intersection(w);return W!==null&&w.equals(W)},containsNodeText:function(w){var W=this.cloneRange();W.selectNode(w);var oe=W.getNodes([3]);if(oe.length>0){W.setStart(oe[0],0);var ge=oe.pop();return W.setEnd(ge,ge.length),this.containsRange(W)}else return this.containsNodeContents(w)},getNodes:function(w,W){return xt(this),be(this,w,W)},getDocument:function(){return G(this)},collapseBefore:function(w){this.setEndBefore(w),this.collapse(!1)},collapseAfter:function(w){this.setStartAfter(w),this.collapse(!0)},getBookmark:function(w){var W=G(this),oe=B.createRange(W);w=w||F.getBody(W),oe.selectNodeContents(w);var ge=this.intersection(oe),Ne=0,st=0;return ge&&(oe.setEnd(ge.startContainer,ge.startOffset),Ne=oe.toString().length,st=Ne+ge.toString().length),{start:Ne,end:st,containerNode:w}},moveToBookmark:function(w){var W=w.containerNode,oe=0;this.setStart(W,0),this.collapse(!0);for(var ge=[W],Ne,st=!1,ue=!1,Ce,Ie,it;!ue&&(Ne=ge.pop());)if(Ne.nodeType==3)Ce=oe+Ne.length,!st&&w.start>=oe&&w.start<=Ce&&(this.setStart(Ne,w.start-oe),st=!0),st&&w.end>=oe&&w.end<=Ce&&(this.setEnd(Ne,w.end-oe),ue=!0),oe=Ce;else for(it=Ne.childNodes,Ie=it.length;Ie--;)ge.push(it[Ie])},getName:function(){return"DomRange"},equals:function(w){return Xt.rangesEqual(this,w)},isValid:function(){return lo(this)},inspect:function(){return Ge(this)},detach:function(){}});function x(w){w.START_TO_START=Ko,w.START_TO_END=uo,w.END_TO_END=$l,w.END_TO_START=Ni,w.NODE_BEFORE=co,w.NODE_AFTER=ts,w.NODE_BEFORE_AND_AFTER=ns,w.NODE_INSIDE=Vo}function z(w){x(w),x(w.prototype)}function ae(w,W){return function(){xt(this);var oe=this.startContainer,ge=this.startOffset,Ne=this.commonAncestorContainer,st=new ht(this,!0),ue,Ce;oe!==Ne&&(ue=le(oe,Ne,!0),Ce=ce(ue),oe=Ce.node,ge=Ce.offset),Fe(st,Hn),st.reset();var Ie=w(st);return st.detach(),W(this,oe,ge,oe,ge),Ie}}function we(w,W){function oe(ue,Ce){return function(Ie){Dt(Ie,Ut),Dt(C(Ie),$n);var it=(ue?me:ce)(Ie);(Ce?ge:Ne)(this,it.node,it.offset)}}function ge(ue,Ce,Ie){var it=ue.endContainer,bn=ue.endOffset;(Ce!==ue.startContainer||Ie!==ue.startOffset)&&((C(Ce)!=C(it)||J(Ce,Ie,it,bn)==1)&&(it=Ce,bn=Ie),W(ue,Ce,Ie,it,bn))}function Ne(ue,Ce,Ie){var it=ue.startContainer,bn=ue.startOffset;(Ce!==ue.endContainer||Ie!==ue.endOffset)&&((C(Ce)!=C(it)||J(Ce,Ie,it,bn)==-1)&&(it=Ce,bn=Ie),W(ue,it,bn,Ce,Ie))}var st=function(){};st.prototype=B.rangePrototype,w.prototype=new st,U.extend(w.prototype,{setStart:function(ue,Ce){De(ue,!0),gt(ue,Ce),ge(this,ue,Ce)},setEnd:function(ue,Ce){De(ue,!0),gt(ue,Ce),Ne(this,ue,Ce)},setStartAndEnd:function(){var ue=arguments,Ce=ue[0],Ie=ue[1],it=Ce,bn=Ie;switch(ue.length){case 3:bn=ue[2];break;case 4:it=ue[2],bn=ue[3];break}De(Ce,!0),gt(Ce,Ie),De(it,!0),gt(it,bn),W(this,Ce,Ie,it,bn)},setBoundary:function(ue,Ce,Ie){this["set"+(Ie?"Start":"End")](ue,Ce)},setStartBefore:oe(!0,!0),setStartAfter:oe(!1,!0),setEndBefore:oe(!0,!1),setEndAfter:oe(!1,!1),collapse:function(ue){xt(this),ue?W(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):W(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(ue){De(ue,!0),W(this,ue,0,ue,_(ue))},selectNode:function(ue){De(ue,!1),Dt(ue,Ut);var Ce=me(ue),Ie=ce(ue);W(this,Ce.node,Ce.offset,Ie.node,Ie.offset)},extractContents:ae(_e,W),deleteContents:ae(Bt,W),canSurroundContents:function(){xt(this),Hn(this.startContainer),Hn(this.endContainer);var ue=new ht(this,!0),Ce=ue._first&&X(ue._first,this)||ue._last&&X(ue._last,this);return ue.detach(),!Ce},splitBoundaries:function(){Go(this)},splitBoundariesPreservingPositions:function(ue){Go(this,ue)},normalizeBoundaries:function(){xt(this);var ue=this.startContainer,Ce=this.startOffset,Ie=this.endContainer,it=this.endOffset,bn=function(Rn){var Fr=Rn.nextSibling;Fr&&Fr.nodeType==Rn.nodeType&&(Ie=Rn,it=Rn.length,Rn.appendData(Fr.data),P(Fr))},rg=function(Rn){var Fr=Rn.previousSibling;if(Fr&&Fr.nodeType==Rn.nodeType){ue=Rn;var hO=Rn.length;if(Ce=Fr.length,Rn.insertData(0,Fr.data),P(Fr),ue==Ie)it+=Ce,Ie=ue;else if(Ie==Rn.parentNode){var ig=R(Rn);it==ig?(Ie=Rn,it=hO):it>ig&&it--}}},zf=!0,Qn;if(A(Ie))it==Ie.length?bn(Ie):it==0&&(Qn=Ie.previousSibling,Qn&&Qn.nodeType==Ie.nodeType&&(it=Qn.length,ue==Ie&&(zf=!1),Qn.appendData(Ie.data),P(Ie),Ie=Qn));else{if(it>0){var Uf=Ie.childNodes[it-1];Uf&&A(Uf)&&bn(Uf)}zf=!this.collapsed}if(zf){if(A(ue))Ce==0?rg(ue):Ce==ue.length&&(Qn=ue.nextSibling,Qn&&Qn.nodeType==ue.nodeType&&(Ie==Qn&&(Ie=ue,it+=ue.length),ue.appendData(Qn.data),P(Qn)));else if(Ce<ue.childNodes.length){var Xf=ue.childNodes[Ce];Xf&&A(Xf)&&rg(Xf)}}else ue=Ie,Ce=it;W(this,ue,Ce,Ie,it)},collapseToPoint:function(ue,Ce){De(ue,!0),gt(ue,Ce),this.setStartAndEnd(ue,Ce)},parentElement:function(){xt(this);var ue=this.commonAncestorContainer;return ue?Ye(this.commonAncestorContainer,!0):null}}),z(w)}function We(w){w.collapsed=w.startContainer===w.endContainer&&w.startOffset===w.endOffset,w.commonAncestorContainer=w.collapsed?w.startContainer:F.getCommonAncestor(w.startContainer,w.endContainer)}function ct(w,W,oe,ge,Ne){w.startContainer=W,w.startOffset=oe,w.endContainer=ge,w.endOffset=Ne,w.document=F.getDocument(W),We(w)}function Xt(w){ct(this,w,0,w,0)}we(Xt,ct),U.extend(Xt,{rangeProperties:Yo,RangeIterator:ht,copyComparisonConstants:z,createPrototypeRange:we,inspect:Ge,toHtml:qe,getRangeDocument:G,rangesEqual:function(w,W){return w.startContainer===W.startContainer&&w.startOffset===W.startOffset&&w.endContainer===W.endContainer&&w.endOffset===W.endOffset}}),B.DomRange=Xt}),N.createCoreModule("WrappedRange",["DomRange"],function(B,D){var F,U,Q=B.dom,de=B.util,A=Q.DomPosition,R=B.DomRange,$=Q.getBody,ee=Q.getContentDocument,J=Q.isCharacterDataNode;if(B.features.implementsDomRange&&function(){var P,X=R.rangeProperties;function G(_e){for(var be=X.length,Ge;be--;)Ge=X[be],_e[Ge]=_e.nativeRange[Ge];_e.collapsed=_e.startContainer===_e.endContainer&&_e.startOffset===_e.endOffset}function ne(_e,be,Ge,ht,Ut){var $n=_e.startContainer!==be||_e.startOffset!=Ge,mn=_e.endContainer!==ht||_e.endOffset!=Ut,tn=!_e.equals(_e.nativeRange);($n||mn||tn)&&(_e.setEnd(ht,Ut),_e.setStart(be,Ge))}var me;F=function(_e){if(!_e)throw D.createError("WrappedRange: Range must be specified");this.nativeRange=_e,G(this)},R.createPrototypeRange(F,ne),P=F.prototype,P.selectNode=function(_e){this.nativeRange.selectNode(_e),G(this)},P.cloneContents=function(){return this.nativeRange.cloneContents()},P.surroundContents=function(_e){this.nativeRange.surroundContents(_e),G(this)},P.collapse=function(_e){this.nativeRange.collapse(_e),G(this)},P.cloneRange=function(){return new F(this.nativeRange.cloneRange())},P.refresh=function(){G(this)},P.toString=function(){return this.nativeRange.toString()};var ce=document.createTextNode("test");$(document).appendChild(ce);var he=document.createRange();he.setStart(ce,0),he.setEnd(ce,0);try{he.setStart(ce,1),P.setStart=function(_e,be){this.nativeRange.setStart(_e,be),G(this)},P.setEnd=function(_e,be){this.nativeRange.setEnd(_e,be),G(this)},me=function(_e){return function(be){this.nativeRange[_e](be),G(this)}}}catch{P.setStart=function(be,Ge){try{this.nativeRange.setStart(be,Ge)}catch{this.nativeRange.setEnd(be,Ge),this.nativeRange.setStart(be,Ge)}G(this)},P.setEnd=function(be,Ge){try{this.nativeRange.setEnd(be,Ge)}catch{this.nativeRange.setStart(be,Ge),this.nativeRange.setEnd(be,Ge)}G(this)},me=function(be,Ge){return function(ht){try{this.nativeRange[be](ht)}catch{this.nativeRange[Ge](ht),this.nativeRange[be](ht)}G(this)}}}P.setStartBefore=me("setStartBefore","setEndBefore"),P.setStartAfter=me("setStartAfter","setEndAfter"),P.setEndBefore=me("setEndBefore","setStartBefore"),P.setEndAfter=me("setEndAfter","setStartAfter"),P.selectNodeContents=function(_e){this.setStartAndEnd(_e,0,Q.getNodeLength(_e))},he.selectNodeContents(ce),he.setEnd(ce,3);var ke=document.createRange();ke.selectNodeContents(ce),ke.setEnd(ce,4),ke.setStart(ce,2),he.compareBoundaryPoints(he.START_TO_END,ke)==-1&&he.compareBoundaryPoints(he.END_TO_START,ke)==1?P.compareBoundaryPoints=function(_e,be){return be=be.nativeRange||be,_e==be.START_TO_END?_e=be.END_TO_START:_e==be.END_TO_START&&(_e=be.START_TO_END),this.nativeRange.compareBoundaryPoints(_e,be)}:P.compareBoundaryPoints=function(_e,be){return this.nativeRange.compareBoundaryPoints(_e,be.nativeRange||be)};var Be=document.createElement("div");Be.innerHTML="123";var Fe=Be.firstChild,Bt=$(document);Bt.appendChild(Be),he.setStart(Fe,1),he.setEnd(Fe,2),he.deleteContents(),Fe.data=="13"&&(P.deleteContents=function(){this.nativeRange.deleteContents(),G(this)},P.extractContents=function(){var _e=this.nativeRange.extractContents();return G(this),_e}),Bt.removeChild(Be),Bt=null,de.isHostMethod(he,"createContextualFragment")&&(P.createContextualFragment=function(_e){return this.nativeRange.createContextualFragment(_e)}),$(document).removeChild(ce),P.getName=function(){return"WrappedRange"},B.WrappedRange=F,B.createNativeRange=function(_e){return _e=ee(_e,D,"createNativeRange"),_e.createRange()}}(),B.features.implementsTextRange){var re=function(P){var X=P.parentElement(),G=P.duplicate();G.collapse(!0);var ne=G.parentElement();G=P.duplicate(),G.collapse(!1);var me=G.parentElement(),ce=ne==me?ne:Q.getCommonAncestor(ne,me);return ce==X?ce:Q.getCommonAncestor(X,ce)},le=function(P){return P.compareEndPoints("StartToEnd",P)==0},_=function(P,X,G,ne,me){var ce=P.duplicate();ce.collapse(G);var he=ce.parentElement();if(Q.isOrIsAncestorOf(X,he)||(he=X),!he.canHaveHTML){var ke=new A(he.parentNode,Q.getNodeIndex(he));return{boundaryPosition:ke,nodeInfo:{nodeIndex:ke.offset,containerElement:ke.node}}}var Be=Q.getDocument(he).createElement("span");Be.parentNode&&Q.removeNode(Be);for(var Fe,Bt=G?"StartToStart":"StartToEnd",_e,be,Ge,ht,Ut=me&&me.containerElement==he?me.nodeIndex:0,$n=he.childNodes.length,mn=$n,tn=mn;tn==$n?he.appendChild(Be):he.insertBefore(Be,he.childNodes[tn]),ce.moveToElementText(Be),Fe=ce.compareEndPoints(Bt,P),!(Fe==0||Ut==mn);){if(Fe==-1){if(mn==Ut+1)break;Ut=tn}else mn=mn==Ut+1?Ut:tn;tn=Math.floor((Ut+mn)/2),he.removeChild(Be)}if(ht=Be.nextSibling,Fe==-1&&ht&&J(ht)){ce.setEndPoint(G?"EndToStart":"EndToEnd",P);var nn;if(/[\r\n]/.test(ht.data)){var cn=ce.duplicate(),Nn=cn.text.replace(/\r\n/g,"\r").length;for(nn=cn.moveStart("character",Nn);(Fe=cn.compareEndPoints("StartToEnd",cn))==-1;)nn++,cn.moveStart("character",1)}else nn=ce.text.length;Ge=new A(ht,nn)}else _e=(ne||!G)&&Be.previousSibling,be=(ne||G)&&Be.nextSibling,be&&J(be)?Ge=new A(be,0):_e&&J(_e)?Ge=new A(_e,_e.data.length):Ge=new A(he,Q.getNodeIndex(Be));return Q.removeNode(Be),{boundaryPosition:Ge,nodeInfo:{nodeIndex:tn,containerElement:he}}},S=function(P,X){var G,ne,me=P.offset,ce=Q.getDocument(P.node),he,ke,Be=$(ce).createTextRange(),Fe=J(P.node);return Fe?(G=P.node,ne=G.parentNode):(ke=P.node.childNodes,G=me<ke.length?ke[me]:null,ne=P.node),he=ce.createElement("span"),he.innerHTML="&#feff;",G?ne.insertBefore(he,G):ne.appendChild(he),Be.moveToElementText(he),Be.collapse(!X),ne.removeChild(he),Fe&&Be[X?"moveStart":"moveEnd"]("character",me),Be};U=function(P){this.textRange=P,this.refresh()},U.prototype=new R(document),U.prototype.refresh=function(){var P,X,G,ne=re(this.textRange);le(this.textRange)?X=P=_(this.textRange,ne,!0,!0).boundaryPosition:(G=_(this.textRange,ne,!0,!1),P=G.boundaryPosition,X=_(this.textRange,ne,!1,!1,G.nodeInfo).boundaryPosition),this.setStart(P.node,P.offset),this.setEnd(X.node,X.offset)},U.prototype.getName=function(){return"WrappedTextRange"},R.copyComparisonConstants(U);var C=function(P){if(P.collapsed)return S(new A(P.startContainer,P.startOffset),!0);var X=S(new A(P.startContainer,P.startOffset),!0),G=S(new A(P.endContainer,P.endOffset),!1),ne=$(R.getRangeDocument(P)).createTextRange();return ne.setEndPoint("StartToStart",X),ne.setEndPoint("EndToEnd",G),ne};if(U.rangeToTextRange=C,U.prototype.toTextRange=function(){return C(this)},B.WrappedTextRange=U,!B.features.implementsDomRange||B.config.preferTextRange){var H=function(P){return P("return this;")()}(Function);typeof H.Range>"u"&&(H.Range=U),B.createNativeRange=function(P){return P=ee(P,D,"createNativeRange"),$(P).createTextRange()},B.WrappedRange=U}}B.createRange=function(P){return P=ee(P,D,"createRange"),new B.WrappedRange(B.createNativeRange(P))},B.createRangyRange=function(P){return P=ee(P,D,"createRangyRange"),new R(P)},de.createAliasForDeprecatedMethod(B,"createIframeRange","createRange"),de.createAliasForDeprecatedMethod(B,"createIframeRangyRange","createRangyRange"),B.addShimListener(function(P){var X=P.document;typeof X.createRange>"u"&&(X.createRange=function(){return B.createRange(X)}),X=P=null})}),N.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(B,D){B.config.checkSelectionRanges=!0;var F="boolean",U="number",Q=B.dom,de=B.util,A=de.isHostMethod,R=B.DomRange,$=B.WrappedRange,ee=B.DOMException,J=Q.DomPosition,re,le,_=B.features,S="Control",C=Q.getDocument,H=Q.getBody,P=R.rangesEqual;function X(x){return typeof x=="string"?/^backward(s)?$/i.test(x):!!x}function G(x,z){if(x){if(Q.isWindow(x))return x;if(x instanceof xt)return x.win;var ae=Q.getContentDocument(x,D,z);return Q.getWindow(ae)}else return window}function ne(x){return G(x,"getWinSelection").getSelection()}function me(x){return G(x,"getDocSelection").document.selection}function ce(x){var z=!1;return x.anchorNode&&(z=Q.comparePoints(x.anchorNode,x.anchorOffset,x.focusNode,x.focusOffset)==1),z}var he=A(window,"getSelection"),ke=de.isHostObject(document,"selection");_.implementsWinGetSelection=he,_.implementsDocSelection=ke;var Be=ke&&(!he||B.config.preferTextRange);if(Be)re=me,B.isSelectionValid=function(x){var z=G(x,"isSelectionValid").document,ae=z.selection;return ae.type!="None"||C(ae.createRange().parentElement())==z};else if(he)re=ne,B.isSelectionValid=function(){return!0};else return D.fail("Neither document.selection or window.getSelection() detected."),!1;B.getNativeSelection=re;var Fe=re();if(!Fe)return D.fail("Native selection was null (possibly issue 138?)"),!1;var Bt=B.createNativeRange(document),_e=H(document),be=de.areHostProperties(Fe,["anchorNode","focusNode","anchorOffset","focusOffset"]);_.selectionHasAnchorAndFocus=be;var Ge=A(Fe,"extend");_.selectionHasExtend=Ge;var ht=A(Fe,"setBaseAndExtent");_.selectionHasSetBaseAndExtent=ht;var Ut=typeof Fe.rangeCount==U;_.selectionHasRangeCount=Ut;var $n=!1,mn=!0,tn=Ge?function(x,z){var ae=R.getRangeDocument(z),we=B.createRange(ae);we.collapseToPoint(z.endContainer,z.endOffset),x.addRange(De(we)),x.extend(z.startContainer,z.startOffset)}:null;de.areHostMethods(Fe,["addRange","getRangeAt","removeAllRanges"])&&typeof Fe.rangeCount==U&&_.implementsDomRange&&function(){var x=window.getSelection();if(x){for(var z=x.rangeCount,ae=z>1,we=[],We=ce(x),ct=0;ct<z;++ct)we[ct]=x.getRangeAt(ct);var Xt=Q.createTestElement(document,"",!1),w=Xt.appendChild(document.createTextNode("   ")),W=document.createRange();if(W.setStart(w,1),W.collapse(!0),x.removeAllRanges(),x.addRange(W),mn=x.rangeCount==1,x.removeAllRanges(),!ae){var oe=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(oe&&parseInt(oe[1])>=36)$n=!1;else{var ge=W.cloneRange();W.setStart(w,0),ge.setEnd(w,3),ge.setStart(w,2),x.addRange(W),x.addRange(ge),$n=x.rangeCount==2}}for(Q.removeNode(Xt),x.removeAllRanges(),ct=0;ct<z;++ct)ct==0&&We?tn?tn(x,we[ct]):(B.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),x.addRange(we[ct])):x.addRange(we[ct])}}(),_.selectionSupportsMultipleRanges=$n,_.collapsedNonEditableSelectionsSupported=mn;var nn=!1,cn;_e&&A(_e,"createControlRange")&&(cn=_e.createControlRange(),de.areHostProperties(cn,["item","add"])&&(nn=!0)),_.implementsControlRange=nn,be?le=function(x){return x.anchorNode===x.focusNode&&x.anchorOffset===x.focusOffset}:le=function(x){return x.rangeCount?x.getRangeAt(x.rangeCount-1).collapsed:!1};function Nn(x,z,ae){var we=ae?"end":"start",We=ae?"start":"end";x.anchorNode=z[we+"Container"],x.anchorOffset=z[we+"Offset"],x.focusNode=z[We+"Container"],x.focusOffset=z[We+"Offset"]}function Z(x){var z=x.nativeSelection;x.anchorNode=z.anchorNode,x.anchorOffset=z.anchorOffset,x.focusNode=z.focusNode,x.focusOffset=z.focusOffset}function ye(x){x.anchorNode=x.focusNode=null,x.anchorOffset=x.focusOffset=0,x.rangeCount=0,x.isCollapsed=!0,x._ranges.length=0,Ye(x)}function Ye(x){x.type=x.rangeCount==0?"None":le(x)?"Caret":"Range"}function De(x){var z;return x instanceof R?(z=B.createNativeRange(x.getDocument()),z.setEnd(x.endContainer,x.endOffset),z.setStart(x.startContainer,x.startOffset)):x instanceof $?z=x.nativeRange:_.implementsDomRange&&x instanceof Q.getWindow(x.startContainer).Range&&(z=x),z}function Dt(x){if(!x.length||x[0].nodeType!=1)return!1;for(var z=1,ae=x.length;z<ae;++z)if(!Q.isAncestorOf(x[0],x[z]))return!1;return!0}function gt(x){var z=x.getNodes();if(!Dt(z))throw D.createError("getSingleElementFromRange: range "+x.inspect()+" did not consist of a single element");return z[0]}function mr(x){return!!x&&typeof x.text<"u"}function Hn(x,z){var ae=new $(z);x._ranges=[ae],Nn(x,ae,!1),x.rangeCount=1,x.isCollapsed=ae.collapsed,Ye(x)}function _n(x){if(x._ranges.length=0,x.docSelection.type=="None")ye(x);else{var z=x.docSelection.createRange();if(mr(z))Hn(x,z);else{x.rangeCount=z.length;for(var ae,we=C(z.item(0)),We=0;We<x.rangeCount;++We)ae=B.createRange(we),ae.selectNode(z.item(We)),x._ranges.push(ae);x.isCollapsed=x.rangeCount==1&&x._ranges[0].collapsed,Nn(x,x._ranges[x.rangeCount-1],!1),Ye(x)}}}function Ja(x,z){for(var ae=x.docSelection.createRange(),we=gt(z),We=C(ae.item(0)),ct=H(We).createControlRange(),Xt=0,w=ae.length;Xt<w;++Xt)ct.add(ae.item(Xt));try{ct.add(we)}catch{throw D.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}ct.select(),_n(x)}var lo;A(Fe,"getRangeAt")?lo=function(x,z){try{return x.getRangeAt(z)}catch{return null}}:be&&(lo=function(x){var z=C(x.anchorNode),ae=B.createRange(z);return ae.setStartAndEnd(x.anchorNode,x.anchorOffset,x.focusNode,x.focusOffset),ae.collapsed!==this.isCollapsed&&ae.setStartAndEnd(x.focusNode,x.focusOffset,x.anchorNode,x.anchorOffset),ae});function xt(x,z,ae){this.nativeSelection=x,this.docSelection=z,this._ranges=[],this.win=ae,this.refresh()}xt.prototype=B.selectionPrototype;function Qa(x){x.win=x.anchorNode=x.focusNode=x._ranges=null,x.rangeCount=x.anchorOffset=x.focusOffset=0,x.detached=!0,Ye(x)}var li=[];function es(x,z){for(var ae=li.length,we,We;ae--;)if(we=li[ae],We=we.selection,z=="deleteAll")Qa(We);else if(we.win==x)return z=="delete"?(li.splice(ae,1),!0):We;return z=="deleteAll"&&(li.length=0),null}var Go=function(x){if(x&&x instanceof xt)return x.refresh(),x;x=G(x,"getNativeSelection");var z=es(x),ae=re(x),we=ke?me(x):null;return z?(z.nativeSelection=ae,z.docSelection=we,z.refresh()):(z=new xt(ae,we,x),li.push({win:x,selection:z})),z};B.getSelection=Go,de.createAliasForDeprecatedMethod(B,"getIframeSelection","getSelection");var qe=xt.prototype;function Yo(x,z){for(var ae=C(z[0].startContainer),we=H(ae).createControlRange(),We=0,ct,Xt=z.length;We<Xt;++We){ct=gt(z[We]);try{we.add(ct)}catch{throw D.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}we.select(),_n(x)}if(!Be&&be&&de.areHostMethods(Fe,["removeAllRanges","addRange"])){qe.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),ye(this)};var Ko=function(x,z){tn(x.nativeSelection,z),x.refresh()};Ut?qe.addRange=function(x,z){if(nn&&ke&&this.docSelection.type==S)Ja(this,x);else if(X(z)&&Ge)Ko(this,x);else{var ae;$n?ae=this.rangeCount:(this.removeAllRanges(),ae=0);var we=De(x).cloneRange();try{this.nativeSelection.addRange(we)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==ae+1){if(B.config.checkSelectionRanges){var We=lo(this.nativeSelection,this.rangeCount-1);We&&!P(We,x)&&(x=new $(We))}this._ranges[this.rangeCount-1]=x,Nn(this,x,Ni(this.nativeSelection)),this.isCollapsed=le(this),Ye(this)}else this.refresh()}}:qe.addRange=function(x,z){X(z)&&Ge?Ko(this,x):(this.nativeSelection.addRange(De(x)),this.refresh())},qe.setRanges=function(x){if(nn&&ke&&x.length>1)Yo(this,x);else{this.removeAllRanges();for(var z=0,ae=x.length;z<ae;++z)this.addRange(x[z])}}}else if(A(Fe,"empty")&&A(Bt,"select")&&nn&&Be)qe.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var x;if(this.anchorNode)x=C(this.anchorNode);else if(this.docSelection.type==S){var z=this.docSelection.createRange();z.length&&(x=C(z.item(0)))}if(x){var ae=H(x).createTextRange();ae.select(),this.docSelection.empty()}}}catch{}ye(this)},qe.addRange=function(x){this.docSelection.type==S?Ja(this,x):(B.WrappedTextRange.rangeToTextRange(x).select(),this._ranges[0]=x,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,Nn(this,x,!1),Ye(this))},qe.setRanges=function(x){this.removeAllRanges();var z=x.length;z>1?Yo(this,x):z&&this.addRange(x[0])};else return D.fail("No means of selecting a Range or TextRange was found"),!1;qe.getRangeAt=function(x){if(x<0||x>=this.rangeCount)throw new ee("INDEX_SIZE_ERR");return this._ranges[x].cloneRange()};var uo;if(Be)uo=function(x){var z;B.isSelectionValid(x.win)?z=x.docSelection.createRange():(z=H(x.win.document).createTextRange(),z.collapse(!0)),x.docSelection.type==S?_n(x):mr(z)?Hn(x,z):ye(x)};else if(A(Fe,"getRangeAt")&&typeof Fe.rangeCount==U)uo=function(x){if(nn&&ke&&x.docSelection.type==S)_n(x);else if(x._ranges.length=x.rangeCount=x.nativeSelection.rangeCount,x.rangeCount){for(var z=0,ae=x.rangeCount;z<ae;++z)x._ranges[z]=new B.WrappedRange(x.nativeSelection.getRangeAt(z));Nn(x,x._ranges[x.rangeCount-1],Ni(x.nativeSelection)),x.isCollapsed=le(x),Ye(x)}else ye(x)};else if(be&&typeof Fe.isCollapsed==F&&typeof Bt.collapsed==F&&_.implementsDomRange)uo=function(x){var z,ae=x.nativeSelection;ae.anchorNode?(z=lo(ae,0),x._ranges=[z],x.rangeCount=1,Z(x),x.isCollapsed=le(x),Ye(x)):ye(x)};else return D.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;qe.refresh=function(x){var z=x?this._ranges.slice(0):null,ae=this.anchorNode,we=this.anchorOffset;if(uo(this),x){var We=z.length;if(We!=this._ranges.length||this.anchorNode!=ae||this.anchorOffset!=we)return!0;for(;We--;)if(!P(z[We],this._ranges[We]))return!0;return!1}};var $l=function(x,z){var ae=x.getAllRanges();x.removeAllRanges();for(var we=0,We=ae.length;we<We;++we)P(z,ae[we])||x.addRange(ae[we]);x.rangeCount||ye(x)};nn&&ke?qe.removeRange=function(x){if(this.docSelection.type==S){for(var z=this.docSelection.createRange(),ae=gt(x),we=C(z.item(0)),We=H(we).createControlRange(),ct,Xt=!1,w=0,W=z.length;w<W;++w)ct=z.item(w),ct!==ae||Xt?We.add(z.item(w)):Xt=!0;We.select(),_n(this)}else $l(this,x)}:qe.removeRange=function(x){$l(this,x)};var Ni;!Be&&be&&_.implementsDomRange?(Ni=ce,qe.isBackward=function(){return Ni(this)}):Ni=qe.isBackward=function(){return!1},qe.isBackwards=qe.isBackward,qe.toString=function(){for(var x=[],z=0,ae=this.rangeCount;z<ae;++z)x[z]=""+this._ranges[z];return x.join("")};function co(x,z){if(x.win.document!=C(z))throw new ee("WRONG_DOCUMENT_ERR")}function ts(x,z){if(z<0||z>(Q.isCharacterDataNode(x)?x.length:x.childNodes.length))throw new ee("INDEX_SIZE_ERR")}qe.collapse=function(x,z){co(this,x);var ae=B.createRange(x);ae.collapseToPoint(x,z),this.setSingleRange(ae),this.isCollapsed=!0},qe.collapseToStart=function(){if(this.rangeCount){var x=this._ranges[0];this.collapse(x.startContainer,x.startOffset)}else throw new ee("INVALID_STATE_ERR")},qe.collapseToEnd=function(){if(this.rangeCount){var x=this._ranges[this.rangeCount-1];this.collapse(x.endContainer,x.endOffset)}else throw new ee("INVALID_STATE_ERR")},qe.selectAllChildren=function(x){co(this,x);var z=B.createRange(x);z.selectNodeContents(x),this.setSingleRange(z)},ht?qe.setBaseAndExtent=function(x,z,ae,we){this.nativeSelection.setBaseAndExtent(x,z,ae,we),this.refresh()}:Ge&&(qe.setBaseAndExtent=function(x,z,ae,we){ts(x,z),ts(ae,we),co(this,x),co(this,ae);var We=B.createRange(node),ct=Q.comparePoints(x,z,ae,we)==-1;ct?We.setStartAndEnd(ae,we,x,z):We.setStartAndEnd(x,z,ae,we),this.setSingleRange(We,ct)}),qe.deleteFromDocument=function(){if(nn&&ke&&this.docSelection.type==S){for(var x=this.docSelection.createRange(),z;x.length;)z=x.item(0),x.remove(z),Q.removeNode(z);this.refresh()}else if(this.rangeCount){var ae=this.getAllRanges();if(ae.length){this.removeAllRanges();for(var we=0,We=ae.length;we<We;++we)ae[we].deleteContents();this.addRange(ae[We-1])}}},qe.eachRange=function(x,z){for(var ae=0,we=this._ranges.length;ae<we;++ae)if(x(this.getRangeAt(ae)))return z},qe.getAllRanges=function(){var x=[];return this.eachRange(function(z){x.push(z)}),x},qe.setSingleRange=function(x,z){this.removeAllRanges(),this.addRange(x,z)},qe.callMethodOnEachRange=function(x,z){var ae=[];return this.eachRange(function(we){ae.push(we[x].apply(we,z||[]))}),ae};function ns(x){return function(z,ae){var we;this.rangeCount?(we=this.getRangeAt(0),we["set"+(x?"Start":"End")](z,ae)):(we=B.createRange(this.win.document),we.setStartAndEnd(z,ae)),this.setSingleRange(we,this.isBackward())}}qe.setStart=ns(!0),qe.setEnd=ns(!1),B.rangePrototype.select=function(x){Go(this.getDocument()).setSingleRange(this,x)},qe.changeEachRange=function(x){var z=[],ae=this.isBackward();this.eachRange(function(we){x(we),z.push(we)}),this.removeAllRanges(),ae&&z.length==1?this.addRange(z[0],"backward"):this.setRanges(z)},qe.containsNode=function(x,z){return this.eachRange(function(ae){return ae.containsNode(x,z)},!0)||!1},qe.getBookmark=function(x){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[x])}},qe.moveToBookmark=function(x){for(var z=[],ae=0,we,We;we=x.rangeBookmarks[ae++];)We=B.createRange(this.win),We.moveToBookmark(we),z.push(We);x.backward?this.setSingleRange(z[0],"backward"):this.setRanges(z)},qe.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},qe.restoreRanges=function(x){this.removeAllRanges();for(var z=0,ae;ae=x.ranges[z];++z)this.addRange(ae,x.backward&&z==0)},qe.toHtml=function(){var x=[];return this.eachRange(function(z){x.push(R.toHtml(z))}),x.join("")},_.implementsTextRange&&(qe.getNativeTextRange=function(){var x;if(x=this.docSelection){var z=x.createRange();if(mr(z))return z;throw D.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return B.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw D.createError("getNativeTextRange: selection contains no range")}});function Vo(x){var z=[],ae=new J(x.anchorNode,x.anchorOffset),we=new J(x.focusNode,x.focusOffset),We=typeof x.getName=="function"?x.getName():"Selection";if(typeof x.rangeCount<"u")for(var ct=0,Xt=x.rangeCount;ct<Xt;++ct)z[ct]=R.inspect(x.getRangeAt(ct));return"["+We+"(Ranges: "+z.join(", ")+")(anchor: "+ae.inspect()+", focus: "+we.inspect()+"]"}qe.getName=function(){return"WrappedSelection"},qe.inspect=function(){return Vo(this)},qe.detach=function(){es(this.win,"delete"),Qa(this)},xt.detachAll=function(){es(null,"deleteAll")},xt.inspect=Vo,xt.isDirectionBackward=X,B.Selection=xt,B.selectionPrototype=qe,B.addShimListener(function(x){typeof x.getSelection>"u"&&(x.getSelection=function(){return Go(x)}),x=null})});var Pe=!1,Xe=function(B){Pe||(Pe=!0,!N.initialized&&N.config.autoInitialize&&j())};return T&&(document.readyState=="complete"?Xe():(u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",Xe,!1),pe(window,"load",Xe))),N})}(kd)),kd.exports}var R9=uO();const m0=Bf(R9);var jd={exports:{}},_0;function D9(){return _0||(_0=1,function(e,t){(function(n,r){e.exports=n(uO())})(function(n){return n.createModule("ClassApplier",["WrappedSelection"],function(r,i){var o=r.dom,a=o.DomPosition,s=o.arrayContains,l=r.util,u=l.forEach,c="span",f=l.isHostMethod(document,"createElementNS");function d(_,S){for(var C in _)if(_.hasOwnProperty(C)&&S(C,_[C])===!1)return!1;return!0}function h(_){return _.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function v(_,S){return!!_&&new RegExp("(?:^|\\s)"+S+"(?:\\s|$)").test(_)}function p(_,S){if(typeof _.classList=="object")return _.classList.contains(S);var C=typeof _.className=="string",H=C?_.className:_.getAttribute("class");return v(H,S)}function g(_,S){if(typeof _.classList=="object")_.classList.add(S);else{var C=typeof _.className=="string",H=C?_.className:_.getAttribute("class");H?v(H,S)||(H+=" "+S):H=S,C?_.className=H:_.setAttribute("class",H)}}var y=function(){function _(S,C,H){return C&&H?" ":""}return function(S,C){if(typeof S.classList=="object")S.classList.remove(C);else{var H=typeof S.className=="string",P=H?S.className:S.getAttribute("class");P=P.replace(new RegExp("(^|\\s)"+C+"(\\s|$)"),_),H?S.className=P:S.setAttribute("class",P)}}}();function m(_){var S=typeof _.className=="string";return S?_.className:_.getAttribute("class")}function M(_){return _&&_.split(/\s+/).sort().join(" ")}function T(_){return M(m(_))}function L(_,S){return T(_)==T(S)}function N(_,S){for(var C=S.split(/\s+/),H=0,P=C.length;H<P;++H)if(!p(_,h(C[H])))return!1;return!0}function E(_){var S=_.parentNode;return S&&S.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(S.nodeName)}function k(_,S,C,H,P){var X=_.node,G=_.offset,ne=X,me=G;X==H&&G>P&&++me,X==S&&(G==C||G==C+1)&&(ne=H,me+=P-C),X==S&&G>C+1&&--me,_.node=ne,_.offset=me}function Y(_,S,C){_.node==S&&_.offset>C&&--_.offset}function ie(_,S,C,H){C==-1&&(C=S.childNodes.length);var P=_.parentNode,X=o.getNodeIndex(_);u(H,function(G){k(G,P,X,S,C)}),S.childNodes.length==C?S.appendChild(_):S.insertBefore(_,S.childNodes[C])}function se(_,S){var C=_.parentNode,H=o.getNodeIndex(_);u(S,function(P){Y(P,C,H)}),o.removeNode(_)}function pe(_,S,C,H,P){for(var X,G=[];X=_.firstChild;)ie(X,S,C++,P),G.push(X);return se(_,P),G}function O(_,S){return pe(_,_.parentNode,o.getNodeIndex(_),!0,S)}function I(_,S){var C=_.cloneRange();C.selectNodeContents(S);var H=C.intersection(_),P=H?H.toString():"";return P!=""}function j(_){for(var S=_.getNodes([3]),C=0,H;(H=S[C])&&!I(_,H);)++C;for(var P=S.length-1;(H=S[P])&&!I(_,H);)--P;return S.slice(C,P+1)}function te(_,S){if(_.attributes.length!=S.attributes.length)return!1;for(var C=0,H=_.attributes.length,P,X,G;C<H;++C)if(P=_.attributes[C],G=P.name,G!="class"&&(X=S.attributes.getNamedItem(G),P===null!=(X===null)||P.specified!=X.specified||P.specified&&P.nodeValue!==X.nodeValue))return!1;return!0}function fe(_,S){for(var C=0,H=_.attributes.length,P;C<H;++C)if(P=_.attributes[C].name,!(S&&s(S,P))&&_.attributes[C].specified&&P!="class")return!0;return!1}var ve=o.getComputedStyleProperty,Je=function(){var _=document.createElement("div");return typeof _.isContentEditable=="boolean"?function(S){return S&&S.nodeType==1&&S.isContentEditable}:function(S){return!S||S.nodeType!=1||S.contentEditable=="false"?!1:S.contentEditable=="true"||Je(S.parentNode)}}();function et(_){var S;return _&&_.nodeType==1&&((S=_.parentNode)&&S.nodeType==9&&S.designMode=="on"||Je(_)&&!Je(_.parentNode))}function xe(_){return(Je(_)||_.nodeType!=1&&Je(_.parentNode))&&!et(_)}var Me=/^inline(-block|-table)?$/i;function He(_){return _&&_.nodeType==1&&!Me.test(ve(_,"display"))}var Pe=/[^\r\n\t\f \u200B]/;function Xe(_){if(_.data.length==0)return!0;if(Pe.test(_.data))return!1;var S=ve(_.parentNode,"whiteSpace");switch(S){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(_.data))return!1}return He(_.previousSibling)||He(_.nextSibling)}function B(_){var S=[],C,H;for(C=0;H=_[C++];)S.push(new a(H.startContainer,H.startOffset),new a(H.endContainer,H.endOffset));return S}function D(_,S){for(var C=0,H,P,X,G=_.length;C<G;++C)H=_[C],P=S[C*2],X=S[C*2+1],H.setStartAndEnd(P.node,P.offset,X.node,X.offset)}function F(_,S){return o.isCharacterDataNode(_)?S==0?!!_.previousSibling:S==_.length?!!_.nextSibling:!0:S>0&&S<_.childNodes.length}function U(_,S,C,H){var P,X,G=C==0;if(o.isAncestorOf(S,_))return _;if(o.isCharacterDataNode(S)){var ne=o.getNodeIndex(S);if(C==0)C=ne;else if(C==S.length)C=ne+1;else throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+C+" in "+S.data);S=S.parentNode}if(F(S,C)){P=S.cloneNode(!1),X=S.parentNode,P.id&&P.removeAttribute("id");for(var me,ce=0;me=S.childNodes[C];)ie(me,P,ce++,H);return ie(P,X,o.getNodeIndex(S)+1,H),S==_?P:U(_,X,o.getNodeIndex(P),H)}else if(_!=S){P=S.parentNode;var he=o.getNodeIndex(S);return G||he++,U(_,P,he,H)}return _}function Q(_,S){return _.namespaceURI==S.namespaceURI&&_.tagName.toLowerCase()==S.tagName.toLowerCase()&&L(_,S)&&te(_,S)&&ve(_,"display")=="inline"&&ve(S,"display")=="inline"}function de(_){var S=_?"nextSibling":"previousSibling";return function(C,H){var P=C.parentNode,X=C[S];if(X){if(X&&X.nodeType==3)return X}else if(H&&(X=P[S],X&&X.nodeType==1&&Q(P,X))){var G=X[_?"firstChild":"lastChild"];if(G&&G.nodeType==3)return G}return null}}var A=de(!1),R=de(!0);function $(_){this.isElementMerge=_.nodeType==1,this.textNodes=[];var S=this.isElementMerge?_.lastChild:_;S&&(this.textNodes[0]=S)}$.prototype={doMerge:function(_){var S=this.textNodes,C=S[0];if(S.length>1){var H=o.getNodeIndex(C),P=[],X=0,G;u(S,function(ne,me){G=ne.parentNode,me>0&&(G.removeChild(ne),G.hasChildNodes()||o.removeNode(G),_&&u(_,function(ce){ce.node==ne&&(ce.node=C,ce.offset+=X),ce.node==G&&ce.offset>H&&(--ce.offset,ce.offset==H+1&&me<S.length-1&&(ce.node=C,ce.offset=X))})),P[me]=ne.data,X+=ne.data.length}),C.data=P.join("")}return C.data},getLength:function(){for(var _=this.textNodes.length,S=0;_--;)S+=this.textNodes[_].length;return S},toString:function(){var _=[];return u(this.textNodes,function(S,C){_[C]="'"+S.data+"'"}),"[Merge("+_.join(",")+")]"}};var ee=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],J={};function re(_,S,C){var H,P,X,G,ne=this;ne.cssClass=ne.className=_;var me=null,ce={};if(typeof S=="object"&&S!==null){for(typeof S.elementTagName<"u"&&(S.elementTagName=S.elementTagName.toLowerCase()),C=S.tagNames,me=S.elementProperties,ce=S.elementAttributes,P=0;G=ee[P++];)S.hasOwnProperty(G)&&(ne[G]=S[G]);H=S.normalize}else H=S;ne.normalize=typeof H>"u"?!0:H,ne.attrExceptions=[];var he=document.createElement(ne.elementTagName);ne.elementProperties=ne.copyPropertiesToElement(me,he,!0),d(ce,function(Be,Fe){ne.attrExceptions.push(Be),ce[Be]=""+Fe}),ne.elementAttributes=ce,ne.elementSortedClassName=ne.elementProperties.hasOwnProperty("className")?M(ne.elementProperties.className+" "+_):_,ne.applyToAnyTagName=!1;var ke=typeof C;if(ke=="string")C=="*"?ne.applyToAnyTagName=!0:ne.tagNames=h(C.toLowerCase()).split(/\s*,\s*/);else if(ke=="object"&&typeof C.length=="number")for(ne.tagNames=[],P=0,X=C.length;P<X;++P)C[P]=="*"?ne.applyToAnyTagName=!0:ne.tagNames.push(C[P].toLowerCase());else ne.tagNames=[ne.elementTagName]}re.prototype={elementTagName:c,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(_,S,C){var H,P,X={},G,ne,me,ce;for(var he in _)if(_.hasOwnProperty(he))if(ne=_[he],me=S[he],he=="className")g(S,ne),g(S,this.className),S[he]=M(S[he]),C&&(X[he]=ne);else if(he=="style"){P=me,C&&(X[he]=G={});for(H in _[he])_[he].hasOwnProperty(H)&&(P[H]=ne[H],C&&(G[H]=P[H]));this.attrExceptions.push(he)}else S[he]=ne,C&&(X[he]=S[he],ce=J.hasOwnProperty(he)?J[he]:he,this.attrExceptions.push(ce));return C?X:""},copyAttributesToElement:function(_,S){for(var C in _)_.hasOwnProperty(C)&&!/^class(?:Name)?$/i.test(C)&&S.setAttribute(C,_[C])},appliesToElement:function(_){return s(this.tagNames,_.tagName.toLowerCase())},getEmptyElements:function(_){var S=this;return _.getNodes([1],function(C){return S.appliesToElement(C)&&!C.hasChildNodes()})},hasClass:function(_){return _.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(_))&&p(_,this.className)},getSelfOrAncestorWithClass:function(_){for(;_;){if(this.hasClass(_))return _;_=_.parentNode}return null},isModifiable:function(_){return!this.applyToEditableOnly||xe(_)},isIgnorableWhiteSpaceNode:function(_){return this.ignoreWhiteSpace&&_&&_.nodeType==3&&Xe(_)},postApply:function(_,S,C,H){var P=_[0],X=_[_.length-1],G=[],ne,me=P,ce=X,he=0,ke=X.length,Be;u(_,function(be){Be=A(be,!H),Be?(ne||(ne=new $(Be),G.push(ne)),ne.textNodes.push(be),be===P&&(me=ne.textNodes[0],he=me.length),be===X&&(ce=ne.textNodes[0],ke=ne.getLength())):ne=null});var Fe=R(X,!H);if(Fe&&(ne||(ne=new $(X),G.push(ne)),ne.textNodes.push(Fe)),G.length){for(var Bt=0,_e=G.length;Bt<_e;++Bt)G[Bt].doMerge(C);S.setStartAndEnd(me,he,ce,ke)}},createContainer:function(_){var S=o.getDocument(_),C=f&&!o.isHtmlNamespace(_)&&_.namespaceURI?S.createElementNS(_.namespaceURI,this.elementTagName):S.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,C,!1),this.copyAttributesToElement(this.elementAttributes,C),g(C,this.className),this.onElementCreate&&this.onElementCreate(C,this),C},elementHasProperties:function(_,S){var C=this;return d(S,function(H,P){if(H=="className")return N(_,P);if(typeof P=="object"){if(!C.elementHasProperties(_[H],P))return!1}else if(_[H]!==P)return!1})},elementHasAttributes:function(_,S){return d(S,function(C,H){if(_.getAttribute(C)!==H)return!1})},applyToTextNode:function(_,S){if(E(_)){var C=_.parentNode;if(C.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(C)&&this.elementHasProperties(C,this.elementProperties)&&this.elementHasAttributes(C,this.elementAttributes))g(C,this.className);else{var H=_.parentNode,P=this.createContainer(H);H.insertBefore(P,_),P.appendChild(_)}}},isRemovable:function(_){return _.tagName.toLowerCase()==this.elementTagName&&T(_)==this.elementSortedClassName&&this.elementHasProperties(_,this.elementProperties)&&!fe(_,this.attrExceptions)&&this.elementHasAttributes(_,this.elementAttributes)&&this.isModifiable(_)},isEmptyContainer:function(_){var S=_.childNodes.length;return _.nodeType==1&&this.isRemovable(_)&&(S==0||S==1&&this.isEmptyContainer(_.firstChild))},removeEmptyContainers:function(_){var S=this,C=_.getNodes([1],function(X){return S.isEmptyContainer(X)}),H=[_],P=B(H);u(C,function(X){se(X,P)}),D(H,P)},undoToTextNode:function(_,S,C,H){if(!S.containsNode(C)){var P=S.cloneRange();P.selectNode(C),P.isPointInRange(S.endContainer,S.endOffset)&&(U(C,S.endContainer,S.endOffset,H),S.setEndAfter(C)),P.isPointInRange(S.startContainer,S.startOffset)&&(C=U(C,S.startContainer,S.startOffset,H))}this.isRemovable(C)?O(C,H):y(C,this.className)},splitAncestorWithClass:function(_,S,C){var H=this.getSelfOrAncestorWithClass(_);H&&U(H,_,S,C)},undoToAncestor:function(_,S){this.isRemovable(_)?O(_,S):y(_,this.className)},applyToRange:function(_,S){var C=this;S=S||[];var H=B(S||[]);_.splitBoundariesPreservingPositions(H),C.removeEmptyElements&&C.removeEmptyContainers(_);var P=j(_);if(P.length){u(P,function(ne){!C.isIgnorableWhiteSpaceNode(ne)&&!C.getSelfOrAncestorWithClass(ne)&&C.isModifiable(ne)&&C.applyToTextNode(ne,H)});var X=P[P.length-1];_.setStartAndEnd(P[0],0,X,X.length),C.normalize&&C.postApply(P,_,H,!1),D(S,H)}var G=C.getEmptyElements(_);u(G,function(ne){g(ne,C.className)})},applyToRanges:function(_){for(var S=_.length;S--;)this.applyToRange(_[S],_);return _},applyToSelection:function(_){var S=r.getSelection(_);S.setRanges(this.applyToRanges(S.getAllRanges()))},undoToRange:function(_,S){var C=this;S=S||[];var H=B(S);_.splitBoundariesPreservingPositions(H),C.removeEmptyElements&&C.removeEmptyContainers(_,H);var P=j(_),X,G,ne=P[P.length-1];if(P.length){C.splitAncestorWithClass(_.endContainer,_.endOffset,H),C.splitAncestorWithClass(_.startContainer,_.startOffset,H);for(var me=0,ce=P.length;me<ce;++me)X=P[me],G=C.getSelfOrAncestorWithClass(X),G&&C.isModifiable(X)&&C.undoToAncestor(G,H);_.setStartAndEnd(P[0],0,ne,ne.length),C.normalize&&C.postApply(P,_,H,!0),D(S,H)}var he=C.getEmptyElements(_);u(he,function(ke){y(ke,C.className)})},undoToRanges:function(_){for(var S=_.length;S--;)this.undoToRange(_[S],_);return _},undoToSelection:function(_){var S=r.getSelection(_),C=r.getSelection(_).getAllRanges();this.undoToRanges(C),S.setRanges(C)},isAppliedToRange:function(_){if(_.collapsed||_.toString()=="")return!!this.getSelfOrAncestorWithClass(_.commonAncestorContainer);var S=_.getNodes([3]);if(S.length){for(var C=0,H;H=S[C++];)if(!this.isIgnorableWhiteSpaceNode(H)&&I(_,H)&&this.isModifiable(H)&&!this.getSelfOrAncestorWithClass(H))return!1}return!0},isAppliedToRanges:function(_){var S=_.length;if(S==0)return!1;for(;S--;)if(!this.isAppliedToRange(_[S]))return!1;return!0},isAppliedToSelection:function(_){var S=r.getSelection(_);return this.isAppliedToRanges(S.getAllRanges())},toggleRange:function(_){this.isAppliedToRange(_)?this.undoToRange(_):this.applyToRange(_)},toggleSelection:function(_){this.isAppliedToSelection(_)?this.undoToSelection(_):this.applyToSelection(_)},getElementsWithClassIntersectingRange:function(_){var S=[],C=this;return _.getNodes([3],function(H){var P=C.getSelfOrAncestorWithClass(H);P&&!s(S,P)&&S.push(P)}),S},detach:function(){}};function le(_,S,C){return new re(_,S,C)}re.util={hasClass:p,addClass:g,removeClass:y,getClass:m,hasSameClasses:L,hasAllClasses:N,replaceWithOwnChildren:O,elementsHaveSameNonClassAttributes:te,elementHasNonClassAttributes:fe,splitNodeAt:U,isEditableElement:Je,isEditingHost:et,isEditable:xe},r.CssClassApplier=r.ClassApplier=re,r.createClassApplier=le,l.createAliasForDeprecatedMethod(r,"createCssClassApplier","createClassApplier",i)}),n})}(jd)),jd.exports}D9();var b0={toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"请输入内容",hideOnClick:!0},disableEditing:!0},x0=Ic.extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var e=this;m0.init(),Ic.extensions.button.prototype.init.call(this),this.colorPicker=new lO({parent:this.button,color:"#000",onDone:function(t){e.coloredText&&e.coloredText.isAppliedToSelection()&&e.coloredText.undoToSelection(),e.coloredText=m0.createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:t.hex}},normalize:!0}),e.coloredText.toggleSelection(),e.base.checkContentChanged(),e.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(e){return e.nodeName.toLowerCase()==="mark"},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),L9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),I9=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},w0=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},E0=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};(function(e){L9(t,e);function t(n){var r=e.call(this,n)||this;r.labelMap=new Map;var i=n.lf,o=n.graphModel;return r.lf=i,r.graphModel=o,r.state={tick:0},r}return t.prototype.componentDidMount=function(){var n=this,r=this.props.graphModel;this.editor=new Ic(".lf-label-editor",Na(b0,{autoLink:!0,extensions:{colorPicker:new x0}})),r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",function(){}),r.eventCenter.on("node:properties-change,node:properties-delete",function(){n.setState({tick:n.state.tick+1})})},t.prototype.componentDidUpdate=function(){var n;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):((n=this.editor)===null||n===void 0||n.destroy(),this.editor=new Ic(".lf-label-editor",Na(b0,{autoLink:!0,extensions:{colorPicker:new x0}})))},t.prototype.componentWillUnmount=function(){var n;(n=this.editor)===null||n===void 0||n.destroy()},t.prototype.getLabels=function(){var n=this,r=this.props,i=r.lf.extension,o=r.graphModel,a=E0(E0([],w0(o.nodes),!1),w0(o.edges),!1),s=i.label;if(s){var l=[];return pt(a,function(u){var c,f,d=u.getData(),h=(f=(c=d.properties)===null||c===void 0?void 0:c._label)!==null&&f!==void 0?f:[];pt(h,function(v){var p=n.labelMap,g=new w9(v,u,o);p.set(g.id,g),l.push(V(b9,{label:g,element:u,graphModel:o},g.id))})}),l}return null},t.prototype.render=function(){return V("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},t.toolName="label-edit-tool",t=I9([On],t),t})(ot);var k9=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},j9=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},B9=function(){function e(t){var n=t.lf,r=this;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){r.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){r.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){r.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){r.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){r.lf.redo()}}],this.lf=n}return e.prototype.render=function(t,n){this.destroy();var r=this.getControlTool();this.toolEl=r,n.appendChild(r),this.domContainer=n},e.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},e.prototype.addItem=function(t){this.controlItems.push(t)},e.prototype.removeItem=function(t){var n=this.controlItems.findIndex(function(r){return r.key===t});return n==-1?null:this.controlItems.splice(n,1)[0]},e.prototype.getControlTool=function(){var t=this,n="lf-control-item",r="lf-control-item disabled",i=document.createElement("div"),o=[];return i.className="lf-control",this.controlItems.forEach(function(a){var s=document.createElement("div"),l=document.createElement("i"),u=document.createElement("span");switch(s.className=r,a.onClick&&(s.onclick=a.onClick.bind(null,t.lf)),a.onMouseEnter&&(s.onmouseenter=a.onMouseEnter.bind(null,t.lf)),a.onMouseLeave&&(s.onmouseleave=a.onMouseLeave.bind(null,t.lf)),l.className=a.iconClass,u.className="lf-control-text",u.title=a.title,u.innerText=a.text,s.append(l,u),a.text){case"上一步":t.lf.on("history:change",function(c){var f=c.data.undoAble;s.className=f?n:r});break;case"下一步":t.lf.on("history:change",function(c){var f=c.data.redoAble;s.className=f?n:r});break;default:s.className=n;break}o.push(s)}),i.append.apply(i,j9([],k9(o),!1)),i},e.pluginName="control",e}(),hp=function(){return hp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hp.apply(this,arguments)},F9=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},$9=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},ps="lf:defaultNodeMenu",vs="lf:defaultEdgeMenu",gs="lf:defaultGraphMenu",S0="lf:defaultSelectionMenu",H9=function(){function e(t){var n=t.lf,r=this;this.__currentData=null,this.lf=n;var i=n.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){r.setMenuConfig(o)},this.lf.addMenuConfig=function(o){r.addMenuConfig(o)},this.lf.setMenuByType=function(o){r.setMenuByType(o)})}return e.prototype.init=function(){var t=this,n,r,i,o,a=[{text:"删除",callback:function(u){t.lf.deleteNode(u.id)}},{text:"编辑文本",callback:function(u){t.lf.graphModel.editText(u.id)}},{text:"复制",callback:function(u){t.lf.cloneNode(u.id)}}];(n=this.menuTypeMap)===null||n===void 0||n.set(ps,a);var s=[{text:"删除",callback:function(u){t.lf.deleteEdge(u.id)}},{text:"编辑文本",callback:function(u){t.lf.graphModel.editText(u.id)}}];(r=this.menuTypeMap)===null||r===void 0||r.set(vs,s),(i=this.menuTypeMap)===null||i===void 0||i.set(gs,[]);var l=[{text:"删除",callback:function(u){t.lf.clearSelectElements(),u.edges.forEach(function(c){return t.lf.deleteEdge(c.id)}),u.nodes.forEach(function(c){return t.lf.deleteNode(c.id)})}}];(o=this.menuTypeMap)===null||o===void 0||o.set(S0,l)},e.prototype.render=function(t,n){var r=this;t.options.isSilentMode||(this.__container=n,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",n.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var o=i.target;Array.from(o.classList).indexOf("lf-menu-item")===-1&&Array.from(o.classList).indexOf("lf-menu")===-1;)o=o==null?void 0:o.parentElement;Array.from(o.classList).indexOf("lf-menu-item")>-1?(o.onclickCallback(r.__currentData),r.__menuDOM&&(r.__menuDOM.style.display="none"),r.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0)),this.lf.on("node:contextmenu",function(i){var o,a,s=i.data,l=i.position,u=i.e,c=l.domOverlayPosition,f=c.x,d=c.y,h=s.id,v=r.lf.graphModel.getNodeModelById(h);if(v){var p=[],g=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(v.type);v&&v.menu&&Array.isArray(v.menu)?p=v.menu:g?p=g:p=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(ps),r.__currentData=s,r.showMenu(f,d,p,{width:v.width,height:v.height,clientX:u.clientX,clientY:u.clientY})}}),this.lf.on("edge:contextmenu",function(i){var o,a,s,l=i.data,u=i.position,c=i.e,f=u.domOverlayPosition,d=f.x,h=f.y,v=l.id,p=r.lf.graphModel.getEdgeModelById(v);if(p){var g=[],y=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(p.type);p&&p.menu&&Array.isArray(p.menu)?g=p.menu:y?g=y:g=(s=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(vs))!==null&&s!==void 0?s:[],r.__currentData=l,r.showMenu(d,h,g,{width:p.width,height:p.height,clientX:c.clientX,clientY:c.clientY})}}),this.lf.on("blank:contextmenu",function(i){var o,a,s=i.position,l=(a=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(gs))!==null&&a!==void 0?a:[],u=s.domOverlayPosition,c=u.x,f=u.y;r.__currentData=hp({},s.canvasOverlayPosition),r.showMenu(c,f,l)}),this.lf.on("selection:contextmenu",function(i){var o,a=i.data,s=i.position,l=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(S0),u=s.domOverlayPosition,c=u.x,f=u.y;r.__currentData=a,r.showMenu(c,f,l)}),this.lf.on("node:mousedown",function(){r.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){r.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){r.__menuDOM.style.display="none"}))},e.prototype.destroy=function(){var t;this.__menuDOM&&((t=this===null||this===void 0?void 0:this.__container)===null||t===void 0||t.removeChild(this.__menuDOM),this.__menuDOM=void 0)},e.prototype.showMenu=function(t,n,r,i){if(!(!r||!r.length)){var o=this.__menuDOM;if(o){if(o.innerHTML="",o.append.apply(o,$9([],F9(this.__getMenuDom(r)),!1)),!o.children.length)return;if(o.style.display="block",!i){o.style.top="".concat(n,"px"),o.style.left="".concat(t,"px");return}var a=i.width,s=i.height,l=i.clientX,u=i.clientY,c=this.lf.graphModel,f=o.offsetWidth,d=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=h-l,p=c.rootEl.getBoundingClientRect(),g=p.left+p.width;g<h&&(v=g-l),v<f&&(d=!1),d?o.style.left="".concat(t,"px"):o.style.left="".concat(t-a,"px");var y=o.offsetHeight,m=!0,M=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,T=M-u,L=p.top+p.height;L<M&&(T=L-u),T<y&&(m=!1),m?o.style.top="".concat(n,"px"):o.style.top="".concat(n-s,"px")}}},e.prototype.setMenuByType=function(t){var n,r=t.type,i=t.menu;!r||!i||(n=this.menuTypeMap)===null||n===void 0||n.set(r,i)},e.prototype.__getMenuDom=function(t){var n=[];return t&&t.length>0&&t.forEach(function(r){var i=document.createElement("li");if(r.className?i.className="lf-menu-item ".concat(r.className):i.className="lf-menu-item",r.icon===!0){var o=document.createElement("span");o.className="lf-menu-item-icon",i.appendChild(o)}var a=document.createElement("span");a.className="lf-menu-item-text",r.text&&(a.innerText=r.text),i.appendChild(a),i.onclickCallback=r.callback,n.push(i)}),n},e.prototype.setMenuConfig=function(t){var n,r,i;t&&(t.nodeMenu!==void 0&&((n=this.menuTypeMap)===null||n===void 0||n.set(ps,t.nodeMenu?t.nodeMenu:[])),t.edgeMenu!==void 0&&((r=this.menuTypeMap)===null||r===void 0||r.set(vs,t.edgeMenu?t.edgeMenu:[])),t.graphMenu!==void 0&&((i=this.menuTypeMap)===null||i===void 0||i.set(gs,t.graphMenu?t.graphMenu:[])))},e.prototype.addMenuConfig=function(t){var n,r,i,o,a,s,l,u,c;if(t){if(Array.isArray(t.nodeMenu)){var f=(r=(n=this.menuTypeMap)===null||n===void 0?void 0:n.get(ps))!==null&&r!==void 0?r:[];(i=this.menuTypeMap)===null||i===void 0||i.set(ps,f.concat(t.nodeMenu))}if(Array.isArray(t.edgeMenu)){var f=(a=(o=this.menuTypeMap)===null||o===void 0?void 0:o.get(vs))!==null&&a!==void 0?a:[];(s=this.menuTypeMap)===null||s===void 0||s.set(vs,f.concat(t.edgeMenu))}if(Array.isArray(t.graphMenu)){var f=(u=(l=this.menuTypeMap)===null||l===void 0?void 0:l.get(gs))!==null&&u!==void 0?u:[];(c=this.menuTypeMap)===null||c===void 0||c.set(gs,f.concat(t.graphMenu))}}},e.prototype.changeMenuItem=function(t,n){if(t==="add")this.addMenuConfig(n);else if(t==="reset")this.setMenuConfig(n);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},e.pluginName="menu",e}(),W9=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},z9=function(){function e(t){var n=t.lf,r=t.LogicFlow,i=t.options,o=this;this.width=200,this.height=150,this.scale=1,this.translateX=0,this.translateY=0,this.showEdge=!1,this.viewPortTop=0,this.viewPortLeft=0,this.viewPortWidth=150,this.viewPortHeight=75,this.isShow=!1,this.isShowHeader=!1,this.isShowCloseIcon=!1,this.headerTitle="导航",this.disabledPlugins=["miniMap","control","selectionSelect"],this.onGraphResize=function(){o.updateViewPortBounds(),o.isShow&&o.updateViewPort()},this.render=function(s,l){o.container=l,o.lf.on("history:change",function(){o.isShow&&o.setView()}),o.lf.on("graph:transform",function(){o.isShow&&o.setView(!1)})},this.show=function(s,l){o.isShow||(o.createMiniMap(s,l),o.setView()),o.isShow=!0},this.hide=function(){o.isShow&&(o.removeMiniMap(),o.lf.emit("miniMap:close",{})),o.isShow=!1},this.updatePosition=function(s){if(typeof s=="object")(s.left!==void 0||s.right!==void 0)&&(o.leftPosition=s.left,o.rightPosition=s.right),(s.top!==void 0||s.bottom!==void 0)&&(o.topPosition=s.top,o.bottomPosition=s.bottom);else switch(s){case"left-top":o.leftPosition=0,o.rightPosition=void 0,o.topPosition=0,o.bottomPosition=void 0;break;case"right-top":o.leftPosition=void 0,o.rightPosition=0,o.topPosition=0,o.bottomPosition=void 0;break;case"left-bottom":o.leftPosition=0,o.rightPosition=void 0,o.topPosition=void 0,o.bottomPosition=0;break;case"right-bottom":o.leftPosition=void 0,o.rightPosition=0,o.topPosition=void 0,o.bottomPosition=0;break}o.updateMiniMapPosition()},this.reset=function(){o.lf.resetTranslate(),o.lf.resetZoom()},this.setShowEdge=function(s){o.showEdge!==s&&(o.showEdge=s,o.setView())},this.startDrag=function(s){document.addEventListener("mousemove",o.drag),document.addEventListener("mouseup",o.drop);var l=s.x,u=s.y;o.startPosition={x:l,y:u}},this.drag=function(s){var l=s.x,u=s.y,c=(l-o.startPosition.x)/o.scale,f=(u-o.startPosition.y)/o.scale,d=o.viewPortLeft+c+o.viewPortWidth/o.scale/2,h=o.viewPortTop+f+o.viewPortHeight/o.scale/2;o.startPosition={x:l,y:u},o.lf.focusOn({coordinate:{x:d,y:h}})},this.drop=function(){document.removeEventListener("mousemove",o.drag),document.removeEventListener("mouseup",o.drop)},this.mapClick=function(s){var l=s.offsetX,u=s.offsetY,c=o.translateX+l/o.scale,f=o.translateY+u/o.scale;o.lf.focusOn({coordinate:{x:c,y:f}})},this.lf=n,this.LFCtor=r,i&&this.setOption(i),this.viewPortWidth=n.graphModel.width,this.viewPortHeight=n.graphModel.height;var a={left:0,right:this.viewPortWidth,top:0,bottom:this.viewPortHeight};this.bounds=a,this.elementAreaBounds=a,this.viewPortBounds=a,this.initMiniMap(),n.on("graph:resize",this.onGraphResize)}return e.prototype.setOption=function(t){var n=t.width,r=n===void 0?150:n,i=t.height,o=i===void 0?220:i,a=t.showEdge,s=a===void 0?!1:a,l=t.isShowHeader,u=l===void 0?!1:l,c=t.isShowCloseIcon,f=c===void 0?!1:c,d=t.leftPosition,h=t.topPosition,v=t.rightPosition,p=v===void 0?0:v,g=t.bottomPosition,y=g===void 0?0:g,m=t.headerTitle,M=m===void 0?"导航":m;this.width=r,this.height=o,this.showEdge=s,this.isShowHeader=u,this.isShowCloseIcon=f,this.leftPosition=d,this.rightPosition=d!==void 0?void 0:p,this.topPosition=h,this.bottomPosition=h!==void 0?void 0:y,this.headerTitle=M},e.prototype.initMiniMap=function(){var t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width="".concat(this.width,"px"),t.style.height="".concat(this.height,"px"),this.lfMap=new this.LFCtor({container:t,grid:!1,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!1,history:!1,snapline:!1,disabledPlugins:this.disabledPlugins}),this.miniMapWrap=t,this.createViewPort(),t.addEventListener("click",this.mapClick)},e.prototype.createMiniMap=function(t,n){var r,i=document.createElement("div");this.miniMapContainer=i,i.appendChild(this.miniMapWrap),i.style.position="absolute",(t!==void 0||n!==void 0)&&(this.leftPosition=t||0,this.topPosition=n||0,this.rightPosition=void 0,this.bottomPosition=void 0),this.updateMiniMapPosition(),i.className="lf-mini-map",this.isShowCloseIcon||i.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||i.classList.add("lf-mini-map-no-header"),(r=this.container)===null||r===void 0||r.appendChild(i),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=this.headerTitle,i.appendChild(o);var a=document.createElement("span");a.className="lf-mini-map-close",a.addEventListener("click",this.hide),i.appendChild(a)},e.prototype.updateMiniMapPosition=function(){if(this.miniMapContainer){var t=this.miniMapContainer.style;this.rightPosition!==void 0?(t.right="".concat(this.rightPosition,"px"),t.left=""):(t.left="".concat(this.leftPosition,"px"),t.right=""),this.bottomPosition!==void 0?(t.bottom="".concat(this.bottomPosition,"px"),t.top=""):(t.top="".concat(this.topPosition,"px"),t.bottom="")}},e.prototype.removeMiniMap=function(){var t;this.miniMapContainer&&((t=this.container)===null||t===void 0||t.removeChild(this.miniMapContainer))},e.prototype.updateBounds=function(t){t&&this.updateElementAreaBounds(t),this.updateViewPortBounds(),this.bounds={left:Math.min(this.elementAreaBounds.left,this.viewPortBounds.left),right:Math.max(this.elementAreaBounds.right,this.viewPortBounds.right),top:Math.min(this.elementAreaBounds.top,this.viewPortBounds.top),bottom:Math.max(this.elementAreaBounds.bottom,this.viewPortBounds.bottom)}},e.prototype.updateElementAreaBounds=function(t){var n={left:0,right:0,top:0,bottom:0},r=t.nodes;r&&r.length>0&&r.forEach(function(i){var o,a,s=i.x,l=i.y,u=(o=i.width)!==null&&o!==void 0?o:200,c=(a=i.height)!==null&&a!==void 0?a:200,f=s-u/2,d=s+u/2,h=l-c/2,v=l+c/2;n.left=Math.min(f,n.left),n.right=Math.max(d,n.right),n.top=Math.min(h,n.top),n.bottom=Math.max(v,n.bottom)}),this.elementAreaBounds=n},e.prototype.updateViewPortBounds=function(){var t=this.lf.getTransform(),n=t.TRANSLATE_X,r=t.TRANSLATE_Y,i=t.SCALE_X,o=t.SCALE_Y,a=this.lf.graphModel,s=a.width,l=a.height;this.viewPortBounds={left:-n/i,right:(-n+s)/i,top:-r/o,bottom:(-r+l)/o}},e.prototype.resetData=function(t){var n=t.nodes,r=t.edges;return n.forEach(function(i){i.text=void 0}),this.showEdge&&r.forEach(function(i){i.text=void 0}),{nodes:n,edges:this.showEdge?r:[]}},e.prototype.setView=function(t){var n,r;if(t===void 0&&(t=!0),t){var i=this.lf.getGraphRawData(),o=this.resetData(i),a=this.lf.viewMap,s=this.lf.graphModel.modelMap,l=this.lfMap.viewMap;try{for(var u=W9(a.keys()),c=u.next();!c.done;c=u.next()){var f=c.value;l.has(f)||this.lfMap.register({type:f,view:a.get(f),model:s.get(f)})}}catch(Y){n={error:Y}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}this.lfMap.render(o),this.updateBounds(o)}else this.updateBounds();var d=this.bounds,h=d.left,v=d.top,p=d.right,g=d.bottom,y=p-h,m=g-v,M=this.width/y,T=this.height/m,L=Math.min(M,T);this.scale=L;var N=h-(this.width/L-y)/2,E=v-(this.height/L-m)/2;if(this.lfMap.graphModel.transformModel.translate(-N+this.translateX,-E+this.translateY),this.translateX=N,this.translateY=E,this.miniMapWrap.firstChild){var k=this.miniMapWrap.firstChild.style;k.pointerEvents="none",k.transform="matrix(".concat(L,", 0, 0, ").concat(L,", 0, 0)"),k.transformOrigin="left top",k.height="".concat(this.height/L,"px"),k.width="".concat(this.width/L,"px"),this.updateViewPort()}},e.prototype.updateViewPort=function(){var t=this.viewport.style,n=this.lf.getTransform(),r=n.TRANSLATE_X,i=n.TRANSLATE_Y,o=n.SCALE_X,a=n.SCALE_Y,s=this.lf.graphModel,l=s.width,u=s.height;this.viewPortLeft=-r/o,this.viewPortTop=-i/a,this.viewPortWidth=l/o*this.scale,this.viewPortHeight=u/a*this.scale,t.width="".concat(this.viewPortWidth,"px"),t.height="".concat(this.viewPortHeight,"px"),t.left="".concat((this.viewPortLeft-this.translateX)*this.scale,"px"),t.top="".concat((this.viewPortTop-this.translateY)*this.scale,"px")},e.prototype.createViewPort=function(){var t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.startDrag),t.addEventListener("click",function(n){n.stopPropagation()}),this.viewport=t},e.prototype.destroy=function(){this.lf.off("graph:resize",this.onGraphResize)},e.pluginName="miniMap",e}(),O0=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},A0=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},U9=function(){function e(t){var n=t.lf,r=t.options,i=this,o;this.disabled=!0,this.isWholeNode=!0,this.isWholeEdge=!0,this.exclusiveMode=!1,this.mouseDownInfo=null,this.originalStopMoveGraph=!1,this.handleBlankMouseDown=function(a){var s=a.e;i.handleMouseDown(s)},this.draw=function(a){var s=i.lf.getPointByClient(a.clientX,a.clientY).domOverlayPosition,l=s.x,u=s.y;if(i.endPoint={x:l,y:u},i.startPoint){var c=i.startPoint,f=c.x,d=c.y,h=f,v=d,p=l-f,g=u-d;l<f&&(h=l,p=f-l),u<d&&(v=u,g=d-u),i.wrapper&&(i.wrapper.style.left="".concat(h,"px"),i.wrapper.style.top="".concat(v,"px"),i.wrapper.style.width="".concat(p,"px"),i.wrapper.style.height="".concat(g,"px"))}},this.drawOff=function(a){if(i.mouseDownInfo){var s=i.mouseDownInfo,l=s.x,u=s.y,c=s.time,f=Math.abs(a.clientX-l)<5&&Math.abs(a.clientY-u)<5&&Date.now()-c<200;if(f){i.lf.clearSelectElements(),i.cleanupSelectionState();return}}var d=ze(i.startPoint),h=ze(i.endPoint);if(document.removeEventListener("mousemove",i.draw),i.exclusiveMode||document.removeEventListener("mouseup",i.drawOff),i.lf.updateEditConfig({stopMoveGraph:i.originalStopMoveGraph}),d&&h){var l=d.x,u=d.y,v=h.x,p=h.y,g=[Math.min(l,v),Math.min(u,p)],y=[Math.max(l,v),Math.max(u,p)];if(i.lf.emit("selection:selected-area",{topLeft:g,bottomRight:y}),Math.abs(v-l)<10&&Math.abs(p-u)<10){i.wrapper&&(i.wrapper.oncontextmenu=null,i.container&&i.wrapper.parentNode===i.container&&i.container.removeChild(i.wrapper),i.wrapper=void 0);return}var m=i.lf.graphModel.getAreaElement(g,y,i.isWholeEdge,i.isWholeNode,!0),M=i.lf.graphModel,T=M.dynamicGroup,L=M.group,N=[],E=i.lf.getSelectElements(),k=new Set(A0(A0([],O0(E.nodes.map(function(se){return se.id})),!1),O0(E.edges.map(function(se){return se.id})),!1));m.forEach(function(se){if(L){var pe=L.getNodeGroup(se.id);if(m.includes(pe))return}if(T){var pe=T.getGroupByNodeId(se.id);if(m.includes(pe))return}if(i.exclusiveMode&&k.has(se.id)){i.lf.deselectElementById(se.id);return}i.lf.selectElementById(se.id,!0),N.push(se)}),i.startPoint=void 0,i.endPoint=void 0,N.length>0&&i.lf.emit("selection:drop",{e:a}),i.lf.emit("selection:selected",{elements:N,leftTopPoint:g,rightBottomPoint:y})}i.wrapper&&(i.wrapper.oncontextmenu=null,i.container&&i.wrapper.parentNode===i.container&&i.container.removeChild(i.wrapper),i.wrapper=void 0)},this.lf=n,this.exclusiveMode=(o=r==null?void 0:r.exclusiveMode)!==null&&o!==void 0?o:!1,n.openSelectionSelect=function(){i.openSelectionSelect()},n.closeSelectionSelect=function(){i.closeSelectionSelect()},n.setSelectionSelectMode=function(a){i.setExclusiveMode(a)},this.handleMouseDown=this.handleMouseDown.bind(this),this.draw=this.draw.bind(this),this.drawOff=this.drawOff.bind(this)}return e.prototype.render=function(t,n){this.container=n},e.prototype.cleanupSelectionState=function(){this.wrapper&&(this.wrapper.oncontextmenu=null,this.container&&this.wrapper.parentNode===this.container&&this.container.removeChild(this.wrapper),this.wrapper=void 0),this.startPoint=void 0,this.endPoint=void 0,this.mouseDownInfo=null,document.removeEventListener("mousemove",this.draw),document.removeEventListener("mouseup",this.drawOff)},e.prototype.setExclusiveMode=function(t){t===void 0&&(t=!1),this.exclusiveMode!==t&&(this.cleanupSelectionState(),this.exclusiveMode=t,this.container&&!this.disabled&&(this.removeEventListeners(),this.addEventListeners()))},e.prototype.addEventListeners=function(){this.container&&(this.exclusiveMode?(this.container.style.pointerEvents="auto",this.container.addEventListener("mousedown",this.handleMouseDown)):(this.container.style.pointerEvents="none",this.lf.on("blank:mousedown",this.handleBlankMouseDown)))},e.prototype.removeEventListeners=function(){this.container&&(this.container.style.pointerEvents="none",this.container.removeEventListener("mousedown",this.handleMouseDown)),this.lf.off("blank:mousedown",this.handleBlankMouseDown)},e.prototype.handleMouseDown=function(t){var n;if(!(!this.container||this.disabled)){var r=t.button===2;if(!r){this.cleanupSelectionState(),this.mouseDownInfo={x:t.clientX,y:t.clientY,time:Date.now()},this.originalStopMoveGraph=this.lf.getEditConfig().stopMoveGraph,this.lf.updateEditConfig({stopMoveGraph:!0});var i=this.lf.getPointByClient(t.clientX,t.clientY).domOverlayPosition,o=i.x,a=i.y;this.startPoint={x:o,y:a},this.endPoint={x:o,y:a};var s=document.createElement("div");s.className="lf-selection-select",s.oncontextmenu=function(u){u.preventDefault()},s.style.top="".concat(this.startPoint.y,"px"),s.style.left="".concat(this.startPoint.x,"px"),(n=this.container)===null||n===void 0||n.appendChild(s),this.wrapper=s,document.addEventListener("mousemove",this.draw),document.addEventListener("mouseup",this.drawOff)}}},e.prototype.setSelectionSense=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0),this.isWholeEdge=t,this.isWholeNode=n},e.prototype.openSelectionSelect=function(){this.disabled||this.closeSelectionSelect(),this.container&&(this.cleanupSelectionState(),this.addEventListeners(),this.open())},e.prototype.closeSelectionSelect=function(){if(this.container){if(this.wrapper&&this.startPoint&&this.endPoint){var t=ze(this.endPoint),n=new MouseEvent("mouseup",{clientX:t.x,clientY:t.y});this.drawOff(n)}this.cleanupSelectionState(),this.removeEventListeners(),this.close()}},e.prototype.open=function(){this.disabled=!1},e.prototype.close=function(){this.disabled=!0},e.pluginName="selectionSelect",e}();var cO=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),da=function(){return da=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},da.apply(this,arguments)},Ys=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},X9={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function G9(e){for(var t=e,n=1;n<t.length-1;){var r=Ys(t[n-1],2),i=r[0],o=r[1],a=Ys(t[n],2),s=a[0],l=a[1],u=Ys(t[n+1],2),c=u[0],f=u[1];i===s&&s===c||o===l&&l===f?t.splice(n,1):n++}return t}function Y9(e,t,n,r){var i=[e[0],e[1]],o=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(i[1]+=r,o[0]+=r):t==="lb"&&(i[0]+=r,o[1]+=r),[i,o];case"tr":return t==="tl"?(i[1]+=r,o[0]-=r):t==="rb"&&(i[0]-=r,o[1]+=r),[i,o];case"bl":return t==="br"?(i[1]-=r,o[0]+=r):t==="lt"&&(i[0]+=r,o[1]-=r),[i,o];case"br":return t==="bl"?(i[1]-=r,o[0]-=r):t==="rt"&&(i[0]-=r,o[1]-=r),[i,o];default:return[]}}function K9(e,t,n,r){var i,o="",a="";e[0]===t[0]?o=e[1]>t[1]?"t":"b":e[1]===t[1]&&(o=e[0]>t[0]?"l":"r"),t[0]===n[0]?a=t[1]>n[1]?"t":"b":t[1]===n[1]&&(a=t[0]>n[0]?"l":"r");var s=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,r)||1/5*r,l="".concat(o).concat(a),u=X9[l]||"-",c="L ".concat(e[0]," ").concat(e[1]);if(u==="-")c+="L ".concat(t[0]," ").concat(t[1]," L ").concat(n[0]," ").concat(n[1]);else{var f=Ys(Y9(t,l,u,s),2),d=f[0],h=f[1];d&&h&&(c+="L ".concat(d[0]," ").concat(d[1]," Q ").concat(t[0]," ").concat(t[1]," ").concat(h[0]," ").concat(h[1]),i=Ys(h,2),t[0]=i[0],t[1]=i[1])}return c}function V9(e,t){var n=0,r="";if(e.length===2)r+="M".concat(e[n][0]," ").concat(e[n++][1]," L ").concat(e[n][0]," ").concat(e[n][1]);else{for(r+="M".concat(e[n][0]," ").concat(e[n++][1]);n+1<e.length;){var i=e[n-1],o=e[n],a=e[n+++1];r+=K9(i,o,a,t)}r+="L ".concat(e[n][0]," ").concat(e[n][1])}return r}(function(e){cO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,r=n.points,i=n.isAnimation,o=n.arrowConfig,a=n.radius,s=a===void 0?5:a,l=n.getEdgeStyle(),u=n.getEdgeAnimationStyle(),c=G9(r.split(" ").map(function(h){return h.split(",").map(function(v){return+v})})),f=V9(c,s),d=da(da(da({style:i?u:{}},l),o),{fill:"none"});return Te("path",da({d:f},d))},t})(wl);(function(e){cO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(ml);var fO=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kc=function(){return kc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kc.apply(this,arguments)},C0=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},T0=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},q9=function(e){fO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,r=n.id,i=n.x,o=n.y,a=n.width,s=n.height,l=n.properties,u=this.props.model.getNodeStyle();return Te("svg",{x:i-a/2,y:o-s/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[l.labelText?Te("text",{x:0,y:-5,fontSize:"16px",fill:u.stroke},l.labelText):"",l.disabledDelete?"":Te("text",{x:l.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:u.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,r)},"x")])},t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.id,l=this.props.model.getNodeStyle();return Te("g",{},[Te("rect",kc(kc({},l),{x:r-o/2,y:i-a/2,width:o,height:a,id:s})),this.getLabelShape()])},t.prototype.toFront=function(){},t.prototype.handleCustomDeleteIconClick=function(n){var r=this.props.graphModel;r.deleteNode(n)},t}(_c),Z9=function(e){fO(t,e);function t(){var n=e.apply(this,T0([],C0(arguments),!1))||this;return n.d=10,n.isResize=!1,n}return t.prototype.initNodeData=function(n){n.text={value:"",x:n.x,y:n.y,draggable:!1,editable:!1},e.prototype.initNodeData.call(this,n),this.zIndex=0,this.draggable=!0},t.prototype.setAttributes=function(){var n=this,r;this.points=[],((r=this.properties)===null||r===void 0?void 0:r.node_selection_ids).length>1&&setTimeout(function(){var i;n.updatePointsByNodes(((i=n.properties)===null||i===void 0?void 0:i.node_selection_ids)||[])})},t.prototype.getNodeStyle=function(){var n=e.prototype.getNodeStyle.call(this);return n.stroke=this.properties.strokeColor||"#008000",n.strokeDasharray="10 5",n},t.prototype.getDefaultAnchor=function(){return[]},t.prototype.updatePoints=function(n){this.points=n},t.prototype.updateCoordinate=function(n){var r=n.x,i=n.y;this.x=r,this.y=i},t.prototype.updatePointsByNodes=function(n){var r=this,i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;n.forEach(function(u){var c=r.graphModel.getNodeModelById(u);if(c){var f=c.width,d=c.height,h=c.x,v=c.y;o=Math.min(o,h-f/2-r.d),a=Math.min(a,v-d/2-r.d),s=Math.max(s,h+f/2+r.d),l=Math.max(l,v+d/2+r.d)}}),i.push([o,a],[s,a],[s,l],[o,l]),![o,a,s,l].some(function(u){return Math.abs(u)===1/0})&&(this.updatePoints(i),this.updateCoordinate({x:(s+o)/2,y:(l+a)/2}))},t.prototype.resize=function(n){var r;this.isResize=!0;for(var i=n.width,o=n.height,a={x:i/this.width,y:o/this.height},s=(this.properties.node_selection_ids||[]).slice(),l=[],u=new Set;s.length;){var c=s.shift(),f=(r=this.graphModel.nodesMap[c])===null||r===void 0?void 0:r.model;if(f){if(!Lu(f)){l.push(f);continue}u.has(f.id)||(u.add(f.id),s.push.apply(s,T0([],C0(f.properties.node_selection_ids||[]),!1)))}}var d={x:this.x-this.width/2,y:this.y-this.height/2},h=e.prototype.resize.call(this,n),v={x:this.x-this.width/2,y:this.y-this.height/2};return l.forEach(function(p){p.width=p.width*a.x,p.height=p.height*a.y;var g=(p.x-d.x)*a.x+v.x-p.x,y=(p.y-d.y)*a.y+v.y-p.y;p.move(g,y,!0)}),this.isResize=!1,h},t}(vc),pp="node-selection";(function(){function e(t){var n=t.lf;this.selectNodes=[],this.d=10,this.lf=n,n.register({type:pp,view:q9,model:Z9})}return Object.defineProperty(e.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map(function(t){return t.id})},enumerable:!1,configurable:!0}),e.prototype.addNodeSelection=function(){var t=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});t.updatePointsByNodes(this.selectNodesIds)},e.prototype.updateNodeSelection=function(){var t,n=this.getNodeSelection();n&&(this.lf.setProperties(n.id,{node_selection_ids:this.selectNodesIds}),(t=this.lf.getNodeModelById(n.id))===null||t===void 0||t.updatePointsByNodes(this.selectNodesIds))},e.prototype.getNodeSelection=function(){var t=this,n=this.selectNodesIds,r=this.lf.getGraphRawData(),i=n.filter(function(o){return o!==t.currentClickNode.id});return r.nodes.find(function(o){if(o.type==="node-selection"){var a=eo(o,"properties.node_selection_ids",[]);return i.every(function(s){return a.includes(s)})}return!1})},e.prototype.onNodeChange=function(t,n){var r=t.graphModel.nodes.filter(function(i){if(!Lu(i))return!1;var o=i.properties.node_selection_ids||[];return o.includes(n.id)});Promise.resolve().then(function(){r.forEach(function(i){i.updatePointsByNodes(i.properties.node_selection_ids||[])})})},e.prototype.render=function(t){var n=this;this.lf=t,t.on("node:click",function(r){var i;if(!(!r.e.shiftKey||r.data.type===pp)){n.currentClickNode=r.data;var o=!1;n.selectNodesIds.includes(r.data.id)&&((i=n.lf.getNodeModelById(r.data.id))===null||i===void 0||i.setSelected(!1),o=!0);var a=t.getSelectElements(!0).nodes;n.selectNodes=a,n.selectNodes.length===1?o?n.updateNodeSelection():n.addNodeSelection():n.selectNodes.length>1&&n.updateNodeSelection()}}),t.graphModel.addNodeMoveRules(function(r,i,o){if(n.onNodeChange(t,r),Lu(r)&&!r.isResize){var a=r.properties.node_selection_ids||[];return t.graphModel.moveNodes(a,i,o,!0),!0}return!0}),t.graphModel.addNodeResizeRules(function(r){return Lu(r)||n.onNodeChange(t,r),!0})},e.pluginName="node-selection",e})();var Lu=function(e){return!!(e&&e.type===pp)},J9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jc=function(){return jc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jc.apply(this,arguments)};(function(e){J9(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.properties;return Te("text",{x:r-o/2+5,y:i-a/2+16,fontSize:12,fill:"blue"},s.moreText)},t.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=this.props.model.getNodeStyle();return Te("g",{},[Te("rect",jc(jc({},s),{fill:"#FFFFFF",x:r-o/2,y:i-a/2})),this.getLabelShape()])},t})(Fo);class Q9 extends xl{}class ez extends _l{setAttributes(){this.r=30;const t=[{className:"lf-menu-lock custom-menu",text:"锁定",icon:!0,callback:()=>{this.draggable=!1,this.setProperties({isLocked:!0})}},{className:"lf-menu-delete custom-menu",text:"删除",icon:!0,callback:i=>{this.graphModel.deleteNode(i.id)}}],n=[{className:"lf-menu-unlock custom-menu",text:"解锁",icon:!0,callback:()=>{this.draggable=!0,this.setProperties({isLocked:!1})}}],{isLocked:r}=this.properties;r?this.menu=n:this.menu=t}getNodeStyle(){const t=super.getNodeStyle();t.strokeWidth=1;const{isLocked:n}=this.properties;return n&&(t.fill="#efefef",t.stroke="#939495"),t}}const tz={type:"LockedNode",view:Q9,model:ez};class nz extends Wf.model{initNodeData(t){super.initNodeData(t),this.width=80,this.height=40,this.maxWidth=300,this.maxHeight=300,this.text.draggable=!0}getNodeStyle(){const t=super.getNodeStyle();return t.strokeWidth=1,this.isSelected&&(t.stroke="red",t.strokeWidth=2),t}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="transparent",t}}class rz extends Wf.view{getLabelShape(){const{model:t}=this.props,{x:n,y:r,width:i,height:o}=t;return Te("svg",{x:n-i/2+5,y:r-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"})}getResizeShape(){const{model:t}=this.props,{x:n,y:r,width:i,height:o,radius:a}=t,s=t.getNodeStyle();return Te("g",{},[Te("rect",{...s,x:n-i/2,y:r-o/2,rx:a,ry:a,width:i,height:o}),this.getLabelShape()])}}const iz={type:"resizable-rect",view:rz,model:nz};class oz extends VS.model{getNodeStyle(){const t=super.getNodeStyle();return t.fill="#f1a131",t.strokeWidth=1,t}}class az extends VS.view{}const sz={type:"resizable-ellipse",view:az,model:oz};class lz extends Wf.model{initNodeData(t){super.initNodeData(t),this.width=80,this.height=80}getNodeStyle(){const t=super.getNodeStyle();return t.fill="#f1a131",t.strokeWidth=1,t}}class uz extends Wf.view{getResizeShape(){const{x:t,y:n,width:r,height:i}=this.props.model,o=this.props.model.getNodeStyle(),s=[[t-.28*r,n-.5*i],[t+.28*r,n-.5*i],[t+.5*r,n],[t+.28*r,n+.5*i],[t-.28*r,n+.5*i],[t-.5*r,n]].map(u=>`${u[0]},${u[1]}`),l={...o,x:t,y:n,width:r,height:i,points:s.join(" ")};return Te("g",{},[Te("polygon",{...l})])}}const cz={type:"resizable-hexagon",view:uz,model:lz};class fz extends ZS.model{initNodeData(t){super.initNodeData(t),this.text.draggable=!0}getNodeStyle(){const t=super.getNodeStyle();return t.fill="#f1a131",t.strokeWidth=1,t}}class dz extends ZS.view{}const hz={type:"resizable-diamond",view:dz,model:fz};class pz extends QS.model{initNodeData(t){super.initNodeData(t),this.width=200,this.height=100,this.text.draggable=!0}getNodeStyle(){const t=super.getNodeStyle();return t.fill="#f1a131",t.strokeWidth=1,t}}class vz extends QS.view{setHtml(t){t.innerHTML="";const{properties:{fields:n,tableName:r}}=this.props.model;t.setAttribute("class","table-container");const i=document.createElement("div");i.className=`table-node table-color-${Math.ceil(Math.random()*4)}`;const o=document.createElement("div");o.innerText=String(r),o.className="table-name",i.appendChild(o);const a=document.createDocumentFragment();for(let s=0;s<n.length;s++){const l=n[s],u=document.createElement("div");u.className="table-feild";const c=document.createElement("span");c.innerText=l.key;const f=document.createElement("span");f.innerText=l.type,f.className="feild-type",u.appendChild(c),u.appendChild(f),a.appendChild(u)}i.appendChild(a),t.appendChild(i)}}const gz={type:"resizable-html",view:vz,model:pz},yz=ka({__name:"LogicFlowDemo",setup(e){const t=qr(null);let n={};Ol(()=>{if(!t.value)return;n=new mW({container:t.value,background:{backgroundImage:"url(grid.svg)",backgroundRepeat:"repeat"},multipleSelectKey:"meta",plugins:[H9,z9,B9,U9]});const i=n.extension.selectionSelect;i.setSelectionSense(!0,!1),n.register(tz),n.register(iz),n.register(sz),n.register(cz),n.register(hz),n.register(gz);const o=n.extension.control;o.controlItems[0].text="縮小",o.controlItems[0].title="フローチャートを縮小する",o.controlItems[1].text="拡大",o.controlItems[1].title="フローチャートを拡大する",o.controlItems[2].text="フィット",o.controlItems[2].title="フローを元のサイズに戻す",o.controlItems[3].text="戻る",o.controlItems[3].title="前のステップに戻る",o.controlItems[4].text="進む",o.controlItems[4].title="次のステップに進む",n.extension.menu.setMenuConfig({nodeMenu:[{text:"ノードをコピー",callback(l){n.cloneNode(l.id)}},{text:"ノードを削除",callback(l){n.deleteNode(l.id)}},{text:"テキストを編集する",callback(l){n.editText(l.id)}},{text:"プロパティ",callback(l){alert(`
            ノードid：${l.id}
            ノード型：${l.type}
            ノード座標：(x: ${l.x}, y: ${l.y})`)}}],edgeMenu:[{text:"接続を削除",callback(l){n.deleteEdge(l.id)}},{text:"テキストを編集する",callback(l){n.editText(l.id)}},{text:"プロパティ",callback(l){alert(`
            辺id：${l.id}
            辺型：${l.type}
            辺座標：(x: ${l.x}, y: ${l.y})
            源ノードid：${l.sourceNodeId}
            目標ノードid：${l.targetNodeId}`)}}],graphMenu:[{text:"ノードを追加する",callback(l){n.addNode({id:"node_"+Date.now(),type:"resizable-rect",x:l.x,y:l.y,text:"新ノード",properties:{resizable:!0}})}}]}),n.render({}),n.extension.miniMap.show(),i.openSelectionSelect()});function r(){const i=n.getGraphData();console.log(JSON.stringify(i,null,2))}return(i,o)=>(Ro(),qc(zn,null,[yt("div",{class:"container",ref_key:"container",ref:t},null,512),yt("button",{onClick:r},"Get Data")],64))}}),mz=Jc(yz,[["__scopeId","data-v-838a1e25"]]),_z=[{path:"/login",name:"Login",component:DM},{path:"/",component:WM,children:[{path:"",name:"Home",component:ty},{path:"home",name:"Home",component:ty},{path:"dashboard",name:"Dashboard",component:kM},{path:"logicflowdemo",name:"LogicFlowDemo",component:mz}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>JC(()=>import("./NotFound-BSrqCKR0.js"),[])}],dO=eT({history:M1(),routes:_z});UC(VC).use(dO).mount("#app");export{Jc as _,yt as a,qc as c,Ro as o};
